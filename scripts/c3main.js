// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,i,e)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of __getOwnPropNames(s))__hasOwnProp.call(t,n)||n===i||__defProp(t,n,{get:()=>s[n],enumerable:!(e=__getOwnPropDesc(s,n))||e.enumerable});return t},__toESM=(t,s,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},w=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},M=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},S=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},T=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},v=function(t){return t[0]*t[3]-t[2]*t[1]},x=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},b=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},C=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},I=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},G=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},_=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},E=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},A=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},D=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},N=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},P=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},R=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},L=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},F=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},k=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},z=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},B=function(t,s,i,e,n,r){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},U=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},$=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},V=function(t){return t[0]*t[3]-t[1]*t[2]},W=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},Y=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},Q=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},J=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},H=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},q=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Z=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},K=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},st=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},it=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},et=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},nt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},rt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-l)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,i,e,n,r,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},mt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},gt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],M=i[7],S=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=w*e+M*h+S*l,t[7]=w*n+M*o+S*u,t[8]=w*r+M*a+S*c,t},wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},Mt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},St=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Tt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},vt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},xt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},bt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Ct=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},It=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,M=i*a-n*h,S=i*l-r*h,T=e*a-n*o,v=e*l-r*o,x=n*l-r*a,b=u*m-c*p,C=u*g-f*p,I=u*y-d*p,G=c*g-f*m,_=c*y-d*m,E=f*y-d*g,A=w*E-M*_+S*G+T*I-v*C+x*b;return A?(A=1/A,t[0]=(o*E-a*_+l*G)*A,t[1]=(a*I-h*E-l*C)*A,t[2]=(h*_-o*I+l*b)*A,t[3]=(n*_-e*E-r*G)*A,t[4]=(i*E-n*I+r*C)*A,t[5]=(e*I-i*_-r*b)*A,t[6]=(m*x-g*v+y*T)*A,t[7]=(g*S-p*x-y*M)*A,t[8]=(p*v-m*S+y*w)*A,t):null},Gt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},_t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Et=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},At=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},Dt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Nt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ot=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Pt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Rt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],w=s[7],M=s[8];return Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(e-f)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-M)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(M))},Lt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Ft=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},kt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},jt=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},zt=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Bt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ut=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},$t=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,M=i*a-n*h,S=i*l-r*h,T=e*a-n*o,v=e*l-r*o,x=n*l-r*a,b=u*m-c*p,C=u*g-f*p,I=u*y-d*p,G=c*g-f*m,_=c*y-d*m,E=f*y-d*g,A=w*E-M*_+S*G+T*I-v*C+x*b;return A?(A=1/A,t[0]=(o*E-a*_+l*G)*A,t[1]=(n*_-e*E-r*G)*A,t[2]=(m*x-g*v+y*T)*A,t[3]=(f*v-c*x-d*T)*A,t[4]=(a*I-h*E-l*C)*A,t[5]=(i*E-n*I+r*C)*A,t[6]=(g*S-p*x-y*M)*A,t[7]=(u*x-f*S+d*M)*A,t[8]=(h*_-o*I+l*b)*A,t[9]=(e*I-i*_-r*b)*A,t[10]=(p*v-m*S+y*w)*A,t[11]=(c*S-u*v-d*w)*A,t[12]=(o*C-h*G-a*b)*A,t[13]=(i*G-e*C+n*b)*A,t[14]=(m*M-p*T-g*w)*A,t[15]=(u*T-c*M+f*w)*A,t):null},Vt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,M=i*a-n*h,S=i*l-r*h,T=e*a-n*o,v=e*l-r*o,x=n*l-r*a,b=u*m-c*p,C=u*g-f*p,I=u*y-d*p,G=c*g-f*m,_=c*y-d*m,E=f*y-d*g;return t[0]=o*E-a*_+l*G,t[1]=n*_-e*E-r*G,t[2]=m*x-g*v+y*T,t[3]=f*v-c*x-d*T,t[4]=a*I-h*E-l*C,t[5]=i*E-n*I+r*C,t[6]=g*S-p*x-y*M,t[7]=u*x-f*S+d*M,t[8]=h*_-o*I+l*b,t[9]=e*I-i*_-r*b,t[10]=p*v-m*S+y*w,t[11]=c*S-u*v-d*w,t[12]=o*C-h*G-a*b,t[13]=i*G-e*C+n*b,t[14]=m*M-p*T-g*w,t[15]=u*T-c*M+f*w,t},Wt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,w=i*o-e*h,M=l*p-u*d,S=l*m-c*d,T=u*m-c*p;return a*(s*T-i*S+e*M)-n*(r*T-h*S+o*M)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},Yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],M=i[0],S=i[1],T=i[2],v=i[3];return t[0]=M*e+S*o+T*c+v*m,t[1]=M*n+S*a+T*f+v*g,t[2]=M*r+S*l+T*d+v*y,t[3]=M*h+S*u+T*p+v*w,M=i[4],S=i[5],T=i[6],v=i[7],t[4]=M*e+S*o+T*c+v*m,t[5]=M*n+S*a+T*f+v*g,t[6]=M*r+S*l+T*d+v*y,t[7]=M*h+S*u+T*p+v*w,M=i[8],S=i[9],T=i[10],v=i[11],t[8]=M*e+S*o+T*c+v*m,t[9]=M*n+S*a+T*f+v*g,t[10]=M*r+S*l+T*d+v*y,t[11]=M*h+S*u+T*p+v*w,M=i[12],S=i[13],T=i[14],v=i[15],t[12]=M*e+S*o+T*c+v*m,t[13]=M*n+S*a+T*f+v*g,t[14]=M*r+S*l+T*d+v*y,t[15]=M*h+S*u+T*p+v*w,t},Qt=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},Jt=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Ht=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,M,S,T,v,x,b,C,I,G,_=e[0],E=e[1],A=e[2],D=Math.hypot(_,E,A);return D<EPSILON?null:(_*=D=1/D,E*=D,A*=D,n=Math.sin(i),h=1-(r=Math.cos(i)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],w=s[11],M=_*_*h+r,S=E*_*h+A*n,T=A*_*h-E*n,v=_*E*h-A*n,x=E*E*h+r,b=A*E*h+_*n,C=_*A*h+E*n,I=E*A*h-_*n,G=A*A*h+r,t[0]=o*M+c*S+m*T,t[1]=a*M+f*S+g*T,t[2]=l*M+d*S+y*T,t[3]=u*M+p*S+w*T,t[4]=o*v+c*x+m*b,t[5]=a*v+f*x+g*b,t[6]=l*v+d*x+y*b,t[7]=u*v+p*x+w*b,t[8]=o*C+c*I+m*G,t[9]=a*C+f*I+g*G,t[10]=l*C+d*I+y*G,t[11]=u*C+p*I+w*G,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},qt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},Xt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},Zt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},Kt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,i){var e,n,r,h=i[0],o=i[1],a=i[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,e=Math.sin(s),r=1-(n=Math.cos(s)),t[0]=h*h*r+n,t[1]=o*h*r+a*e,t[2]=a*h*r-o*e,t[3]=0,t[4]=h*o*r-a*e,t[5]=o*o*r+n,t[6]=a*o*r+h*e,t[7]=0,t[8]=h*a*r+o*e,t[9]=o*a*r-h*e,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},is=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},es=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},hs=function(t,s){var i=new ARRAY_TYPE(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return c>0?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),rs(t,s,i),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var i=new ARRAY_TYPE(3);as(i,s);var e=1/i[0],n=1/i[1],r=1/i[2],h=s[0]*e,o=s[1]*n,a=s[2]*r,l=s[4]*e,u=s[5]*n,c=s[6]*r,f=s[8]*e,d=s[9]*n,p=s[10]*r,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,w=h*m,M=o*d,S=a*p,T=l*m,v=u*d,x=c*p,b=f*m,C=g+S+b,I=0;return C>0?(I=2*Math.sqrt(C+1),t[3]=.25*I,t[0]=(T-x)/I,t[1]=(v-w)/I,t[2]=(y-M)/I):g>S&&g>b?(I=2*Math.sqrt(1+g-S-b),t[3]=(T-x)/I,t[0]=.25*I,t[1]=(y+M)/I,t[2]=(v+w)/I):S>b?(I=2*Math.sqrt(1+S-g-b),t[3]=(v-w)/I,t[0]=(y+M)/I,t[1]=.25*I,t[2]=(T+x)/I):(I=2*Math.sqrt(1+b-g-S),t[3]=(y-M)/I,t[0]=(v+w)/I,t[1]=(T+x)/I,t[2]=.25*I),t},cs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,w=o*l,M=o*u,S=e[0],T=e[1],v=e[2];return t[0]=(1-(p+g))*S,t[1]=(f+M)*S,t[2]=(d-w)*S,t[3]=0,t[4]=(f-M)*T,t[5]=(1-(c+g))*T,t[6]=(m+y)*T,t[7]=0,t[8]=(d+w)*v,t[9]=(m-y)*v,t[10]=(1-(c+p))*v,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fs=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,w=a*l,M=a*u,S=a*c,T=e[0],v=e[1],x=e[2],b=n[0],C=n[1],I=n[2],G=(1-(m+y))*T,_=(d+S)*T,E=(p-M)*T,A=(d-S)*v,D=(1-(f+y))*v,N=(g+w)*v,O=(p+M)*x,P=(g-w)*x,R=(1-(f+m))*x;return t[0]=G,t[1]=_,t[2]=E,t[3]=0,t[4]=A,t[5]=D,t[6]=N,t[7]=0,t[8]=O,t[9]=P,t[10]=R,t[11]=0,t[12]=i[0]+b-(G*b+A*C+O*I),t[13]=i[1]+C-(_*b+D*C+P*I),t[14]=i[2]+I-(E*b+N*C+R*I),t[15]=1,t},ds=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},ms=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},gs=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},ys=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},ws=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Ms=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},Ss=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=e[0],w=e[1],M=e[2],S=i[0],T=i[1],v=i[2];return Math.abs(p-S)<EPSILON&&Math.abs(m-T)<EPSILON&&Math.abs(g-v)<EPSILON?Bt(t):(u=p-S,c=m-T,f=g-v,n=w*(f*=d=1/Math.hypot(u,c,f))-M*(c*=d),r=M*(u*=d)-y*f,h=y*c-w*u,(d=Math.hypot(n,r,h))?(n*=d=1/d,r*=d,h*=d):(n=0,r=0,h=0),o=c*h-f*r,a=f*n-u*h,l=u*r-c*n,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(n*p+r*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},Ts=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},vs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},xs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},bs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Cs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Is=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Gs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},_s=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Es=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],w=s[0],M=s[1],S=s[2],T=s[3],v=s[4],x=s[5],b=s[6],C=s[7],I=s[8],G=s[9],_=s[10],E=s[11],A=s[12],D=s[13],N=s[14],O=s[15];return Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(e-M)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(n-S)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-T)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(h-v)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(o-x)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-b)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-C)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-I)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-G)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(f-_)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(d-E)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-A)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-D)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-N)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},As=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Ds=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Ns=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Os=function(t,s,i){var e=new ARRAY_TYPE(3);return e[0]=t,e[1]=s,e[2]=i,e},Ps=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Rs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Ls=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Fs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},ks=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},js=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},zs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Bs=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Us=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},$s=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Vs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},Ws=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},Ys=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},Qs=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},Js=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},Hs=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},qs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Xs=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Zs=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},Ks=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ti=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},si=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},ii=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(Ks(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ei=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},ni=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},ri=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI,e=2*RANDOM()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},oi=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},ai=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},li=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ui=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ci=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},fi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&Ks(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},di=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},gi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(o))},yi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},wi=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Mi=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},Si=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ti=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},vi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},xi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},bi=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ci=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ii=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Gi=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},_i=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Ei=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ai=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Di=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ni=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Oi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Pi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Ri=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},Li=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},Fi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ki=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},ji=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},zi=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Bi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},Ui=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},$i=function(t,s){var i,e,n,r,h,o;s=s||1;do{h=(i=2*RANDOM()-1)*i+(e=2*RANDOM()-1)*e}while(h>=1);do{o=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Vi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},Wi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},Yi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Qi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ji=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Hi=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},qi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Xi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Zi=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Ki=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return e>EPSILON?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){var i=dot$2(t,s);return Math.acos(2*i*i-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},ie=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},ee=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},ne=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},re=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},he=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},oe=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},ae=function(t,s,i){return oe(t,s),scale$2(t,t,i),he(t,t),t},le=function(t,s,i,e){var n,r,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=i[0],p=i[1],m=i[2],g=i[3];return(r=l*d+u*p+c*m+f*g)<0&&(r=-r,d=-d,p=-p,m=-m,g=-g),1-r>EPSILON?(n=Math.acos(r),h=Math.sin(n),o=Math.sin((1-e)*n)/h,a=Math.sin(e*n)/h):(o=1-e,a=e),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ue=function(t){var s=RANDOM(),i=RANDOM(),e=RANDOM(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*e),t[3]=r*Math.cos(2*Math.PI*e),t},ce=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},fe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},de=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},pe=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,r=Math.PI/360;s*=r,e*=r,i*=r;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},me=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ge=function(t,s){return Math.abs(zi(t,s))>=1-EPSILON},ye=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},we=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Me=function(t,s,i,e,n,r,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},Se=function(t,s,i,e,n,r,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=i,o[3]=e;var a=.5*n,l=.5*r,u=.5*h;return o[4]=a*e+l*i-u*s,o[5]=l*e+u*t-a*i,o[6]=u*e+a*s-l*t,o[7]=-a*t-l*s-u*i,o},Te=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},ve=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},xe=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},be=function(t,s){var i=qi();ls(i,s);var e=new ARRAY_TYPE(3);return os(e,s),Te(t,i,e),t},Ce=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Ie=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ge=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},_e=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Ee=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Ae=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},De=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Ne=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ie(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Oe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ee(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Pe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ne(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Re=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},Le=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},Fe=function(t,s,i,e){if(Math.abs(e)<EPSILON)return Ce(t,s);var n=Math.hypot(i[0],i[1],i[2]);e*=.5;var r=Math.sin(e),h=r*i[0]/n,o=r*i[1]/n,a=r*i[2]/n,l=Math.cos(e),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},ke=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},je=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+h*m+n*y-r*g,t[1]=n*w+h*g+r*m-e*y,t[2]=r*w+h*y+e*g-n*m,t[3]=h*w-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*w+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*w+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*w+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*w-c*m-f*g-d*y,t},ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Be=function(t,s,i,e){var n=1-e;return dot$1(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},Ue=function(t,s){var i=squaredLength$1(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},$e=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Ve=function(t,s){var i=squaredLength$1(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},We=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Ye=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Qe=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},Je=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},He=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},qe=function(t,s){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=s,i},Xe=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ze=function(t,s,i){return t[0]=s,t[1]=i,t},Ke=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},tn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},sn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},en=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},nn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},hn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},on=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},an=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},un=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},cn=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},fn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},dn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},pn=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},mn=function(t){var s=t[0],i=t[1];return s*s+i*i},gn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},yn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},wn=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Mn=function(t,s){return t[0]*s[0]+t[1]*s[1]},Sn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},Tn=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},vn=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},xn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},bn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Cn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},In=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},Gn=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},_n=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},En=function(t){return t[0]=0,t[1]=0,t},An=function(t){return"vec2("+t[0]+", "+t[1]+")"},Dn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Nn=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1];return Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=w,transpose$2=M,invert$5=S,adjoint$2=T,determinant$3=v,multiply$8=x,rotate$4=b,scale$8=C,fromRotation$4=I,fromScaling$3=G,str$8=_,frob$3=E,LDU=A,add$8=D,subtract$6=N,exactEquals$8=O,equals$8=P,multiplyScalar$3=R,multiplyScalarAndAdd$3=L,create$7=F,clone$7=k,copy$7=j,identity$4=z,fromValues$7=B,set$7=U,invert$4=$,determinant$2=V,multiply$7=W,rotate$3=Y,scale$7=Q,translate$3=J,fromRotation$3=H,fromScaling$2=q,fromTranslation$3=X,str$7=Z,frob$2=K,add$7=tt,subtract$5=st,multiplyScalar$2=it,multiplyScalarAndAdd$2=et,exactEquals$7=nt,equals$7=rt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=wt,rotate$2=Mt,scale$6=St,fromTranslation$2=Tt,fromRotation$2=vt,fromScaling$1=xt,fromMat2d=bt,fromQuat$1=Ct,normalFromMat4=It,projection=Gt,str$6=_t,frob$1=Et,add$6=At,subtract$4=Dt,multiplyScalar$1=Nt,multiplyScalarAndAdd$1=Ot,exactEquals$6=Pt,equals$6=Rt,create$5=Lt,clone$5=Ft,copy$5=kt,fromValues$5=jt,set$5=zt,identity$2=Bt,transpose=Ut,invert$2=$t,adjoint=Vt,determinant=Wt,multiply$5=Yt,translate$1=Qt,scale$5=Jt,rotate$1=Ht,rotateX$3=qt,rotateY$3=Xt,rotateZ$3=Zt,fromTranslation$1=Kt,fromScaling=ts,fromRotation$1=ss,fromXRotation=is,fromYRotation=es,fromZRotation=ns,fromRotationTranslation$1=rs,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=ws,orthoZO=Ms,lookAt=Ss,targetTo=Ts,str$5=vs,frob=xs,add$5=bs,subtract$3=Cs,multiplyScalar=Is,multiplyScalarAndAdd=Gs,exactEquals$5=_s,equals$5=Es,create$4=As,clone$4=Ds,length$4=Ns,fromValues$4=Os,copy$4=Ps,set$4=Rs,add$4=Ls,subtract$2=Fs,multiply$4=ks,divide$2=js,ceil$2=zs,floor$2=Bs,min$2=Us,max$2=$s,round$2=Vs,scale$4=Ws,scaleAndAdd$2=Ys,distance$2=Qs,squaredDistance$2=Js,squaredLength$4=Hs,negate$2=qs,inverse$2=Xs,normalize$4=Zs,dot$4=Ks,cross$2=ti,lerp$4=si,slerp$1=ii,hermite=ei,bezier=ni,random$3=ri,transformMat4$2=hi,transformMat3$1=oi,transformQuat$1=ai,rotateX$2=li,rotateY$2=ui,rotateZ$2=ci,angle$1=fi,zero$2=di,str$4=pi,exactEquals$4=mi,equals$4=gi,create$3=yi,clone$3=wi,fromValues$3=Mi,copy$3=Si,set$3=Ti,add$3=vi,subtract$1=xi,multiply$3=bi,divide$1=Ci,ceil$1=Ii,floor$1=Gi,min$1=_i,max$1=Ei,round$1=Ai,scale$3=Di,scaleAndAdd$1=Ni,distance$1=Oi,squaredDistance$1=Pi,length$3=Ri,squaredLength$3=Li,negate$1=Fi,inverse$1=ki,normalize$3=ji,dot$3=zi,cross$1=Bi,lerp$3=Ui,random$2=$i,transformMat4$1=Vi,transformQuat=Wi,zero$1=Yi,str$3=Qi,exactEquals$3=Ji,equals$3=Hi,create$2=qi,identity$1=Xi,setAxisAngle=Zi,getAxisAngle=Ki,getAngle=te,multiply$2=se,rotateX$1=ie,rotateY$1=ee,rotateZ$1=ne,calculateW=re,exp=he,ln=oe,pow=ae,slerp=le,random$1=ue,invert$1=ce,conjugate$1=fe,fromMat3=de,fromEuler=pe,str$2=me,equals$2=ge,create$1=ye,clone$1=we,fromValues$1=Me,fromRotationTranslationValues=Se,fromRotationTranslation=Te,fromTranslation=ve,fromRotation=xe,fromMat4=be,copy$1=Ce,identity=Ie,set$1=Ge,getDual=_e,setDual=Ee,getTranslation=Ae,translate=De,rotateX=Ne,rotateY=Oe,rotateZ=Pe,rotateByQuatAppend=Re,rotateByQuatPrepend=Le,rotateAroundAxis=Fe,add$1=ke,multiply$1=je,scale$1=ze,lerp$1=Be,invert=Ue,conjugate=$e,normalize$1=Ve,str$1=We,exactEquals$1=Ye,equals$1=Qe,create=Je,clone=He,fromValues=qe,copy=Xe,set=Ze,add=Ke,subtract=tn,multiply=sn,divide=en,ceil=nn,floor=rn,min=hn,max=on,round=an,scale=un,scaleAndAdd=cn,distance=fn,squaredDistance=dn,length=pn,squaredLength=mn,negate=gn,inverse=yn,normalize=wn,dot=Mn,cross=Sn,lerp=Tn,random=vn,transformMat2=xn,transformMat2d=bn,transformMat3=Cn,transformMat4=In,rotate=Gn,angle=_n,zero=En,str=An,exactEquals=Dn,equals=Nn,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=x,sub$6=N,mat2=Object.freeze({__proto__:null,create:u,clone:p,M:m,identity:g,S:y,set:w,T:M,v:S,C:T,I:v,multiply:x,rotate:b,scale:C,G:I,_:G,A:_,D:E,N:A,add:D,O:N,P:O,equals:P,R:R,L:L,mul:mul$8,sub:sub$6}),mul$7=W,sub$5=st,mat2d=Object.freeze({__proto__:null,create:F,clone:k,M:j,identity:z,S:B,set:U,v:$,I:V,multiply:W,rotate:Y,scale:Q,translate:J,G:H,_:q,F:X,A:Z,D:K,add:tt,O:st,R:it,L:et,P:nt,equals:rt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=Dt,mat3=Object.freeze({__proto__:null,create:ht,j:ot,clone:at,M:lt,S:ut,set:ct,identity:ft,T:dt,v:pt,C:mt,I:gt,multiply:yt,translate:wt,rotate:Mt,scale:St,F:Tt,G:vt,_:xt,B:bt,U:Ct,$:It,V:Gt,A:_t,D:Et,add:At,O:Dt,R:Nt,L:Ot,P:Pt,equals:Rt,mul:mul$6,sub:sub$4}),perspective=ms,ortho=ws,mul$5=Yt,sub$3=Cs,mat4=Object.freeze({__proto__:null,create:Lt,clone:Ft,M:kt,S:jt,set:zt,identity:Bt,T:Ut,v:$t,C:Vt,I:Wt,multiply:Yt,translate:Qt,scale:Jt,rotate:Ht,W:qt,Y:Xt,J:Zt,F:Kt,_:ts,G:ss,H:is,X:es,Z:ns,K:rs,tt:hs,st:os,it:as,et:ls,nt:us,rt:cs,ht:fs,U:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:ws,dt:ortho,gt:Ms,yt:Ss,wt:Ts,A:vs,D:xs,add:bs,O:Cs,R:Is,L:Gs,P:_s,equals:Es,mul:mul$5,sub:sub$3}),sub$2=Fs,mul$4=ks,div$2=js,dist$2=Qs,sqrDist$2=Js,len$4=Ns,sqrLen$4=Hs,t=As(),forEach$2=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:As,clone:Ds,length:Ns,S:Os,M:Ps,set:Rs,add:Ls,O:Fs,multiply:ks,Mt:js,ceil:zs,floor:Bs,min:Us,max:$s,round:Vs,scale:Ws,St:Ys,Tt:Qs,vt:Js,xt:Hs,bt:qs,inverse:Xs,normalize:Zs,Ct:Ks,It:ti,Gt:si,_t:ii,Et:ei,At:ni,random:ri,Dt:hi,Nt:oi,Ot:ai,W:li,Y:ui,J:ci,angle:fi,Pt:di,A:pi,P:mi,equals:gi,sub:sub$2,mul:mul$4,div:div$2,Rt:dist$2,Lt:sqrDist$2,Ft:len$4,kt:sqrLen$4,forEach:forEach$2}),sub$1=xi,mul$3=bi,div$1=Ci,dist$1=Oi,sqrDist$1=Pi,len$3=Ri,sqrLen$3=Li,forEach$1=function(){var t=yi();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:yi,clone:wi,S:Mi,M:Si,set:Ti,add:vi,O:xi,multiply:bi,Mt:Ci,ceil:Ii,floor:Gi,min:_i,max:Ei,round:Ai,scale:Di,St:Ni,Tt:Oi,vt:Pi,length:Ri,xt:Li,bt:Fi,inverse:ki,normalize:ji,Ct:zi,It:Bi,Gt:Ui,random:$i,Dt:Vi,Ot:Wi,Pt:Yi,A:Qi,P:Ji,equals:Hi,sub:sub$1,mul:mul$3,div:div$1,Rt:dist$1,Lt:sqrDist$1,Ft:len$3,kt:sqrLen$3,forEach:forEach$1}),clone$2=wi,fromValues$2=Mi,copy$2=Si,set$2=Ti,add$2=vi,mul$2=se,scale$2=Di,dot$2=zi,lerp$2=Ui,length$2=Ri,len$2=length$2,squaredLength$2=Li,sqrLen$2=squaredLength$2,normalize$2=ji,exactEquals$2=Ji,rotationTo=function(){var t=As(),s=Os(1,0,0),i=Os(0,1,0);return function(e,n,r){var h=Ks(n,r);return h<-.999999?(ti(t,s,n),len$4(t)<1e-6&&ti(t,i,n),Zs(t,t),Zi(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ti(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,normalize$2(e,e))}}(),sqlerp=function(){var t=qi(),s=qi();return function(i,e,n,r,h,o){return le(t,e,h,o),le(s,n,r,o),le(i,t,s,2*o*(1-o)),i}}(),setAxes=function(){var t=ht();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],normalize$2(s,de(s,t))}}(),quat=Object.freeze({__proto__:null,create:qi,identity:Xi,jt:Zi,zt:Ki,Bt:te,multiply:se,W:ie,Y:ee,J:ne,Ut:re,exp:he,$t:oe,pow:ae,_t:le,random:ue,v:ce,Vt:fe,Wt:de,Yt:pe,A:me,clone:clone$2,S:fromValues$2,M:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Ct:dot$2,Gt:lerp$2,length:length$2,Ft:len$2,xt:squaredLength$2,kt:sqrLen$2,normalize:normalize$2,P:exactEquals$2,equals:ge,Qt:rotationTo,Jt:sqlerp,Ht:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=je,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:ye,clone:we,S:Me,qt:Se,K:Te,F:ve,G:xe,j:be,M:Ce,identity:Ie,set:Ge,Xt:getReal,Zt:_e,Kt:setReal,ts:Ee,st:Ae,translate:De,W:Ne,Y:Oe,J:Pe,ss:Re,es:Le,ns:Fe,add:ke,multiply:je,mul:mul$1,scale:ze,Ct:dot$1,Gt:Be,v:Ue,Vt:$e,length:length$1,Ft:len$1,xt:squaredLength$1,kt:sqrLen$1,normalize:Ve,A:We,P:Ye,equals:Qe}),len=pn,sub=tn,mul=sn,div=en,dist=fn,sqrDist=dn,sqrLen=mn,forEach=function(){var t=Je();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:Je,clone:He,S:qe,M:Xe,set:Ze,add:Ke,O:tn,multiply:sn,Mt:en,ceil:nn,floor:rn,min:hn,max:on,round:an,scale:un,St:cn,Tt:fn,vt:dn,length:pn,xt:mn,bt:gn,inverse:yn,normalize:wn,Ct:Mn,It:Sn,Gt:Tn,random:vn,rs:xn,hs:bn,Nt:Cn,Dt:In,rotate:Gn,angle:_n,Pt:En,A:An,P:Dn,equals:Nn,Ft:len,sub:sub,mul:mul,div:div,Rt:dist,Lt:sqrDist,kt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.ws=vec3,globalThis.ls.Ms=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,UpdateLayoutEndValues,makeNullFilledArray,GetFragmentInputStructDeclaration,HashPipelineState,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,IsStaticTextureDataType,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,IsExpressionType,GetAudioSdkInstance,GetAudioDOMInterface,getIndexForEase,ValidateTags,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let On=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],rr(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Pn=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n===0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Rn=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Ln=function(t,s,i){return Rn(t,s,i)>0},Fn=function(t,s,i){return Rn(t,s,i)>=0},kn=function(t,s,i){return Rn(t,s,i)<0},jn=function(t,s,i){return Rn(t,s,i)<=0},zn=function(t,s,i,e){if(e){var n=tmpPoint1,r=tmpPoint2;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Rn(t,s,i)},Bn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Un=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},$n=function(t){t.length=0},Vn=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},Wn=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Ln(Un(t,s-1),Un(t,s),Un(t,s+1))&&(Yn(t),!0)},Yn=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},Qn=function(t,s){return kn(Un(t,s-1),Un(t,s),Un(t,s+1))},Jn=function(t,s,i){var e,n,r=tmpLine1,h=tmpLine2;if(Fn(Un(t,s+1),Un(t,s),Un(t,i))&&jn(Un(t,s-1),Un(t,s),Un(t,i)))return!1;n=Bn(Un(t,s),Un(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Fn(Un(t,s),Un(t,i),Un(t,o+1))&&jn(Un(t,s),Un(t,i),Un(t,o))&&(r[0]=Un(t,s),r[1]=Un(t,i),h[0]=Un(t,o),h[1]=Un(t,o+1),e=On(r,h),Bn(Un(t,s),e)<n))return!1;return!0},Hn=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Pn(Un(t,s),Un(t,i),Un(t,e),Un(t,e+1)))return!1;return!0},qn=function(t,s,i,e){var n=e||[];if($n(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},Xn=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(Qn(t,h))for(var o=0;o<t.length;++o)if(Jn(t,h,o)){i=Xn(qn(t,h,o,n)),e=Xn(qn(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([Un(t,h),Un(t,o)]))}return s},Zn=function(t){var s=Xn(t);return s.length>0?Kn(t,s):[t]},Kn=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=Kn(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[qn(t,e,r),qn(t,r,e)]},tr=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Pn(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Pn(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},sr=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return rr(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},ir=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],M=t,S=t;if(S.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var T=0;T<t.length;++T)if(Qn(M,T)){i.push(M[T]),u=c=Number.MAX_VALUE;for(var v=0;v<t.length;++v)Ln(Un(M,T-1),Un(M,T),Un(M,v))&&jn(Un(M,T-1),Un(M,T),Un(M,v-1))&&(l=sr(Un(M,T-1),Un(M,T),Un(M,v),Un(M,v-1)),kn(Un(M,T+1),Un(M,T),l)&&(f=Bn(M[T],l))<c&&(c=f,a=l,m=v)),Ln(Un(M,T+1),Un(M,T),Un(M,v+1))&&jn(Un(M,T+1),Un(M,T),Un(M,v))&&(l=sr(Un(M,T+1),Un(M,T),Un(M,v),Un(M,v+1)),Ln(Un(M,T-1),Un(M,T),l)&&(f=Bn(M[T],l))<u&&(u=f,o=l,p=v));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),T<p?(Vn(y,M,T,p+1),y.push(l),w.push(l),0!==m&&Vn(w,M,m,M.length),Vn(w,M,0,T+1)):(0!==T&&Vn(y,M,T,M.length),Vn(y,M,0,p+1),y.push(l),w.push(l),Vn(w,M,m,T+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(v=m;v<=p;++v)Fn(Un(M,T-1),Un(M,T),Un(M,v))&&jn(Un(M,T+1),Un(M,T),Un(M,v))&&(f=Bn(Un(M,T),Un(M,v)))<d&&Hn(M,T,v)&&(d=f,g=v%t.length);T<g?(Vn(y,M,T,g+1),0!==g&&Vn(w,M,g,S.length),Vn(w,M,0,T+1)):(0!==T&&Vn(y,M,T,S.length),Vn(y,M,0,g+1),Vn(w,M,g,T+1))}return y.length<w.length?(ir(y,s,i,e,n,r,h),ir(w,s,i,e,n,r,h)):(ir(w,s,i,e,n,r,h),ir(y,s,i,e,n,r,h)),s}return s.push(t),s},er=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)zn(Un(t,e-1),Un(t,e),Un(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},nr=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)hr(e,t[n],s)&&t.splice(i,1)},rr=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},hr=function(t,s,i){return rr(t[0],s[0],i)&&rr(t[1],s[1],i)};lineInt=On,lineSegmentsIntersect=Pn,triangleArea=Rn,isLeft=Ln,isLeftOn=Fn,isRight=kn,isRightOn=jn,collinear=zn,sqdist=Bn,polygonAt=Un,polygonClear=$n,polygonAppend=Vn,polygonMakeCCW=Wn,polygonReverse=Yn,polygonIsReflex=Qn,polygonCanSee=Jn,polygonCanSee2=Hn,polygonCopy=qn,polygonGetCutEdges=Xn,polygonDecomp=Zn,polygonSlice=Kn,polygonIsSimple=tr,getIntersectionPoint=sr,polygonQuickDecomp=ir,polygonRemoveCollinearPoints=er,polygonRemoveDuplicatePoints=nr,scalar_eq=rr,points_eq=hr,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.Ss={Ts:Zn,vs:ir,xs:tr,bs:er,Cs:nr,Is:Wn}}{let ar=!1,lr=!1,ur="dev";const cr=Symbol("Construct internal API token");let fr=16;const dr=self.Gs=class{constructor(){throw TypeError("static class can't be instantiated")}static _s(){if(fr<=0)throw new Error("cannot obtain internal API token");return--fr,cr}static Es(){ar=!0}static As(){return ar}static Ds(){lr=!0}static Ns(){return lr}static Os(t){ur=t}static Ps(){return ur}static Rs(){return"final"===ur}};dr.Ls=!1,dr.Fs=!1,dr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.ks={}}{const pr=self.Gs;pr.js=class{constructor(t){this.zs=t,this.Bs=new Map,this.Us()}Us(){let t=this.zs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.$s(t)}$s(t){if(!t)return;if(!t.includes("="))return void this.Bs.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Bs.set(i,e)}Vs(){for(const t of this.Bs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Ws(t){return this.Bs.has(t)}Ys(t){const s=this.Bs.get(t);return void 0===s?null:s}Qs(){history.replaceState("",document.title,location.pathname+location.search)}Js(t){this.zs=t,this.Bs.clear(),this.Us()}},pr.Hs=new pr.js(location.search),pr.qs=new pr.js(location.hash),pr.Hs.Ws("perf")&&(pr.Xs=!0),"dev"!==pr.Hs.Ys("mode")&&pr.Os("final")}{let mr=function(t){const s=parseFloat(t);return wr.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mr;const gr=self.Gs,yr="(unknown)";gr.Zs={Ks:yr,ti:yr,si:yr,ii:yr,ei:NaN,ni:yr,ri:"browser",hi:!0,oi:!1,ai:!1,li:!1,ci:async()=>{}};const wr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Mr=navigator.userAgent,Sr=navigator.userAgentData;if(Sr&&Sr.brands.length>0){let vr=function(t){let s="",i="",e="",n="";for(const r of t){const t=xr.get(r.brand);!s&&t&&(s=t,i=r.version);const h=br.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(gr.Zs.si="Chromium",gr.Zs.ii=n),gr.Zs.si=s||yr,gr.Zs.ii=i||yr,gr.Zs.ni=e||yr};ReadBrandList=vr,gr.Zs.Ks=Sr.platform,gr.Zs.oi=Sr.mobile,gr.Zs.hi=!gr.Zs.oi;const xr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),br=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);vr(Sr.brands);let Cr=!1;gr.Zs.ci=async()=>{if(!Cr)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);vr(t.fullVersionList),"Windows"===gr.Zs.Ks?gr.Zs.ti=mr(t.platformVersion):gr.Zs.ti=t.platformVersion,Cr=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Ir=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Mr);if(i){s(i);break}}};RunTest=Ir,Ir(/windows\s+nt\s+([\d\.]+)/i,t=>{gr.Zs.Ks="Windows";const s=t[1];gr.Zs.ti=mr(s)}),Ir(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{gr.Zs.Ks="macOS",gr.Zs.ti=t[1].replace(/_/g,".")}),Ir(/CrOS/,()=>{gr.Zs.Ks="Chrome OS"}),Ir(/linux|openbsd|freebsd|netbsd/i,()=>{gr.Zs.Ks="Linux"}),Ir(/android/i,()=>{gr.Zs.Ks="Android"}),Ir(/android\s+([\d\.]+)/i,t=>{gr.Zs.Ks="Android",gr.Zs.ti=t[1]}),gr.Zs.Ks===yr&&(Ir(/(iphone|ipod|ipad)/i,t=>{gr.Zs.Ks="iOS"}),Ir([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{gr.Zs.Ks="iOS",gr.Zs.ti=t[1].replace(/_/g,".")}));const Gr=/chrome\//i.test(Mr),_r=/chromium\//i.test(Mr),Er=/edg\//i.test(Mr),Ar=/OPR\//.test(Mr),Dr=/nwjs/i.test(Mr),Nr=/safari\//i.test(Mr),Or=/webkit/i.test(Mr);Er||Ar||Ir(/chrome\/([\d\.]+)/i,t=>{gr.Zs.si="Chrome",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/edg\/([\d\.]+)/i,t=>{gr.Zs.si="Edge",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/OPR\/([\d\.]+)/,t=>{gr.Zs.si="Opera",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/chromium\/([\d\.]+)/i,t=>{gr.Zs.si="Chromium",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/nwjs\/[0-9.]+/i,t=>{gr.Zs.si="NW.js",gr.Zs.ii=t[1],gr.Zs.ni="Chromium",gr.Zs.ri="nwjs"}),Ir(/firefox\/([\d\.]+)/i,t=>{gr.Zs.si="Firefox",gr.Zs.ii=t[1],gr.Zs.ni="Gecko"}),!Nr||Gr||_r||Er||Ar||Dr||(gr.Zs.si="Safari",gr.Zs.ni="WebKit",Ir(/version\/([\d\.]+)/i,t=>{gr.Zs.ii=t[1]}),Ir(/crios\/([\d\.]+)/i,t=>{gr.Zs.si="Chrome for iOS",gr.Zs.ii=t[1]}),Ir(/fxios\/([\d\.]+)/i,t=>{gr.Zs.si="Firefox for iOS",gr.Zs.ii=t[1]}),Ir(/edgios\/([\d\.]+)/i,t=>{gr.Zs.si="Edge for iOS",gr.Zs.ii=t[1]})),gr.Zs.ni===yr&&Or&&(gr.Zs.ni="WebKit"),"Android"===gr.Zs.Ks&&"Safari"===gr.Zs.si&&(gr.Zs.si="Stock");const Pr=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gr.Zs.Ks)||"nwjs"===gr.Zs.ri;gr.Zs.hi=Pr,gr.Zs.oi=!Pr}"Chrome"===gr.Zs.si&&"browser"===gr.Zs.ri&&/wv\)/.test(Mr)&&(gr.Zs.ri="webview"),"nwjs"!==gr.Zs.ri&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gr.Zs.ri="webapp"),gr.Zs.ei=parseFloat(gr.Zs.ii);const Tr="macOS"===gr.Zs.Ks&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;Tr&&(gr.Zs.Ks="iOS",gr.Zs.ti=gr.Zs.ii,gr.Zs.hi=!1,gr.Zs.oi=!0,gr.Zs.li=!0),gr.Zs.ai="macOS"===gr.Zs.Ks||"iOS"===gr.Zs.Ks}{let Rr=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},Lr=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},Fr=function(t,s){return Qr(t,s)},kr=function(t,s){return Qr(t,s,!0)},jr=function(t){zr(t);let s=Vr.get(t);return s instanceof Promise||(s=Jr(t),Vr.set(t,s),s.catch(s=>Vr.delete(t))),s},zr=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Br=function(t,s){const i=t.objectStore($r).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}})};s=Rr,a=Lr,c=Fr,i=kr,l=jr,f=zr,d=Br;const Ur=2,$r="keyvaluepairs",Vr=new Map,Wr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,Yr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function Qr(t,s,i=!1,e=!0){const n=await jr(t);try{return s(n.transaction([$r],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return Vr.delete(t),Qr(t,s,i,!1);throw n}}async function Jr(t){zr(t);const s=indexedDB.open(t,Ur);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore($r)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Rr(s)}class Hr{constructor(t){zr(t),this.name=t}async ready(){await jr(this.name)}set(t,s){return zr(t),kr(this.name,async i=>{const e=Rr(i.objectStore($r).put(s,t)),n=Lr(i);await Promise.all([n,e])})}get(t){return zr(t),Fr(this.name,async s=>{const i=Rr(s.objectStore($r).get(t)),e=Lr(s),[n,r]=await Promise.all([e,i]);return r})}delete(t){return zr(t),kr(this.name,async s=>{const i=Rr(s.objectStore($r).delete(t)),e=Lr(s);await Promise.all([e,i])})}clear(){return kr(this.name,async t=>{const s=Rr(t.objectStore($r).clear()),i=Lr(t);await Promise.all([i,s])})}keys(){return Fr(this.name,async t=>{let s;s=Yr?Rr(t.objectStore($r).getAllKeys()):Br(t,"keys");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}values(){return Fr(this.name,async t=>{let s;s=Wr?Rr(t.objectStore($r).getAll()):Br(t,"values");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}entries(){return Fr(this.name,async t=>{const s=Br(t,"entries"),i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}}self.fi=Hr}{let qr=function(t){throw new Error(`"${t}" is not implemented`)},Xr=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Zr=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};r=qr,a=Xr,o=Zr;const Kr=self.fi,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.di=t,this.pi=!this.di,this.pi||"undefined"!=typeof indexedDB||(this.pi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.mi=new Map}gi(t){if(!this.pi)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.pi=!0;break}}async yi(t){const s=this.mi.get(t),i=await Zr(s);return void 0===i?null:i}async wi(t,s){s=await Zr(s),this.mi.set(t,s)}Mi(t){this.mi.delete(t)}Si(){this.mi.clear()}Ti(){return Array.from(this.mi.keys())}xi(){return this.pi}bi(){return this.mi}Ci(t){this.mi=t}async getItem(t,s){if(Xr(s),this.pi)return await this.yi(t);let i;try{i=await this.di.get(t)}catch(s){return this.gi(s),this.pi?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(Xr(i),void 0===s&&(s=null),this.pi)await this.wi(t,s);else try{await this.di.set(t,s)}catch(i){if(this.gi(i),!this.pi)throw i;await this.wi(t,s)}}async removeItem(t,s){if(Xr(s),this.pi)this.Mi(t);else try{await this.di.delete(t)}catch(s){this.gi(s),this.pi?this.Mi(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Xr(t),this.pi)this.Si();else try{await this.di.clear()}catch(t){this.gi(t),this.pi?this.Si():console.error("Error clearing storage: ",t)}}async keys(t){if(Xr(t),this.pi)return this.Ti();let s=[];try{s=await this.di.keys()}catch(t){if(this.gi(t),this.pi)return this.Ti();console.error("Error getting storage keys: ",t)}return s}ready(t){return Xr(t),this.pi?Promise.resolve(!0):this.di.ready()}Ii(t){if(t.Gi)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new Kr(s);return new sh(i)}}length(t){qr("localforage.length()")}key(t,s){qr("localforage.key()")}iterate(t,s){qr("localforage.iterate()")}_i(t){qr("localforage.setDriver()")}config(t){qr("localforage.config()")}Ei(t){qr("localforage.defineDriver()")}Ai(){qr("localforage.driver()")}supports(t){qr("localforage.supports()")}dropInstance(){qr("localforage.dropInstance()")}}self.localforage=new sh(new Kr("localforage"))}{const ih=self.Gs;if(ih.Di={},ih.Di.Ni=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),ih.Di.Oi="undefined"!=typeof HTMLDialogElement,ih.Di.Pi=!!self.requestIdleCallback,ih.Di.ImageBitmap=!!self.createImageBitmap,ih.Di.ImageBitmapOptions=!1,ih.Di.Ri=!1,ih.Di.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{ih.Di.ImageBitmapOptions=!0}).catch(()=>{ih.Di.ImageBitmapOptions=!1})}catch(eh){ih.Di.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{ih.Di.Ri=10===t.width&&10===t.height}).catch(()=>{ih.Di.Ri=!1})}catch(nh){ih.Di.Ri=!1}}if(ih.Di.Li=!(!navigator.clipboard||!navigator.clipboard.readText),ih.Di.Fi=!(!navigator.permissions||!navigator.permissions.query),ih.Di.ki=!1,ih.Di.Fi){const rh={name:"clipboard-read"};navigator.permissions.query(rh).then(()=>{ih.Di.ki=!0}).catch(()=>{ih.Di.ki=!1})}ih.Di.ji=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),ih.Di.zi="undefined"!=typeof Proxy,ih.Di.Bi="undefined"!=typeof document&&void 0!==document.createElement("a").download,ih.Di.Ui="function"==typeof fetch,ih.Di.$i=!!(self.isSecureContext&&"Opera"!==ih.Zs.si&&navigator.storage&&navigator.storage.persist),ih.Di.Vi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),ih.Di.Wi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===ih.Zs.Ks)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),ih.Di.ImageDecoder=void 0!==self.ImageDecoder,ih.Di.Yi=!!self.VideoEncoder,ih.Di.Qi=!!self.showOpenFilePicker,ih.Di.Ji=!!self.queryLocalFonts,ih.Di.UserActivation=!!navigator.userActivation,ih.Di.Hi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),ih.Di.Hi=i&&"image/webp"===i.type}catch(t){ih.Di.Hi=!1}})()}{const hh=self.Gs;String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Xi(t),"g"),s)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))})}{let oh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ah.Zi();console.error(s)};assertFail=oh;const ah=self.Gs;self.assert=function(t,s){t||oh(s)}}{const lh=self.Gs,uh=self.ks;lh.Ki=function(t){return"number"==typeof t},lh.te=function(t){return lh.Ki(t)&&isFinite(t)},lh.se=function(t){if(!lh.Ki(t))throw new TypeError("expected number")},lh.ie=function(t){lh.ee(t)},lh.ne=function(t,s,i){if(!lh.Ki(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},lh.re=function(...t){for(let s of t);},lh.he=function(t){if(!lh.te(t))throw new TypeError("expected finite number")},lh.oe=function(t){lh.ee(t)},lh.ae=function(...t){for(let s of t);},lh.le=function(t){return"string"==typeof t},lh.ue=function(t){if(!lh.le(t))throw new TypeError("expected string")},lh.ce=function(t){lh.ee(t)},lh.fe=function(...t){for(let s of t);},lh.de=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},lh.pe=function(t){if(!lh.de(t))throw new TypeError("expected simple object")},lh.me=function(t){if(!lh.ee(t)&&!lh.de(t))throw new TypeError("expected simple object")},lh.ge=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},lh.ye=function(t){if(!lh.ge(t))throw new TypeError("expected object")},lh.we=function(t){lh.ee(t)},lh.Me=function(...t){for(let s of t);},lh.Se=function(t){return lh.Te(t,Blob)&&"string"==typeof t.name},lh.ve=function(t){if(!lh.Se(t))throw new TypeError("expected file")},lh.xe=function(t){lh.ee(t)},lh.be=function(t){return Array.isArray(t)},lh.Ce=function(t){if(!lh.be(t))throw new TypeError("expected array")},lh.Ie=function(t){lh.ee(t)},lh.Ge=function(...t){for(let s of t);},lh._e=function(t){return!(!lh.be(t)||t.length&&!lh.be(t[0]))},lh.Ee=function(t){if(!lh._e(t))throw new TypeError("expected 2d array");for(let s of t)if(!lh.be(s))throw new TypeError("expected 2d array")},lh.Ae=function(t){lh.ee(t)},lh.De=function(t){return"function"==typeof t},lh.Ne=function(t,s){if(!lh.De(t))throw new TypeError("expected function");if(!lh.ee(s)&&t!==s)throw new TypeError("expected same function reference")},lh.Oe=function(t){lh.ee(t)},lh.Pe=function(...t){for(let s of t);},lh.Re=function(t,...s){if(!lh.De(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!lh.ee(i)&&t===i)return;throw new TypeError("expected same function reference")},lh.Le=function(...t){if(!lh.ee(t))for(let s of t);},lh.Fe=function(t,s){return t instanceof s},lh.ke=function(t,...s){for(let i of s)if(lh.Fe(t,i))return!0;return!1},lh.je=function(t,s){if(!lh.Fe(t,s))throw new TypeError("unexpected type")},lh.ze=function(t,s){lh.ee(t)},lh.Be=function(t,...s){for(let t of s);},lh.Ue=function(t,...s){if(!lh.ke(t,...s))throw new TypeError("unexpected type")},lh.$e=function(t,...s){if(!lh.ee(t)&&!lh.ke(t,...s))throw new TypeError("unexpected type")},lh.Ve=function(t,s){for(let i of t)if(!lh.Fe(i,s))return!1;return!0},lh.We=function(t){for(let s of t)if(!lh.te(s))return!1;return!0},lh.Ye=function(t,s){for(let s of t);},lh.Qe=function(t,s){if(!lh.ee(t))for(let s of t);},lh.Je=function(t,s){if(!lh.ee(t))for(let s of t);},lh.He=function(t,...s){for(let s of t);},lh.qe=function(t,...s){if(!lh.ee(t))for(let s of t);},lh.Xe=function(t,s){return!(lh.ee(t)||!lh.le(t.nodeName))&&(!s||lh.Ze(t.nodeName,s))},lh.Ke=function(t,s){if(lh.ee(t)||!lh.le(t.nodeName))throw new TypeError("expected DOM node");if(s&&!lh.Ze(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},lh.tn=function(t,s){lh.ee(t)},lh.sn=function(t,s){return!(lh.ee(t)||!lh.le(t.tagName))&&(!s||lh.Ze(t.tagName,s))},lh.en=function(t,s){if(lh.ee(t)||!lh.le(t.tagName))throw new TypeError("expected HTML element");if(s&&!lh.Ze(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},lh.nn=function(t,s){lh.ee(t)},lh.rn=function(t){return lh.sn(t,"img")||lh.sn(t,"canvas")||lh.sn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},lh.hn=function(t){if(!lh.rn(t))throw new TypeError("expected drawable")},lh.an=function(t){lh.ee(t)},lh.ln=function(t){return t instanceof ImageData||lh.rn(t)},lh.un=function(t){if(!lh.ln(t))throw new TypeError("expected drawable or image data")},lh.cn=function(t){if(!lh.ee(t)&&!lh.ln(t))throw new TypeError("expected drawable or image data")},lh.fn=function(t){return"string"==typeof t||lh.dn&&t instanceof lh.dn||t instanceof lh.pn},lh.mn=function(t){if(!lh.fn(t))throw new TypeError("expected string-like")},lh.gn=function(t){lh.ee(t)},lh.yn=function(...t){for(let s of t);},lh.wn=function(){throw new Error("must be overridden")},lh.Mn=function(){throw new Error("not yet implemented")},lh.Sn=function(t){return t.constructor===function*(){}.constructor},lh.Tn=function(t){if(!lh.Sn(t))throw new Error("expected generator function")},lh.vn=function(t){return"function"===t[Symbol.iterator]},lh.xn=function(t){if(!lh.vn(t))throw new Error("expected iterable")},lh.bn=function(t){return!lh.ee(t)},lh.ee=function(t){return null==t},lh.Cn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},lh.In=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const ch=Object.getPrototypeOf(Uint8Array);lh.Gn=function(t){return lh.Fe(t,ch)},lh._n=function(t){},lh.En=function(t){lh.An(t,ch)},lh.Dn=function(t,...s){if(!lh.Nn(t,...s))throw new TypeError("unexpected type")},lh.Nn=function(t,...s){for(const i of s)if(lh.Te(t,i))return!0;return!1},lh.An=function(t,s){if(!lh.Te(t,s))throw new TypeError("unexpected type")},lh.Te=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},uh.se=lh.se,uh.ie=lh.ie,uh.he=lh.he,uh.oe=lh.oe,uh.ue=lh.ue,uh.ce=lh.ce,uh.ye=lh.ye,uh.we=lh.we,uh.Ce=lh.Ce,uh.Ie=lh.Ie,uh.Ne=lh.Ne,uh.Oe=lh.Oe,uh.je=lh.je,uh.ze=lh.ze,uh.ee=lh.ee}{let fh=function(t,s){let i=yh.getType(t),e=yh.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},dh=function(t){console.warn("[Defence] "+t+" @",yh.Zi())},ph=function(){if(Ch=-1,Sh.size>0||Th.size>0){let t=[...new Set([...Sh.keys()].map(t=>yh.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Sh.clear(),Th.clear()}},mh=function(t){let s=new Set;for(let i in t)s.add(i);return s},gh=function(t,s){let i=mh(s),e=Ih.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);yh.On(s,[...i]),s.length&&console.warn(`[Defence] '${yh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Ih.set(t,i)};isValidTypeChange=fh,logDefendedObjectWarning=dh,CheckDefendedObjectsUsedCorrectly=ph,getObjectPropertySet=mh,VerifyObjectPropertiesConsistent=gh;const yh=self.Gs,wh=new Map;let Mh;yh.Pn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},yh.Rn=function(t,...s){wh.has(t)||wh.set(t,-1),-1===wh.get(t)&&wh.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),wh.set(t,-1)}))},yh.Ln=function(t){performance.mark(t),Mh||(Mh=new Map),Mh.has(t)||Mh.set(t,{Fn:0,total:0,kn:0,jn:1,toString:function(){return`${t} :: current => ${this.Fn.toPrecision(3)} :: average => ${this.kn.toPrecision(3)} :: calls => ${this.jn}`}})},yh.zn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Mh.get(t);i.Fn=s.duration,i.total+=i.Fn,i.kn=i.total/i.jn,console.log(i.toString()),i.jn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},yh.Zi=function(){return(new Error).stack},yh.Bn=function(){},yh.cast=function(t,s){return t&&t instanceof s?t:null},yh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":yh.Ki(t)?"<number>":yh.le(t)?"<string>":yh.be(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":yh.De(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},yh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},yh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let Sh=new Map,Th=new Map,vh=new WeakMap,xh=new WeakMap;yh.Un={};const bh=new Set(["then","splice"]);yh.Un.get=function(t,s){return s in t||"symbol"==typeof s||bh.has(s)||dh(`Accessed missing property '${s}' from defended object '${yh.getName(t)}', returning undefined`),xh.has(t)&&"symbol"!=typeof s&&!bh.has(s)&&dh(`Accessed property '${s}' on a released object '${yh.getName(t)}'\nObject was originally released at: ${xh.get(t)})\nCall stack at access: `),t[s]},yh.Un.set=function(t,s,i){return s in t||Sh.has(t)||dh(`Set non-existent property '${s}' to '${i}' on defended object '${yh.getName(t)}'`),fh(t[s],i)||Sh.has(t)||dh(`Set '${yh.getType(t[s])}' property '${s}' to type '${yh.getType(i)}' on defended object '${yh.getName(t)}'`),xh.has(t)&&dh(`Set property '${s}' on a released object '${yh.getName(t)}'\nObject was originally released at: ${xh.get(t)})\nCall stack at access: `),t[s]=i,!0},yh.Un.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${yh.getName(t)}'`)},yh.Un.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${yh.getName(t)}'`)},yh.Un.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${yh.getName(t)}'`)};let Ch=-1;yh.$n=class{constructor(){if(!yh.Fs||!yh.Di.zi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,yh.Un);return Sh.set(s,i),Th.set(i,s),vh.set(i,s),-1===Ch&&(Ch=requestAnimationFrame(ph)),i}},yh.Vn=function(t){if(yh.Fs&&yh.Di.zi&&t instanceof yh.$n){if(!Th.has(t))return t;let s=Th.get(t);return Th.delete(t),Sh.delete(s),t}return yh.Ls?Object.seal(t):t},yh.Wn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Th.clear(),Sh.clear(),t}return yh.Fs&&gh(t,i),yh.Vn(i)},yh.Yn=function(t){let s=vh.get(t);s&&xh.set(s,yh.Zi())},yh.Qn=function(t){let s=vh.get(t);return!!s&&!!xh.get(s)};let Ih=new Map;yh.Jn=class{constructor(t){this.Hn="",t&&this.start(t)}start(t){yh.Xs&&(this.Hn=t,performance.mark(this.Hn+"-Start"))}end(){yh.Xs&&(performance.mark(this.Hn+"-End"),performance.measure(this.Hn,this.Hn+"-Start",this.Hn+"-End"))}next(t){yh.Xs&&(this.end(),this.Hn=t,performance.mark(this.Hn+"-Start"))}}}{let Gh=function(t){return 0===t&&1/t<0};isNegativeZero=Gh;const _h=self.Gs,Eh=2*Math.PI,Ah=Math.PI/180,Dh=180/Math.PI;_h.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},_h.qn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},_h.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},_h.Xn=function(t,s,i){return t<s?s:t>i?i:t},_h.Zn=function(t){return(t%=Eh)<0&&(t+=Eh),t},_h.Kn=function(t){return t*Ah},_h.tr=function(t){return t*Dh},_h.sr=function(t,s){return Math.sqrt(t*t+s*s)},_h.ir=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},_h.er=function(t,s,i,e){return _h.sr(i-t,e-s)},_h.nr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},_h.rr=function(t,s,i,e){return Math.atan2(e-s,i-t)},_h.hr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},_h.ar=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?_h.Zn(t+i):_h.Zn(t-i):_h.Zn(s)},_h.lr=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},_h.ur=function(t,s,i,e=0){let n=_h.hr(t,s);const r=Eh*e;return _h.lr(s,t)?_h.Zn(t+(n+r)*i):_h.Zn(t-(n+r)*i)},_h.cr=function(t,s,i,e=0){const n=_h.hr(t,s),r=Eh*e;return _h.lr(s,t)?_h.Zn(t+(n+r)*i):_h.Zn(t+(Eh-n+r)*i)},_h.dr=function(t,s,i,e=0){const n=_h.hr(t,s),r=Eh*e;return _h.lr(s,t)?_h.Zn(t-(-Eh+n-r)*i):_h.Zn(t-(n+r)*i)},_h.pr=function(t,s){const i=_h.hr(t,s);return _h.lr(t,s)?_h.Zn(s-i):_h.Zn(s+i)},_h.Gt=function(t,s,i){return t+i*(s-t)},_h.mr=function(t,s,i){return t===s?0:(i-t)/(s-t)},_h.gr=function(t,s,i,e,n){return _h.Gt(e,n,_h.mr(t,s,i))},_h.yr=function(t,s,i,e){return _h.Gt(_h.Gt(t,s,e),_h.Gt(s,i,e),e)},_h.wr=function(t,s,i,e,n){return _h.Gt(_h.yr(t,s,i,n),_h.yr(s,i,e,n),n)},_h.Mr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},_h.Sr=function(t){return t>0&&!(t-1&t)},_h.Tr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},_h.vr=function(t,s){return Math.round(t*s)/s},_h.br=function(t,s){return Math.floor(t*s)/s},_h.Cr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},_h.Ir=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},_h.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},_h.Gr=function(t,s,i){return _h.Xn(t,0,255)|_h.Xn(s,0,255)<<8|_h.Xn(i,0,255)<<16};const Nh=1024,Oh=1023,Ph=16384,Rh=8191,Lh=-8192;_h._r=function(t,s,i,e){return(t=_h.Xn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=_h.Xn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=_h.Xn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=_h.Xn(Math.floor(1023*e),0,1023)))},_h.Er=function(t,s,i){return _h._r(t,s,i,1)},_h.Ar=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},_h.Dr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},_h.Nr=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},_h.Or=function(t){return Gh(t)?0:t>=0?1:Math.floor(-t%1024)/1023},_h.Pr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Fh=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];_h.Rr=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Fh){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=_h.Pr(t,s);return[t/i,s/i]},_h.Lr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,M=e-s,S=h-n,T=o-r,v=Math.abs(M*S-T*w),x=S*y-T*g;if(Math.abs(x)>v)return!1;const b=w*y-M*g;return Math.abs(b)<=v},_h.Fr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,M=e-s,S=u-a,T=c-l,v=Math.abs(M*S-T*w),x=S*y-T*g;if(Math.abs(x)>v)return!1;const b=w*y-M*g;return Math.abs(b)<=v},_h.kr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.jr(),u=n.zr(),c=n.Br(),f=n.Ur(),d=n.$r(),p=n.Vr(),m=n.Wr(),g=n.Yr();return _h.Fr(t,s,i,e,r,h,o,a,l,u,c,f)||_h.Fr(t,s,i,e,r,h,o,a,c,f,d,p)||_h.Fr(t,s,i,e,r,h,o,a,d,p,m,g)||_h.Fr(t,s,i,e,r,h,o,a,m,g,l,u)},_h.Qr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(_h.Fr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return _h.Fr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};const kh=2,jh=1e-6;_h.Jr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},_h.Hr=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return _h.Jr(t,s,i,e,n-l,r-u,h+l,o+u)},_h.qr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,M=1/(p*y-m*m),S=(y*g-m*w)*M,T=(p*w-m*g)*M;return S>=0&&T>=0&&S+T<=1},_h.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,M=p*g-m*m,S=(g*y-m*w)/M,T=(p*w-m*y)/M;return[1-S-T,S,T]},_h.Zr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const zh=self.Gs;let Bh=null,Uh="";if("undefined"!=typeof document){Bh=document;const Jh=document.querySelector("base");Uh=Jh&&Jh.hasAttribute("href")?Jh.getAttribute("href"):"",Uh&&(Uh.startsWith("/")&&(Uh=Uh.substr(1)),Uh.endsWith("/")||(Uh+="/"))}zh.Kr=function(){return Uh},zh.th=function(){if(!Bh)return"";const t=Bh.location;return zh.sh(t.origin+t.pathname)+Uh},zh.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},zh.ih=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},zh.eh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},zh.nh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},zh.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},zh.hh=function(t){return t.replace(/\\/g,"/")},zh.oh=function(t,s){return s===(t?zh.eh(t).slice(1):"")},zh.ah=function(t,s){let i,e;return zh.Se(t)&&(i=zh.rh(t.name)),zh.le(t)&&(i=zh.rh(t)),zh.Se(s)&&(e=zh.rh(s.name)),zh.le(s)&&(e=zh.rh(s)),i===e},zh.uh=function(t){t=zh.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,fh:r,name:e,root:s,ext:h,dh:s+n+r}},zh.ph=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},zh.mh=function(t){try{t()}catch(t){zh.Ls&&console.warn("Swallowed exception: ",t)}},zh.gh=function(){},zh.Ze=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},zh.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},zh.wh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},zh.Mh=function(t,s){t.length=s},zh.Sh=function(t){t&&0!==t.length&&zh.Mh(t,0)},zh.Th=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];zh.Mh(i,0)}zh.Mh(t,0)}},zh.xh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},zh.bh=function(t,s,i){s|=0;const e=t.length;s<e?zh.Mh(t,s):s>e&&zh.xh(t,s,i)},zh.Ch=function(t,s){zh.Sh(t),zh.On(t,s)},zh.On=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},zh.Ih=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];zh.Mh(t,i)},zh.Gh=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},zh._h=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},zh.Eh=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return zh.Mh(t,e),i},zh.Ah=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return zh.Mh(t,e),i-e},zh.Dh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},zh.Nh=function(t,s){if(!zh.Dh(t,s))throw new RangeError("array index out of bounds")},zh.Oh=function(t){return t.slice()},zh.Ph=function(t,s){let i=[];for(let e of t)if(zh.ge(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else zh.be(e)?i.push(zh.Ph(e,s)):i.push(e);return i},zh.Rh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},zh.Lh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},zh.Fh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},zh.kh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},zh.jh=function(t,s){for(const i of s)t.add(i);return t},zh.zh=function(t){for(let s of t)return s;return null},zh.xor=function(t,s){return!t!=!s},zh.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},zh.Bh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},zh.Uh=function(t,s){return t.length?new Promise((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then(e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let $h=[];zh.$h=function(t){$h.push(t)},zh.Vh=function(){let t=0;for(let s of $h)t+=s();return Math.floor(t)};let Vh=1;const Wh=new Map,Yh=new MessageChannel;Yh.port2.onmessage=function(t){const s=t.data,i=Wh.get(s);Wh.delete(s),i&&i(performance.now())},zh.Wh=function(t){const s=Vh++;return Wh.set(s,t),Yh.port1.postMessage(s),s},zh.Yh=function(t){Wh.delete(t)},zh.Qh=zh.Wh,zh.Jh=function(){return new Promise(t=>zh.Qh(t))};const Qh=new Set;zh.Hh=function(t){const s=self.requestAnimationFrame(async i=>{await zh.Jh(),Qh.has(s)&&(Qh.delete(s),t(i))});return Qh.add(s),s},zh.qh=function(t){Qh.has(t)&&(self.cancelAnimationFrame(t),Qh.delete(t))}}{const Hh=self.Gs;Hh.Xh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Hh.Zh=function(t){return!Hh.Xh(t)},Hh.Kh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Hh.so=function(t,s){return fetch(t,s).then(t=>(Hh.Kh(t),t))},Hh.io=function(t){return Hh.so(t).then(t=>t.text())},Hh.eo=function(t){return Hh.so(t).then(t=>t.json())},Hh.no=function(t){return Hh.so(t).then(t=>t.blob())},Hh.ro=function(t){return Hh.so(t).then(t=>t.arrayBuffer())},Hh.ho=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},Hh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},Hh.ao=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},Hh.lo=function(t){return Hh.ao(t).then(t=>JSON.parse(t))},Hh.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await Hh.ho(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},Hh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},Hh.fo=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=Hh.Xn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},Hh.do=function(t,s,i){const e=Hh.co(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),Hh.fo(e,s,i)},Hh.po=function(t,s,i){if(Hh.Di.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>Hh.do(t,s,i));if(Hh.Di.ImageBitmap)return createImageBitmap(t).then(t=>Hh.do(t,s,i));{const e=Hh.co(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),Hh.fo(e,s,i)}},Hh.mo=function(t,s){t.clear();for(const i of s)t.add(i)},Hh.yo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},Hh.wo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},Hh.Mo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Hh.So=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Hh.To=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},Hh.vo=function(t){return"object"==typeof t&&"function"==typeof t.next},Hh.xo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let qh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},Xh=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};padTwoDigits=qh,hueToRGB=Xh;const Zh=self.Gs,Kh=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,to=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;Zh.bo=class{constructor(t,s,i,e){this.Co=NaN,this.Io=NaN,this.Go=NaN,this._o=NaN,this.Co=0,this.Io=0,this.Go=0,this._o=0,t instanceof Zh.bo?this.set(t):this.Eo(t||0,s||0,i||0,e||0)}Ao(t,s,i){return this.Co=+t,this.Io=+s,this.Go=+i,this.Xn(),this}Eo(t,s,i,e){return this.Co=+t,this.Io=+s,this.Go=+i,this._o=+e,this.Xn(),this}set(t){return this.Co=t.Co,this.Io=t.Io,this.Go=t.Go,this._o=t._o,this}M(t){return this.set(t)}add(t){this.Co+=t.Co,this.Io+=t.Io,this.Go+=t.Go,this._o+=t._o,this.Xn()}Do(t,s,i,e=0){this.Co+=+t,this.Io+=+s,this.Go+=+i,this._o+=+e,this.Xn()}No(t){this.Oo(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Po(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Ro(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Lo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Xn()}Fo(t){this.Co=t.Co,this.Io=t.Io,this.Go=t.Go}Oo(t){this.Co=Zh.Xn(+t,0,1)}ko(){return this.Co}Po(t){this.Io=Zh.Xn(+t,0,1)}jo(){return this.Io}Ro(t){this.Go=Zh.Xn(+t,0,1)}zo(){return this.Go}Lo(t){this._o=Zh.Xn(+t,0,1)}Bo(){return this._o}clone(){return Zh.Wn(Zh.bo,this.Co,this.Io,this.Go,this._o)}toArray(){return[this.Co,this.Io,this.Go,this._o]}Uo(){return new Float64Array(this.toArray())}$o(t,s){t[s++]=this.Co,t[s++]=this.Io,t[s++]=this.Go,t[s]=this._o}Vo(t,s){const i=this.Co,e=this.Io,n=this.Go,r=this._o;for(let h=0;h<4;++h)t[s++]=i,t[s++]=e,t[s++]=n,t[s++]=r}Wo(t,s){t[s++]=this.Co,t[s++]=this.Io,t[s]=this.Go}equals(t){return this.Co===t.Co&&this.Io===t.Io&&this.Go===t.Go&&this._o===t._o}Yo(t){return this.Co===t.Co&&this.Io===t.Io&&this.Go===t.Go}Qo(t,s,i){return this.Co===t&&this.Io===s&&this.Go===i}Jo(t,s,i,e){return this.Co===t&&this.Io===s&&this.Go===i&&this._o===e}Ho(t,s){return t[s]===Math.fround(this.Co)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Go)&&t[s+3]===Math.fround(this._o)}qo(t,s){return t[s]===Math.fround(this.Co)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Go)}multiply(t){this.Co*=t.Co,this.Io*=t.Io,this.Go*=t.Go,this._o*=t._o}Xo(t){this.Co*=t,this.Io*=t,this.Go*=t,this._o*=t}Zo(){return this.Co*=this._o,this.Io*=this._o,this.Go*=this._o,this}Ko(){return this.Co/=this._o,this.Io/=this._o,this.Go/=this._o,this}Xn(){return this.Co=Zh.Xn(this.Co,0,1),this.Io=Zh.Xn(this.Io,0,1),this.Go=Zh.Xn(this.Go,0,1),this._o=Zh.Xn(this._o,0,1),this}ta(t){this.Co=Zh.Ar(t),this.Io=Zh.Dr(t),this.Go=Zh.Nr(t),this._o=Zh.Or(t)}sa(t,s,i){return`rgb(${100*(Zh.te(t)?t:this.ko())}%, ${100*(Zh.te(s)?s:this.jo())}%, ${100*(Zh.te(i)?i:this.zo())}%)`}ia(t,s,i,e){return`rgba(${100*(Zh.te(t)?t:this.ko())}%, ${100*(Zh.te(s)?s:this.jo())}%, ${100*(Zh.te(i)?i:this.zo())}%, ${Zh.te(e)?e:this.Bo()})`}ea(t=!1){const s=Math.round(255*this.ko()),i=Math.round(255*this.jo()),e=Math.round(255*this.zo());let n="#"+qh(s.toString(16))+qh(i.toString(16))+qh(e.toString(16));return t&&(n+=qh(Math.round(255*this.Bo()).toString(16))),n}na(t){if("string"!=typeof t)return!1;let s,i,e,n;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length||4===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15,4===t.length&&(n=parseInt(t[3],16)/15);else{if(6!==t.length&&8!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255,8===t.length&&(n=parseInt(t.substr(6,2),16)/255)}return!!(Number.isFinite(s)&&Number.isFinite(i)&&Number.isFinite(e))&&(this.Ao(s,i,e),Number.isFinite(n)?this.Lo(n):this.Lo(1),!0)}ra(){return`${Math.round(255*this.ko())}, ${Math.round(255*this.jo())}, ${Math.round(255*this.zo())}`}ha(){return[Math.round(255*this.ko()),Math.round(255*this.jo()),Math.round(255*this.zo())]}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Po(e),isFinite(n)&&this.Ro(n),this.Lo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Po(e),isFinite(n)&&this.Ro(n),this.Lo(1),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Po(e),isFinite(n)&&this.Ro(n),isFinite(r)&&this.Lo(r),!0}ua(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Po(e),isFinite(n)&&this.Ro(n),isFinite(r)&&this.Lo(r),!0}ca(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.aa(t):this.oa(t);if(t.startsWith("rgba("))return t.includes("%")?this.ua(t):this.la(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.fa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.aa(t):4===s.length&&this.ua(t):3===s.length?this.oa(t):4===s.length&&this.la(t)}}return this.na(t)}toJSON(){return[this.Co,this.Io,this.Go,this._o]}da(t,s,i,e){let n,r,h;if(t%=360,s=Zh.Xn(s,0,100),i=Zh.Xn(i,0,100),e=Zh.Xn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=Xh(o,e,t+1/3),r=Xh(o,e,t),h=Xh(o,e,t-1/3)}return this.Oo(n),this.Po(r),this.Ro(h),this.Lo(e),this}fa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Kh.exec(s),e=to.exec(s);return i&&4===i.length?(this.da(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.da(+i[1],+i[2],+i[3],+i[4]),0))}pa(){const t=this.Co,s=this.Io,i=this.Go,e=this._o;return`hsla(${Zh.bo.ma(t,s,i)}, ${Zh.bo.ga(t,s,i)}%, ${Zh.bo.ya(t,s,i)}%, ${e})`}wa(){const t=this.Co,s=this.Io,i=this.Go;return[Zh.bo.ma(t,s,i),Zh.bo.ga(t,s,i),Zh.bo.ya(t,s,i),this._o]}Ma(t){Array.isArray(t)&&(t.length<3||(this.Co=t[0],this.Io=t[1],this.Go=t[2],t.length>=4?this._o=t[3]:this._o=1))}set r(t){this.Oo(t)}get r(){return this.ko()}set g(t){this.Po(t)}get g(){return this.jo()}set b(t){this.Ro(t)}get b(){return this.zo()}set a(t){this.Lo(t)}get a(){return this.Bo()}Sa(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Po(s);break;case 2:this.Ro(s);break;case 3:this.Lo(s);break;default:throw new RangeError("invalid color index")}}Ta(t){switch(t){case 0:return this.ko();case 1:return this.jo();case 2:return this.zo();case 3:return this.Bo();default:throw new RangeError("invalid color index")}}static va(t,s){let i,e;if(Array.isArray(t))i=new Zh.bo,i.Ma(t);else{if(!(t instanceof Zh.bo))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new Zh.bo,e.Ma(s);else{if(!(s instanceof Zh.bo))throw new Error("unexpected type");e=s}return i.equals(e)}static xa(t,s){return Zh.Xn(Math.max(t,s)-Math.min(t,s),0,1)}static ba(t,s){const i=new Zh.bo;return i.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Po(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Ro(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Lo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static Ca(t,s){const i=new Zh.bo(0,0,0,1);return i.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Po(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Ro(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ga(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ya(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},Zh.bo.Ia=Object.freeze(Zh.Wn(Zh.bo,1,1,1,1)),Zh.bo.Ga=Object.freeze(Zh.Wn(Zh.bo,0,0,0,1)),Zh.bo._a=Object.freeze(Zh.Wn(Zh.bo,0,0,0,0))}{const so=self.Gs;so.Ea=class{constructor(t,s){this.Aa=0,this.Da=0,t instanceof so.Ea?this.M(t):this.set(t||0,s||0)}set(t,s){this.Aa=+t,this.Da=+s}M(t){this.Aa=t.Aa,this.Da=t.Da}equals(t){return this.Aa===t.Aa&&this.Da===t.Da}Na(t,s){return this.Aa===t&&this.Da===s}Ho(t,s){return t[s]===Math.fround(this.Aa)&&t[s+1]===Math.fround(this.Da)}Oa(t){this.Aa=+t}Pa(){return this.Aa}Ra(t){this.Da=+t}La(){return this.Da}toArray(){return[this.Aa,this.Da]}Uo(){return new Float64Array(this.toArray())}$o(t,s){t[s++]=this.Aa,t[s]=this.Da}offset(t,s){this.Aa+=+t,this.Da+=+s}scale(t,s){this.Aa*=t,this.Da*=s}Mt(t,s){this.Aa/=t,this.Da/=s}round(){this.Aa=Math.round(this.Aa),this.Da=Math.round(this.Da)}floor(){this.Aa=Math.floor(this.Aa),this.Da=Math.floor(this.Da)}ceil(){this.Aa=Math.ceil(this.Aa),this.Da=Math.ceil(this.Da)}angle(){return so.rr(0,0,this.Aa,this.Da)}Fa(){return this.Aa*this.Aa+this.Da*this.Da}length(){return so.sr(this.Aa,this.Da)}ka(t,s){const i=this.Aa*s-this.Da*t;this.Da=this.Da*s+this.Aa*t,this.Aa=i}rotate(t){0!==t&&this.ka(Math.sin(t),Math.cos(t))}ja(t,s,i){0===t||s===this.Aa&&i===this.Da||(this.Aa-=s,this.Da-=i,this.ka(Math.sin(t),Math.cos(t)),this.Aa+=+s,this.Da+=+i)}move(t,s){0!==s&&(this.Aa+=Math.cos(t)*s,this.Da+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Aa/=t,this.Da/=t)}Xn(t,s){this.Aa=so.Xn(this.Aa,t,s),this.Da=so.Xn(this.Da,t,s)}Ct(t){return this.Aa*t.Aa+this.Da*t.Da}reverse(){this.Aa=-this.Aa,this.Da=-this.Da}za(){let t=this.Aa;return this.Aa=this.Da,this.Da=-t,this}}}{const io=self.Gs;io.Rect=class{constructor(t,s,i,e){this.Ba=NaN,this.Ua=NaN,this.$a=NaN,this.Va=NaN,this.Ba=0,this.Ua=0,this.$a=0,this.Va=0,t instanceof io.Rect?this.M(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Ba=+t,this.Ua=+s,this.$a=+i,this.Va=+e}Wa(t,s,i,e){t=+t,s=+s,this.Ba=t,this.Ua=s,this.$a=t+ +i,this.Va=s+ +e}M(t){this.Ba=+t.Ba,this.Ua=+t.Ua,this.$a=+t.$a,this.Va=+t.Va}clone(){return new io.Rect(this.Ba,this.Ua,this.$a,this.Va)}static Ya(t,s){const i=new io.Rect;return i.Qa(Math.min(t.Ba,s.Ba)),i.Ja(Math.min(t.Ua,s.Ua)),i.Ha(Math.max(t.$a,s.$a)),i.qa(Math.max(t.Va,s.Va)),i}static Xa(t){return new io.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Ba===t.Ba&&this.Ua===t.Ua&&this.$a===t.$a&&this.Va===t.Va}Za(t,s,i,e){return this.Ba===t&&this.Ua===s&&this.width()===i&&this.height()===e}Ho(t,s){return t[s]===Math.fround(this.Ba)&&t[s+1]===Math.fround(this.Ua)&&t[s+2]===Math.fround(this.$a)&&t[s+3]===Math.fround(this.Va)}Qa(t){this.Ba=+t}Ka(){return this.Ba}Ja(t){this.Ua=+t}tl(){return this.Ua}Ha(t){this.$a=+t}sl(){return this.$a}qa(t){this.Va=+t}il(){return this.Va}toArray(){return[this.Ba,this.Ua,this.$a,this.Va]}Uo(){return new Float64Array(this.toArray())}el(){return new DOMRect(this.Ba,this.Ua,this.width(),this.height())}static nl(t){return io.Wn(io.Rect,t.left,t.top,t.right,t.bottom)}$o(t,s){t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=this.$a,t[s]=this.Va}rl(t,s){t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=this.$a,t[s++]=this.Ua,t[s++]=this.$a,t[s++]=this.Va,t[s++]=this.Ba,t[s]=this.Va}hl(t,s,i){t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=i,t[s++]=this.$a,t[s++]=this.Ua,t[s++]=i,t[s++]=this.$a,t[s++]=this.Va,t[s++]=i,t[s++]=this.Ba,t[s++]=this.Va,t[s]=i}width(){return this.$a-this.Ba}height(){return this.Va-this.Ua}ol(){return(this.Ba+this.$a)/2}al(){return(this.Ua+this.Va)/2}offset(t,s){t=+t,s=+s,this.Ba+=t,this.Ua+=s,this.$a+=t,this.Va+=s}offsetLeft(t){this.Ba+=+t}offsetTop(t){this.Ua+=+t}ll(t){this.$a+=+t}ul(t){this.Va+=+t}cl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Ua<this.Va?this.Ba<this.$a?this.Va=this.Ua+this.width():this.Va=this.Ua-this.width():this.Ba<this.$a?this.Va=this.Ua-this.width():this.Va=this.Ua+this.width()}fl(t,s){t=+t,s=+s,this.Ba-=t,this.Ua-=s,this.$a+=t,this.Va+=s}dl(t,s){t=+t,s=+s,this.Ba+=t,this.Ua+=s,this.$a-=t,this.Va-=s}multiply(t,s){this.Ba*=t,this.Ua*=s,this.$a*=t,this.Va*=s}Mt(t,s){this.Ba/=t,this.Ua/=s,this.$a/=t,this.Va/=s}pl(t){this.Ba=+t-this.Ba,this.$a=+t-this.$a}ml(t){this.Ua=+t-this.Ua,this.Va=+t-this.Va}gl(t,s){const i=this.width(),e=this.height(),n=this.Ka()+i*t,r=this.tl()+e*s;this.Wa(n-e*s,r-i*t,e,i)}yl(){const t=this.Ba;this.Ba=this.$a,this.$a=t}wl(){const t=this.Ua;this.Ua=this.Va,this.Va=t}Ml(t){const s=this.Ua;this.Ua=+t-this.Va,this.Va=+t-s}round(){this.Ba=Math.round(this.Ba),this.Ua=Math.round(this.Ua),this.$a=Math.round(this.$a),this.Va=Math.round(this.Va)}Sl(){this.Ba=Math.ceil(this.Ba),this.Ua=Math.ceil(this.Ua),this.$a=Math.floor(this.$a),this.Va=Math.floor(this.Va)}Tl(){this.Ba=Math.floor(this.Ba),this.Ua=Math.floor(this.Ua),this.$a=Math.ceil(this.$a),this.Va=Math.ceil(this.Va)}floor(){this.Ba=Math.floor(this.Ba),this.Ua=Math.floor(this.Ua),this.$a=Math.floor(this.$a),this.Va=Math.floor(this.Va)}ceil(){this.Ba=Math.ceil(this.Ba),this.Ua=Math.ceil(this.Ua),this.$a=Math.ceil(this.$a),this.Va=Math.ceil(this.Va)}Xn(t,s,i,e){this.Ba=Math.max(this.Ba,+t),this.Ua=Math.max(this.Ua,+s),this.$a=Math.min(this.$a,+i),this.Va=Math.min(this.Va,+e)}vl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Ba=io.Xn(this.Ba,t,i),this.Ua=io.Xn(this.Ua,s,e),this.$a=io.Xn(this.$a,t,i),this.Va=io.Xn(this.Va,s,e)}normalize(){this.Ba>this.$a&&this.yl(),this.Ua>this.Va&&this.wl()}xl(t){return!(t.$a<this.Ba||t.Va<this.Ua||t.Ba>this.$a||t.Ua>this.Va)}bl(t,s,i){return!(t.$a+s<this.Ba||t.Va+i<this.Ua||t.Ba+s>this.$a||t.Ua+i>this.Va)}Cl(t,s){return t>=this.Ba&&t<=this.$a&&s>=this.Ua&&s<=this.Va}Il(t){return t.Ba>=this.Ba&&t.Ua>=this.Ua&&t.$a<=this.$a&&t.Va<=this.Va}Gl(t){t.Ba<this.Ba&&(this.Ba=+t.Ba),t.Ua<this.Ua&&(this.Ua=+t.Ua),t.$a>this.$a&&(this.$a=+t.$a),t.Va>this.Va&&(this.Va=+t.Va)}_l(t){this.Ba=io.Gt(t.Ba,t.$a,this.Ba),this.Ua=io.Gt(t.Ua,t.Va,this.Ua),this.$a=io.Gt(t.Ba,t.$a,this.$a),this.Va=io.Gt(t.Ua,t.Va,this.Va)}}}{const eo=self.Gs;eo.El=class{constructor(t,s,i,e,n,r,h,o){this.Al=NaN,this.Dl=NaN,this.Nl=NaN,this.Ol=NaN,this.Pl=NaN,this.Rl=NaN,this.Ll=NaN,this.Fl=NaN,this.Al=0,this.Dl=0,this.Nl=0,this.Ol=0,this.Pl=0,this.Rl=0,this.Ll=0,this.Fl=0,t instanceof eo.El?this.M(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Al=+t,this.Dl=+s,this.Nl=+i,this.Ol=+e,this.Pl=+n,this.Rl=+r,this.Ll=+h,this.Fl=+o}kl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}M(t){this.Al=t.Al,this.Dl=t.Dl,this.Nl=t.Nl,this.Ol=t.Ol,this.Pl=t.Pl,this.Rl=t.Rl,this.Ll=t.Ll,this.Fl=t.Fl}equals(t){return this.Al===t.Al&&this.Dl===t.Dl&&this.Nl===t.Nl&&this.Ol===t.Ol&&this.Pl===t.Pl&&this.Rl===t.Rl&&this.Ll===t.Ll&&this.Fl===t.Fl}jl(t){this.Al=+t}jr(){return this.Al}zl(t){this.Dl=+t}zr(){return this.Dl}Bl(t){this.Nl=+t}Br(){return this.Nl}Ul(t){this.Ol=+t}Ur(){return this.Ol}$l(t){this.Pl=+t}$r(){return this.Pl}Vl(t){this.Rl=+t}Vr(){return this.Rl}Wl(t){this.Ll=+t}Wr(){return this.Ll}Yl(t){this.Fl=+t}Yr(){return this.Fl}Ql(){return new DOMQuad(new DOMPoint(this.Al,this.Dl),new DOMPoint(this.Nl,this.Ol),new DOMPoint(this.Pl,this.Rl),new DOMPoint(this.Ll,this.Fl))}static Jl(t){return eo.Wn(eo.El,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Al,this.Dl,this.Nl,this.Ol,this.Pl,this.Rl,this.Ll,this.Fl]}Uo(){return new Float64Array(this.toArray())}$o(t,s){t[s++]=this.Al,t[s++]=this.Dl,t[s++]=this.Nl,t[s++]=this.Ol,t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=this.Ll,t[s]=this.Fl}Hl(t,s,i){t[s++]=this.Al,t[s++]=this.Dl,t[s++]=i,t[s++]=this.Nl,t[s++]=this.Ol,t[s++]=i,t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=i,t[s++]=this.Ll,t[s++]=this.Fl,t[s]=i}offset(t,s){t=+t,s=+s,this.Al+=t,this.Dl+=s,this.Nl+=t,this.Ol+=s,this.Pl+=t,this.Rl+=s,this.Ll+=t,this.Fl+=s}round(){this.Al=Math.round(this.Al),this.Dl=Math.round(this.Dl),this.Nl=Math.round(this.Nl),this.Ol=Math.round(this.Ol),this.Pl=Math.round(this.Pl),this.Rl=Math.round(this.Rl),this.Ll=Math.round(this.Ll),this.Fl=Math.round(this.Fl)}floor(){this.Al=Math.floor(this.Al),this.Dl=Math.floor(this.Dl),this.Nl=Math.floor(this.Nl),this.Ol=Math.floor(this.Ol),this.Pl=Math.floor(this.Pl),this.Rl=Math.floor(this.Rl),this.Ll=Math.floor(this.Ll),this.Fl=Math.floor(this.Fl)}ceil(){this.Al=Math.ceil(this.Al),this.Dl=Math.ceil(this.Dl),this.Nl=Math.ceil(this.Nl),this.Ol=Math.ceil(this.Ol),this.Pl=Math.ceil(this.Pl),this.Rl=Math.ceil(this.Rl),this.Ll=Math.ceil(this.Ll),this.Fl=Math.ceil(this.Fl)}ql(t){this.Al=t.Ba,this.Dl=t.Ua,this.Nl=t.$a,this.Ol=t.Ua,this.Pl=t.$a,this.Rl=t.Va,this.Ll=t.Ba,this.Fl=t.Va}Xl(t,s){0===s?this.ql(t):this.Zl(t,Math.sin(s),Math.cos(s))}Zl(t,s,i){const e=t.Ba*s,n=t.Ua*s,r=t.$a*s,h=t.Va*s,o=t.Ba*i,a=t.Ua*i,l=t.$a*i,u=t.Va*i;this.Al=o-n,this.Dl=a+e,this.Nl=l-n,this.Ol=a+r,this.Pl=l-h,this.Rl=u+r,this.Ll=o-h,this.Fl=u+e}Kl(t){t.set(Math.min(this.Al,this.Nl,this.Pl,this.Ll),Math.min(this.Dl,this.Ol,this.Rl,this.Fl),Math.max(this.Al,this.Nl,this.Pl,this.Ll),Math.max(this.Dl,this.Ol,this.Rl,this.Fl))}Cl(t,s){let i=this.Nl-this.Al,e=this.Ol-this.Dl;const n=this.Pl-this.Al,r=this.Rl-this.Dl,h=t-this.Al,o=s-this.Dl;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Ll-this.Al,e=this.Fl-this.Dl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}ol(){return(this.Al+this.Nl+this.Pl+this.Ll)/4}al(){return(this.Dl+this.Ol+this.Rl+this.Fl)/4}tu(t,s,i,e){return!(!this.Cl(t,s)&&!this.Cl(i,e))||eo.kr(t,s,i,e,this)}su(t){let s=t.ol(),i=t.al();if(this.Cl(s,i))return!0;if(s=this.ol(),i=this.al(),t.Cl(s,i))return!0;const e=this.Al,n=this.Dl,r=this.Nl,h=this.Ol,o=this.Pl,a=this.Rl,l=this.Ll,u=this.Fl;return eo.kr(e,n,r,h,t)||eo.kr(r,h,o,a,t)||eo.kr(o,a,l,u,t)||eo.kr(l,u,e,n,t)}iu(){const t=this.Al,s=this.Dl;this.Al=this.Nl,this.Dl=this.Ol,this.Nl=this.Pl,this.Ol=this.Rl,this.Pl=this.Ll,this.Rl=this.Fl,this.Ll=t,this.Fl=s}eu(){this.nu(0,2),this.nu(1,3),this.nu(6,4),this.nu(7,5)}ru(){this.nu(0,6),this.nu(1,7),this.nu(2,4),this.nu(3,5)}hu(){this.nu(2,6),this.nu(3,7)}nu(t,s){const i=this.ou(t);this.au(t,this.ou(s)),this.au(s,i)}ou(t){switch(t){case 0:return this.Al;case 1:return this.Dl;case 2:return this.Nl;case 3:return this.Ol;case 4:return this.Pl;case 5:return this.Rl;case 6:return this.Ll;case 7:return this.Fl;default:throw new RangeError("invalid quad point index")}}au(t,s){switch(s=+s,t){case 0:this.Al=s;break;case 1:this.Dl=s;break;case 2:this.Nl=s;break;case 3:this.Ol=s;break;case 4:this.Pl=s;break;case 5:this.Rl=s;break;case 6:this.Ll=s;break;case 7:this.Fl=s;break;default:throw new RangeError("invalid quad point index")}}Mt(t,s){this.Al/=t,this.Dl/=s,this.Nl/=t,this.Ol/=s,this.Pl/=t,this.Rl/=s,this.Ll/=t,this.Fl/=s}}}{const no=self.Gs,ro=self.assert,ho=[0,0,1,0,1,1,0,1],oo=no.Wn(no.El);no.lu=class extends no.$n{constructor(t,s=!0){super(),t||(t=ho),this.uu=Float64Array.from(t),this.cu=new no.Rect,this.fu=!0,this.du=s}Yn(){}pu(){return this.uu}mu(){return this.uu.length/2}gu(t){this.uu.length===t.length?this.uu.set(t):this.uu=Float64Array.from(t),this.fu=!0}yu(){this.gu(ho)}M(t){this.gu(t.uu)}wu(){this.fu=!0}Mu(){if(!this.fu)return;const t=this.uu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.cu.set(s,i,e,n),this.fu=!1}ql(t,s,i){let e=this.uu;8!==e.length&&(e=new Float64Array(8),this.uu=e),e[0]=t.Ka()-s,e[1]=t.tl()-i,e[2]=t.sl()-s,e[3]=t.tl()-i,e[4]=t.sl()-s,e[5]=t.il()-i,e[6]=t.Ka()-s,e[7]=t.il()-i,this.cu.M(t),0===s&&0===i||this.cu.offset(-s,-i),this.fu=!1}Su(t,s,i){oo.M(t),oo.offset(s,i),this.gu(oo.toArray()),this.fu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.Tu(t,s,e,n)}Tu(t,s,i,e){const n=this.uu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.fu=!0}offset(t,s){const i=this.uu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}Cl(t,s){const i=this.uu;if(t===i[0]&&s===i[1])return!0;this.Mu();const e=this.cu,n=e.Ka()-110,r=e.tl()-101,h=e.sl()+131,o=e.il()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const M=(e+2)%w,S=i[e],T=i[e+1],v=i[M],x=i[M+1];no.Fr(n,r,t,s,a,u,l,c,S,T,v,x)&&++g,no.Fr(h,o,t,s,f,p,d,m,S,T,v,x)&&++y}return g%2==1||y%2==1}vu(t,s,i){const e=t.uu,n=this.uu;if(this.Cl(e[0]+s,e[1]+i))return!0;if(t.Cl(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(no.Fr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}tu(t,s,i,e,n,r){if(this.Cl(i-t,e-s))return!0;if(this.Cl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.uu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(no.Fr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}eu(t){const s=this.uu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.fu=!0}ru(t){const s=this.uu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.fu=!0}hu(){const t=this.uu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.fu=!0}xu(){const t=this.uu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.mu()}bu(){const t=this.uu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.mu()}Cu(){return this.uu}Iu(){return this.mu()}Gu(){return this.du}}}{const ao=self.Gs;ao._u=class extends ao.$n{constructor(t){if(super(),this.Eu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Yn(){this.Au(),this.Eu=null}Du(){return 0===this.Eu.size}Au(){const t=this.Eu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Eu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}Ys(t,s){const i=this.Eu.get(t);return i?i.get(s):i}Ws(t,s){const i=this.Eu.get(t);return!!i&&i.has(s)}Nu(t,s){const i=this.Eu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Ou(t){const s=this.Eu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Pu(){let t=0;for(const s of this.Eu.values())t+=s.size;return t}*values(){for(const t of this.Eu.values())yield*t.values()}*Ru(){for(const[t,s]of this.Eu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Eu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const lo=self.Gs;lo.Lu=class extends lo.$n{constructor(){super(),this.Fu=new Set,this.ku=[],this.ju=!1}Yn(){this.Au()}Au(){this.Fu.clear(),lo.Sh(this.ku),this.ju=!1}zu(t){this.Fu.has(t)||(this.Fu.add(t),this.ju||this.ku.push(t))}Ws(t){return this.Fu.has(t)}Nu(t){this.Fu.delete(t)&&(this.ju=!0)}Pu(){return this.Fu.size}Du(){return 0===this.Fu.size}Bu(){return this.ju&&(this.Uu(),this.ju=!1),this.ku}Uu(){const t=this.ku;lo.Sh(t);for(const s of this.Fu)t.push(s)}}}{const uo=self.Gs,co=new Map,fo=new Map,po=new Map,mo=new Map,go=new Map,yo=new Map,wo=new Map,Mo=new Map,So=new Map;So.set("linear","noease"),So.set("default","noease");const To=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],vo=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],xo=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.$u=class t{constructor(){}static Vu(){return"default"}static Wu(){return"noease"}static Yu(t){return xo.get(t)}static Qu(s,...i){let e,n;this.Ju(),s?(po.has(s)||po.set(s,new Map),e=po.get(s),n=[...e.keys()].filter(i=>!t.Hu(i,s)||t.Hu(i,s).transition.qu())):(e=go,n=[...e.keys()]);const r=n.sort();return[...fo.keys()].concat(r).filter(t=>!i.includes(t))}static Xu(){this.Ju();const t=[...go.keys()];return t.sort(),[...fo.keys()].concat(t)}static Zu(){this.Ju();const t=[...go.keys()];return t.sort(),t}static Ku(t){for(const s of To)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of vo)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static tc(t){return this.Ju(),[...fo.keys()].includes(t)}static sc(s){const i=So.get(s);return i?co.get(i):t.tc(s)?co.get(s):wo.has(s)?wo.get(s):void 0}static ec(t){return this.Ju(),Mo.get(t)}static nc(s,i){this.Ju();const e=t.sc(s);if(e)return e;if(!i)throw new Error("missing ease function");return po.get(i).get(s)}static Hu(t,s){this.Ju();const i=mo.get(s);if(i)return i.get(t)}static rc(s,i){return this.Ju(),!!t.sc(s)||!!po.get(i).get(s)}static hc(s){this.Ju();return t.sc(s)||go.get(s)}static oc(t){return this.Ju(),yo.get(t)}static ac(t){return this.Ju(),this.Xu()[t]}static lc(t,s){return this.Ju(),this.Qu(s).indexOf(t)}static uc(t){return this.lc(t)}static Ju(){0===co.size&&(this.cc("default",()=>{}),this.cc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.cc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.cc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.cc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.cc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.cc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.cc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.cc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.cc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.cc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.cc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.cc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.cc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.cc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.cc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.cc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.cc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.cc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.cc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.cc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.cc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.cc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.fc("cubicbezier",this.dc),this.fc("spline",this.mc))}static cc(s,i,e=!1){if("function"==typeof i)t.yc(s,i,"predefined");else{if(!uo.be(i))throw new Error("unexpected arguments");if(self.wc){const n=uo.Wn(self.wc,s,e);n.Mc(i),t.yc(s,(t,s,i,e)=>n.Sc(t,s,i,e),"predefined"),Mo.set(s,n)}else{const n=uo.Wn(uo.Tc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.vc(e),t.yc(s,(t,s,i,e)=>n.Sc(t,s,i,e),"predefined")}}}static fc(s,i){t.yc(s,i,"private")}static xc(s,i,e,n){this.Ju(),t.yc(s,i,"custom",e,n)}static bc(t,s){if(this.tc(t))return;if([...wo.keys()].includes(t))return;const i=po.get(s);i&&i.delete(t);const e=mo.get(s);e&&e.delete(t)}static yc(t,s,i,e,n){switch(i){case"predefined":co.set(t,s),fo.set(t,s);break;case"custom":e?(po.has(e)||po.set(e,new Map),mo.has(e)||mo.set(e,new Map),po.get(e).set(t,s),mo.get(e).set(t,n)):(go.set(t,s),yo.set(t,n));break;case"private":co.set(t,s),wo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Cc(t,s,i,e){return 0===e?s:i*t/e+s}static dc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static mc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=Ro(t,s,e,r,o,l),c=Ao(i,n,h,a),f=Do(i,n,h,a),d=No(i,n,h,a);return Oo(u,c,f,d)}static Ic(t,s,i,e){const n=[],r=Ao(t,s,i,e),h=Do(t,s,i,e),o=No(t,s,i,e);for(let t=0;t<bo;++t){const s=Oo(t*Co,r,h,o);n.push(s)}return n}};const bo=11,Co=1/(bo-1),Io=4,Go=.01,_o=1e-7,Eo=10,Ao=(t,s,i,e)=>e-3*i+3*s-t,Do=(t,s,i,e)=>3*i-6*s+3*t,No=(t,s,i,e)=>3*(s-t),Oo=(t,s,i,e)=>((s*t+i)*t+e)*t,Po=(t,s,i,e)=>3*s*t*t+2*i*t+e,Ro=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=bo-1;for(r[bo-1];o!=l&&a<=t;)o++,a=r[o],h+=Co;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Co;const c=Ao(s,i,e,n),f=Do(s,i,e,n),d=No(s,i,e,n),p=Po(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Oo(u,c,f,d)-t)/Po(u,c,f,d);return u}{let s,i,e=h,n=h+Co,r=0;do{u=e+(n-e)/2;let h=Oo(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let Lo=function(t){Fo.le(t)};RequireStringOrNumber=Lo;const Fo=self.Gs;Fo.Gc=class{constructor(t){this._c=[],this.Hn=t||"",this.Ec=0}Yn(){this.Au(),this._c=null}Ac(){return this.Hn}Au(){Fo.Th(this._c),this.Ec=0}Dc(){return this.Ec}Nc(t=Math.random()*this.Dc()){let s=0;for(const[i,e]of this._c)if(s+=i,t<s)return e;return 0}Oc(){return!!this._c.length}Pc(t,s){Lo(s),this.Ec+=t,this._c.push([t,s])}Rc(t,s){Lo(s);const i=0===t;for(let e=0;e<this._c.length;e++){const n=this._c[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this._c.splice(e,1),this.Ec-=n[0];break}}}Lc(){return JSON.stringify(this._c)}static Fc(t,s){const i=new Fo.Gc(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Pc(s,e)}return i}}}{const ko=self.Gs;let jo=0;ko.kc=class{constructor(t,s){this.jc=t,this.zc=s,this.Bc=jo++,this.jc.Uc("runtime","screen-reader-text",{type:"create",id:this.Bc,text:this.zc})}Yn(){this.jc.Uc("runtime","screen-reader-text",{type:"release",id:this.Bc}),this.jc=null,this.zc="",this.Bc=-1}$c(t){this.zc!==t&&(this.zc=t,this.jc.Uc("runtime","screen-reader-text",{type:"update",id:this.Bc,text:this.zc}))}}}{const zo=self.Gs;zo.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Vc=!1,this.Wc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Wc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Vc=!0}}}{const Bo=self.Gs,Uo=self.assert;Bo.Event.Yc=class extends Bo.$n{constructor(t){super(),this.Qc=t,this.Jc=[],this.Hc=new Set,this.qc=[],this.Xc=new Set,this.Zc=0,this.Kc=[]}Yn(){this.Zc>0||(Bo.Sh(this.Jc),this.Hc.clear(),Bo.Sh(this.qc),this.Xc.clear(),Bo.Sh(this.Kc),Bo.Yn(this))}tf(t,s){if(this.sf())this.Kc.push({if:"add",ef:t,capture:s});else if(s){if(this.Hc.has(t))return;this.Jc.push(t),this.Hc.add(t)}else{if(this.Xc.has(t))return;this.qc.push(t),this.Xc.add(t)}}nf(t,s){this.sf()?this.Kc.push({if:"remove",ef:t,capture:s}):s?this.Hc.has(t)&&(this.Hc.delete(t),Bo.Gh(this.Jc,t)):this.Xc.has(t)&&(this.Xc.delete(t),Bo.Gh(this.qc,t))}rf(){return!this.Jc.length&&!this.qc.length}sf(){return this.Zc>0}hf(){const t=new Set,s=new Set;for(const i of this.Kc)if("add"===i.if)this.tf(i.ef,i.capture),i.capture?s.delete(i.ef):t.delete(i.ef);else{if("remove"!==i.if)throw new Error("invalid op");i.capture?(this.Hc.delete(i.ef),s.add(i.ef)):(this.Xc.delete(i.ef),t.add(i.ef))}Bo.Ah(this.qc,t),Bo.Ah(this.Jc,s),Bo.Sh(this.Kc)}af(t){this.lf();let s=!1;for(let i=0,e=this.Jc.length;i<e;++i)if(this.Jc[i](t),t.Vc){s=!0;break}if(!s)for(let s=0,i=this.qc.length;s<i&&(this.qc[s](t),!t.Vc);++s);return this.uf(),!t.defaultPrevented}cf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s)this.Jc[s](t);for(let s=0,i=this.qc.length;s<i;++s)this.qc[s](t);return this.uf(),!0}lf(){this.Zc++}uf(){this.Zc--,0===this.Zc&&this.Kc.length>0&&this.hf()}ff(t){t?this.lf():this.uf()}df(t){let s=[];for(let i=0,e=this.Jc.length;i<e;++i){let e=this.Jc[i];s.push(Bo.pf(()=>e(t)))}for(let i=0,e=this.qc.length;i<e;++i){let e=this.qc[i];s.push(Bo.pf(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}mf(t){const s=[];this.lf();for(let i=0,e=this.Jc.length;i<e;++i){const e=this.Jc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.qc.length;i<e;++i){const e=this.qc[i](t);e instanceof Promise&&s.push(e)}return this.uf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async gf(t){return await this.mf(t)}async yf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s){const i=this.Jc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);i instanceof Promise&&await i}return this.uf(),!t.defaultPrevented}*wf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s){const i=this.Jc[s](t);Bo.vo(i)&&(yield*i)}for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);Bo.vo(i)&&(yield*i)}this.uf()}}}{const $o=self.Gs;$o.Event.Mf=class extends $o.$n{constructor(){super(),this.Sf=new Map,this.Tf=!1}Yn(){if(this.Tf)throw new Error("already released");this.vf(),this.Tf=!0,$o.Yn(this)}Qn(){return this.Tf}vf(){if(this.Sf){for(let t of this.Sf.values())t.Yn();this.Sf.clear()}}xf(t,s){let i=this.Sf.get(t);return i||(s?(i=$o.Wn($o.Event.Yc,t),this.Sf.set(t,i),i):null)}bf(t){return this.Sf.has(t)}addEventListener(t,s,i){this.xf(t,!0).tf(s,!!i)}removeEventListener(t,s,i){let e=this.xf(t,!1);e&&(e.nf(s,!!i),e.rf()&&this.Sf.delete(t))}dispatchEvent(t){const s=this.xf(t.type,!1);return!s||(t.cancelable?s.af(t):s.cf(t))}Cf(t){const s=this.xf(t.type,!1);return s?(t.Wc=!0,s.df(t)):Promise.resolve(!0)}async If(t){const s=this.xf(t.type,!1);if(!s)return!0;this.Sf.delete(t.type),t.Wc=!0;const i=await s.df(t);return s.Yn(),i}async Gf(t){const s=this.xf(t.type,!1);return!s||await s.gf(t)}_f(t){const s=this.xf(t.type,!1);return!s||s.mf(t)}async Ef(t){const s=this.xf(t.type,!1);return!s||await s.yf(t)}Af(t){const s=this.xf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.wf(t)}ff(t){for(const s of this.Sf.values())s.ff(t)}}}{let Vo=function(t){Ko=Xo&&0===ta?requestIdleCallback(Wo,{timeout:35}):setTimeout(Wo,ta>0?1:t)},Wo=function(t){if(Ko=-1,!Zo.length)return;let s=performance.now(),i=s,e=0,n=0;do{Yo(Zo.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(Zo.length&&(Xo&&0===ta&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===Ko&&Zo.length){let t=i-s;Vo(Math.max(16-t,4))}},Yo=function(t){let s;try{s=t.ef()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=Vo,DoAsyncifiedWork=Wo,DoNextAsyncifiedJob=Yo;const Qo=self.Gs,Jo=12,Ho=16,qo=35,Xo="undefined"!=typeof requestIdleCallback;let Zo=[],Ko=-1,ta=0,sa=Qo.Hs.Ws("disable-asyncify");sa&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Qo.pf=function(t){let s=null;return Qo.Ls&&(s=Qo.Zi()),new Promise((i,e)=>{Zo.push({ef:t,resolve:i,reject:e,stack:s}),sa?Yo(Zo.pop()):-1===Ko&&Vo(16)})},Qo.pf.Df=function(t){if(t)++ta;else if(--ta,ta<0)throw new Error("already turned off high throughput mode")}}{let ia=function(){oa=-1},ea=function(){aa=-1,la=-1;let t=Date.now();for(let s of ua)if(s.Nf(t)){let t=s.Of();(-1===la||t<la)&&(la=t)}else ua.delete(s);if(-1!==la){let s=Math.max(la-t+100,1e3);aa=self.setTimeout(ea,s)}};ClearTimeCache=ia,CheckActiveIdleTimeouts=ea;const na=self.Gs,ra=1e3,ha=100;let oa=-1;na.Pf=function(){return-1===oa&&(oa=Date.now(),self.setTimeout(ia,16)),oa};let aa=-1,la=-1,ua=new Set;na.Rf=class{constructor(t,s){this.Lf=t,this.Ff=1e3*s,this.kf=0,this.jf=!1}zf(){let t=na.Pf();this.kf=t+this.Ff,this.jf||(ua.add(this),this.jf=!0),-1===aa?(la=this.kf,aa=self.setTimeout(ea,this.Ff+100)):this.kf<la&&la>t+1e3&&(self.clearTimeout(aa),la=this.kf,aa=self.setTimeout(ea,this.Ff+100))}Nf(t){return!(t>=this.kf&&(this.Lf()?(this.kf=t+this.Ff,0):(this.jf=!1,1)))}Of(){return this.kf}Bf(){this.jf&&(ua.delete(this),this.jf=!1,0===ua.size&&-1!==aa&&(self.clearTimeout(aa),aa=-1,la=-1))}Yn(){this.Bf(),this.Lf=null}}}{const ca=self.Gs;ca.Uf=class t{constructor(t){this.$f=!1,this.Vf=t}Wf(){this.$f||(this.$f=!0,this.Vf&&(this.Vf(),this.Vf=null))}Yf(){return this.$f}Yn(){this.Wf()}static Yn(s){return new t(()=>s.Yn())}static Qf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new ca.Jf;for(const r of s)t.addEventListener(r,i,e),n.zu(ca.Wn(ca.Uf,()=>t.removeEventListener(r,i,e)));return n}return t.addEventListener(s,i,e),ca.Wn(ca.Uf,()=>t.removeEventListener(s,i,e))}},ca.Hf=class extends ca.Uf{qf(t){this.Vf=t}},ca.Jf=class extends ca.Uf{constructor(...t){super(),this.Xf=new Set;for(let s of t)this.zu(s)}zu(...t){if(this.$f)throw new Error("already disposed");for(let s of t)this.Xf.add(s)}Zf(t){if(this.$f)throw new Error("already disposed");this.Xf.delete(t)}Kf(){if(this.$f)throw new Error("already disposed");if(this.Xf){for(let t of this.Xf)t.Wf();this.Xf.clear()}}Yf(){return this.$f}Wf(){if(this.$f)throw new Error("already disposed");this.$f=!0;for(let t of this.Xf)t.Wf();this.Xf.clear(),this.Xf=null}Yn(){this.Wf()}}}{const fa=self.Gs;fa.td=class extends fa.$n{constructor(){super(),this.sd=0,this.Da=0,this.ed=0,this.nd=0}zu(t){t=+t,this.Da=t-this.sd,this.ed=this.nd+this.Da,this.sd=this.ed-this.nd-this.Da,this.nd=this.ed}rd(t){this.nd-=+t}Ys(){return this.nd}zf(){this.sd=0,this.Da=0,this.ed=0,this.nd=0}Set(t){this.sd=0,this.Da=0,this.ed=0,this.nd=+t}hd(t){this.sd=t.sd,this.Da=t.Da,this.ed=t.ed,this.nd=t.nd}Yn(){}}}{const da=self.Gs,pa={},ma=!0,ga=!1;pa.od=function(t){this.ad=t,this.right=this.ad.ld,this.left=this.ad.ld,this.parent=null,this.color=!1,this.key=null},pa.ud=function(t){this.size=0,this.ld=new pa.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld,this.compare=t||this.fd},pa.ud.prototype.fd=function(t,s){return t<s?-1:s<t?1:0},pa.ud.prototype.clone=function(){var t=new pa.ud(this.compare);return t.dd(this),t},pa.ud.prototype.clear=function(){this.size=0,this.ld=new pa.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld},pa.ud.prototype.pd=function(t){var s=t.right;t.right=s.left,s.left!=this.ld&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},pa.ud.prototype.md=function(t){var s=t.left;t.left=s.right,s.right!=this.ld&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},pa.ud.prototype.gd=function(t){if(this.contains(t))this.yd(t).key=t;else{var s=new pa.od(this);s.key=t;for(var i=this.ld,e=this.root;e!=this.ld;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ld?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ld,s.right=this.ld,s.color=ma,this.wd(s),this.size++}},pa.ud.prototype.wd=function(t){for(;t!=this.ld&&t!=this.root&&t.parent.color==ma;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==ma?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ma,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=ma,t.parent.parent!=this.ld&&this.md(t.parent.parent)):(s=t.parent.parent.left).color==ma?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ma,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.md(t)),t.parent.color=!1,t.parent.parent.color=ma,t.parent.parent!=this.ld&&this.pd(t.parent.parent))}this.root.color=!1},pa.ud.prototype.Md=function(t){var s,i;(i=(s=t.left==this.ld||t.right==this.ld?t:this.Sd(t)).left!=this.ld?s.left:s.right).parent=s.parent,s.parent==this.ld?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.Td(i),this.size--},pa.ud.prototype.Td=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==ma&&(s.color=!1,t.parent.color=ma,this.pd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=ma,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=ma,this.md(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.pd(t.parent),t=this.root)):((s=t.parent.left).color==ma&&(s.color=!1,t.parent.color=ma,this.md(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=ma,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=ma,this.pd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.md(t.parent),t=this.root))}t.color=!1},pa.ud.prototype.remove=function(t){var s=this.yd(t);if(s!=this.ld){var i=s.key;return this.Md(s),i}return null},pa.ud.prototype.vd=function(t,s){this.remove(s)},pa.ud.prototype.min=function(t){for(;t.left!=this.ld;)t=t.left;return t},pa.ud.prototype.max=function(t){for(;t.right!=this.ld;)t=t.right;return t},pa.ud.prototype.Sd=function(t){if(t.right!=this.ld)return this.min(t.right);for(var s=t.parent;s!=this.ld&&t==s.right;)t=s,s=s.parent;return s},pa.ud.prototype.xd=function(t){if(t.left!=this.ld)return this.max(t.left);for(var s=t.parent;s!=this.ld&&t==s.left;)t=s,s=s.parent;return s},pa.ud.prototype.bd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.right!=this.ld)return this.min(s.right).key;for(var i=s.parent;i!=this.ld&&s==i.right;)s=i,i=i.parent;return i!=this.ld?i.key:null}return null},pa.ud.prototype.Cd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.left!=this.ld)return this.max(s.left).key;for(var i=s.parent;i!=this.ld&&s==i.left;)s=i,i=i.parent;return i!=this.ld?i.key:null}return null},pa.ud.prototype.Id=function(){return this.min(this.root).key},pa.ud.prototype.Gd=function(){return this.max(this.root).key},pa.ud.prototype.yd=function(t){for(var s=this.root;s!=this.ld&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},pa.ud.prototype.contains=function(t){return null!=this.yd(t).key},pa.ud.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},pa.ud.prototype.dd=function(t){if("array"==pa._d(t))for(var s=0;s<t.length;s++)this.gd(t[s]);else if("function"==pa._d(t.forEach))t.forEach(this.gd,this);else if("function"==pa._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.gd(i[s])}else if("object"==pa._d(t))for(var e in t)this.gd(t[e])},pa.ud.prototype.Ed=function(t){if("array"==pa._d(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==pa._d(t.forEach))t.forEach(this.vd,this);else if("function"==pa._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==pa._d(t))for(var e in t)this.remove(t[e])},pa.ud.prototype.Ad=function(t){if("array"==pa._d(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==pa._d(t.forEach))return t.every(this.contains,this);if("function"==pa._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==pa._d(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},pa.ud.prototype.range=function(t,s){var i=[];return this.Dd(function(t){i.push(t)},t,s),i},pa.ud.prototype.Nd=function(t,s){if(!this.Od())for(var i=this.min(this.root);i!=this.ld;){if(t.call(s,i.key,this))return;i=this.Sd(i)}},pa.ud.prototype.Pd=function(t,s,i){if(!this.Od())for(var e=this.yd(s);e!=this.ld;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},pa.ud.prototype.traverseTo=function(t,s,i){if(!this.Od())for(var e=this.min(this.root),n=this.yd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},pa.ud.prototype.Dd=function(t,s,i,e){if(!this.Od())for(var n=this.yd(s),r=this.yd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.Sd(n)}},pa.ud.prototype.Rd=function(t,s){if(!this.Od())for(var i=this.max(this.root);i!=this.ld;){if(t.call(s,i.key,this))return;i=this.xd(i)}},pa.ud.prototype.forEach=function(t,s){if(!this.Od())for(var i=this.min(this.root);i!=this.ld;i=this.Sd(i))t.call(s,i.key,i.key,this)},pa.ud.prototype.some=function(t,s){if(this.Od())return!1;for(var i=this.min(this.root);i!=this.ld;i=this.Sd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},pa.ud.prototype.every=function(t,s){if(this.Od())return!1;for(var i=this.min(this.root);i!=this.ld;i=this.Sd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},pa.ud.prototype.map=function(t,s){var i=[];if(this.Od())return i;for(var e=this.min(this.root);e!=this.ld;e=this.Sd(e))i.push(t.call(s,e.key,e.key,this));return i},pa.ud.prototype.filter=function(t,s){var i=[];if(this.Od())return i;for(var e=this.min(this.root);e!=this.ld;e=this.Sd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},pa.ud.prototype.Ld=function(){return this.size},pa.ud.prototype.Od=function(){return 0==this.size},pa.ud.prototype.isSubsetOf=function(t){var s=pa.Ld(t);if(this.Ld()>s)return!1;var i=0;if(this.Od())return!0;for(var e=this.min(this.root);e!=this.ld;e=this.Sd(e))pa.contains.call(t,t,e.key)&&i++;return i==this.Ld()},pa.ud.prototype.intersection=function(t){var s=new pa.ud(this.compare);if(this.Od())return s;for(var i=this.min(this.root);i!=this.ld;i=this.Sd(i))t.contains.call(t,i.key,i.key,this)&&s.gd(i.key);return s},da.ud=class extends da.$n{constructor(t){super(),this.Fd=new pa.ud(t),this.kd=!1,this.jd=new Set,this.zd=new Set}zu(t){this.kd?this.Fd.contains(t)?this.zd.delete(t):this.jd.add(t):this.Fd.gd(t)}Zf(t){this.kd?this.Fd.contains(t)?this.zd.add(t):this.jd.delete(t):this.Fd.remove(t)}Ws(t){return this.kd?!!this.jd.has(t)||!this.zd.has(t)&&this.Fd.contains(t):this.Fd.contains(t)}Au(){this.Fd.clear(),this.jd.clear(),this.zd.clear()}toArray(){if(this.kd)throw new Error("cannot be used in queueing mode");return this.Fd.getValues()}Pu(){return this.Fd.Ld()+this.jd.size-this.zd.size}Du(){return 0===this.Pu()}Bd(){if(this.Du())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Fd;return t.min(t.root).key}Ud(){if(this.Du())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Bd();return this.Zf(t),t}$d(t){if(t=!!t,this.kd!==t&&(this.kd=t,!t)){for(const t of this.zd)this.Fd.remove(t);this.zd.clear();for(const t of this.jd)this.Fd.gd(t);this.jd.clear()}}Vd(t){this.Fd.forEach(t)}*values(){if(this.Du())return;const t=this.Fd;for(let s=t.min(t.root);s!=t.ld;s=t.Sd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const ya=self.Gs;ya.Wd=class{constructor(t=ya.hardwareConcurrency){this.Yd=t,this.Qd=[],this.Jd=0}zu(t,s){return new Promise((i,e)=>{const n={ef:t,resolve:i,reject:e,Hd:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(n.onabort=()=>{const t=this.Qd.indexOf(n);-1!==t&&(this.Qd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",n.onabort)),this.Qd.push(n),this.qd())})}Xd(t){for(let s=0,i=this.Qd.length;s<i;++s)if(this.Qd[s].ef===t)return s;return-1}Zd(t,s){const i=this.Xd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Qd[i].resolve(s),this.Qd.splice(i,1)}Kd(t,s){const i=this.Xd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Qd[i].reject(s),this.Qd.splice(i,1)}async qd(){if(!this.Qd.length)return;if(this.Jd>=this.Yd)return;this.Jd++;const t=this.Qd.shift();t.Hd?.signal&&t.onabort&&t.Hd.signal.removeEventListener("abort",t.onabort);try{const s=await t.ef();t.resolve(s)}catch(s){t.reject(s)}this.Jd--,this.qd()}}}{const wa=self.Gs;wa.tp=class{constructor(t,s,i){this.Lf=t,this.sp=s,this.ip=i||2*s,this.ep=-1,this.np=-1/0,this.rp=()=>this.hp(),this.op=!1,this.ap=!1,this.lp=null}up(t){this.ap=!!t}cp(){return void 0!==wa.fp&&wa.fp.pp()?this.ip:this.sp}mp(...t){if(-1!==this.ep)return;this.lp=t;let s=wa.Pf(),i=s-this.np,e=this.cp();i>=e&&this.ap?(this.np=s,this.gp()):this.ep=self.setTimeout(this.rp,Math.max(e-i,4))}gp(){this.op=!0;const t=this.lp;this.lp=null,t?this.Lf(...t):this.Lf(),this.op=!1}zf(){this.op||(this.yp(),this.lp=null,this.np=wa.Pf())}hp(){this.ep=-1,this.np=wa.Pf(),this.gp()}yp(){-1!==this.ep&&(self.clearTimeout(this.ep),this.ep=-1)}Yn(){this.yp(),this.Lf=null,this.lp=null,this.rp=null}}}{const Ma=self.Gs;Ma.wp=class{constructor(){this.Mp=new Map,this.Sp=!1,this.Tp=null,this.vp=null,this.xp=null,this.bp=null}Cp(t){this.Sp=!!t}Ip(){return this.Sp}Gp(t){this.Tp=t}_p(t){if(!this.Tp)throw new Error("no get base size callback set");return this.Tp(t)}Ep(t){this.vp=t}Ap(t,s,i,e,n,r){if(!this.vp)throw new Error("no raster at size callback set");return this.vp(t,s,i,e,n,r)}Dp(t){this.xp=t}Np(t){if(!this.xp)throw new Error("no release result callback set");this.xp(t)}Op(t){this.bp=t}Pp(){if(!this.bp)throw new Error("no redraw callback set");this.bp()}Rp(t){let s=this.Mp.get(t);return s||(s=Ma.Wn(Ma.Lp,this,t),this.Mp.set(t,s)),s.Fp(),s}kp(t){this.Mp.delete(t.jp())}zp(){for(const t of this.Mp.values())t.Bp(),t.Up()}}}{const Sa=self.Gs,Ta=4096;Sa.Lp=class{constructor(t,s){this.$p=t,this.Vp=s,this.Wp=0,this.Yp=0,this.Qp=0,this.Jp=this.$p._p(s).then(t=>{this.$p&&(this.Yp=t[0],this.Qp=t[1],this.$p.Pp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.Hp=!0,this.$p&&this.$p.Pp()}),this.qp=0,this.Xp=0,this.Zp=0,this.Kp=0,this.tm=!1,this.sm=null,this.im=!1,this.Hp=!1}Yn(){if(this.Wp<=0)throw new Error("already released");this.Wp--,0===this.Wp&&this.nm()}Bp(){this.sm&&(this.$p.Np(this.sm),this.sm=null)}nm(){this.Bp(),this.$p.kp(this),this.$p=null}jp(){return this.Vp}Fp(){this.Wp++}rm(){return this.Wp>0}hm(){return this.sm}Up(){this.im=!0}async om(t,s,i){if(0===s||0===i||this.Hp)return;if(this.tm)return;let e=Sa.Tr(Math.ceil(s)),n=Sa.Tr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.$p.Ip()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.qp&&n<=this.Xp&&!this.im)return;this.tm=!0,this.qp=e,this.Xp=n;const h=await this.$p.Ap(this.Vp,t,this.qp,this.Xp,s,i);this.$p&&(this.Bp(),this.sm=h,this.Zp=s,this.Kp=i,this.tm=!1,this.im=!1,this.$p.Pp())}am(){return this.Jp}lm(){return this.Yp}um(){return this.Qp}fm(){return this.Zp}dm(){return this.Kp}pm(){return this.Hp}}}{let va=function(t){return _a.get(t)};lookupHtmlEntity=va;const xa=self.Gs;xa.gm="\ufeff";const ba=new Set("0123456789");xa.ym=function(t){return ba.has(t)};const Ca=new Set(" \t\n\r\u2028\u2029");xa.wm=function(t){return Ca.has(t)},xa.Mm=function(t){return[...t].filter(t=>!xa.wm(t)).join("")},xa.Sm=function(t){for(const s of t)if(!xa.wm(s))return!1;return!0},xa.Tm=function(t){for(const s of t)if(!xa.wm(s))return!1;return!0},xa.vm=function(t){return 1===t.length&&t.charCodeAt(0)<32},xa.xm=function(t){return[...t].filter(t=>!xa.vm(t)).join("")};let Ia=null;try{Ia=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}xa.bm=function(t){return!xa.wm(t)&&Ia&&Ia.test(t)};const Ga=new Set("0123456789.+-e");xa.Cm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!ba.has(s))return!1;for(let s of t)if(!Ga.has(s))return!1;return!0},xa.Im=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!xa.ym(i))break;--s}return t.substr(0,s)},xa.Gm=function(t){let s=xa.Im(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const _a=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ea=/[&<>"']/g;xa._m=function(t){return t.replace(Ea,va)},xa.Em=function(t){let s=xa.Am(t,"\\","\\\\");return s=xa.Am(s,'"','\\"'),s=xa.Am(s,"\t","\\t"),s=xa.Am(s,"\r",""),xa.Am(s,"\n","\\n")},xa.Dm=function(t){let s=xa.Am(t,"&","&amp;");return s=xa.Am(s,"<","&lt;"),s=xa.Am(s,">","&gt;"),xa.Am(s,'"',"&quot;")};const Aa=/[-[\]{}()*+?.,\\^$|#\s]/g;xa.Xi=function(t){return t.replace(Aa,"\\$&")},xa.Nm=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},xa.Om=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},xa.Pm=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},xa.Am=function(t,s,i){return t.replaceAll(s,()=>i)},xa.Rm=function(t,s,i){return t.replace(new RegExp(xa.Xi(s),"gi"),()=>i)},xa.Lm=function(t,s){"string"==typeof s?t.textContent=s:s.Fm()?t.textContent=s.toString():(t.innerHTML=s.km(),s instanceof xa.pn&&s.jm(t))},xa.zm=function(t,s){return t instanceof xa.dn||t instanceof xa.pn?t.equals(s):s instanceof xa.dn||s instanceof xa.pn?s.equals(t):t===s},xa.Bm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},xa.Um=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},xa.$m=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},xa.Vm=function(t,s){return t>s?1:t<s?-1:0},xa.Wm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Da=new self.Intl.Segmenter;xa.Ym=function(t){if(1===t.length)return[t];const s=[];for(const i of Da.segment(t))s.push(i.segment);return s},xa.Qm=function*(t){for(const s of Da.segment(t))yield s.segment},xa.Jm=function(t){let s=0;for(const i of Da.segment(t))++s;return s};const Na=1024,Oa=1048576,Pa=1073741824,Ra=1099511627776;xa.Hm=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.qm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Pa){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Ra){let s=t/Pa;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Ra;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const La={Xm:!1,Zm:!0,Km:!0,tg:!0,sg:!0};xa.ig=function(t,s){s=Object.assign({},La,s),xa.ng.eg("common.time");const i=[],e=self.lang,n=self.rg;if(s.Zm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Km){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.tg){const e=Math.floor(t/60);(e>0||i.length||!s.sg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.sg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Xm?e(".approx-prefix"):"")+i.join(e(".separator"));return xa.ng.hg(),r},xa.og=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},xa.ag=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},xa.lg=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());xa.bh(i,4,"0"),xa.bh(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},xa.ug=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},xa.cg=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},xa.fg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]},xa.dg=function(t){return(new TextEncoder).encode(t).length}}{let Fa=function(t,s,i){const e=za.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Ya++}">`:t;if("string"==typeof e){if("a"===e&&0===Va.length||"abbr"===e&&0===Wa.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Wa.length)throw new Error("invalid bbcode tip substitution");const s=Wa[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${ka.Am(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=Va.length)throw new Error("invalid bbcode link substitution");const s=Va[t];if("string"==typeof s)return`<a href="${Va[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};bbToHtmlReplacerFunc=Fa;const ka=self.Gs,ja=self.assert,za=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ba=new Set(["icon"]),Ua=/\[(\/?)([a-zA-Z0-9]+)\]/g,$a=/\[(\/?)([^\[\n]*?)\]/g;let Va=null,Wa=null,Ya=0;const Qa=/\n/g;ka.pn=class{constructor(t,s){if(this.pg=s&&s.mg?t:ka._m(t),this.gg="",this.yg=!1,this.wg=[],this.Mg=[],s){if(this.yg=!!s.Sg,s.links){if(s.links.length>9)throw new Error("too many links");this.wg=s.links}if(s.Tg){if(s.Tg.length>9)throw new Error("too many tips");this.Mg=s.Tg}}this.vg=this.pg.includes("["),this.xg=this.yg&&this.pg.includes("\n"),this.bg=!this.vg&&!this.xg&&!this.pg.includes("&"),this.Cg=!1,this.Ig=[]}toString(){return this.pg}valueOf(){return this.pg}Fm(){return this.bg}Gg(){return this.vg?this.pg.replace(Ua,""):this.pg}km(){if(this.bg)return this.pg;if(!this.gg&&this.pg){let t=this.pg;this.vg&&(Ya=0,Va=this.wg,Wa=this.Mg,t=t.replace(Ua,Fa),Va=null,Wa=null),this.xg&&(t=t.replace(Qa,"<br>")),this.gg=t}return this.gg}jm(t){if(this.wg.length)for(let s=0,i=this.wg.length;s<i;++s){const i=this.wg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof ka.dn?this.km()===t.km():t instanceof ka.pn?this.pg===t.pg:this.pg===t}_g(){if(this.Cg)return this.Ig;const t=[],s=this.pg,i=[];$a.lastIndex=0;let e=0,n=null;for(;null!==(n=$a.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,Eg:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ba.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Eg:i.slice(0)})}else i.push({tag:s,Ag:e})}}e<s.length&&t.push({text:s.substring(e),Eg:i.slice(0)});for(const s of t)s.text&&(s.text=this.Dg(s.text));return this.Ig=t.map(t=>t.icon?ka.Wn(ka.Ng,{icon:t.icon,Eg:t.Eg}):ka.Wn(ka.Og,{Pg:ka.Ym(t.text),Eg:t.Eg})),this.Cg=!0,this.Ig}Dg(t){return t=ka.Am(t,"\\[","["),ka.Am(t,"\\\\","\\")}static Rg(t){return ka.Wn(ka.pn,t,{mg:!0}).Gg()}static Lg(t){return t.replace($a,"")}}}{let Ja=function(t){return""!==t&&""!==t&&Ka.wm(t)},Ha=function(t){return tl.has(t)},qa=function(t){return Ka.bm(t)&&!Ha(t)},Xa=function(t){for(;t.length>0&&Ja(t.at(-1));)t.pop()},Za=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Ja,IsOpeningCJKPunctiationChar=Ha,IsContinuingCJKPunctuationChar=qa,WordBreakTrimEnd=Xa,IsNewline=Za;const Ka=self.Gs,tl=new Set("");class sl{constructor(){this.Fg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.kg=0,this.jg=!1}static zg(t,s,i,e,n,r){const h=new sl;return h.Fg.push(t),h.width=s,h.height=i,h.fontBoundingBoxAscent=e,h.fontBoundingBoxDescent=n,h.kg=r,h}hd(t){this.Fg=t.Fg.map(t=>t.Bg()),this.width=t.width,this.height=t.height,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent,this.kg=t.kg,this.jg=t.jg}zf(){this.Fg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.kg=0,this.jg=!1}Ug(t,s){s||(this.width=t.width),this.height=t.height||0,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent||0,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent||0,this.kg=t.kg||0,this.jg=!0}$g(t){const s=this.Fg.length?this.Fg.at(-1):null;let i=0;s&&s.Vg()&&t[0].Vg()&&t[0].Wg()===s.Wg()&&(s.Yg(t[0].Qg()),i=1);for(let s=t.length;i<s;++i){const s=t[i];this.Fg.push(s.Bg())}this.jg=!1}}Ka.Jg=class{constructor(){this.Hg=[],this.qg=null,this.Xg=new sl,this.Zg=new sl,this.Kg=!1}ty(){return this.Hg}sy(){return this.Hg.length}iy(t){this.qg=t}Jg(t,s,i,e,n){if("string"==typeof t&&(t=[Ka.Wn(Ka.Og,{Pg:Ka.Ym(t)})]),Ka.Sh(this.Hg),!t.length||1===t.length&&t[0].Vg()&&t[0].Du()||i<2)return;if(1===t.length){const e=t[0];if(e.Vg()&&e.ey()<=100&&!e.ny()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,kg:a}=s(e);if(t+=n,e.hy(t),e.oy(r),e.ly(h||0),e.uy(o||0),e.py(a||0),t<=i)return void this.my(sl.zg(e,t,r,h,o,a))}}let r,h=4;"word"===e?r=this.gy(t):"cjk"===e?(r=this.yy(t),h=8):(r=this.wy(t),h=8),this.My(r,s,i,h,n)}gy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.Wg();if(n.Sy())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.Qg())if(Za(r))i.length>0&&s.push(i),s.push([Ka.Wn(Ka.Og,{Pg:["\n"],Eg:t})]),i=[];else if(0===i.length)i.push(Ka.Wn(Ka.Og,{Pg:[r],Eg:t})),e=Ja(r);else{const n=Ja(r);if(n===e){const s=i.at(-1);s.Wg()===t?s.Ty(r):i.push(Ka.Wn(Ka.Og,{Pg:[r],Eg:t}))}else s.push(i),i=[Ka.Wn(Ka.Og,{Pg:[r],Eg:t})],e=n}}return i.length>0&&s.push(i),s}yy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.Wg();if(n.Sy())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.Qg())if(Za(r))i.length>0&&s.push(i),s.push([Ka.Wn(Ka.Og,{Pg:["\n"],Eg:t})]),i=[];else if(0===i.length)i.push(Ka.Wn(Ka.Og,{Pg:[r],Eg:t})),e=Ha(r);else if(e||qa(r)){const s=i.at(-1);s.Wg()===t?s.Ty(r):i.push(Ka.Wn(Ka.Og,{Pg:[r],Eg:t})),e=Ha(r)}else s.push(i),i=[Ka.Wn(Ka.Og,{Pg:[r],Eg:t})],e=Ha(r)}return i.length>0&&s.push(i),s}wy(t){const s=[];for(const i of t)if(i.Vg()){const t=i.Qg();Ka.On(s,t.map(t=>[Ka.Wn(Ka.Og,{Pg:[t],Eg:i.Wg()})]))}else s.push([i]);return s}vy(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.xy()){const t=s(o);o.oy(t.height),o.ly(t.fontBoundingBoxAscent||0),o.uy(t.fontBoundingBoxDescent||0),o.py(t.kg||0),o.Vg()?o.hy(t.width):o.Sy()&&o.by(this.qg)}i+=o.xy(),e=Math.max(e,o.Cy()),n=Math.max(n,o.Iy()),r=Math.max(r,o.Gy()),h=Math.max(h,o._y())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,kg:h}}Ey(){this.Xg.zf(),this.Zg.zf()}my(t){this.Hg.push(new Ka.Jg.Ay(t)),this.Ey()}Dy(t){return 1===t.length&&t[0].Vg()&&1===t[0].ey()&&Za(t[0].Qg()[0])}Ny(t){return t[0].Vg()&&Ka.Tm(t[0].Qg())}My(t,s,i,e,n){let r=0;for(;r<t.length;)r=this.Oy(t,r,s,i,e);if(this.Zg.Fg.length>0){if(!this.Zg.jg){const t=this.vy(this.Zg.Fg,s);this.Zg.Ug(t)}this.my(this.Zg)}this.Py(s,n),this.Ey(),this.Kg=!1}Oy(t,s,i,e,n){const r=this.Xg,h=this.Zg,o=t[s];if(this.Dy(o)){if(!h.jg){const t=i(Ka.Wn(Ka.Og,{Pg:[" "],Eg:o[0].Wg()}));h.Ug(t,!0)}return this.my(h),s+1}const a=this.Ry(t,s,n),l=this.vy(h.Fg,i);return h.Ug(l),l.width>=e?this.Ly(t,s,i,e):(r.hd(h),this.Kg&&this.my(r),a+1)}Ry(t,s,i){const e=this.Zg;this.Kg=!1;let n=s,r=0;for(let s=t.length;n<s;++n){const s=t[n];if(this.Dy(s)){this.Kg=!0;break}if(e.$g(s),!this.Ny(s)&&(++r,r===i))break}return n}Ly(t,s,i,e){const n=this.Xg,r=this.Zg;r.hd(n);let h=s;for(let s=t.length;h<s;++h){const o=t[h];if(this.Dy(o))return this.my(n),h+1;if(r.$g(o),!this.Ny(o)||0===n.Fg.length){const o=this.vy(r.Fg,i);if(r.Ug(o),o.width>=e){let i;return n.Fg.length>0?i=n:(i=r,++h,h<s&&this.Ny(t[h])&&++h),this.my(i),h}n.hd(r)}}return h}Py(t,s){for(const i of this.Hg){const e=i.Fy();if(!e.length)continue;let n=e.at(-1);if(n.Vg()){const r=n.Qg(),h=r.slice(0);if(Xa(h),0===h.length)i.ky(-n.xy()),e.pop();else if(h.length<r.length){n.jy(h);const s=t(n).width,e=n.xy()-s;n.hy(s),i.ky(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.ky(s),i.ky(s))}}}Au(){Ka.Sh(this.Hg)}zy(){return this.Hg.reduce((t,s)=>Math.max(t,s.xy()),0)}By(){return this.Hg.reduce((t,s)=>t+s.Cy(),0)}}}{const il=self.Gs;il.Jg.Ay=class{constructor(t){this.Ig=t.Fg,this.Uy=t.width,this.$y=t.height,this.Vy=t.fontBoundingBoxAscent,this.Wy=t.fontBoundingBoxDescent,this.Yy=t.kg,this.Qy=0,this.Jy=0}Fg(){return this.Ig.values()}*Hy(){const t=this.Ig;for(let s=t.length-1;s>=0;--s)yield t[s]}Fy(){return this.Ig}ky(t){this.Uy+=t}xy(){return this.Uy}Cy(){return this.$y}qy(){return this.Vy}Gy(){return this.Wy}_y(){return this.Yy}Xy(t){this.Qy=t}Zy(){return this.Qy}Ky(t){this.Jy=t}tw(){return this.Jy}}}{const el=self.Gs;el.sw=class{constructor(t){this.iw=t.Eg||[],this.Uy=t.width||-1,this.$y=t.height||-1,this.Vy=t.fontBoundingBoxAscent||-1,this.Wy=t.fontBoundingBoxDescent||-1,this.Yy=t.kg||-1,this.Qy=0,this.Jy=0}Vg(){return!1}Sy(){return!1}Wg(){return this.iw}ew(t){const s=this.iw;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}rw(t){return!!this.ew(t)}hw(){const t=new Map;for(const s of this.iw)t.set(s.tag,s.Ag);return t}ky(t){this.Uy+=t}hy(t){this.Uy=t}xy(){return this.Uy}oy(t){this.$y=t}Cy(){return this.$y}ly(t){this.Vy=t}Iy(){return this.Vy}uy(t){this.Wy=t}Gy(){return this.Wy}py(t){this.Yy=t}_y(){return this.Yy}Xy(t){this.Qy=t}Zy(){return this.Qy}Ky(t){this.Jy=t}tw(){return this.Jy}}}{const nl=self.Gs;nl.Og=class extends nl.sw{constructor(t){super(t),this.ow=t.Pg}Vg(){return!0}Yg(t){nl.On(this.ow,t),this.Uy=-1,this.$y=-1,this.Vy=-1,this.Wy=-1,this.Yy=-1}Ty(t){this.ow.push(t)}Bg(){return nl.Wn(nl.Og,{Pg:this.ow.slice(0),Eg:this.iw,width:this.Uy,height:this.$y,fontBoundingBoxAscent:this.Vy,fontBoundingBoxDescent:this.Wy,kg:this.Yy})}Qg(){return this.ow}jy(t){this.ow=t}ey(){return this.ow.length}Du(){return 0===this.ow.length}ny(){return this.ow.includes("\n")}}}{const rl=self.Gs;rl.Ng=class extends rl.sw{constructor(t){super(t),this.aw=t.icon}Sy(){return!0}lw(){return this.aw}Bg(){return rl.Wn(rl.Ng,{icon:this.aw,Eg:this.iw,width:this.Uy,height:this.$y,fontBoundingBoxAscent:this.Vy,fontBoundingBoxDescent:this.Wy,kg:this.Yy})}uw(t){if(!t)return null;let s=Number(this.aw);return String(s)===this.aw?(s=Math.floor(s),t.cw(s)):t.fw(this.aw)}by(t){const s=this.uw(t);this.Uy=s?this.$y*s.xy()/s.Cy():0}dw(t){const s=this.uw(t);return s?s.dw():null}ey(){return 1}}}{const hl=self.Gs;hl.pw=class{constructor(t){this.mw=new Map,this.gw=t.yw,this.ww=t.Mw}Yn(){for(const t of this.mw.values())t.Yn();this.mw.clear()}Sw(t){let s=this.mw.get(t);if(s)return s;const i=this.gw(t);return s=hl.Wn(hl.Tw,this,{source:t,xw:i}),this.mw.set(t,s),s}bw(t){return this.mw.has(t)}Cw(t){const s=this.mw.get(t);s&&s.Yn(),this.mw.delete(t)}async Iw(t){return await this.ww(t)}}}{const ol=self.Gs;ol.Tw=class{constructor(t,s){this.Gw=t,this._w=s.source,this.Ew=[],this.Aw=new Map,this.Dw=!1,this.Nw=!1,this.Ow=null;const i=s.xw.Pw;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=ol.Wn(ol.Rw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.Ew.push(e),s.tag&&this.Aw.set(s.tag.toLowerCase(),e)}}Yn(){for(const t of this.Ew)t.Yn();ol.Sh(this.Ew),this.Aw.clear(),this.Gw=null,this._w=null}Lw(){return this.Dw}Fw(){return this.Nw}kw(){return this.Ow||(this.Ow=this.jw()),this.Ow}async jw(){if(this.Dw)return;this.Dw=!0,this.Nw=!0;const t=await this.Gw.Iw(this._w);if(!this.Gw)return;const s=t.Pw;for(let t=0,i=Math.min(s.length,this.Ew.length);t<i;++t){const i=s[t].zw;this.Ew[t].Bw(i)}this.Nw=!1}cw(t){return(t=Math.floor(t))<0||t>=this.Ew.length?null:this.Ew[t]}fw(t){return this.Aw.get(t.toLowerCase())||null}}}{const al=self.Gs;al.Rw=class{constructor(t,s){this.Uw=t,this._w=s.source||null,this.$w=s.index,this.Vw=s.tag,this.Uy=s.width,this.$y=s.height,this.Ww=null}Yn(){this.Uy=0,this.$y=0,this.Uw=null}Yw(){return this._w}xy(){return this.Uy}Cy(){return this.$y}Bw(t){this.Ww=t}dw(){return this.Ww}}}{let ll=function(t,s,i,e){const n=Ml;pl.O(yl,i,s),pl.O(wl,t,s),pl.It(n,yl,wl),pl.normalize(n,n),e.set(n[0],n[1],n[2],pl.Ct(t,n))},ul=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Qw,f=h.Jw,d=h.Hw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},cl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};PlaneFromPoints=ll,IsInFrontOfPlane=ul,IsPointInFrontOfPlane=cl;const fl=self.Gs,dl=self.ls,pl=dl.ws,ml=dl.Ms,gl=dl.ds,yl=pl.create(),wl=pl.create(),Ml=pl.create(),Sl=ml.create(),Tl=gl.create(),vl=pl.create(),xl=pl.create(),bl=pl.create(),Cl=pl.create(),Il=pl.create(),Gl=pl.create(),_l=pl.create(),El=pl.create(),Al=ml.S(0,0,1,1);fl.qw={Xw(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},Zw(t,s,i,e,n,r,h){const o=Tl,a=Sl;return gl.multiply(o,n,e),null!==gl.v(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,ml.Dt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Kw(t,s,i,e,n,r,h){const o=yl,a=wl;if(!fl.qw.Zw(t,s,0,e,n,r,o))return!1;if(!fl.qw.Zw(t,s,1,e,n,r,a))return!1;const l=wl;pl.O(l,a,o);const u=Ml;pl.set(u,0,0,1);const c=-i,f=pl.Ct(u,l);let d=0;if(0===f){if(0!==pl.Ct(u,o)+c)return!1}else if(d=-(pl.Ct(o,u)+c)/f,d<0)return!1;return pl.St(h,o,l,d),!0}};class Dl{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Qw=NaN,this.Jw=NaN,this.Hw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Qw=t>0?1:0,this.Jw=s>0?1:0,this.Hw=i>0?1:0}}fl.qw.tM=class{constructor(){this.sM=new Dl,this.iM=new Dl,this.eM=new Dl,this.nM=new Dl,this.rM=new Dl,this.hM=new Dl}oM(t,s){const i=Al;fl.qw.Zw(0,1,0,t,s,i,vl),fl.qw.Zw(1,1,0,t,s,i,xl),fl.qw.Zw(0,0,0,t,s,i,bl),fl.qw.Zw(1,0,0,t,s,i,Cl),fl.qw.Zw(0,1,1,t,s,i,Il),fl.qw.Zw(1,1,1,t,s,i,Gl),fl.qw.Zw(0,0,1,t,s,i,_l),fl.qw.Zw(1,0,1,t,s,i,El),ll(bl,vl,Il,this.sM),ll(vl,xl,Gl,this.iM),ll(xl,Cl,El,this.eM),ll(Cl,bl,_l,this.nM),ll(_l,Il,Gl,this.hM),ll(Cl,xl,vl,this.rM)}aM(t,s,i,e,n,r){return ul(t,s,i,e,n,r,this.sM)&&ul(t,s,i,e,n,r,this.iM)&&ul(t,s,i,e,n,r,this.eM)&&ul(t,s,i,e,n,r,this.nM)&&ul(t,s,i,e,n,r,this.rM)&&ul(t,s,i,e,n,r,this.hM)}lM(t,s,i){return!cl(t,s,i,this.rM)}}}{const Nl=self.Gs,Ol=self.ls,Pl=Ol.ws,Rl=Ol.Ms,Ll=Ol.ds,Fl=Ll.create(),kl=Pl.S(0,0,0),jl=Pl.S(0,0,0),zl=Pl.S(0,0,0),Bl=Pl.S(0,1,0),Ul=Rl.S(0,0,0,0),$l=new Nl.El,Vl=new Nl.Rect,Wl=new Nl.El(0,0,1,0,1,1,0,1),Yl={uM:1,cM:1e4},Ql=Ll.S(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Nl.qw.fM=class{constructor(t){t=Object.assign({},Yl,t),this.Uy=0,this.$y=0,this.dM=Nl.Kn(45),this.pM=Math.tan(this.dM/2),this.mM=Ll.create(),this.gM=Ll.create(),this.yM=!1,this.wM=t.uM,this.MM=t.cM,this.SM=[],this.TM=new Map,this.vM=null,this.xM=null,this.bM=null,this.CM=null,this.IM=null,this.GM=null,this._M=null,this.EM=null,this.AM=null,this.DM=null,this.NM=null,this.OM=null,this.PM=new Map,this.RM=null,this.LM=[],this.FM=new Map,this.kM=0,this.jM=0,this.zM=1,this.BM=[this.zM],this.UM=1,this.$M=[this.UM],this.VM=.5,this.WM=[this.VM],this.YM=0,this.QM=!0,this.JM=!1}HM(){this.kM=0,this.jM=0,this.vM=null,this.xM=null,this.bM=null,this.CM=null,this.IM=null,this.GM=null,this._M=null,this.EM=null,this.AM=null,this.DM=null,this.NM=null,this.OM=null,this.qM()}XM(){this.HM(),this.RM=null}ZM(){for(const t of this.SM)t.Yn();this.HM()}xy(){return this.Uy}Cy(){return this.$y}KM(t){return this.tS()?100:t/(2*this.sS())}iS(t){return this.tS()?t/(2*this.sS())/this.KM(t):1}eS(t){this.wM=t}nS(){return this.wM}rS(t){this.MM=t}hS(){return this.MM}oS(t){this.dM=t,this.pM=Math.tan(this.dM/2)}aS(){return this.dM}sS(){return this.pM}lS(){this.yM=!1}uS(){this.yM=!0}tS(){return!this.yM}cS(){return this.yM}fS(t,s,i=.5,e=.5){const n=this.nS(),r=this.hS(),h=this.aS();if(.5===i&&.5===e)this.dS()?Ll.ut(t,h,s,n,r):Ll.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.sS()*n,c=u*s;Ll.ot(t,h*c,o*c,a*u,l*u,n,r),this.dS()&&Ll.mul(t,Ql,t)}}pS(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.KM(i)*n*this.sS()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.dS()?Ll.gt(t,a,l,u,c,this.nS(),this.hS()):Ll.dt(t,a,l,u,c,this.nS(),this.hS())}mS(t,s,i,e,n,r=1){let h=1;this.tS()&&(h=200*this.sS()/n);const o=zl;Pl.set(o,h,-h,1);const a=kl,l=jl;Pl.multiply(a,s,o),Pl.multiply(l,i,o),Ll.yt(t,a,l,e||Bl),o[2]=r,Ll.scale(t,t,o)}gS(t,s,i,e,n,r,h,o){return Pl.set(kl,t,s,i),Pl.set(jl,e,n,r),this.mS(Fl,kl,jl,Bl,h,o),Fl}yS(t){this.SM.push(t),this.TM.set(t.Ac(),t)}wS(t){const s=this.SM.indexOf(t);-1!==s&&this.SM.splice(s,1),this.TM.delete(t.Ac())}qM(){Nl.Sh(this.SM),this.TM.clear()}MS(t){return this.TM.get(t)||null}SS(){return this.vM}TS(){this.vS(this.vM)}xS(){return this.xM}bS(){this.vS(this.xM)}CS(){this.vS(this.bM)}IS(){this.vS(this.CM)}GS(){this.vS(this.IM)}_S(){this.vS(this.GM)}ES(){this.vS(this._M)}AS(){this.vS(this.EM)}DS(){this.vS(this.AM)}NS(){this.vS(this.DM)}OS(){this.vS(this.NM)}PS(){this.vS(this.OM)}RS(t){this.RM=t}LS(){return this.RM}FS(t,s,i,e,n,r){const h=Nl.qw.jS.kS(t,s,i,e,n,r);let o=this.PM.get(h);return o||(o=Nl.Wn(Nl.qw.jS,this,t,s,i,e,n,r),this.PM.set(h,o)),o.zS(),o}BS(t){t.US(),0===t.$S()&&(this.RM===t&&(this.RM=null),this.PM.delete(t.VS()),t.Yn())}WS(t){Nl.Sh(this.LM),this.FM.clear();let s=0;for(const i of t){const t=i[0],e=i[1];this.LM.push(e),this.FM.set(t,s),s++}}YS(t){return this.LM[t]}QS(t){const s=this.FM.get(t);if(void 0===s)throw new Error("invalid blend name");return s}JS(t){this.kM=t}HS(){return this.kM}qS(t){this.jM=t,this.RM=null}XS(){return this.jM}Ay(t,s,i,e){const n=Nl.rr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.zM,a=r*o,l=h*o,u=this.UM;2===u?this.ZS(t,s,0,i,e,0,a,l):1===u?this.KS(t,s,0,i,e,0,a,l):this.tT(t,s,0,i,e,0,a,l)}sT(t,s,i,e,n,r){const h=Nl.rr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.zM,u=o*l,c=a*l,f=this.UM;2===f?this.ZS(t,s,i,e,n,r,u,c):1===f?this.KS(t,s,i,e,n,r,u,c):this.tT(t,s,i,e,n,r,u,c)}ZS(t,s,i,e,n,r,h,o){const a=this.VM,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,M=c+h,S=f-o,T=c-h-d,v=f+o-p;this.iT(m,g,i,M,S,r,T,v,r,y,w,i,Wl)}KS(t,s,i,e,n,r,h,o){const a=this.VM,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,M=c-h,S=f+o;this.iT(d,p,i,y,w,r,M,S,r,m,g,i,Wl)}tT(t,s,i,e,n,r,h,o){const a=this.VM,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,M=c-h,S=f+o;this.iT(d,p,i,y,w,r,M,S,r,m,g,i,Wl)}eT(t,s,i,e,n,r){const h=Nl.rr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.zM,u=o*l,c=a*l,f=this.UM;2===f?this.nT(t,s,i,e,u,c,n,r):1===f?this.rT(t,s,i,e,u,c,n,r):this.hT(t,s,i,e,u,c,n,r)}nT(t,s,i,e,n,r,h,o){const a=this.VM,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,M=c+n,S=f-r,T=c-n-d,v=f+r-p;$l.set(m,g,M,S,T,v,y,w),Vl.set(h,0,o,0),this.oT($l,Vl)}rT(t,s,i,e,n,r,h,o){const a=this.VM,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,M=c-n,S=f+r;$l.set(d,p,y,w,M,S,m,g),Vl.set(h,0,o,0),this.oT($l,Vl)}hT(t,s,i,e,n,r,h,o){const a=this.VM,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,M=c-n,S=f+r;$l.set(d,p,y,w,M,S,m,g),Vl.set(h,0,o,0),this.oT($l,Vl)}aT(t,s,i,e){const n=.5*this.zM,r=this.UM;2===r?this.lT(t,s,i,e,n):1===r?this.uT(t,s,i,e,n):this.cT(t,s,i,e,n)}lT(t,s,i,e,n){this.ZS(t,s,0,i,s,0,0,n),this.ZS(i,s,0,i,e,0,n,0),this.ZS(i,e,0,t,e,0,0,-n),this.ZS(t,e,0,t,s,0,-n,0)}uT(t,s,i,e,n){this.KS(t,s,0,i,s,0,0,n),this.KS(i,s,0,i,e,0,n,0),this.KS(i,e,0,t,e,0,0,-n),this.KS(t,e,0,t,s,0,-n,0)}cT(t,s,i,e,n){this.tT(t,s,0,i,s,0,0,n),this.tT(i,s,0,i,e,0,n,0),this.tT(i,e,0,t,e,0,0,-n),this.tT(t,e,0,t,s,0,-n,0)}fT(t){this.aT(t.Ka(),t.tl(),t.sl(),t.il())}dT(t){const s=Nl.rr(t.jr(),t.zr(),t.Br(),t.Ur()),i=Math.sin(s),e=Math.cos(s),n=.5*this.zM,r=i*n,h=e*n,o=this.UM;2===o?this.pT(t,r,h):1===o?this.mT(t,r,h):this.gT(t,r,h)}pT(t,s,i){this.ZS(t.jr(),t.zr(),0,t.Br(),t.Ur(),0,s,i),this.ZS(t.Br(),t.Ur(),0,t.$r(),t.Vr(),0,i,-s),this.ZS(t.$r(),t.Vr(),0,t.Wr(),t.Yr(),0,-s,-i),this.ZS(t.Wr(),t.Yr(),0,t.jr(),t.zr(),0,-i,s)}mT(t,s,i){this.KS(t.jr(),t.zr(),0,t.Br(),t.Ur(),0,s,i),this.KS(t.Br(),t.Ur(),0,t.$r(),t.Vr(),0,i,-s),this.KS(t.$r(),t.Vr(),0,t.Wr(),t.Yr(),0,-s,-i),this.KS(t.Wr(),t.Yr(),0,t.jr(),t.zr(),0,-i,s)}gT(t,s,i){this.tT(t.jr(),t.zr(),0,t.Br(),t.Ur(),0,s,i),this.tT(t.Br(),t.Ur(),0,t.$r(),t.Vr(),0,i,-s),this.tT(t.$r(),t.Vr(),0,t.Wr(),t.Yr(),0,-s,-i),this.tT(t.Wr(),t.Yr(),0,t.jr(),t.zr(),0,-i,s)}yT(t){this.zM=t,this.BM[this.BM.length-1]=t}wT(){return this.zM}MT(t){if(this.BM.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.BM.push(t),this.zM=t}ST(){if(this.BM.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.BM.pop(),this.zM=this.BM.at(-1)}TT(){this.UM=0,this.$M[this.$M.length-1]=0}vT(){this.UM=1,this.$M[this.$M.length-1]=0}xT(){this.UM=2,this.$M[this.$M.length-1]=0}bT(t){if("butt"===t)this.CT();else if("square"===t)this.IT();else{if("zag"!==t)throw new Error("invalid line cap");this.GT()}}CT(){if(this.$M.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.$M.push(0),this.UM=0}IT(){if(this.$M.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.$M.push(1),this.UM=1}GT(){if(this.$M.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.$M.push(2),this.UM=2}_T(){if(this.$M.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.$M.pop(),this.UM=this.$M.at(-1)}ET(t){this.VM=t,this.WM[this.WM.length-1]=t}AT(){return this.VM}DT(t){if(this.WM.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.WM.push(t),this.VM=t}NT(){if(this.WM.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.WM.pop(),this.VM=this.WM.at(-1)}OT(){this.PT(0),this.RT(0)}LT(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.FT(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.FT(n,r,h,o,a,l,s,e)}}}kT(){this.jT(!0),this.YM++}zT(){return this.YM}BT(){this.YM++}UT(t){this.QM=!!t}$T(){return this.QM}VT(t){this.JM=!!t}WT(){return this.JM}YT(){return!1}dS(){return!1}QT(){}JT(){}HT(){}qT(){return this.QT()+this.JT()+this.HT()}XT(){return Nl.Wn(Nl.qw.ZT,this)}}}{const Jl=self.Gs;Jl.qw.KT=class{constructor(t,s){this.Hn=s.name,this.tv=t,this.sv=s.ev||0,this.nv=s.rv||0,this.hv=!!s.ov,this.av=!!s.lv,this.uv=!!s.cv,this.fv=!!s.dv,this.pv=!!s.animated,this.mv=!!s.gv,this.yv=!!s.wv,this.Mv=!1,this.Sv=this.hv||this.mv||0!==this.sv||0!==this.nv}Yn(){this.tv=null}Tv(){return this.tv}Ac(){return this.Hn}vv(){return 0!==this.sv||0!==this.nv}xv(){return this.sv}bv(){return this.nv}Cv(){return this.hv}Iv(){return this.av}Gv(){return this.uv}_v(){return this.fv}Ev(){return this.pv}Av(){return this.mv}Dv(){return this.yv}Nv(){return this.Mv}Ov(){return this.Sv}Pv(){return!1}}}{const Hl=self.Gs;Hl.qw.jS=class{constructor(t,s,i,e,n,r,h){this.tv=t,this.Wp=0,this.Rv=null,this.Lv="",this.Fv=i,this.kv=Hl.Wn(Hl.bo),this.kv.set(e),this.jv=n,this.zv=r,this.Bv=h,"string"==typeof s?this.Lv=s:(this.Rv=s,this.Lv=this.Rv.Ac())}Yn(){if(this.Wp>0)throw new Error("releasing state group still in use");this.tv=null,this.Rv=null,this.Lv=""}Uv(){const t=this.tv;t.vS(this.Rv),t.$v(this.Fv),t.Vv(this.kv),t.qS(this.jv),t.PT(this.zv),t.RT(this.Bv),t.RS(this)}VS(){return Hl.qw.jS.kS(this.Lv,this.Fv,this.kv,this.jv,this.zv,this.Bv)}zS(){++this.Wp}US(){--this.Wp}$S(){return this.Wp}Wv(){this.Rv=null}Yv(t){if(this.Rv=t.MS(this.Lv),!this.Rv)throw new Error("failed to restore shader program")}static kS(t,s,i,e,n,r){return("string"==typeof t?t:t.Ac())+","+s+","+i.ko()+","+i.jo()+","+i.zo()+","+i.Bo()+","+e+","+n+","+r}}}{let ql=function(t,s,i){const e=i.jr(),n=i.zr(),r=i.Br()-e,h=i.Ur()-n;return[e+r*t+(i.Wr()-e)*s,n+h*t+(i.Yr()-n)*s]};interpolateQuad=ql;const Xl=globalThis.Gs,Zl=globalThis.assert,Kl=65535;Xl.qw.Qv=class{constructor(t,s,i){this.Jv=t,this.Hv=s,this.qv=i,this.Aa=NaN,this.Da=NaN,this.jv=NaN,this.Xv=NaN,this.Zv=NaN,this.Aa=0,this.Da=0,this.jv=0,this.Xv=0,this.Zv=0}Kv(t,s,i,e){this.Aa=t,this.Da=s,this.Xv=i,this.Zv=e}tx(){return this.Aa}sx(t){this.Aa!==t&&(this.Aa=t,this.Jv.ix())}nx(){return this.Da}hx(t){this.Da!==t&&(this.Da=t,this.Jv.ix())}ox(){return this.jv}lx(t){this.jv!==t&&(this.jv=Math.max(t,0),this.Jv.ix())}ux(){return this.Xv}mx(t){this.Xv=t}gx(){return this.Zv}yx(t){this.Zv=t}wx(t,s,i){[this.Aa,this.Da]=ql(t.Aa,t.Da,s),this.jv=t.jv,this.Xv=Xl.Gt(i.Ka(),i.sl(),t.Xv),this.Zv=Xl.Gt(i.tl(),i.il(),t.Zv)}Mx(t,s,i){[this.Aa,this.Da]=ql(t.Aa,t.Da,s),this.jv=t.jv,[this.Xv,this.Zv]=ql(t.Xv,t.Zv,i)}Sx(){return{x:this.tx(),y:this.nx(),z:this.ox(),u:this.ux(),v:this.gx()}}Tx(t){this.sx(t.x),this.hx(t.y),t.hasOwnProperty("z")&&this.lx(t.z),this.mx(t.u),this.yx(t.v)}vx(){return this.Jv}xx(){return this.Hv}bx(){return this.qv}},Xl.qw.Cx=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.Ix=t,this.Gx=s,this._x=i||null,this.Ex=[],this.Ax=0,this.Dx=0,this.Nx=1,this.Ox=1,this.Px=0,this.Rx=!1,this.Lx=[],this.Fx=0,this.kx=!0;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Xl.Wn(Xl.qw.Qv,this,r,i),h=r/e,o=i/n;t.Kv(h,o,h,o),s.push(t)}this.Ex.push(s)}}Yn(){Xl.Sh(this.Ex),Xl.Sh(this.Lx)}jx(){return this.Ix}zx(){return this.Gx}Bx(){return this._x}Ux(){return this.Ex}ix(){this.Rx=!0,this.kx=!0}$x(){if(!this.Rx)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.Ex)for(const h of r){const r=h.tx(),o=h.nx();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.ox())}this.Ax=t,this.Dx=s,this.Nx=i,this.Ox=e,this.Px=n,this.Rx=!1}Vx(){return this.$x(),this.Ax}Wx(){return this.$x(),this.Dx}Yx(){return this.$x(),this.Nx}Qx(){return this.$x(),this.Ox}Jx(){return this.$x(),this.Px}Hx(){return this.Jx()>0}qx(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.Ix||s<0||s>=this.Gx?null:this.Ex[s][t]}Xx(t,s,i){const e=i instanceof Xl.Rect;if(t.jx()!==this.jx()||t.zx()!==this.zx())throw new Error("source mesh wrong size");const n=t.Ex,r=this.Ex;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.wx(n,s,i):r.Mx(n,s,i)}}this.kx=!0}Zx(t){if(!this.kx&&this.Fx===t)return;const s=this.Ix,i=this.Gx,e=this.Lx,n=Math.floor(65535/s)-1;if(n<=0)throw new Error("mesh too large");const r=Math.ceil((i-1)/n);r<e.length&&(e.length=r);let h=0;for(let o=0;o<r;++o){const r=Math.min(n,i-h-1),a=(r+1)*s,l=3*a,u=2*a,c=(s-1)*r*6;if(o===e.length)e.push({Kx:new Float32Array(l),tb:new Float32Array(u),sb:new Uint16Array(c)});else{const t=e[o];t.Kx.length!==l&&(t.Kx=new Float32Array(l)),t.tb.length!==u&&(t.tb=new Float32Array(u)),t.sb.length!==c&&(t.sb=new Uint16Array(c))}const{Kx:f,tb:d,sb:p}=e[o];this.ib(h,r,t,f,d,p),h+=n}this.Fx=t,this.kx=!1}ib(t,s,i,e,n,r){const h=this.Ex,o=this.Ix;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(e[a++]=o.tx(),e[a++]=o.nx(),e[a++]=o.ox()+i,n[l++]=o.ux(),n[l++]=o.gx(),c<h&&d<f){const s=t+m,i=c+m,e=c+g,n=t+g;r[u++]=s,r[u++]=i,r[u++]=e,r[u++]=s,r[u++]=e,r[u++]=n}}}}eb(t,s){this.Zx(s);for(const{Kx:s,tb:i,sb:e}of this.Lx)t.nb(s,i,e)}rb(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.Ex;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.tx(),o.nx(),o.ox()),[m,g,y]=s(u.tx(),u.nx(),u.ox()),[w,M,S]=s(c.tx(),c.nx(),c.ox()),[T,v,x]=s(a.tx(),a.nx(),a.ox());t.sT(f,d,p,m,g,y),t.sT(f,d,p,w,M,S),t.sT(f,d,p,T,v,x),i===l-1&&t.sT(m,g,y,w,M,S),n===r-1&&t.sT(T,v,x,w,M,S),o=u,a=c}e=h}}hb(t){const s=.001,i=.99999999,e=t.pu(),n=[],r=this.jx()-1,h=this.zx()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Xl.Xn(Math.floor(c*r),0,l),p=Xl.Xn(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,M=-1;const S=()=>{c=Xl.Xn(Xl.Gt(c,g,w),0,1),f=Xl.Xn(Xl.Gt(f,y,w),0,1),n.push(c,f)};for(let t=0,T=e.length;t<T;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Xl.Xn(Math.floor(c*r),0,l),p=Xl.Xn(Math.floor(f*h),0,u);const v=(t+2)%T;for(g=e[v],y=e[v+1],M=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Xl.qr(c,f,t,e,r,e,r,h),0!==M&&(w=Xl.Hr(c,f,g,y,t,e,r,h,-.001),w>=0&&w<=i))S(),m=!m,M=0;else if(p>0&&2!==M&&(w=Xl.Hr(c,f,g,y,t,e,r,e,s),w>=0&&w<=i))S(),p--,m=!1,M=4;else if(d<l&&3!==M&&(w=Xl.Hr(c,f,g,y,r,e,r,h,s),w>=0&&w<=i))S(),d++,m=!1,M=1;else if(d>0&&1!==M&&(w=Xl.Hr(c,f,g,y,t,e,t,h,s),w>=0&&w<=i))S(),d--,m=!0,M=3;else{if(!(p<u&&4!==M&&(w=Xl.Hr(c,f,g,y,t,h,r,h,s),w>=0&&w<=i)))break;S(),p++,m=!0,M=2}}}return Xl.Wn(Xl.lu,n)}ob(t,s){const i=this.ab(t);this.lb(i),s.gu(i)}ab(t){const s=[],i=t.pu();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.ub(e,n);s.push(r,h)}return s}ub(t,s){const i=this.jx()-1,e=this.zx()-1,n=1/i,r=1/e,h=Xl.Xn(Math.floor(t*i),0,i-1),o=Xl.Xn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.qx(h,o),d=this.qx(h+1,o+1),p=Xl.qr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.qx(h+(p?1:0),o+(p?0:1)),[w,M,S]=Xl.Xr(t,s,a,l,m,g,u,c);return Xl.Zr(w,M,S,f.tx(),f.nx(),f.ox(),y.tx(),y.nx(),y.ox(),d.tx(),d.nx(),d.ox())}lb(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Xl.Ch(t,s)}Sx(){return{cols:this.jx(),rows:this.zx(),points:this.Ex.map(t=>t.map(t=>t.Sx()))}}Tx(t){const s=this.jx(),i=this.zx();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.qx(e,t).Tx(i[e])}}}}{let tu=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{cb:i,fb:e,format:n,type:r}};GetFormatSpecifiers=tu;const su=self.Gs,iu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),eu=new Set(["nearest","bilinear","trilinear"]),nu=new Set(["default","low","high"]),ru=new Set(["clamp-to-edge","repeat","mirror-repeat"]),hu={pb:"clamp-to-edge",mb:"clamp-to-edge",gb:"trilinear",yb:0,wb:"rgba8",Mb:!0,Sb:"default",Tb:!0,xb:!1,width:-1,height:-1},ou={Tb:!0,flipY:!1},au=new Set;su.qw.bb=class{constructor(t){this.tv=t,this.Cb=null,this.Uy=0,this.$y=0,this.Ib=!0,this.Gb="clamp-to-edge",this._b="clamp-to-edge",this.Eb="trilinear",this.Ab=0,this.Db="rgba8",this.Nb=!1,this.Ob="default",this.Wp=0}Pb(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},hu,s),this.Cb)throw new Error("already created texture");if(this.Gb=s.pb,this._b=s.mb,this.Eb=s.gb,this.Ab=s.yb,this.Db=s.wb,this.Nb=!!s.Mb&&this.tv.$T(),this.Ob=s.Sb,!ru.has(this.Gb)||!ru.has(this._b))throw new Error("invalid wrap mode");if(!eu.has(this.Eb))throw new Error("invalid sampling");if(!iu.has(this.Db))throw new Error("invalid pixel format");if(!nu.has(this.Ob))throw new Error("invalid mipmap quality");if(this.Ib=!0,t instanceof ArrayBuffer||null===t||s.xb){if(this.Uy=s.width,this.$y=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Uy*this.$y*4)throw new Error("ArrayBuffer wrong size")}else this.Uy=t.width,this.$y=t.height;if(this.Uy<=0||this.$y<=0)throw new Error("invalid texture data size");if(s.xb){const s=su.co(this.Uy,this.$y);s.getContext("2d").drawImage(t,0,0,this.Uy,this.$y),t=s}const i=su.Sr(this.Uy)&&su.Sr(this.$y),e=this.tv.Rb();if(this.Uy>e||this.$y>e)throw new Error("texture data exceeds maximum texture size");const n=this.tv.Lb(),r=this.tv.Fb();this.Cb=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.Cb),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.Tb),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=tu(this.Db,n);if(this.tv.kb()||i||!this.jb())if(r>=2){let s;s=this.Nb?Math.floor(Math.log2(Math.max(this.Uy,this.$y))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.cb,this.Uy,this.$y),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Uy,this.$y,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.fb,this.Uy,this.$y,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.fb,this.Uy,this.$y,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.fb,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Uy,this.$y)),t instanceof ImageData){const s=su.co(this.Uy,this.$y);s.getContext("2d").putImageData(t,0,0),t=s}const s=su.co(su.Tr(this.Uy),su.Tr(this.$y)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.Eb,i.drawImage(t,0,0,this.Uy,this.$y,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.fb,h.format,h.type,s)}null!==t&&this.zb(n),n.bindTexture(n.TEXTURE_2D,null),this.tv.Bb(),this.Wp=1,au.add(this)}Ub(t,s,i){if(i=Object.assign({},hu,i),this.Cb)throw new Error("already created texture");if(this.Gb=i.pb,this._b=i.mb,this.Eb=i.gb,this.Db=i.wb,this.Nb=!!i.Mb&&this.tv.$T(),this.Ob=i.Sb,!ru.has(this.Gb)||!ru.has(this._b))throw new Error("invalid wrap mode");if(!eu.has(this.Eb))throw new Error("invalid sampling");if(!iu.has(this.Db))throw new Error("invalid pixel format");if(!nu.has(this.Ob))throw new Error("invalid mipmap quality");this.Ib=!1,this.Uy=Math.floor(t),this.$y=Math.floor(s);const e=su.Sr(this.Uy)&&su.Sr(this.$y),n=this.tv.Rb();if(this.Uy<=0||this.$y<=0)throw new Error("invalid texture size");if(this.Uy>n||this.$y>n)throw new Error("texture exceeds maximum texture size");if(!this.tv.kb()&&this.jb()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.tv.Lb(),h=this.tv.Fb();this.Cb=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.Cb),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.Tb),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=tu(this.Db,r),a=h>=2?o.cb:o.fb;r.texImage2D(r.TEXTURE_2D,0,a,this.Uy,this.$y,0,o.format,o.type,null),this.zb(r),r.bindTexture(r.TEXTURE_2D,null),this.tv.Bb(),this.Wp=1,au.add(this)}$b(t){if("default"===this.Ob)return this.Ib?t.NICEST:t.FASTEST;if("low"===this.Ob)return t.FASTEST;if("high"===this.Ob)return t.NICEST;throw new Error("invalid mipmap quality")}jb(){return"clamp-to-edge"!==this.Gb||"clamp-to-edge"!==this._b}Vb(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}zb(t){const s=su.Sr(this.Uy)&&su.Sr(this.$y);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.Vb(t,this.Gb)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.Vb(t,this._b)),"nearest"===this.Eb)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.Nb=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.tv.kb())&&this.Nb){t.hint(t.GENERATE_MIPMAP_HINT,this.$b(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.Eb&&!this.tv.WT();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.Nb=!1;const i=this.tv.Wb();i&&this.Ab>0&&"nearest"!==this.Eb&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Ab,this.tv.Yb()))}Qb(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.Cb||this.Wp<=0)throw new Error("texture not created");if(this.Ib)throw new Error("cannot update static texture");s=Object.assign({},ou,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.tv.Fb(),r=this.tv.Lb();r.bindTexture(r.TEXTURE_2D,this.Cb),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.Tb),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=tu(this.Db,r),o=n>=2?h.cb:h.fb;try{if(this.Uy===i&&this.$y===e){const s=su.Sr(this.Uy)&&su.Sr(this.$y);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.tv.kb())&&this.Nb&&(r.hint(r.GENERATE_MIPMAP_HINT,this.$b(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Uy=i,this.$y=e;const s=su.Sr(this.Uy)&&su.Sr(this.$y);if(!this.tv.kb()&&this.jb()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.tv.kb())&&this.Nb&&(r.hint(r.GENERATE_MIPMAP_HINT,this.$b(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.tv.Bb()}Jb(){if(this.Wp>0)throw new Error("texture still has references");if(!this.Cb)throw new Error("already deleted texture");au.delete(this),this.tv.Lb().deleteTexture(this.Cb),this.Cb=null}Hb(){return!!this.Cb}qb(){return this.Cb}Tv(){return this.tv}Xb(){this.Wp++}Zb(){if(this.Wp<=0)throw new Error("no more references");this.Wp--}Kb(){return this.Wp}xy(){return this.Uy}Cy(){return this.$y}tC(){return this.Ib}sC(){let t=this.Uy*this.$y;switch(this.Db){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.Nb&&(t+=Math.floor(t/3)),t}static Wv(){au.clear()}static iC(){return au.values()}}}{const lu=self.Gs,uu=self.assert,cu=self.ls,fu=cu.ws,du=cu.ds,pu=new Set(["nearest","bilinear","trilinear"]),mu={gb:"trilinear",alpha:!0,depth:!1,eC:!0,nC:!0,rC:0},gu=new Set;lu.qw.hC=class{constructor(t){this.tv=t,this.oC=null,this.aC=null,this.Cb=null,this.lC=null,this.Uy=0,this.$y=0,this.uC=!0,this.Eb="trilinear",this.cC=!0,this.fC=!1,this.dC=!0,this.pC=0,this.mC=du.create(),this.gC=0,this.yC=0,this.wC=0}MC(t,s,i){i=Object.assign({},mu,i);const e=this.tv.Fb();if(this.Cb||this.lC)throw new Error("already created render target");if(this.Eb=i.gb,this.cC=!!i.alpha,this.fC=!!i.depth,this.dC=!!i.eC,this.uC=!!i.nC,this.pC=i.rC,!pu.has(this.Eb))throw new Error("invalid sampling");if(this.pC>0&&(e<2||this.dC))throw new Error("invalid use of multisampling");if(e<2&&(this.dC=!0),this.Uy=t,this.$y=s,this.Uy<=0||this.$y<=0)throw new Error("invalid render target size");this.SC();const n=this.tv.Lb();if(this.oC=n.createFramebuffer(),this.fC&&(this.aC=n.createFramebuffer()),this.dC){this.Cb=this.tv.TC(this.Uy,this.$y,{gb:this.Eb,wb:this.cC?"rgba8":"rgb8",Mb:!1});const t=this.Cb.qb();n.bindFramebuffer(n.FRAMEBUFFER,this.oC),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.fC&&(n.bindFramebuffer(n.FRAMEBUFFER,this.aC),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.lC=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.lC);const t=this.cC?n.RGBA8:n.RGB8;if(this.pC>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.pC>t&&(this.pC=t)}else this.pC=0}0===this.pC?n.renderbufferStorage(n.RENDERBUFFER,t,this.Uy,this.$y):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.pC,t,this.Uy,this.$y),n.bindFramebuffer(n.FRAMEBUFFER,this.oC),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.lC),this.fC&&(n.bindFramebuffer(n.FRAMEBUFFER,this.aC),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.lC)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.tv.vC();this.fC&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.oC),this.tv.xC()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),gu.add(this)}bC(t,s){if(this.Uy===t&&this.$y===s)return;this.Uy=t,this.$y=s,this.SC();const i=this.tv.Lb();i.bindFramebuffer(i.FRAMEBUFFER,this.oC),this.Cb?this.Cb.Qb(new ImageData(this.Uy,this.$y)):(i.bindRenderbuffer(i.RENDERBUFFER,this.lC),i.renderbufferStorage(i.RENDERBUFFER,this.cC?i.RGBA8:i.RGB8,this.Uy,this.$y),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.tv.vC();this.fC&&e&&(this.tv.xC()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}Jb(){if(!this.Cb&&!this.lC)throw new Error("already deleted render target");gu.delete(this);const t=this.tv.Lb();this.Cb?(t.bindFramebuffer(t.FRAMEBUFFER,this.oC),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.fC&&(t.bindFramebuffer(t.FRAMEBUFFER,this.aC),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.tv.CC(this.Cb),this.Cb=null):this.lC&&(t.bindFramebuffer(t.FRAMEBUFFER,this.oC),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.fC&&(t.bindFramebuffer(t.FRAMEBUFFER,this.aC),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.lC),this.lC=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.tv.Fb()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.oC),this.fC&&t.deleteFramebuffer(this.aC);const s=this.tv.IC();s.GC=null,s._C=null,this.oC=null}SC(){this.tv.fS(this.mC,this.Uy/this.$y),this.gC=this.tv.aS(),this.yC=this.tv.nS(),this.wC=this.tv.hS()}EC(){return this.oC}AC(){return this.aC}Tv(){return this.tv}DC(){return this.Cb}NC(){return this.tv.aS()===this.gC&&this.tv.nS()===this.yC&&this.tv.hS()===this.wC||this.SC(),this.mC}OC(){return"nearest"!==this.Eb}PC(){return this.cC}RC(){return this.dC}LC(){return this.fC}xy(){return this.Uy}Cy(){return this.$y}FC(){return this.uC}kC(){return this.pC}jC(){const t={gb:this.Eb,alpha:this.cC,eC:this.dC};return this.uC||(t.width=this.Uy,t.height=this.$y),t}zC(t){return"nearest"!==(t=Object.assign({},mu,t)).gb===this.OC()&&!!t.alpha===this.PC()&&!!t.depth===this.LC()&&!(this.tv.Fb()>=2&&!!t.eC!==this.RC())&&("number"==typeof t.width||"number"==typeof t.height?!this.FC()&&this.xy()===Math.floor(t.width)&&this.Cy()===Math.floor(t.height):this.FC())}BC(){return this.Cb?this.Cb.qb():null}sC(){return this.Cb?this.Cb.sC():this.Uy*this.$y*(this.cC?4:3)}static async UC(t,s){const i=await t.$C(s,!0);return await lu.po(i)}static Wv(){gu.clear()}static VC(){return gu.values()}static WC(t,s){for(const i of gu)i.FC()&&i.bC(t,s)}}}{const yu=self.Gs,wu=self.ls,Mu=wu.ws,Su=wu.ds,Tu=new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);yu.qw.YC=class extends yu.qw.KT{static async QC(t,s){const i=t.Lb(),e=s.src,n=s.JC,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.HC();if(l?await t.qC(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await yu.ph(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=yu.xm(i.getProgramInfoLog(a)||"").trim();return u&&!yu.Sm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async XC(t,s){const i=await yu.qw.YC.QC(t,s);return new yu.qw.YC(t,i,s)}constructor(t,s,i){super(t,i);const e=t.Lb(),n=t.IC();t.jT(),e.useProgram(s),this.ZC=e,this.Rv=s,this.KC="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.tI=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.sI),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.iI),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.eI),e.vertexAttribPointer(o,4,t.nI()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.tI&&(e.bindBuffer(e.ARRAY_BUFFER,t.rI),e.vertexAttribPointer(this.tI,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.tI)),e.bindBuffer(e.ARRAY_BUFFER,null),this.hI=new yu.qw.oI(this,"matP","mat4"),this.aI=new yu.qw.oI(this,"matMV","mat4"),this.lI=new yu.qw.oI(this,"color","vec4"),this.uI=new yu.qw.oI(this,"samplerFront","sampler"),this.cI=new yu.qw.oI(this,"pointTexStart","vec2"),this.fI=new yu.qw.oI(this,"pointTexEnd","vec2"),this.dI=new yu.qw.oI(this,"zElevation","float"),this.pI=new yu.qw.oI(this,"tileSize","vec2"),this.mI=new yu.qw.oI(this,"tileSpacing","vec2"),this.gI=new yu.qw.oI(this,"color2_","vec4"),this.yI=new yu.qw.oI(this,"outlineThickness","float"),this.wI=new yu.qw.oI(this,"samplerBack","sampler"),this.MI=new yu.qw.oI(this,"samplerDepth","sampler"),this.SI=new yu.qw.oI(this,"destStart","vec2"),this.TI=new yu.qw.oI(this,"destEnd","vec2"),this.vI=new yu.qw.oI(this,"srcStart","vec2"),this.xI=new yu.qw.oI(this,"srcEnd","vec2"),this.bI=new yu.qw.oI(this,"srcOriginStart","vec2"),this.CI=new yu.qw.oI(this,"srcOriginEnd","vec2"),this.II=new yu.qw.oI(this,"pixelSize","vec2"),this.GI=new yu.qw.oI(this,"seconds","float"),this._I=new yu.qw.oI(this,"devicePixelRatio","float"),this.EI=new yu.qw.oI(this,"layerScale","float"),this.AI=new yu.qw.oI(this,"layerAngle","float"),this.DI=new yu.qw.oI(this,"layoutStart","vec2"),this.NI=new yu.qw.oI(this,"layoutEnd","vec2"),this.OI=new yu.qw.oI(this,"zNear","float"),this.RI=new yu.qw.oI(this,"zFar","float"),this.LI=!!(this.II.FI()||this.GI.FI()||this.wI.FI()||this.SI.FI()||this.TI.FI()||this.vI.FI()||this.xI.FI()||this.bI.FI()||this.CI.FI()||this._I.FI()||this.EI.FI()||this.AI.FI()||this.DI.FI()||this.NI.FI());const a=i.parameters||[];this.kI=[],this.Mv=this.II.FI()||this.vI.FI()||this.xI.FI()||this.bI.FI()||this.CI.FI(),this.jI=!1,this.zI=!1,this.lI.BI(1,1,1,1),this.gI.BI(1,1,1,1),this.uI.UI(0),this.wI.UI(1),this.MI.UI(2),this.cI.$I(0,0),this.fI.$I(1,1),this.dI.VI(0),this.pI.$I(0,0),this.mI.$I(0,0),this.SI.$I(0,0),this.TI.$I(1,1),this.vI.$I(0,0),this.xI.$I(0,0),this.bI.$I(0,0),this.CI.$I(0,0),this.II.$I(0,0),this._I.VI(1),this.OI.VI(t.nS()),this.RI.VI(t.hS()),this.EI.VI(1),this.AI.VI(0),this.GI.VI(0),this.DI.$I(0,0),this.NI.$I(0,0),this.yI.VI(1);for(const t of a){const s=t[0],i=t[2],e=new yu.qw.oI(this,s,i);"color"===i?e.WI(0,0,0):e.VI(0),this.kI.push(e)}this.KC?this.YI(n.QI):(this.JI(n.QI,!0),this.HI(n.qI,!0));const l=n.XI;e.useProgram(l?l.Rv:null)}Yn(){this.ZC.deleteProgram(this.Rv),this.Rv=null,this.tv.wS(this),this.ZC=null,super.Yn()}ZI(){return this.ZC}KI(){return this.Rv}tG(){return this.kI.length}sG(t){return t<0||t>=this.kI.length?null:this.kI[t].iG()}eG(t){for(let s=0,i=t.length;s<i;++s)if(!this.kI[s].nG(t[s]))return!1;return!0}rG(t){for(let s=0,i=t.length;s<i;++s)this.kI[s].hG(t[s])}oG(t,s,i,e,n,r,h,o,a,l){return!(this.wI.FI()||this.II.FI()&&!this.II.aG(n,r)||this.SI.FI()&&!this.SI.aG(t.Ka(),t.tl())||this.TI.FI()&&!this.TI.aG(t.sl(),t.il())||this._I.FI()&&!this._I.lG(h)||this.EI.FI()&&!this.EI.lG(o)||this.AI.FI()&&!this.AI.lG(a)||this.vI.FI()&&!this.vI.aG(s.Ka(),s.tl())||this.xI.FI()&&!this.xI.aG(s.sl(),s.il())||this.bI.FI()&&!this.bI.aG(i.Ka(),i.tl())||this.CI.FI()&&!this.CI.aG(i.sl(),i.il())||this.DI.FI()&&!this.DI.aG(e.Ka(),e.tl())||this.NI.FI()&&!this.NI.aG(e.tl(),e.il())||this.GI.FI()&&!this.GI.lG(l))}uG(t,s,i,e,n,r,h,o,a,l){this.wI.FI()||(this.II.FI()&&this.II.cG(n,r),this.SI.FI()&&this.SI.cG(t.Ka(),t.tl()),this.TI.FI()&&this.TI.cG(t.sl(),t.il()),this._I.FI()&&this._I.fG(h),this.EI.FI()&&this.EI.fG(o),this.AI.FI()&&this.AI.fG(a),this.vI.FI()&&this.vI.cG(s.Ka(),s.tl()),this.xI.FI()&&this.xI.cG(s.sl(),s.il()),this.bI.FI()&&this.bI.cG(i.Ka(),i.tl()),this.CI.FI()&&this.CI.cG(i.sl(),i.il()),this.DI.FI()&&this.DI.cG(e.Ka(),e.tl()),this.NI.FI()&&this.NI.cG(e.tl(),e.il()),this.GI.FI()&&this.GI.fG(l))}JI(t,s){this.jI&&!s||this.KC||(this.hI.FI()&&this.hI.dG(t),this.jI=!0)}pG(){this.jI=!1}HI(t,s){this.zI&&!s||this.KC||(this.aI.FI()&&this.aI.dG(t),this.zI=!0)}mG(){this.zI=!1}YI(t){if(!this.KC)throw new Error("not device transform shader");this.hI.dG(t);const s=this.tv,i=s.xy()/2,e=s.Cy()/2,n=s.gS(i,e,s.KM(s.Cy()),i,e,0,s.Cy());this.aI.dG(n)}gG(t){this.lI.FI()&&this.lI.yG(t[0],t[1],t[2],t[3])}static wG(){return Tu}static MG(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static SG(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static TG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static vG(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static xG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bG(t){return["#version 300 es",yu.qw.YC.MG(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static CG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static IG(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static GG(t){return["#version 300 es",yu.qw.YC.MG(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _G(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+yu.qw.YC.MG(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static EG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static AG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static DG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static NG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static OG(t){return["#version 300 es",yu.qw.YC.MG(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static PG(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static LG(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static FG(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static kG(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static jG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static zG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static BG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static UG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const vu=self.Gs,xu=self.ls,bu=xu.ds,Cu=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);vu.qw.oI=class{constructor(t,s,i){if(!Cu.has(i))throw new Error("invalid uniform type");this._x=t,this.ZC=this._x.ZI(),this.Hn=s,this.Qc=i,this.$G="color"===this.Qc,this.VG=this.ZC.getUniformLocation(this._x.KI(),s),this.WG=!!this.VG;const e=Cu.get(i);this.YG=new Float32Array(e),this.QG=new Float32Array(e)}Yn(){this._x=null,this.ZC=null,this.VG=null}FI(){return this.WG}iG(){return this.Qc}JG(){return this.$G}VI(t){this.FI()&&(this.YG[0]=t,this.QG.set(this.YG),this.ZC.uniform1f(this.VG,t))}UI(t){this.FI()&&(this.YG[0]=t,this.QG.set(this.YG),this.ZC.uniform1i(this.VG,t))}$I(t,s){this.FI()&&(this.YG[0]=t,this.YG[1]=s,this.QG.set(this.YG),this.ZC.uniform2f(this.VG,t,s))}WI(t,s,i){this.FI()&&(this.YG[0]=t,this.YG[1]=s,this.YG[2]=i,this.QG.set(this.YG),this.ZC.uniform3f(this.VG,t,s,i))}BI(t,s,i,e){this.FI()&&(this.YG[0]=t,this.YG[1]=s,this.YG[2]=i,this.YG[3]=e,this.QG.set(this.YG),this.ZC.uniform4f(this.VG,t,s,i,e))}HG(t){t=Math.fround(t);const s=this.YG;s[0]!==t&&(s[0]=t,this.ZC.uniform1f(this.VG,t))}qG(t){const s=this.YG;s[0]!==t&&(s[0]=t,this.ZC.uniform1i(this.VG,t))}XG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.YG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.ZC.uniform2f(this.VG,t,s))}ZG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.YG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.ZC.uniform3f(this.VG,t,s,i))}yG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.YG;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.ZC.uniform4f(this.VG,t,s,i,e))}dG(t){const s=this.YG;bu.P(s,t)||(vu.wh(s,t,0),this.ZC.uniformMatrix4fv(this.VG,!1,t))}nG(t){const s=this.QG;return this.JG()?s[0]===Math.fround(t.ko())&&s[1]===Math.fround(t.jo())&&s[2]===Math.fround(t.zo()):s[0]===Math.fround(t)}hG(t){const s=this.QG;this.JG()?(s[0]=t.ko(),s[1]=t.jo(),s[2]=t.zo()):s[0]=t}lG(t){return this.QG[0]===Math.fround(t)}aG(t,s){const i=this.QG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}fG(t){this.QG[0]=t}cG(t,s){const i=this.QG;i[0]=t,i[1]=s}}}{const Iu=self.Gs,Gu=self.ls,_u=Gu.Ms,Eu=Gu.ds,Au=0,Du=1,Nu=2,Ou=3,Pu=4,Ru=5,Lu=6,Fu=7,ku=8,ju=9,zu=10,Bu=11,Uu=12,$u=13,Vu=14,Wu=15,Yu=16,Qu=17,Ju=18,Hu=19,qu=20,Xu=21,Zu=22,Ku=23,tc=24,sc=25,ic=26,ec=27,nc=28,rc=29,hc=30;Iu.qw.KG=class{constructor(t){this.t_=t,this.qI=Eu.create(),this.QI=Eu.create(),this.GC=null,this._C=null,this.s_=!1,this.XI=null,this.i_=new Iu.Rect,this.clearColor=Iu.Wn(Iu.bo,0,0,0,0)}},Iu.qw.e_=class{constructor(t){const s=new ArrayBuffer(96);this.Qc=0,this.n_=t,this.ZC=t.t_.Lb(),this.r_=0,this.h_=0,this.o_=null,this.a_=new Float32Array(s,0,16),this.l_=new Float32Array(s,64,4),this.u_=new Float32Array(s,80,4),this.c_=[]}f_(t,s){this.Qc=1,this.r_=t,this.h_=s}d_(){const t=this.ZC;t.drawElements(t.TRIANGLES,this.h_,t.UNSIGNED_SHORT,this.r_)}p_(t){this.Qc=2,this.o_=t}m_(){const t=this.ZC,s=this.o_;t.bindTexture(t.TEXTURE_2D,s?s.qb():null)}g_(t){this.Qc=20,t.$o(this.l_,0)}y_(){const t=this.l_,s=this.n_.XI;s.gI.FI()&&s.gI.yG(t[0],t[1],t[2],t[3])}w_(t){this.Qc=3;const s=this.a_;s[0]=t.length;for(let i=0,e=t.length;i<e;++i)s[i+1]=t[i]}M_(){const t=this.ZC,s=this.a_,i=s[0],e=s[1],n=s[2];let r=e,h=n,o=t.FUNC_ADD,a=t.FUNC_ADD;i>=4&&(r=s[3],h=s[4]),6===i&&(o=s[5],a=s[6]),t.blendFuncSeparate(e,n,r,h),t.blendEquationSeparate(o,a)}S_(t,s,i,e){this.Qc=4;const n=this.l_;n[0]=t,n[1]=s,n[2]=i,n[3]=e}T_(){const t=this.l_;this.ZC.viewport(t[0],t[1],t[2],t[3])}v_(t){this.Qc=5,Eu.M(this.a_,t)}x_(){const t=this.n_,s=t.t_.SM,i=t.XI,e=this.a_;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.JI(e,!0):n.pG()}Eu.M(t.QI,e)}b_(t){this.Qc=6,Eu.M(this.a_,t)}C_(){const t=this.n_,s=t.t_.SM,i=t.XI,e=this.a_;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.HI(e,!0):n.mG()}Eu.M(t.qI,e)}I_(t){this.Qc=7,this.o_=t}G_(){const t=this.ZC,s=this.o_,i=this.n_;s?(i.GC=s.EC(),i._C=s.AC(),i.s_&&i._C?t.bindFramebuffer(t.FRAMEBUFFER,i._C):t.bindFramebuffer(t.FRAMEBUFFER,i.GC)):(i.GC=null,i._C=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}__(t){this.Qc=8,t.$o(this.a_,0)}E_(t,s,i,e){this.Qc=8;const n=this.a_;n[0]=t,n[1]=s,n[2]=i,n[3]=e}A_(){const t=this.ZC,s=this.a_,i=this.n_.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.Jo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Eo(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}D_(t){this.Qc=14,t.$o(this.a_,0)}N_(){const t=this.a_;this.n_.i_.set(t[0],t[1],t[2],t[3])}O_(t,s,i){this.Qc=9,this.r_=t,this.h_=1,this.a_[0]=s,i.$o(this.l_,0)}P_(){const t=this.ZC,s=this.n_,i=s.t_.xM;t.useProgram(i.Rv),i.JI(s.QI,!1),i.HI(s.qI,!1);const e=s.i_;i.cI.FI()&&i.cI.XG(e.Ka(),e.tl()),i.fI.FI()&&i.fI.XG(e.sl(),e.il());const n=this.a_[0];if(i.dI.FI()&&i.dI.HG(n),i.lI.FI()){const t=this.l_;i.lI.yG(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.r_/4,this.h_),t.useProgram(s.XI.Rv)}R_(t){this.Qc=10,this.o_=t}L_(){const t=this.ZC,s=this.n_,i=this.o_;s.XI=i,t.useProgram(i.Rv),i.JI(s.QI,!1),i.HI(s.qI,!1)}F_(){this.Qc=11}k_(){const t=this.n_.XI,s=this.ZC,i=this.a_,e=this.l_,n=this.u_;if(t.wI.FI()){const t=this.n_.t_,i=this.o_;t.j_!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.qb():null),t.j_=i,s.activeTexture(s.TEXTURE0))}t.II.FI()&&t.II.XG(i[0],i[1]),t.SI.FI()&&t.SI.XG(i[2],i[3]),t.TI.FI()&&t.TI.XG(i[4],i[5]),t._I.FI()&&t._I.HG(this.h_),t.EI.FI()&&t.EI.HG(i[6]),t.AI.FI()&&t.AI.HG(i[7]),t.vI.FI()&&t.vI.XG(i[12],i[13]),t.xI.FI()&&t.xI.XG(i[14],i[15]),t.bI.FI()&&t.bI.XG(n[0],n[1]),t.CI.FI()&&t.CI.XG(n[2],n[3]),t.DI.FI()&&t.DI.XG(e[0],e[1]),t.NI.FI()&&t.NI.XG(e[2],e[3]),t.GI.FI()&&t.GI.HG(this.r_)}z_(){this.Qc=12}B_(){const t=this.n_.XI.kI,s=this.c_;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.JG()?e.ZG(n.ko(),n.jo(),n.zo()):e.HG(n)}}U_(t){this.Qc=13,this.o_=t}V_(){const t=this.ZC,s=this.o_,i=this.n_.GC;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}W_(t,s,i){this.Qc=16;const e=this.a_,n=this.n_.t_;e[0]=t.xy(),e[1]=t.Cy(),e[2]=s?s.xy():n.xy(),e[3]=s?s.Cy():n.Cy(),e[4]=t.OC()?1:0,e[5]="stretch"===i;const r=this.c_;Iu.Sh(r),r.push(t.EC()),r.push(s?s.EC():null)}Y_(){const t=this.a_,s=this.c_,i=this.ZC,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}Q_(t){this.Qc=17,this.o_=t}J_(){this.o_.H_(),this.o_=null}q_(t){this.Qc=18,this.o_=t}X_(){this.o_.Z_(),this.o_=null}K_(t,s,i){this.Qc=19;const e=this.a_;e[0]=t,e[1]=s,e[2]=i}tE(){const t=this.n_.XI,s=this.a_;t.II.FI()&&t.II.XG(s[0],s[1]),t.yI.FI()&&t.yI.HG(s[2])}sE(t,s,i,e,n,r,h){this.Qc=15;const o=this.a_;t.$o(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}iE(){const t=this.n_.XI,s=this.a_;t.vI.FI()&&t.vI.XG(s[0],s[1]),t.II.FI()&&t.II.XG(s[4],s[5]),t.pI.FI()&&t.pI.XG(s[6],s[7]),t.mI.FI()&&t.mI.XG(s[8],s[9])}eE(t,s,i,e,n,r,h){this.Qc=28;const o=this.a_;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}nE(){const t=this.n_.XI,s=this.a_;t.II.FI()&&t.II.XG(s[0],s[1]),t.pI.FI()&&t.pI.XG(s[2],s[3]),t.yI.FI()&&t.yI.HG(s[4]),t.mI.FI()&&t.mI.XG(s[5],s[6])}rE(t){this.Qc=21,this.r_=t?1:0}hE(){const t=this.ZC,s=0!==this.r_;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}oE(t){this.Qc=22,this.r_=t?1:0}aE(){const t=this.ZC;0===this.r_?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}lE(t){this.Qc=23,this.r_=t?1:0}uE(){const t=this.ZC,s=this.n_,i=s.t_,e=0!==this.r_;s.s_=e,t.activeTexture(t.TEXTURE2),e?(s._C&&t.bindFramebuffer(t.FRAMEBUFFER,s._C),t.bindTexture(t.TEXTURE_2D,i.vC())):(t.bindTexture(t.TEXTURE_2D,null),s._C&&t.bindFramebuffer(t.FRAMEBUFFER,s.GC)),t.activeTexture(t.TEXTURE0)}cE(){this.Qc=24}fE(){const t=this.ZC;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}dE(){this.Qc=25}pE(){const t=this.ZC;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}mE(){this.Qc=26}gE(){const t=this.ZC;t.disable(t.STENCIL_TEST)}yE(t,s,i,e,n){this.Qc=27,this.r_=t?1:0;const r=this.a_;r[0]=s,r[1]=i,r[2]=e,r[3]=n}wE(){const t=this.ZC,s=this.a_;1===this.r_?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}ME(t){this.Qc=29,this.r_=t}SE(){const t=this.ZC,s=this.r_;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}TE(t){this.Qc=30,this.r_=t}vE(){const t=this.ZC;t.frontFace(0===this.r_?t.CW:t.CCW)}xE(){switch(this.Qc){case 1:return void this.d_();case 2:return void this.m_();case 3:return void this.M_();case 4:return void this.T_();case 5:return void this.x_();case 6:return void this.C_();case 7:return void this.G_();case 8:return void this.A_();case 9:return void this.P_();case 10:return void this.L_();case 11:return void this.k_();case 12:return void this.B_();case 13:return void this.V_();case 14:return void this.N_();case 15:return void this.iE();case 16:return void this.Y_();case 17:return void this.J_();case 18:return void this.X_();case 19:return void this.tE();case 20:return void this.y_();case 21:return void this.hE();case 22:return void this.aE();case 23:return void this.uE();case 24:return void this.fE();case 25:return void this.pE();case 26:return void this.gE();case 27:return void this.wE();case 28:return void this.nE();case 29:return void this.SE();case 30:return void this.vE()}}}}{let oc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};fillOrStrokeRect=oc,ptToPx=ac,getOffsetParam=lc;const uc=self.Gs,cc=4096,fc=4,dc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),pc={timeout:60},mc=new uc.bo(0,0,0,1),gc=new Set(["left","center","right"]),yc=new Set(["top","center","bottom"]),wc=new Set(["word","cjk","character"]),Mc=new Set(["ltr","rtl"]),Sc=1e3,Tc=10,vc=2,xc=new Set;uc.bE&&uc.bE.addEventListener("fontload",t=>{const s=t.font.Ac();for(const t of xc)(t.CE()||uc.Ze(t.IE(),s))&&(t.GE(),t._E())});let bc=!1,Cc=!1;uc.qw.ZT=class{constructor(t,s){s=Object.assign({},pc,s),this.tv=t,this.EE="Arial",this.AE=16,this.DE=1,this.NE=0,this.OE=!1,this.PE=!1,this.RE="black",this.LE=!1,this.qg=null,this.FE=!0,this.kE=null,this.jE=new Set,this.zE="left",this.BE="top",this.zc="",this.UE=null,this.$E=uc.Wn(uc.Jg),this.VE="word",this.WE="ltr",this.YE=!1,this.QE=!1,this.JE=!1,this.HE=!1,this.qE=-1,this.XE=0,this.ZE=0,this.KE=0,this.Uy=0,this.$y=0,this.tA=1,this.sA=null,this.iA=null,this.eA=null,this.nA=null,this.rA=-1,this.hA=-1,this.oA="",this.aA="",this.lA="",this.uA=1,this.cA=1,this.fA=t=>this.dA(t),this.pA=new Map,this.mA=new uc.Rf(()=>this._E(!0),2),this.Cb=null,this.gA=!0,this.yA=new uc.Rect,this.wA=1,this.MA=new uc.Rf(()=>{this.SA(),this.TA(8,8),this.vA()},s.timeout),this.xA=null,this.bA=!1,xc.add(this)}Yn(){this.kE=null,this.jE.clear(),this.qg=null,this.UE=null,this.sA=null,this.iA=null,this.eA=null,this.nA=null,this.fA=null,this._E(),this.mA.Yn(),this.MA.Yn(),this.xA=null,this.SA(),this.$E.Au(),this.$E=null,this.tv=null,this.bA=!0,xc.delete(this)}vA(){this.JE=!0}CA(){this.vA(),this.QE=!0}GE(){this.CA(),this.YE=!0}IA(t){if(t=!!t,this.LE===t)return;this.LE=t;const s=this.LE?"alphabetic":"top";this.iA&&(this.iA.textBaseline=s),this.eA&&(this.eA.textBaseline=s),this._E(),this.GE()}CE(){return this.LE}iy(t){this.qg!==t&&(this.qg=t,this.$E.iy(t),this.qg&&this.qg.Fw()&&this.qg.kw().then(()=>this.vA()),this.GE())}GA(t){t=!!t,this.FE!==t&&(this.FE=t,this.vA())}_A(t){t||(t="serif"),this.EE!==t&&(this.EE=t,this._E(),this.GE())}IE(){return this.EE}EA(t){t<.1&&(t=.1),this.AE!==t&&(this.AE=t,this._E(),this.GE())}AA(){return this.AE}DA(t){this.DE!==t&&(this.DE=t,this._E(),this.GE())}NA(t){this.NE!==t&&(this.NE=t,this.CA())}OA(){return this.NE}PA(t){t=!!t,this.OE!==t&&(this.OE=t,this._E(),this.GE())}RA(){return this.OE}LA(t){t=!!t,this.PE!==t&&(this.PE=t,this._E(),this.GE())}FA(){return this.PE}kA(t){t=Math.floor(t),this.qE!==t&&(this.qE=t,this.vA())}jA(){return this.qE}zA(t,s){let i=[];(this.OE||s.rw("b"))&&i.push("bold"),(this.PE||s.rw("i"))&&i.push("italic");const e=s.ew("size"),n=(e?parseFloat(e.Ag):this.AE)*this.DE;t?i.push(n+"pt"):i.push(n*this.BA()+"pt");let r=this.EE;const h=s.ew("font");return h&&h.Ag&&(r=h.Ag,this.kE&&!this.jE.has(r)&&(this.kE(r),this.jE.add(r))),r&&(dc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Vv(t){t instanceof uc.bo&&(t=t.sa()),this.RE!==t&&(this.RE=t,this.vA())}UA(t,s,i){mc.Ao(t,s,i),this.Vv(mc)}$A(t){if(!gc.has(t))throw new Error("invalid horizontal alignment");this.zE!==t&&(this.zE=t,this.CA())}VA(){return this.zE}WA(t){if(!yc.has(t))throw new Error("invalid vertical alignment");this.BE!==t&&(this.BE=t,this.CA())}YA(){return this.BE}QA(t){if(!wc.has(t))throw new Error("invalid word wrap mode");this.VE!==t&&(this.VE=t,this._E(),this.GE())}JA(){return this.VE}HA(t){if(!Mc.has(t))throw new Error("invalid text direction");this.WE!==t&&(this.WE=t,this.iA&&(this.iA.direction=this.WE),this.eA&&(this.eA.direction=this.WE),this._E(),this.GE())}qA(){return this.WE}$c(t){this.zc!==t&&(this.zc=t,this._E(),this.GE())}XA(){return this.zc}BA(){return this.wA*this.tA*self.devicePixelRatio}ZA(t){t=!!t,this.gA!==t&&(this.gA=t,this.HE=!0)}KA(){return this.gA}tD(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.ZE===t&&this.KE===s&&this.tA===i)return;const e=this.ZE;this.ZE=t,this.KE=s,this.tA=i;const n=self.devicePixelRatio;this.Uy=this.ZE*this.tA*n,this.$y=this.KE*this.tA*n;const r=Math.max(this.Uy,this.$y),h=Math.min(this.tv.Rb(),4096);let o=1;r>h&&(o=h/r,this.Uy=Math.min(this.Uy*o,h),this.$y=Math.min(this.$y*o,h)),this.wA=o,this.ZE!==e?this.GE():this.CA()}xy(){return this.Uy}Cy(){return this.$y}sD(){return this.tA}iD(){return this.eD(),this.$E.zy()}nD(){return this.eD(),this.$E.By()+this.$E.sy()*(this.NE+4)-this.NE}rD(){this.eD();let t=0;for(const s of this.$E.ty())for(const i of s.Fg())t+=i.ey();return t}DC(){return this.MA.zf(),this.hD(),this.Cb}oD(t,s){this.eD();const i=this.BA(),e=this.$E.ty();for(const n of e){const e=n.Gy()*i;if(s>=n.tw()-n.Cy()*i+e&&s<n.tw()+e)for(const s of n.Fg())if(t>=s.Zy()&&t<s.Zy()+s.xy()*i)return s}return null}*aD(t){this.eD();const s=this.$E.ty();for(const i of s)for(const s of i.Fg()){const i=s.ew("tag");i&&uc.Ze(i.Ag,t)&&(yield s)}}lD(t,s){for(const i of this.aD(t)){if(0===s)return i;--s}return null}uD(t){let s=0;for(const i of this.aD(t))++s;return s}hD(){(!this.Cb||this.JE||this.QE||this.YE||this.HE)&&(this.bA||this.Uy<=0||this.$y<=0||this.cD())}cD(){this.bA||(this.eD(),this.fD(),this.dD(),this.MA.zf())}TA(t,s){this.sA||(this.sA=uc.co(16,16));let i=!1;this.rA===t&&this.hA===s||(this.rA=t,this.hA=s,this.sA.width=t,this.sA.height=s,i=!0),this.iA||(this.iA=this.sA.getContext("2d"),i=!0),i?(this.iA.textBaseline=this.LE?"alphabetic":"top",this.iA.direction=this.WE,this.iA.font=this.oA,this.iA.fillStyle=this.lA,this.iA.strokeStyle=this.lA,this.iA.globalAlpha=this.uA,this.iA.lineWidth=this.cA):this.iA.clearRect(0,0,t,s)}pD(){this.eA||(this.eA=uc.co(16,16).getContext("2d"),this.nA=uc.co(16,16).getContext("2d"),this.eA.textBaseline=this.LE?"alphabetic":"top",this.nA.textBaseline="top",this.eA.direction=this.WE,this.nA.direction=this.WE)}mD(t){this.aA!==t&&(this.aA=t,this.eA.font=t,this.nA.font=t)}gD(){if(!bc){bc=!0,this.pD();const t=this.eA.measureText("test");Cc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Cc}eD(){this.yD(),this.wD()}yD(){this.YE&&(this.pD(),!this.LE||this.UE&&this.UE.toString()===this.zc||(this.UE=new uc.pn(this.zc,{mg:!0})),this.mA.zf(),this.$E.Jg(this.LE?this.UE._g():this.zc,this.fA,this.ZE,this.VE,0),this.YE=!1)}wD(){this.QE&&(this.MD(),this.QE=!1)}_E(t){this.pA.clear(),t||this.mA.Bf()}SD(t,s){const i=this.pA;if(i.set(t,s),i.size>1e3){let t=0;for(const s of i.keys())if(i.delete(s),t++,t>=10)break}}dA(t){const s=t.Vg()?t.Qg().join(""):" ",i=this.zA(!0,t),e=i+"|"+s,n=this.pA;let r=n.get(e);if(r)return n.delete(e),n.set(e,r),r;this.mD(i);const h=this.eA.measureText(s);let o=0;if(this.LE&&this.gD()){const t=this.nA.measureText(s);o=h.fontBoundingBoxAscent-t.fontBoundingBoxAscent}const a=t.ew("size"),l=(a?parseFloat(a.Ag):this.AE)*this.DE;return r={width:h.width,height:ac(l),fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,kg:o},this.SD(e,r),r}TD(t){this.oA!==t&&(this.oA=t,this.iA.font=t)}vD(t){this.lA!==t&&(this.lA=t,this.iA.fillStyle=t,this.iA.strokeStyle=t)}xD(t){this.uA!==t&&(this.uA=t,this.iA.globalAlpha=t)}bD(t){this.cA!==t&&(this.cA=t,this.iA.lineWidth=t)}MD(){const t=this.BA(),s=(4+this.NE)*t;let i=0;const e=this.$E.ty();if(0===e.length)return;for(const t of e){t.Xy(NaN),t.Ky(NaN);for(const s of t.Fg())s.Xy(NaN),s.Ky(NaN)}const n=this.LE&&this.gD();let r=e[0].Cy()*t;if("center"===this.BE){const h=e.reduce((i,e)=>i+e.Cy()*t+s,0)-s;i=Math.max(this.$y/2-h/2,0),n&&(r=e[0]._y()*t)}else if("bottom"===this.BE){const r=e.reduce((i,e)=>i+e.Cy()*t+s,0)-this.NE*t,h=n?e.at(-1).Gy()*t:0;i=this.$y-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Cy()*t,a=i;if(this.LE){if(i+=0===n?r:o,n>0&&i>this.$y-4*t)break}else if(n>0&&i>=this.$y-o)break;a>=0&&this.CD(h,i,t),this.LE||(i+=o),i+=s}}CD(t,s,i){let e=0;"center"===this.zE?e=Math.floor((this.Uy-t.xy()*i)/2):"right"===this.zE&&(e=this.Uy-t.xy()*i),t.Xy(e),t.Ky(s);for(const n of"ltr"===this.WE?t.Fg():t.Hy())this.ID(n,e,s,i),e+=n.xy()*i}ID(t,s,i,e){const n=t.ew("offsetx");s+=n?lc(n.Ag,t.Cy())*e:0;const r=t.ew("offsety");if(i+=r?lc(r.Ag,t.Cy())*e:0,t.Sy()){const s=t.ew("iconoffsety");i+=s?lc(s.Ag,t.Cy())*e:.2*t.Cy()*e}t.Xy(s),t.Ky(i)}fD(){if(!this.JE)return;this.TA(Math.max(uc.Tr(Math.ceil(this.Uy)),128),Math.max(uc.Tr(Math.ceil(this.$y)),64)),this.iA.imageSmoothingEnabled=this.FE,this.iA.imageSmoothingQuality="high",this.XE=0;const t=this.BA(),s=this.$E.ty();for(const i of s)this.GD(i,t);this.JE=!1}GD(t,s){const i=t.Zy(),e=t.tw();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.WE?t.Fg():t.Hy())this._D(i,s,t.Cy())}_D(t,s,i){const e=this.iA,n=t.Zy(),r=t.tw();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.xy()*s;const a=t.Cy()*s,l=t.Cy()/16,u=(4+this.NE)*s;let c=t.Vg()?t.Qg():null;if(-1!==this.qE){if(this.XE>=this.qE)return;t.Vg()&&this.XE+c.length>this.qE&&(c=c.slice(0,this.qE-this.XE),o=this.dA(t).width*s),this.XE+=t.ey()}const f=t.ew("background"),d=t.rw("u"),p=t.rw("s");if(t.Vg()&&uc.Tm(c)&&!f&&!d&&!p||t.rw("hide"))return;const m=t.ew("color"),g=t.ew("opacity");this.xD(g?parseFloat(g.Ag)/100:1),f&&(this.vD(f.Ag),e.fillRect(n,r-a,o,a+u));const y=t.ew("linethickness"),w=y?parseFloat(y.Ag):1,M=t.rw("stroke");if(M&&this.bD(.5*l*w*this.BA()),t.Vg()){const s=c.join("");if(this.TD(this.zA(!1,t)),!M){this.bD(.5*l*w*this.BA());const i=t.ew("outlineback");i&&(this.vD(i.Ag),this.ED(!0,s,n,r,o))}if(this.vD(m?m.Ag:this.RE),this.ED(M,s,n,r,o),!M){this.bD(.5*l*w*this.BA());const i=t.ew("outline");i&&(this.vD(i.Ag),this.ED(!0,s,n,r,o))}}else if(t.Sy()&&t.xy()>0){const s=t.dw(this.qg);s&&e.drawImage(s,n,r-a,o,a)}if(this.vD(m?m.Ag:this.RE),d&&oc(e,M,n,r+s*h,o,s*h*w),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*w/2,o,t*w)}}ED(t,s,i,e,n){"rtl"===this.WE&&(i+=n),t?"Gecko"===uc.Zs.ni?this.iA.strokeText(s,i,e,n):this.iA.strokeText(s,i,e):"Gecko"===uc.Zs.ni?this.iA.fillText(s,i,e,n):this.iA.fillText(s,i,e)}dD(){this.tv.AD()||(this.Cb&&!this.HE||(this.SA(),this.Cb=this.tv.TC(this.sA.width,this.sA.height,{Mb:this.gA,Sb:"high"}),this.HE=!1),this.tv.DD(this.sA,this.Cb),this.yA.set(0,0,this.Uy/this.Cb.xy(),this.$y/this.Cb.Cy()),this.xA&&this.xA())}ND(){return this.yA}SA(){this.Cb&&(this.tv.AD()||this.tv.CC(this.Cb),this.Cb=null)}static Wv(){for(const t of xc)t.SA()}static OD(){return xc.values()}}}{const Ic=self.Gs;class Gc{constructor(t){this.ZC=t.Lb(),this.PD=t.Fb(),this.RD=t.LD(),this.FD=null,this.jf=!1,this.kD=!1,this.jD=0,1===this.PD?this.FD=this.RD.createQueryEXT():this.FD=this.ZC.createQuery()}Yn(){this.zD(),this.ZC=null,this.RD=null,this.kD=!1}zD(){this.FD&&(1===this.PD?this.RD.deleteQueryEXT(this.FD):this.ZC.deleteQuery(this.FD),this.FD=null)}H_(){if(this.jf)throw new Error("query already active");1===this.PD?this.RD.beginQueryEXT(this.RD.TIME_ELAPSED_EXT,this.FD):this.ZC.beginQuery(this.RD.TIME_ELAPSED_EXT,this.FD),this.jf=!0}Z_(){if(!this.jf)throw new Error("query not active");1===this.PD?this.RD.endQueryEXT(this.RD.TIME_ELAPSED_EXT):this.ZC.endQuery(this.RD.TIME_ELAPSED_EXT),this.jf=!1}BD(){if(!this.FD||this.kD||this.jf)return;let t=!1;t=1===this.PD?this.RD.getQueryObjectEXT(this.FD,this.RD.QUERY_RESULT_AVAILABLE_EXT):this.ZC.getQueryParameter(this.FD,this.ZC.QUERY_RESULT_AVAILABLE);const s=this.ZC.getParameter(this.RD.GPU_DISJOINT_EXT);t&&!s&&(1===this.PD?this.jD=this.RD.getQueryObjectEXT(this.FD,this.RD.QUERY_RESULT_EXT):this.jD=this.ZC.getQueryParameter(this.FD,this.ZC.QUERY_RESULT),this.jD/=1e9,this.kD=!0),(t||s)&&this.zD()}UD(){return this.kD}$D(){if(!this.kD)throw new Error("no result available");return this.jD}}Ic.qw.VD=class{constructor(t){this.tv=t,this.YM=t.zT(),this.jf=!1,this.WD=null,this.YD=!1,this.QD=null,this.JD=[]}Yn(){for(const t of this.JD)t instanceof Gc&&t.Yn();Ic.Sh(this.JD),this.WD=null,this.QD=null,this.tv=null}H_(){if(this.jf)throw new Error("query already active");const t=this.tv.HD();t.length>0?(this.YD=!0,this.WD=t.at(-1),this.WD.qD(),this.WD.JD.push(this)):(this.YD=!1,this.WD=null),this.jf=!0,t.push(this),this.XD()}Z_(){if(!this.jf)throw new Error("query not active");if(this.tv.HD().pop()!==this)throw new Error("can only end most nested query");this.jf=!1,this.qD(),this.WD&&(this.WD.XD(),this.WD=null)}XD(){this.QD=Ic.Wn(Gc,this.tv),this.JD.push(this.QD),this.QD.H_()}qD(){this.QD.Z_(),this.QD=null}BD(){for(const t of this.JD)t.BD()}ZD(){return this.YD}UD(){return this.JD.every(t=>t.UD())}$D(){return this.JD.reduce((t,s)=>t+s.$D(),0)}zT(){return this.YM}}}{const _c=self.Gs;_c.qw.KD=class{constructor(t,s=1e3){this.tv=t,this.tN=s,this.sN=[],this.tv.iN(this)}Yn(){this.Au(),this.tv.eN(this),this.tv=null}Au(){for(const t of this.sN)t.Yn();_c.Sh(this.sN)}nN(){const t=new _c.qw.VD(this.tv);return this.sN.push(t),this.sN.length>this.tN&&this.sN.shift().Yn(),t}rN(t){for(const s of this.sN){if(s.zT()>=t)return;if(s.ZD())return;s.BD()}}hN(t,s){if(s<=t)return NaN;let i=0;for(const e of this.sN){if(e.zT()>=s)break;if(!(e.zT()<t)){if(!e.UD())return NaN;i+=e.$D()}}return i}oN(t){for(let s=0,i=this.sN.length;s<i;++s){const i=this.sN[s];if(!(i.zT()<t))return void(s>0&&this.sN.splice(0,s));i.Yn()}}}}{let Ec=function(){Hc=-1;for(const t of Jc)t.aN()&&(t.resolve(),Jc.delete(t));Jc.size>0&&(Hc=self.requestAnimationFrame(Ec))};CheckPendingPolls=Ec;const Ac=self.Gs,Dc=self.assert,Nc=self.ls,Oc=Nc.ws,Pc=Nc.Ms,Rc=Nc.ds,Lc={powerPreference:"default",lN:!0,alpha:!1,depth:!1,uN:!1,cN:2,failIfMajorPerformanceCaveat:!1},Fc=new Set(["default","low-power","high-performance"]),kc=65535,jc=393210,zc=8e3,Bc=7996,Uc=new Ac.El(0,0,1,0,1,1,0,1),$c=Rc.create(),Vc=Rc.create(),Wc=new Ac.El,Yc=new Ac.Rect;let Qc=null;Ac.Ls&&(self.fN=function(){Qc?Qc.loseContext():console.warn("WEBGL_lose_context not supported")},self.dN=function(){Qc?Qc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Jc=new Set;let Hc=-1;Ac.qw.pN=class extends Ac.qw.fM{constructor(t,s){if(super(s),s=Object.assign({},Lc,s),!Fc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.cN>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.ZC=e,this.mN=e.getContextAttributes(),this.gN=e.getParameter(e.VERSION),this.PD=n,this.yN=Pc.create(),this.wN=!1,this.MN=Rc.create(),this.SN=!!s.depth,this.TN=!(!s.depth||!s.uN),this.vN=this.SN,this.xN=!1,this.bN=null,this.CN=!0,this.IN=0,this.GN=0,this.sI=null,this.iI=null,this.eI=null,this._N=null,this.rI=null,this.EN=this.PD>=2&&void 0!==globalThis.Float16Array,this.AN=new Float32Array(196605),this.DN=new Uint16Array(393210),this.NN=new Float32Array(131070),this.ON=this.EN?new globalThis.Float16Array(262140):new Float32Array(262140),this.PN=new Float32Array(32e3),this.RN=0,this.LN=0,this.FN=0,this.kN=null,this.jN=null,this.zN=[],this.BN=0,this.UN=0,this.$N=null,this.VN=0,this.n_=Ac.Wn(Ac.qw.KG,this),this.WN=Ac.Wn(Ac.bo,1,1,1,1),this.YN=null,this.j_=null,this.QN=0,this.JN=new Ac.Rect,this.HN=Ac.Wn(Ac.Rect,0,0,-1,-1),this.qN=0,this.XN=0,this.ZN=0,this.KN=-1,this.tO=0,this.sO=0,this.iO="(unavailable)",this.eO="(unavailable)",this.nO=[],this.rO=!1,this.hO=null,this.oO=null,this.aO=null,this.lO=null,this.uO=null,this.cO=null,this.fO=null,this.dO=null,this.pO=0,this.mO=!!s.lN,this.RD=null,this.gO=new Set,this.yO=[]}YT(){return!0}async XM(){super.XM();const t=this.ZC;this.WN.Eo(1,1,1,1),this.YN=null,this.j_=null,this.RN=0,this.LN=0,this.FN=0,Ac.Sh(this.zN),this.BN=0,this.UN=0,this.kN=null,this.$N=null,this.JN.set(0,0,1,1),this.VN=0;const s=this.n_;s.XI=null,s.GC=null,s._C=null,s.clearColor.Eo(0,0,0,0),s.i_.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),this.QN=0,1===this.PD?this.dO=t.getExtension("EXT_blend_minmax"):this.dO=null,this.wO(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.XN=0,t.frontFace(t.CW),this.ZN=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.SN?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.vN=this.SN,this.xN=!1,this.rI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.rI),t.bufferData(t.ARRAY_BUFFER,this.PN.byteLength,t.DYNAMIC_DRAW),this.sI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.sI),t.bufferData(t.ARRAY_BUFFER,this.AN.byteLength,t.DYNAMIC_DRAW),this.iI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.iI),t.bufferData(t.ARRAY_BUFFER,this.NN.byteLength,t.DYNAMIC_DRAW),this.eI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.eI),t.bufferData(t.ARRAY_BUFFER,this.ON.byteLength,t.DYNAMIC_DRAW),this._N=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._N),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.DN.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.KN=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.tO=i[0],this.sO=i[1],this.sO>2048&&(this.sO=2048),this.nO=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.iO=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.eO=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.hO=t.getExtension("KHR_parallel_shader_compile"),this.PD>=2&&("Chromium"!==Ac.Zs.ni||Ac.Zs.ei>=135)&&(this.aO=t.getExtension("EXT_conservative_depth")),Ac.Ls&&(Qc=t.getExtension("WEBGL_lose_context")),this.mO&&(1===this.Fb()?this.RD=t.getExtension("EXT_disjoint_timer_query"):this.RD=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.oO=t.getExtension("EXT_texture_filter_anisotropic"),this.oO?this.pO=t.getParameter(this.oO.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.pO=0,this.Fb()<2&&this.SN&&this.TN&&(this.lO=t.getExtension("WEBGL_depth_texture"),!this.lO))throw new Error("no depth texture support");this.Fb()<2&&(this.uO=t.getExtension("EXT_frag_depth"),this.cO=t.getExtension("OES_standard_derivatives"),this.fO=t.getExtension("EXT_shader_texture_lod"));const n=Ac.qw.YC,r=n.SG(!1);let h=n.vG(),o=r,a=n.DG(),l=n.EG(),u=n.CG(),c=n.SG(!0),f=!1;this.SN&&(this.Fb()<2?this.uO&&(h=n.xG(),a=n.NG(),u=n.IG(),f=!0):(o=n.TG(),h=n.bG(this.MO()),a=n.OG(this.MO()),l=n.AG(),u=n.GG(this.MO()),c=n.TG(!0)));const d=n._G(this.Fb(),f,this.cO&&this.fO,this.MO()),p=this.Fb()>=2?n.TG():r,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[n.PG(),r,"<fill>"],[n.LG(),r,"<lineargradient>"],[n.FG(),r,"<penumbra>"],[n.jG(),r,"<hardellipse>"],[n.zG(),r,"<hardellipseoutline>"],[n.BG(),r,"<smoothellipse>"],[n.UG(),r,"<smoothellipseoutline>"],[n.kG(),r,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.SO({src:t[0],JC:t[1],name:t[2]})));this.vM=g[0],this.jN=g[1],this.xM=g[2],this.IM=g[3],this.GM=g[4],this._M=g[5],this.EM=g[6],this.AM=g[7],this.DM=g[8],this.NM=g[9],this.OM=g[10],this.bM=g[11],this.CM=g[12],this.TS()}async SO(t){const s=await Ac.qw.YC.XC(this,t);return this.yS(s),s}TO(){this.kN=null}tD(t,s,i){if(this.Uy===t&&this.$y===s&&!i)return;this.jT();const e=this.ZC,n=this.n_;this.Uy=t,this.$y=s,this.vO(0,0,t,s),this.fS(this.MN,t/s),this.xO(this.MN),this.jN&&(e.useProgram(this.jN.KI()),this.jN.YI(this.mM),this.kN=this.jN,this.n_.XI=this.jN),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.YN=null,this.j_=null,this.SN&&this.CN&&this.bO(this.Uy,this.$y),this.$N&&this.$N.bC(this.Uy,this.$y),e.bindFramebuffer(e.FRAMEBUFFER,null),this.$N=null,n.GC=null,n._C=null}bO(t,s){const i=this.ZC;this.bN&&this.IN===t&&this.GN===s||(this.TN?(this.bN&&i.deleteTexture(this.bN),this.bN=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.bN),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.Fb()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.lO&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.lO.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.bN&&i.deleteRenderbuffer(this.bN),this.bN=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.bN),i.renderbufferStorage(i.RENDERBUFFER,this.PD>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.IN=t,this.GN=s)}CO(t,s){this.SN&&(this.CN=!1,this.bO(t,s))}IO(){this.SN&&(this.CN=!0,this.bO(this.Uy,this.$y))}vO(t,s,i,e){const n=this.yN;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.GO().S_(t,s,i,e),Pc.set(n,t,s,i,e),this.UN=0)}oS(t){super.oS(t),this.fS(this.MN,this.Uy/this.$y)}eS(t){super.eS(t),this.fS(this.MN,this.Uy/this.$y)}rS(t){super.rS(t),this.fS(this.MN,this.Uy/this.$y)}xO(t){Rc.P(this.mM,t)||(this.GO().v_(t),Rc.M(this.mM,t),this.UN=0,this.wN=!0)}_O(){let t,s,i;const e=this.$N;null===e?(t=this.MN,s=this.xy(),i=this.Cy()):(t=e.NC(),s=e.xy(),i=e.Cy()),this.xO(t),this.vO(0,0,s,i)}EO(t){Rc.P(this.gM,t)||(this.GO().b_(t),Rc.M(this.gM,t),this.UN=0,this.wN=!0)}AO(){this.wN=!1}DO(){return this.wN}IC(){return this.n_}GO(){const t=this.zN;return this.BN===t.length&&t.push(new Ac.qw.e_(this.n_)),t[this.BN++]}jT(){0!==this.BN&&(this.AD()||(this.NO(),this.OO(),this.BN=0,this.RN=0,this.LN=0,this.FN=0,this.UN=0))}NO(){const t=this.ZC;this.RN>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.sI),t.bufferSubData(t.ARRAY_BUFFER,0,this.AN.subarray(0,3*this.RN)),t.bindBuffer(t.ARRAY_BUFFER,this.iI),t.bufferSubData(t.ARRAY_BUFFER,0,this.NN.subarray(0,2*this.RN)),t.bindBuffer(t.ARRAY_BUFFER,this.eI),t.bufferSubData(t.ARRAY_BUFFER,0,this.ON.subarray(0,4*this.RN))),this.LN>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._N),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.DN.subarray(0,this.LN))),this.FN>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.rI),t.bufferSubData(t.ARRAY_BUFFER,0,this.PN.subarray(0,this.FN)))}OO(){const t=this.zN;for(let s=0,i=this.BN;s<i;++s)t[s].xE()}PO(){return this.WN.Bo()}RO(t,s,i,e){const n=this.WN;n.Jo(t,s,i,e)||(n.Eo(t,s,i,e),this.RM=null,2===this.UN&&(this.UN=0))}LO(t){const s=this.WN;s.Bo()!==t&&(s.Lo(t),this.RM=null,2===this.UN&&(this.UN=0))}Vv(t){const s=this.WN;s.equals(t)||(s.set(t),this.RM=null,2===this.UN&&(this.UN=0))}FO(){this.RO(1,1,1,1)}kO(){return this.WN}jO(t){t!==this.YN&&(this.GO().p_(t),this.YN=t,this.UN=0)}Bb(){this.YN=null}$v(t){this.QN!==t&&(this.QN=t,this.zO(this.YS(t)))}BO(t){this.$v(this.QS(t))}zO(t){this.GO().w_(t),this.UN=0,this.RM=null}UO(){return 0===this.QN}$O(){this.$v(0)}PT(t){this.XN!==t&&(this.GO().ME(t),this.XN=t,this.UN=0,this.RM=null)}VO(){return this.XN}RT(t){this.ZN!==t&&(this.GO().TE(t),this.ZN=t,this.UN=0,this.RM=null)}WO(){return this.ZN}YO(){this.$v(3)}Rect(t){this.QO(t.Ka(),t.tl(),t.sl(),t.il())}QO(t,s,i,e){this.FT(t,s,i,s,i,e,t,e)}JO(t,s){(this.RN+t>65535||this.LN+s>393210)&&this.jT(),1===this.UN?this.zN[this.BN-1].h_+=s:(this.GO().f_(2*this.LN,s),this.UN=1)}HO(){const t=this.RN;let s=this.LN;this.LN+=6;const i=this.DN;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}El(t){this.qO(t,Uc)}FT(t,s,i,e,n,r,h,o){this.JO(4,6),this.HO();const a=this.AN,l=this.RN;this.RN+=4;let u=3*l;const c=this.kM+this.jM;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Uc.$o(this.NN,2*l),this.WN.Vo(this.ON,4*l)}oT(t,s){this.JO(4,6),this.HO();const i=this.RN;this.RN+=4,t.Hl(this.AN,3*i,this.kM+this.jM),s.rl(this.NN,2*i),this.WN.Vo(this.ON,4*i)}qO(t,s){this.JO(4,6),this.HO();const i=this.RN;this.RN+=4,t.Hl(this.AN,3*i,this.kM+this.jM),s.$o(this.NN,2*i),this.WN.Vo(this.ON,4*i)}XO(t,s,i){this.JO(4,6),this.HO();const e=this.RN;this.RN+=4,t.Hl(this.AN,3*e,this.kM+this.jM),s.$o(this.NN,2*e),this.ON.set(i,4*e)}ZO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.JO(4,6),this.HO();const d=this.AN,p=this.RN;this.RN+=4;let m=3*p;const g=this.kM+this.jM;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.rl(this.NN,2*p),this.WN.Vo(this.ON,4*p)}iT(t,s,i,e,n,r,h,o,a,l,u,c,f){this.JO(4,6),this.HO();const d=this.AN,p=this.RN;this.RN+=4;let m=3*p;const g=this.kM+this.jM;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.$o(this.NN,2*p),this.WN.Vo(this.ON,4*p)}KO(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.JO(4,6),this.HO();const p=this.AN,m=this.RN;this.RN+=4;let g=3*m;const y=this.kM+this.jM;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.$o(this.NN,2*m),this.ON.set(d,4*m)}nb(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.JO(t.length,i.length);const n=this.RN;this.AN.set(t,3*n),this.NN.set(s,2*n);const r=this.DN;if(0===n)r.set(i,this.LN);else{let t=this.LN;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.ON;if(null!=e)h.set(e,4*n);else{const s=this.WN,i=s.ko(),e=s.jo(),r=s.zo(),o=s.Bo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.RN+=t.length/3,this.LN+=i.length}tP(t,s){this.qS(0),Rc.M($c,this.mM),Rc.M(Vc,this.gM),this._O();const[i,e]=this.sP(this.$N),n=this.gS(0,0,this.KM(e),0,0,0,e);if(this.EO(n),"crop"===t&&this.$N&&s){const t=this.Uy/2,i=this.$y/2,e=s.xy(),n=s.Cy(),r=this.$N.xy(),h=this.$N.Cy(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Yc.set(-t,i-u,-t+o,i-a-u),Wc.ql(Yc),Yc.set(0,l,o,a+l),Yc.Mt(e,n),this.oT(Wc,Yc)}else{const t=i/2,s=e/2;this.QO(-t,s,t,-s)}this.xO($c),this.EO(Vc)}iP(t){this.JN.equals(t)||(this.JN.M(t),this.GO().D_(t),this.UN=0)}eP(){}nP(t,s,i,e){this.FN>=7996&&this.jT();let n=this.FN;const r=this.kM+this.jM;2===this.UN&&this.VN===r?this.zN[this.BN-1].h_++:(this.GO().O_(n,r,this.WN),this.UN=2,this.VN=r);const h=this.PN;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.FN=n}vS(t){this.kN!==t&&(this.GO().R_(t),this.kN=t,this.UN=0,this.RM=null)}rP(){return this.kN}hP(){this.vS(this.jN)}oP(t){this.GO().g_(t),this.UN=0}aP(t,s,i=1){this.GO().K_(t,s,i),this.UN=0}lP(t,s,i,e,n,r,h){if(this.kN!==this.bM)throw new Error("must set tilemap fill mode first");this.GO().sE(t,s,i,e,n,r,h),this.UN=0}uP(t,s,i,e,n,r,h){if(this.kN!==this.CM)throw new Error("must set tile randomization mode first");this.GO().eE(t,s,i,e,n,r,h),this.UN=0}cP(t,s,i,e,n,r,h,o,a,l,u){const c=this.kN;if(u%=10800,!c.LI||c.oG(s,i,e,n,r,h,o,a,l,u))return;const f=this.GO();f.F_(),c.uG(s,i,e,n,r,h,o,a,l,u);const d=f.a_;d[0]=r,d[1]=h,s.$o(d,2),d[6]=a,d[7]=l,i.$o(d,12);const p=f.l_;n.$o(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.$o(f.u_,0),f.r_=u,f.h_=o,c.wI.FI()?f.o_=t?t.DC():null:f.o_=null,this.UN=0}fP(t){const s=this.kN;if(0===t.length||s.eG(t))return;const i=this.GO();i.z_(),s.rG(t),Ac.Ch(i.c_,t),this.UN=0}dP(t,s,i,e){this.GO().E_(t,s,i,e),this.UN=0}Au(t){this.GO().__(t),this.UN=0}pP(){}kT(){super.kT(),this.ZC.flush()}mP(){this.SN&&this.$N&&this.$N.LC()&&(this.GO().rE(this.vN),this.UN=0)}gP(t){t=!!t,this.vN!==t&&this.SN&&(this.vN=t,this.GO().oE(t),this.UN=0)}yP(){return this.vN}vC(){return this.bN}xC(){return this.TN}wP(t){if(t=!!t,this.TN&&this.xN!==t){if(t&&this.yP())throw new Error("depth still enabled");this.xN=t,this.GO().lE(t),this.UN=0}}MP(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.HN.Za(t,s,i,e)||(this.HN.Wa(t,s,i,e),s=(n||this.sP(this.SP())[1])-s-e,this.GO().yE(!0,t,s,i,e),this.UN=0)}TP(){-1!==this.HN.sl()&&(this.HN.set(0,0,-1,-1),this.GO().yE(!1,0,0,0,0),this.UN=0)}vP(){for(const t of this.gO)t.rN(this.YM)}AD(){return!this.ZC||this.ZC.isContextLost()||this.rO}Wv(){super.ZM(),Ac.qw.bb.Wv(),Ac.qw.hC.Wv(),Ac.qw.ZT.Wv();for(const t of this.gO)t.Au();this.nO=[],this.RD=null,this.hO=null,this.aO=null,this.oO=null,this.lO=null,this.uO=null,this.cO=null,this.fO=null,this.pO=0,this.iO="(unavailable)",this.eO="(unavailable)",this.kN=null,this.jN=null,this.bN=null;for(const t of this.PM.values())t.Wv()}async Yv(){this.rO=!0,await this.XM(),this.rO=!1;for(const t of this.PM.values())t.Yv(this);this.tD(this.Uy,this.$y,!0)}xP(t,s){if(this.AD())throw new Error("context lost");this.jT();const i=Ac.Wn(Ac.qw.bb,this);return i.Pb(t,s),i}async bP(t,s){if(this.AD())throw new Error("context lost");if(s=Object.assign({},s),Ac.Di.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.pb&&"clamp-to-edge"!==s.pb||s.mb&&"clamp-to-edge"!==s.mb,n=Ac.Sr(i.width)&&Ac.Sr(i.height);return this.kb()||n||!e?s.Tb=!1:Ac.Di.Ri?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Ac.Tr(i.width),resizeHeight:Ac.Tr(i.height)}),s.Tb=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Ac.pf(()=>this.xP(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Ac.uo(t);t=s}return await Ac.pf(()=>this.xP(t,s))}TC(t,s,i){this.jT();const e=Ac.Wn(Ac.qw.bb,this);return e.Ub(t,s,i),e}DD(t,s,i){this.jT(),s.Qb(t,i)}CC(t){t&&(t.Zb(),t.Kb()>0||(this.jT(),t===this.YN&&(this.ZC.bindTexture(this.ZC.TEXTURE_2D,null),this.YN=null),t===this.j_&&(this.ZC.activeTexture(this.ZC.TEXTURE1),this.ZC.bindTexture(this.ZC.TEXTURE_2D,null),this.ZC.activeTexture(this.ZC.TEXTURE0),this.j_=null),t.Jb()))}CP(t){let s=this.Uy,i=this.$y,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.jT();const n=Ac.Wn(Ac.qw.hC,this);return n.MC(s,i,Object.assign({nC:e},t)),this.$N=null,this.n_.GC=null,this.n_._C=null,n}IP(t,s=!0){t!==this.$N&&(t&&t.FC()&&t.bC(this.Uy,this.$y),this.GO().I_(t),this.$N=t,this.UN=0,s&&this._O())}SP(){return this.$N}sP(t){return t?[t.xy(),t.Cy()]:[this.Uy,this.$y]}GP(t,s="stretch"){this.PD<2||this.$N&&this.$N.kC()>0?(this.YO(),this.FO(),this._P(t,s)):(this.GO().W_(t,this.$N,s),this.UN=0)}_P(t,s="stretch"){const i=t.DC();if(!i)throw new Error("not a texture-backed render target");this.jO(i),this.tP(s,i)}EP(t){this.PD<2||(this.GO().U_(t.EC()),this.UN=0)}AP(t){this.IP(null),this.jT();const s=t.DC();s===this.YN&&(this.ZC.bindTexture(this.ZC.TEXTURE_2D,null),this.YN=null),s===this.j_&&(this.ZC.activeTexture(this.ZC.TEXTURE1),this.ZC.bindTexture(this.ZC.TEXTURE_2D,null),this.ZC.activeTexture(this.ZC.TEXTURE0),this.j_=null),t.Jb()}async $C(t,s,i){this.jT();const e=this.$N;let n,r,h;t?(n=t.xy(),r=t.Cy(),h=t.EC()):(n=this.xy(),r=this.Cy(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Ac.Xn(Math.floor(i.Ka()),0,n-1),a=Ac.Xn(Math.floor(i.tl()),0,r-1);let t=i.width();t=0===t?n-o:Ac.Xn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Ac.Xn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.ZC;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.$N=null,this.n_.GC=null,this.n_._C=null,this.IP(e)};let d;if(!s&&this.Fb()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.qC(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}DP(){this.gP(!0),this.GO().cE(),this.UN=0,this.qN=1}NP(t=!1){this.gP(t),this.GO().dE(),this.UN=0,this.qN=2}OP(){return 2===this.qN}PP(t=!0){this.gP(t),this.GO().mE(),this.UN=0,this.qN=0}RP(t){this.LP()&&(this.GO().Q_(t),this.UN=0)}FP(t){this.LP()&&(this.GO().q_(t),this.UN=0)}qC(t){const s=new Promise(s=>Jc.add({resolve:s,aN:t}));return-1===Hc&&(Hc=self.requestAnimationFrame(Ec)),s}QT(){return this.Uy*this.$y*(this.mN.alpha?4:3)}JT(){let t=0;for(const s of Ac.qw.hC.VC())s.DC()||(t+=s.sC());return t}HT(){let t=0;for(const s of Ac.qw.bb.iC())t+=s.sC();return t}kP(){return this.gN}Fb(){return this.PD}nI(){return this.EN}jP(){return"webgl"+this.Fb()}kb(){return this.Fb()>=2}Rb(){return this.KN}zP(){return this.tO}BP(){return this.sO}UP(){return this.iO}$P(){return this.eO}VP(){if(this.Fb()>=2)return"webgl2";{const t=[];return this.uO&&t.push("EXT_frag_depth"),this.cO&&t.push("OES_standard_derivatives"),this.fO&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}WP(){return this.nO}LP(){return!!this.RD}LD(){return this.RD}HC(){return this.hO}MO(){return!!this.aO}Wb(){return this.oO}Yb(){return this.pO}iN(t){this.gO.add(t)}eN(t){this.gO.delete(t)}HD(){return this.yO}Lb(){return this.ZC}wO(t){let s=t.FUNC_ADD,i=t.FUNC_ADD;this.PD>=2?(s=t.MAX,i=t.MIN):this.dO&&(s=this.dO.MAX_EXT,i=this.dO.MIN_EXT),this.WS([["normal",[t.ONE,t.ONE_MINUS_SRC_ALPHA]],["additive",[t.ONE,t.ONE]],["xor",[t.ONE,t.ONE_MINUS_SRC_ALPHA]],["copy",[t.ONE,t.ZERO]],["destination-over",[t.ONE_MINUS_DST_ALPHA,t.ONE]],["source-in",[t.DST_ALPHA,t.ZERO]],["destination-in",[t.ZERO,t.SRC_ALPHA]],["source-out",[t.ONE_MINUS_DST_ALPHA,t.ZERO]],["destination-out",[t.ZERO,t.ONE_MINUS_SRC_ALPHA]],["source-atop",[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA]],["destination-atop",[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]],["lighten",[t.ONE,t.ONE,t.ONE,t.ONE,s,s]],["darken",[t.ONE,t.ONE,t.ONE,t.ONE,i,i]],["multiply",[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA]],["screen",[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA]]])}YP(){return this.XT()}}}{const qc=self.Gs,Xc=self.ls,Zc=Xc.ws,Kc=Xc.ds,tf=self.assert,sf=self.GPUBufferUsage,ef=self.GPUShaderStage,nf=self.GPUMapMode,rf=self.GPUTextureUsage,hf={powerPreference:"default",depth:!1,failIfMajorPerformanceCaveat:!1,QP:!1,JP:"bilinear",HP:!1,uN:!1,qP:!0},of=65535,af=393210,lf=Math.floor(65535/4),uf=65535,cf=4*lf-16,ff=1,df=2,pf=4,mf=8,gf=16,yf=32,wf=64,Mf=128,Sf=256,Tf=512,vf=1024,xf=2048,bf=4096,Cf=8192,If=16384,Gf=32768,_f=65536,Ef=1<<17,Af=1<<18,Df=1<<19,Nf=1<<20,Of=1<<21,Pf=1<<22,Rf=1<<23,Lf=1<<24,Ff=1<<25,kf=1<<26,jf=1<<27,zf=1<<28,Bf=1<<29,Uf=1<<30,$f=1,Vf=8688,Wf=8697,Yf=25072,Qf=7680,Jf=2,Hf=4,qf=2,Xf=4,Zf=new qc.El(0,0,1,0,1,1,0,1),Kf=qc.Wn(qc.Ea),td=qc.Wn(qc.Rect),sd=qc.Wn(qc.Rect),id=qc.Wn(qc.El);qc.qw.XP=class extends qc.qw.fM{constructor(t){super(t),this.ZP=null,this.KP=null,this.tR=null,this.sR=null,this.iR=null,this.eR=null,this.nR="",this.rR=null,this.hR=null,this.oR=0,this.aR=0,this.lR=Kc.create(),this.bN=null,this.uR=null,this.cR=null,this.fR=null,this.dR=null,this.pR=null,this.IN=0,this.GN=0,this.mR=null,this.gR=null,this.yR=null,this.wR=null,this.sI=null,this.iI=null,this.MR=null,this.eI=null,this._N=null,this.SR=null,this.rI=null,this.TR=qc.qw.xR.vR(),this.bR=qc.qw.xR.CR(),this.IR=null,this.GR=null,this._R=qc.qw.xR.ER(),this.AR=qc.qw.xR.DR(),this.NR=null,this.OR=null,this.PR=qc.qw.xR.RR(),this.LR=qc.qw.xR.FR(),this.kR=null,this.jR=null,this.zR=null,this.AN=new Float32Array(196605),this.NN=new Float32Array(131070),this.BR=new Uint32Array(65535),this.ON=null,this.DN=new Uint16Array(393210),this.PN=new Float32Array(4*lf),this.RN=0,this.LN=0,this.UR=0,this.$R=qc.Wn(qc.bo,1,1,1,1),this.FN=0,this.VR=qc.Wn(qc.qw.WR,this),this.YR=32768,this.QR=0,this.JR=0,this.HR=0,this.qR=0,this.XR=0,this.ZR=0,this.KR=0,this.tL=0,this.sL=0,this.iL=qc.Wn(qc.Rect,0,0,0,0),this.eL=qc.Wn(qc.bo,1,1,1,1),this.nL=qc.Wn(qc.bo,1,1,1,1),this.rL=qc.Wn(qc.Rect,0,0,0,0),this.hL=0,this.oL="",this.aL=null,this.lL=null,this.uL=null,this.cL=null,this.fL=null,this.dL=null,this.pL=null,this.mL=null,this.gL=null,this.yL=null,this.wL=null,this.ML=null,this.SL=null,this.TL=new Set,this.vL=new Set,this.KN=8192,this.xL=null,this.bL=null,this.CL=null,this.IL=null,this.GL=0,this._L=0,this.EL=0,this.AL=0,this.DL=null,this.NL=null,this.OL=new Map,this.PL=null,this.RL=null,this.LL=[],this.FL=null,this.$N=null,this.kL=!1,this.jL="bilinear",this.zL=!1,this.TN=!1,this.BL=null,this.UL=!1,this.$L=-1,this.VL=-1,this.WL=new Set,this.YL=null,this.QL=null,this.wO()}dS(){return!0}JL(t,s){s?this.YR|=t:this.YR&=~t}HL(t){return 0!==(this.YR&t)}qL(t,s){s?this.QR|=t:this.QR&=~t}XL(t){return 0!==(this.QR&t)}async XC(t,s){if(s=Object.assign({},hf,s),!navigator.gpu)throw new Error("renderer-unavailable (WebGPU not supported)");if("Safari"===qc.Zs.si||"iOS"===qc.Zs.Ks)throw new Error("WebGPU is currently disabled in Safari - see https://bugs.webkit.org/show_bug.cgi?id=301627");s.depth&&(this.YR|=524288),s.qP&&(this.YR|=65536),this.kL=!!s.QP,this.jL=s.JP,this.zL=!!s.HP,this.ZP={},this.TN=!(!s.depth||!s.uN),"default"!==s.powerPreference&&(this.ZP.powerPreference=s.powerPreference),this.iR=t,await this.ZL(s.failIfMajorPerformanceCaveat)}async ZL(t){for(this.sR=null,await this.KL(t);!this.sR;)this.KP=null,await this.KL(t);await this.XM()}async KL(t){if(!this.KP){if(this.KP=await navigator.gpu.requestAdapter(this.ZP),!this.KP)throw new Error("renderer-unavailable (no WebGPU adapter available)");const s=this.KP.info;if(t&&s.isFallbackAdapter)throw new Error("renderer-unavailable (WebGPU provided fallback adapter)");if("adreno-7xx"===s.architecture)throw new Error("WebGPU disabled on adreno-7xx devices - see https://issues.chromium.org/issues/329702056");if("intel"===s.vendor&&("gen-7"===s.architecture||"gen7"===s.architecture))throw new Error("WebGPU disabled on Intel Gen7 GPUs - see https://issues.chromium.org/issues/462468373")}const s=[];if(this.KP.features.has("timestamp-query")&&s.push("timestamp-query"),this.KP.features.has("shader-f16")&&s.push("shader-f16"),this.sR=await this.KP.requestDevice({requiredFeatures:s,requiredLimits:{maxTextureDimension2D:this.KP.limits.maxTextureDimension2D}}),!this.sR)return null;this.KN=this.sR.limits.maxTextureDimension2D,this.JL(134217728,this.sR.features.has("timestamp-query")),this.JL(268435456,this.sR.features.has("shader-f16")),this.JL(536870912,this.HL(268435456)&&void 0!==globalThis.Float16Array),this.sR.lost.then(t=>this.tF(t)),this.JL(32768,!1)}async tF(t){console.log("[WebGPU] Device lost: ",t),super.ZM(),this.VR.Wv(),qc.qw.sF.Wv(),qc.qw.iF.Wv(),qc.qw.ZT.Wv(),this.nR="",this.rR=null,this.hR=null,this.bN=null,this.cR=null,this.uR=null,this.fR=null,this.dR=null,this.pR=null,this.sI=null,this.iI=null,this.MR=null,this.eI=null,this._N=null,this.SR=null,this.rI=null,this.mR=null,this.gR=null,this.yR=null,this.wR=null,this.lL=null,this.aL=null,this.ML=null,this.uL=null,this.cL=null,this.fL=null,this.xL=null,this.IL=null,this.dL=null,this.pL=null,this.mL=null,this.gL=null,this.yL=null,this.wL=null,this.bL=null,this.CL=null,this.FL=null,this.$N=null,this.SL=null,this.BL=null,this.DL=null,this.NL=null,this.TL.clear(),this.vL.clear(),this.OL.clear();for(const t of this.PM.values())t.Wv();this.sR=null,this.KP=null,this.tR=null,this.YR|=32768,this.YL&&this.YL(),await this.ZL();for(const t of this.PM.values())t.Yv(this);this.tD(this.Uy,this.$y,!0),this.QL&&this.QL()}async XM(){super.XM();const t=this.sR;this.nR=navigator.gpu.getPreferredCanvasFormat(),this.rR=null,this.hR=null;let s=rf.RENDER_ATTACHMENT;this.kL&&(s|=rf.TEXTURE_BINDING),this.zL&&(s|=rf.COPY_SRC),this.nR.startsWith("rgba8")||this.nR.startsWith("bgra8")?this.oL=this.nR:this.oL="rgba8unorm",this.YR&=940113920,this.YR|=7680,this.QR=0,this.HL(524288)&&(this.YR|=70254592),this.RN=0,this.LN=0,this.GL=0,this.EL=0,this.AL=0,this._L=0,this.$R.Eo(1,1,1,1),this.eL.Eo(1,1,1,1),this.nL.Eo(1,1,1,1),this.ON=this.nI()?new globalThis.Float16Array(262140):new Float32Array(262140),this.IR=new ArrayBuffer(this.bR),this.GR=new Float32Array(this.IR),this.NR=new ArrayBuffer(this.AR),this.OR=new Float32Array(this.NR),this.kR=new ArrayBuffer(this.LR),this.jR=new Float32Array(this.kR),this.zR=new Uint32Array(this.kR),this.sI=t.createBuffer({label:"vertexbuffer",size:this.AN.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.iI=t.createBuffer({label:"texcoordbuffer",size:this.NN.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.MR=t.createBuffer({label:"texindexbuffer",size:this.BR.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.eI=t.createBuffer({label:"colorbuffer",size:this.ON.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this._N=t.createBuffer({label:"indexbuffer",size:this.DN.byteLength,usage:sf.INDEX|sf.COPY_DST}),this.SR=t.createBuffer({label:"pointsindexbuffer",size:6*lf*2,usage:sf.INDEX,mappedAtCreation:!0});const i=this.SR.getMappedRange();this.eF(i),this.SR.unmap(),this.rI=t.createBuffer({label:"pointbuffer",size:this.PN.byteLength,usage:sf.VERTEX|sf.STORAGE|sf.COPY_DST}),this.aL=t.createBindGroupLayout({label:"bufferbindgrouplayout",entries:[{binding:0,visibility:ef.VERTEX,buffer:{type:"uniform",minBindingSize:this.bR}},{binding:1,visibility:ef.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.AR}},{binding:3,visibility:ef.VERTEX,buffer:{type:"read-only-storage",minBindingSize:this.PN.byteLength}},{binding:4,visibility:ef.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.LR}},{binding:5,visibility:ef.FRAGMENT,buffer:{type:"uniform"}}]});const e=[],n=qc.qw.rF.nF();for(let t=0;t<n;++t)e.push({binding:2*t,visibility:ef.FRAGMENT,sampler:{type:"filtering"}},{binding:2*t+1,visibility:ef.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}});this.uL=t.createBindGroupLayout({label:"texturebindgrouplayout",entries:e}),this.cL=t.createBindGroupLayout({label:"backtexturebindgrouplayout",entries:[{binding:0,visibility:ef.FRAGMENT,sampler:{type:"nearest"===this.jL?"non-filtering":"filtering"}},{binding:1,visibility:ef.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}}]}),this.fL=t.createBindGroupLayout({label:"depthtexturebindgrouplayout",entries:[{binding:0,visibility:ef.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:ef.FRAGMENT,texture:{sampleType:"depth",viewDimension:"2d"}}]}),this.xL=t.createPipelineLayout({bindGroupLayouts:[this.aL,this.uL,this.cL,this.fL]});const r=qc.qw.xR,h=this.hF(),o=this.nI();this.bL=t.createShaderModule({label:"<default vertex module>",code:r.oF(r.SG(o),h)}),this.bL.getCompilationInfo().then(t=>r.aF("<default>","vertex",t)),this.CL=t.createShaderModule({label:"<normalized vertex module>",code:r.oF(r.lF(o),h)}),this.CL.getCompilationInfo().then(t=>r.aF("<normalized>","vertex",t));const a=await Promise.all([r.XC(this,{name:"<default>",src:r.uF(!1,o),cF:r.uF(!0,o),JC:r.fF(o),dF:r.pF(o)}),r.XC(this,{name:"<single-texture-fill>",src:r.mF(!1,o),cF:r.mF(!0,o),JC:r.fF(o),dF:r.pF(o)}),r.XC(this,{name:"<generate-mipmap>",src:r.gF(),JC:r.yF()}),r.XC(this,{name:"<point>",src:r.wF(!1),cF:r.wF(!0),JC:r.MF()}),r.XC(this,{name:"<tilemap>",src:r.SF(!1),cF:r.SF(!0)}),r.XC(this,{name:"<fill>",src:r.TF()}),r.XC(this,{name:"<lineargradient>",src:r.vF()}),r.XC(this,{name:"<penumbra>",src:r.xF()}),r.XC(this,{name:"<hardellipse>",src:r.bF()}),r.XC(this,{name:"<hardellipseoutline>",src:r.CF()}),r.XC(this,{name:"<smoothellipse>",src:r.IF()}),r.XC(this,{name:"<smoothellipseoutline>",src:r.GF()}),r.XC(this,{name:"<tilerandomization>",src:r._G(!1),cF:r._G(!0)}),r.XC(this,{name:"<smoothline>",src:r._F()})]);this.vM=a[0],this.NL=a[1],this.DL=a[2],this.xM=a[3],this.bM=a[4],this.IM=a[5],this.GM=a[6],this._M=a[7],this.EM=a[8],this.AM=a[9],this.DM=a[10],this.NM=a[11],this.CM=a[12],this.OM=a[13];for(const t of a)this.yS(t);65536&this.YR?(this.YR|=393216,this.IL=this.vM):this.IL=this.NL,this.SL=this.DL.EF(),this.mR=t.createBuffer({label:"vertexuniformbuffer",size:this.bR,usage:sf.UNIFORM|sf.COPY_DST}),this.gR=t.createBuffer({label:"fragmentuniformbuffer",size:this.AR,usage:sf.UNIFORM|sf.COPY_DST}),this.yR=t.createBuffer({label:"fragmentc3paramsuniformbuffer",size:this.LR,usage:sf.UNIFORM|sf.COPY_DST}),this.wR=t.createBuffer({label:"fragmentdefaultcustomparamsbuffer",size:16,usage:sf.UNIFORM|sf.COPY_DST}),this.qR=0,this.XR=this.bR,this.AF(),this.DF(),this.NF(),this.ZR=0,this.KR=this.AR,this.OF(),this.PF(),this.lL=this.RF(this.wR),this.ML=this.lL;const l=qc.co(32,32);l.getContext("2d"),this.dL=await this.bP(l),this.pL=null,this.mL=this.dL.LF(),this.UR=0,this.gL=null,this.yL=this.dL.FF(),this.dL.kF(),this.uR=this.sR.createTexture({label:"nulldepthbuffer",size:[8,8,1],format:this.jF(),usage:rf.TEXTURE_BINDING}),this.fR=this.uR.createView({label:"nulldepthbufferview",aspect:"depth-only"}),this.pR=this.sR.createBindGroup({label:"nulldepthbufferbindgroup",layout:this.fL,entries:[{binding:0,resource:this.zF({gb:"nearest"})},{binding:1,resource:this.fR}]}),this.wL=this.pR,this.FL=qc.Wn(qc.qw.iF,this,!0),this.FL.DC().BF(s,this.nR),this.$N=this.FL,this.UF(),this.tR=this.KP.info,this.eR||(this.eR=this.iR.getContext("webgpu")),this.eR.configure({device:t,format:this.nR,usage:s,alphaMode:"premultiplied"})}RF(t){return this.sR.createBindGroup({layout:this.aL,entries:[{binding:0,resource:{buffer:this.mR}},{binding:1,resource:{buffer:this.gR}},{binding:3,resource:{buffer:this.rI}},{binding:4,resource:{buffer:this.yR}},{binding:5,resource:{buffer:t}}]})}eF(t){const s=new Uint16Array(t);let i=0,e=s.length,n=0;for(;i<e;)s[i++]=n,s[i++]=n+1,s[i++]=n+2,s[i++]=n,s[i++]=n+2,s[i++]=n+3,n+=4}$F(){return this.sR}VF(){return this.bL}WF(){return this.CL}async SO(t){const s=await qc.qw.xR.XC(this,t);return this.yS(s),s}jP(){return"webgpu"}YF(){return this.nR}jF(){return"depth24plus-stencil8"}QF(){return this.rR}JF(){return this.hR}HF(){return this.kL}qF(){return this.zL}XF(){return this.xL}ZF(){return this.uL}KF(){return this.cL}tk(){return this.jL}sk(){return this.oL}Rb(){return this.KN}AD(){return this.HL(32768)}LP(){return this.HL(134217728)}hF(){return this.HL(268435456)}nI(){return this.HL(536870912)}QT(){const t=this.xy()*this.Cy();let s=t*qc.qw.sF.ik(this.nR);return this.ek()&&(s+=t*qc.qw.sF.ik(this.jF())),s}JT(){let t=0;for(const s of qc.qw.iF.VC())s.nk()||(t+=s.DC().sC());return t}HT(){let t=0;for(const s of qc.qw.sF.iC())s.rk()||(t+=s.sC());return t}kb(){return!0}hk(){return this.VR}tD(t,s,i){(this.Uy!==t||this.$y!==s||i)&&(this.jT(),this.Uy=t,this.$y=s,this.oR=t,this.aR=s,this.FL.SC(),this.xO(this.FL.NC()),this.$N&&this.$N.bC(this.Uy,this.$y),this.HL(524288)&&this.HL(67108864)&&this.bO(t,s))}bO(t,s){if(this.bN){if(this.IN===t&&this.GN===s)return;this.bN.destroy()}let i=rf.RENDER_ATTACHMENT;this.TN&&(i|=rf.TEXTURE_BINDING),this.bN=this.sR.createTexture({label:"depthbuffer",size:[t,s,1],format:this.jF(),usage:i}),this.cR=this.bN.createView({label:"depthbufferview"}),this.TN&&(this.dR=this.sR.createBindGroup({label:"depthbufferbindgroup",layout:this.fL,entries:[{binding:0,resource:this.zF({gb:"nearest"})},{binding:1,resource:this.bN.createView({label:"depthbufferview",aspect:"depth-only"})}]})),this.IN=t,this.GN=s}CO(t,s){this.ek()&&(this.JL(67108864,!1),this.bO(t,s))}IO(){this.ek()&&(this.JL(67108864,!0),this.bO(this.Uy,this.$y))}xO(t){Kc.P(this.mM,t)||(Kc.M(this.mM,t),this.AF())}_O(){this.xO(this.$N.NC())}EO(t){Kc.P(this.gM,t)||(Kc.M(this.gM,t),this.AF())}AO(){this.qL(1,!1)}DO(){return this.XL(1)}xP(t,s){if(t&&!qc.qw.sF.ak(t)){const s=t.width||t.videoWidth,i=t.height||t.videoHeight,e=qc.co(s,i);e.getContext("2d").drawImage(t,0,0,s,i),t=e}this.jT();const i=qc.Wn(qc.qw.sF,this);return i.MC(t,s),i}async bP(t,s){if(qc.qw.sF.ak(t))return this.xP(t,s);{if(!qc.Di.ImageBitmapOptions)throw new Error("no support for ImageBitmapOptions");const i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});return this.xP(i,s)}}zF(t){const s=t.pb||"clamp-to-edge",i=t.mb||"clamp-to-edge",e=t.gb;let n=t.yb||0;"trilinear"!==e&&(n=0);const r=`${s},${i},${e},${n}`;let h=this.OL.get(r);if(h)return h;const o={addressModeU:s,addressModeV:i,magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest"};return"bilinear"!==e&&"trilinear"!==e||(o.magFilter="linear",o.minFilter="linear"),"trilinear"===e&&(o.mipmapFilter="linear",n>1&&(o.maxAnisotropy=n)),h=this.sR.createSampler(o),this.OL.set(r,h),h}EF(){return this.SL}TC(t,s,i){this.jT();const e=qc.Wn(qc.qw.sF,this);return e.Ub(t,s,i),e}DD(t,s,i){return s.Qb(t,i)}CC(t){t&&(t.Zb(),t.Kb()>0||(this.AD()||(this.jT(),this.pL===t&&this.jO(null),this.gL===t&&this.lk(null)),t.Jb()))}uk(t,s){this.AD()||(s?this.TL.add(t):this.TL.delete(t))}ck(t,s){s?this.vL.add(t):this.vL.delete(t)}fk(t){const s=[t],i=qc.qw.rF.nF();for(const t of this.vL)t.Yn();for(const e of this.TL){if(s.length>=i)break;e!==t&&s.push(e)}s.length<2||qc.Wn(qc.qw.rF,this,s)}pP(){this.dk()}pk(){this.dk()}dk(){this.rR=this.eR.getCurrentTexture(),this.hR=this.rR.createView({label:"swapchaintextureview"}),this.FL.DC().mk()}kT(){null===this.RL&&this.FL.gk()&&this.yk(),super.kT(),this.VR.wk(this.YM),this.FL.DC().Mk(),this.rR=null,this.hR=null}UF(){this.PL=this.sR.createCommandEncoder(),this.YR&=-16385}Sk(t){if(!this.LP())throw new Error("GPU profiling not supported");if(this.BL)throw new Error("already started frame timing");return this.UL=!1,this.WL.clear(),this.BL=qc.Wn(qc.qw.Tk,this,t),this.BL}vk(t,s){if(this.LP()){if(!this.BL)throw new Error("not started frame timing");if(t<0||s<0||t===s)throw new Error("invalid timestamp index");this.xk(),this.UL=!0,this.$L=t,this.VL=s}}bk(){this.UL&&(this.xk(),this.UL=!1)}JO(t,s){if(this.RN+t>65535||this.LN+s>393210)this.jT();else if(1&this.YR)return void(this.HR+=s);null===this.RL&&this.yk(),this.YR|=1,this.JR=this.LN,this.HR=s}HO(){const t=this.RN;let s=this.LN;this.LN+=6;const i=this.DN;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}Ck(){const t=this.YR;if(!(1&t))return;const s=this.RL;if(16&t){const i=this.$N;s.setViewport(0,0,i.xy(),i.Cy(),0,1),2&t?s.setIndexBuffer(this.SR,"uint16"):s.setIndexBuffer(this._N,"uint16"),s.setVertexBuffer(0,this.sI),s.setVertexBuffer(1,this.iI),s.setVertexBuffer(2,this.eI),s.setVertexBuffer(3,this.MR),25165824&t&&s.setStencilReference(1),4&t&&this.Ik(s,this.iL,i)}if(32&t){let i=0;1073741824&t?i=4:8388608&t?i=2:16777216&t?i=3:3145728&~t||(i=1),s.setPipeline(this.IL.Gk(this.GL,i,this.EL,this.AL,this._L))}if(8192&t&&s.setBindGroup(0,this.ML),64&t&&s.setBindGroup(1,this.mL),128&t&&s.setBindGroup(2,this.yL),256&t&&s.setBindGroup(3,this.wL),8&t){const i=this.$N;4&t?this.Ik(s,this.iL,i):s.setScissorRect(0,0,i.xy(),i.Cy())}s.drawIndexed(this.HR,1,this.JR,0,0),this.YR&=-8698}Ik(t,s,i){const e=i.xy(),n=i.Cy();let r=qc.Xn(s.Ka(),0,e),h=qc.Xn(s.tl(),0,n),o=qc.Xn(s.sl(),r,e),a=qc.Xn(s.il(),h,n);Number.isNaN(r)&&(r=0),Number.isNaN(h)&&(h=0),Number.isNaN(o)&&(o=e),Number.isNaN(a)&&(a=n),t.setScissorRect(r,h,o-r,a-h)}yk(){const t=this.YR;7680&t&&this._k();let s=null;s=8388608&t?this.Ek():16777216&t?this.Ak():this.Dk(),this.RL=this.PL.beginRenderPass(s),this.YR|=25072}Dk(){const t=this.YR,s=this.$N,i={colorAttachments:[{view:s.Nk(),loadOp:s.gk()?"clear":"load",clearValue:s.Ok().toJSON(),storeOp:"store"}]};return this.Pk(i),s.Rk(!1),3145728&~t||(i.depthStencilAttachment={view:this.cR,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:"clear",stencilClearValue:0,stencilStoreOp:"discard"},this.YR&=-4194305),i}Ek(){const t=this.YR,s={colorAttachments:[],depthStencilAttachment:{view:this.cR,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:33554432&t?"clear":"load",stencilClearValue:0,stencilStoreOp:"store"}};return this.Pk(s),this.YR&=-37748737,s}Ak(){const t=this.$N,s={colorAttachments:[{view:t.Nk(),loadOp:t.gk()?"clear":"load",clearValue:t.Ok().toJSON(),storeOp:"store"}],depthStencilAttachment:{view:this.cR,depthReadOnly:!0,stencilReadOnly:!0}};return this.Pk(s),t.Rk(!1),s}Pk(t){if(!this.UL)return;const s={querySet:this.BL.Lk(),endOfPassWriteIndex:this.VL};this.WL.has(this.$L)||(s.beginningOfPassWriteIndex=this.$L,this.WL.add(this.$L)),t.timestampWrites=s}Fk(t){t.gk()&&(this.xk(),this.PL.beginRenderPass({colorAttachments:[{view:t.Nk(),loadOp:"clear",clearValue:t.Ok().toJSON(),storeOp:"store"}]}).end(),this.YR|=16384,t.Rk(!1))}xk(){null!==this.RL&&(this.Ck(),this.RL.end(),this.RL=null)}jT(t=!1){this.xk(),this.BL&&t&&(this.BL.kk(this.PL),this.YR|=16384),16384&this.YR&&(this.LL.push(this.PL.finish()),this.UF()),0!==this.LL.length&&(this.NO(),this.sR.queue.submit(this.LL),qc.Sh(this.LL),this.VR.jk(),this.BL&&t&&(this.BL.zk(),this.BL=null))}NO(){const t=this.sR.queue;if(this.RN>0){const s=this.RN;t.writeBuffer(this.sI,0,this.AN.buffer,0,3*s*4),t.writeBuffer(this.iI,0,this.NN.buffer,0,2*s*4),65536&this.YR&&t.writeBuffer(this.MR,0,this.BR.buffer,0,4*s);const i=this.nI()?2:4;t.writeBuffer(this.eI,0,this.ON.buffer,0,4*s*i),this.RN=0}this.LN>0&&(this.LN%2!=0&&(this.DN[this.LN++]=0),t.writeBuffer(this._N,0,this.DN.buffer,0,2*this.LN),this.LN=0),this.FN>0&&(t.writeBuffer(this.rI,0,this.PN.buffer,0,4*this.FN),this.FN=0)}AF(){this.YR|=512,this.QR|=1,this.Bk(this.TR.transform)}DF(){const t=this.TR.Uk;this.rL.$o(this.GR,t.offset/4),this.Bk(t)}NF(){const t=this.TR.$k;this.GR[t.offset/4]=this.hL,this.Bk(t)}Bk(t){const s=t.offset,i=t.end;1024&this.YR?(this.qR=Math.min(this.qR,s),this.XR=Math.max(this.XR,i)):(this.YR|=1024,this.qR=s,this.XR=i,this.xk())}OF(){this.Vk(this.eL,this._R.Wk)}PF(){this.Vk(this.nL,this._R.Yk)}Vk(t,s){t.$o(this.OR,s.offset/4),this.Qk(s)}Jk(t,s){t.$o(this.OR,s.offset/4),this.Qk(s)}Qk(t){const s=t.offset,i=t.end;2048&this.YR?(this.ZR=Math.min(this.ZR,s),this.KR=Math.max(this.KR,i)):(this.YR|=2048,this.ZR=s,this.KR=i,this.xk())}Hk(t,s){this.jR[s.offset/4]!==Math.fround(t)&&(this.jR[s.offset/4]=t,this.qk(s))}Xk(t,s){this.zR[s.offset/4]!==t&&(this.zR[s.offset/4]=t,this.qk(s))}Zk(t,s){t.Ho(this.jR,s.offset/4)||(t.$o(this.jR,s.offset/4),this.qk(s))}qk(t){const s=t.offset,i=t.end;4096&this.YR?(this.tL=Math.min(this.tL,s),this.sL=Math.max(this.sL,i)):(this.YR|=4096,this.tL=s,this.sL=i,this.xk())}_k(){const t=this.YR;512&t&&(Kc.multiply(this.lR,this.mM,this.gM),this.GR.set(this.lR,this.TR.transform.offset/4)),1024&t&&this.VR.Kk(this.PL,this.mR,this.IR,this.qR,this.XR-this.qR),2048&t&&this.VR.Kk(this.PL,this.gR,this.NR,this.ZR,this.KR-this.ZR),4096&t&&this.VR.Kk(this.PL,this.yR,this.kR,this.tL,this.sL-this.tL),this.YR=-7681&t|16384}CP(t){let s=this.Uy,i=this.$y,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.jT();const n=qc.Wn(qc.qw.iF,this);return n.MC(s,i,Object.assign({nC:e},t)),n}IP(t,s=!0){null===t&&(t=this.FL),this.$N!==t&&(this.xk(),this.$N=t,this.JL(2097152,t.LC()),t.FC()&&!t.nk()&&t.bC(this.Uy,this.$y),s&&this._O())}EP(t){}SP(){return this.$N===this.FL?null:this.$N}sP(t){return null===t?[this.Uy,this.$y]:[t.xy(),t.Cy()]}tj(){return this.FL}AP(t){this.jT(),this.$N===t&&this.IP(null);const s=t.DC();this.pL===s&&this.jO(null),this.gL===s&&this.lk(null),t.Jb()}async $C(t,s,i){this.Fk(t),this.jT(),null===t&&(t=this.FL);const e=this.sR,n=t.xy(),r=t.Cy();let h=0,o=0,a=n,l=r;if(i){h=qc.Xn(Math.floor(i.Ka()),0,n-1),o=qc.Xn(Math.floor(i.tl()),0,r-1);let t=i.width();t=0===t?n-h:qc.Xn(Math.floor(t),0,n-h);let s=i.height();s=0===s?r-o:qc.Xn(Math.floor(s),0,r-o),a=t,l=s}const u=e.createCommandEncoder(),c=t.DC();let f=c.qb(),d=null;"rgba8unorm"===c.sj()?c.ij()||qc.Mn():(d=this.ej(c,"rgba8unorm",u),f=d);const p=4*a,m=256*Math.ceil(p/256),g=e.createBuffer({size:m*l,usage:sf.MAP_READ|sf.COPY_DST});u.copyTextureToBuffer({texture:f,origin:[h,o,0]},{buffer:g,bytesPerRow:m},[a,l,1]);const y=u.finish();e.queue.submit([y]),d&&d.destroy(),await g.mapAsync(self.GPUMapMode.READ);const w=g.getMappedRange().slice(0);let M;if(m===p)M=new ImageData(new Uint8ClampedArray(w),a,l);else{const t=new ArrayBuffer(p*l),s=new Uint8Array(t);for(let t=0;t<l;++t){const i=t*m,e=t*p;s.set(new Uint8Array(w,i,p),e)}M=new ImageData(new Uint8ClampedArray(t),a,l)}return g.destroy(),M}ej(t,s,i){const e=this.sR,n=t.xy(),r=t.Cy();if(t.sj()===s)throw new Error("no conversion necessary");t.RC()||qc.Mn();const h=e.createTexture({size:[n,r,1],format:s,usage:rf.COPY_SRC|rf.RENDER_ATTACHMENT}),o=this.DL.EF(s),a=o.getBindGroupLayout(0),l=this.zF({gb:"nearest"}),u=t.qb().createView({baseMipLevel:0,mipLevelCount:1}),c=h.createView({baseMipLevel:0,mipLevelCount:1}),f=i.beginRenderPass({colorAttachments:[{view:c,loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=e.createBindGroup({layout:a,entries:[{binding:0,resource:l},{binding:1,resource:u}]});return f.setPipeline(o),f.setBindGroup(0,d),f.draw(4),f.end(),h}gP(t){524288&this.YR&&(t=!!t,!!(1048576&this.YR)!==t&&(2097152&this.YR&&this.xk(),this.JL(1048576,t)))}yP(){return this.HL(1048576)}ek(){return this.HL(524288)}wP(t){if(!this.TN)return;if(t&&this.yP())throw new Error("depth still enabled");const s=t?this.dR:this.pR;this.wL!==s&&(this.Ck(),this.wL=s,this.YR|=256)}Au(t){this.xk(),this.$N.Rk(!0),this.$N.Ok().set(t)}dP(t,s,i,e){this.xk(),this.$N.Rk(!0),this.$N.Ok().Eo(t,s,i,e)}mP(){2621440&~this.YR||(this.xk(),this.YR|=4194304)}MP(t,s,i,e){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),4&this.YR&&this.iL.Za(t,s,i,e)||(this.Ck(),this.YR|=12,this.iL.Wa(t,s,i,e))}TP(){4&this.YR&&(this.Ck(),this.YR&=-5,this.YR|=8)}SS(){return 65536&this.YR?this.vM:this.NL}TS(){this.vS(this.SS())}vS(t){if(this.IL!==t){if(t===this.vM&&!(65536&this.YR))throw new Error("cannot set multitexture fill program when multitexturing not allowed");this.Ck(),this.IL=t,this.RM=null,this.YR|=32,this.nj(t===this.vM)}}rP(){return this.IL}nj(t){if(t=!!t,!!(131072&this.YR)===t)return;this.JL(131072,t);const s=null===this.pL?this.dL:this.pL;this.rj(s)}hj(t){t=!!t,!!(262144&this.YR)!==t&&(this.Ck(),this.JL(262144,t),this.JL(32,!0))}oj(t){t=!!t,!!(1073741824&this.YR)!==t&&(this.Ck(),this.JL(1073741824,t),this.YR|=32)}aj(){return this.HL(1073741824)}jO(t){t!==this.pL&&(this.pL=t,null===t&&(t=this.dL),this.rj(t))}rj(t){if(131072&this.YR){const s=t.lj();if(null!==s)return this.uj(s),this.UR=t.cj(),void this.hj(!0)}this.uj(t.LF()),this.UR=0,this.hj(!1)}uj(t){t!==this.mL&&(this.Ck(),this.mL=t,this.YR|=64)}fj(t){this.pL===t&&(this.Ck(),this.mL=t.LF(),this.YR|=64)}dj(t){if(this.mL!==t)return;this.Ck();const s=null===this.pL?this.dL:this.pL;this.mL=s.LF(),this.UR=0,this.YR|=64}lk(t){t!==this.gL&&(this.gL=t,null===t&&(t=this.dL),this.Ck(),this.yL=t.FF(),this.YR|=128)}pj(t,s,i,e,n,r){const h=t.mj(),o=s.mj();if(0===(h&rf.COPY_SRC))throw new Error("source texture missing COPY_SRC usage");if(0===(o&rf.COPY_DST))throw new Error("destination texture missing COPY_DST usage");if(t===s)throw new Error("invalid destination");const a=Math.min(t.xy(),s.xy()),l=Math.min(t.Cy(),s.Cy());n=Math.min(n,a-i),r=Math.min(r,l-e),n<=0||r<=0||(this.xk(),this.PL.copyTextureToTexture({texture:t.qb(),origin:[i,e]},{texture:s.qb(),origin:[i,e]},[n,r]),this.YR|=16384)}gj(t){return t>=2?4:1}yj(t){t=this.gj(t),this._L!==t&&(this.Ck(),this._L=t,this.YR|=32)}$v(t){t!==this.GL&&(this.Ck(),this.GL=t,this.RM=null,this.YR|=32)}BO(t){this.$v(this.QS(t))}$O(){this.$v(0)}YO(){this.$v(3)}RO(t,s,i,e){const n=this.$R;n.Jo(t,s,i,e)||(n.Eo(t,s,i,e),this.RM=null)}LO(t){const s=this.$R;s.Bo()!==t&&(s.Lo(t),this.RM=null)}PO(){return this.$R.Bo()}Vv(t){const s=this.$R;s.equals(t)||(s.set(t),this.RM=null)}FO(){this.RO(1,1,1,1)}kO(){return this.$R}PT(t){t!==this.EL&&(this.Ck(),this.EL=t,this.RM=null,this.YR|=32)}VO(){return this.EL}RT(t){t!==this.AL&&(this.Ck(),this.AL=t,this.RM=null,this.YR|=32)}WO(){return this.AL}Rect(t){this.QO(t.Ka(),t.tl(),t.sl(),t.il())}QO(t,s,i,e){this.FT(t,s,i,s,i,e,t,e)}wj(t){const s=this.BR,i=this.UR;s[t++]=i,s[t++]=i,s[t++]=i,s[t]=i}El(t){this.qO(t,Zf)}FT(t,s,i,e,n,r,h,o){this.JO(4,6),this.HO();const a=this.AN,l=this.RN;this.RN+=4;let u=3*l;const c=this.kM+this.jM;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Zf.$o(this.NN,2*l),262144&this.YR&&this.wj(l),this.$R.Vo(this.ON,4*l)}oT(t,s){this.JO(4,6),this.HO();const i=this.RN;this.RN+=4,t.Hl(this.AN,3*i,this.kM+this.jM),s.rl(this.NN,2*i),262144&this.YR&&this.wj(i),this.$R.Vo(this.ON,4*i)}qO(t,s){this.JO(4,6),this.HO();const i=this.RN;this.RN+=4,t.Hl(this.AN,3*i,this.kM+this.jM),s.$o(this.NN,2*i),262144&this.YR&&this.wj(i),this.$R.Vo(this.ON,4*i)}XO(t,s,i){this.JO(4,6),this.HO();const e=this.RN;this.RN+=4,t.Hl(this.AN,3*e,this.kM+this.jM),s.$o(this.NN,2*e),262144&this.YR&&this.wj(e),this.ON.set(i,4*e)}ZO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.JO(4,6),this.HO();const d=this.AN,p=this.RN;this.RN+=4;let m=3*p;const g=this.kM+this.jM;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.rl(this.NN,2*p),262144&this.YR&&this.wj(p),this.$R.Vo(this.ON,4*p)}iT(t,s,i,e,n,r,h,o,a,l,u,c,f){this.JO(4,6),this.HO();const d=this.AN,p=this.RN;this.RN+=4;let m=3*p;const g=this.kM+this.jM;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.$o(this.NN,2*p),262144&this.YR&&this.wj(p),this.$R.Vo(this.ON,4*p)}KO(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.JO(4,6),this.HO();const p=this.AN,m=this.RN;this.RN+=4;let g=3*m;const y=this.kM+this.jM;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.$o(this.NN,2*m),262144&this.YR&&this.wj(m),this.ON.set(d,4*m)}nb(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.JO(t.length,i.length);const n=this.RN;this.AN.set(t,3*n),this.NN.set(s,2*n),262144&this.YR&&this.BR.fill(this.UR,n,n+t.length);const r=this.DN;if(0===n)r.set(i,this.LN);else{let t=this.LN;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.ON;if(null!=e)h.set(e,4*n);else{const s=this.$R,i=s.ko(),e=s.jo(),r=s.zo(),o=s.Bo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.RN+=t.length/3,this.LN+=i.length}iP(t){this.rL.equals(t)||(this.rL.M(t),this.DF());const s=this.kM+this.jM;this.hL!==s&&(this.hL=s,this.NF()),this.nL.equals(this.$R)||(this.nL.M(this.$R),this.PF()),this.vS(this.xS()),this.HR=0,this.YR|=18}eP(){this.HR>0&&this.Ck(),this.YR&=-3,this.YR|=16}nP(t,s,i,e){let n=this.FN;n>cf&&(this.jT(),n=0),1&this.YR?this.HR+=6:(null===this.RL&&this.yk(),this.YR|=1,this.JR=n/4*6,this.HR=6);const r=this.PN;r[n++]=t,r[n++]=s,r[n++]=i,r[n++]=e,this.FN=n}oP(t){this.eL.equals(t)||(this.eL.M(t),this.OF())}aP(t,s,i=1){const e=this._R,n=this.OR;Kf.set(t,s),Kf.Ho(n,e.Mj.offset/4)||this.Jk(Kf,e.Mj),n[e.Sj.offset/4]!==Math.fround(i)&&(n[e.Sj.offset/4]=i,this.Qk(e.Sj))}lP(t,s,i,e,n,r,h){const o=this._R,a=this.OR;t.Ho(a,o.Tj.offset/4)||(t.$o(a,o.Tj.offset/4),this.Qk(o.Tj)),Kf.set(e/s,n/i),Kf.Ho(a,o.vj.offset/4)||this.Jk(Kf,o.vj),Kf.set(r/s,h/i),Kf.Ho(a,o.xj.offset/4)||this.Jk(Kf,o.xj)}uP(t,s,i,e,n,r,h){const o=this._R,a=this.OR;Kf.set(i,e),Kf.Ho(a,o.vj.offset/4)||this.Jk(Kf,o.vj),a[o.Sj.offset/4]!==Math.fround(n)&&(a[o.Sj.offset/4]=n,this.Qk(o.Sj)),Kf.set(r,h),Kf.Ho(a,o.xj.offset/4)||this.Jk(Kf,o.xj)}cP(t,s,i,e,n,r,h,o,a,l,u){const c=this.PR,f=this.IL;u%=10800,f.Av()&&this.lk(t),f.bj()&&(this.Zk(s,c.Cj),this.Zk(i,c.Tj),this.Zk(e,c.Ij),this.Zk(n,c.Gj)),this.Hk(o,c.devicePixelRatio),this.Hk(a,c._j),this.Hk(l,c.Ej),this.Hk(u,c.sg),this.Hk(this.nS(),c.Aj),this.Hk(this.hS(),c.Dj)}fP(t){t&&(t.Nj()&&(this.xk(),t.Oj(this.PL)),this.Pj(t.Rj()))}Lj(t){this.Xk(t?1:0,this.PR.Fj)}Pj(t){t!==this.ML&&(this.Ck(),this.ML=t,this.YR|=8192)}kj(t){this.ML===t&&this.Pj(this.lL)}GP(t){if(t.gk())return this.$N.Rk(!0),void this.$N.Ok().set(t.Ok());t.kC()>=2&&this.$N.kC()<2?this.jj(t):(this.dP(0,0,0,0),this.YO(),this.FO(),this._P(t))}_P(t){this.Fk(t);const s=t.DC();this.jO(s),this.tP()}tP(){const t=this.aj();t||this.oj(!0),this.qS(0);const s=id,i=td;s.set(0,-1,0,-1,2,1,0,1),i.set(0,-1,2,1),this.oT(s,i),t||this.oj(!1)}jj(t){this.Fk(t),this.xk(),this.PL.beginRenderPass({colorAttachments:[{view:t.DC().Nk(),resolveTarget:this.$N.DC().Nk(),loadOp:"load",storeOp:"store"}]}).end(),this.YR|=16384}DP(){this.xk(),this.gP(!0),this.YR|=41943040}NP(t=!1){this.xk(),this.gP(t),this.YR&=-8388609,this.YR|=16777216}OP(){return this.HL(16777216)}PP(t=!0){this.xk(),this.gP(t),this.YR&=-16777217}wO(){this.WS([["normal",["one","one-minus-src-alpha"]],["additive",["one","one"]],["xor",["one","one-minus-src-alpha"]],["copy",["one","zero"]],["destination-over",["one-minus-dst-alpha","one"]],["source-in",["dst-alpha","zero"]],["destination-in",["zero","src-alpha"]],["source-out",["one-minus-dst-alpha","zero"]],["destination-out",["zero","one-minus-src-alpha"]],["source-atop",["dst-alpha","one-minus-src-alpha"]],["destination-atop",["one-minus-dst-alpha","src-alpha"]],["lighten",["one","one","one","one","max","max"]],["darken",["one","one","one","one","min","min"]],["multiply",["dst","one-minus-src-alpha","one","one-minus-src-alpha"]],["screen",["one","one-minus-src","one","one-minus-src-alpha"]]])}zj(){return this.KP?[...this.KP.features]:[]}Bj(){return this.tR}Uj(){const t=this.tR;if(!t)return"unknown/unknown";const s=t.vendor||"unknown",i=t.architecture||"unknown",e=[];return t.device&&e.push(t.device),t.description&&e.push(t.description),t.type&&e.push(t.type),t.backend&&e.push(t.backend),s+"/"+i+(e.length>0?` (${e.join(", ")})`:"")}}}{const ed=self.Gs,nd=!0;ed.qw.WR=class{constructor(t){this.tv=t,this.$j=new Map,this.Vj=[],this.Wj=[],this.Yj=[],this.Qj=0,this.Jj=0,this.Hj=0,this.qj=0,this.Xj=0,this.Zj=0}Tv(){return this.tv}Wv(){this.$j.clear(),ed.Sh(this.Vj),ed.Sh(this.Wj),ed.Sh(this.Yj)}Kj(t){return Math.max(ed.Tr(t),16)}tz(t){this.Xj++;const s=this.Kj(t);{const t=this.$j.get(s);if(void 0!==t&&t.length>0){const i=t.pop();return i.sz(),0===t.length&&this.$j.delete(s),i}}return this.Qj++,this.Jj+=s,this.Hj++,ed.Wn(ed.qw.iz,this,s)}ez(t){this.Zj++;const s=t.Pu(),i=this.$j.get(s);void 0===i?this.$j.set(s,[t]):i.push(t)}nz(t){this.Yj.push(t)}jk(){for(const t of this.Vj)t.rz();ed.Sh(this.Vj);for(const t of this.Wj)this.Qj--,this.Jj-=t.Pu(),t.Yn();ed.Sh(this.Wj);for(const t of this.Yj)t.destroy();ed.Sh(this.Yj)}wk(t){t%30==0&&this.hz(t)}hz(t){for(const[s,i]of this.$j.entries()){let e=0;for(let s=0,n=i.length;s<n;++s){const n=i[s];n.oz(t)?(this.Qj--,this.Jj-=n.Pu(),n.Yn(),this.qj++):(i[e]=n,++e)}0===e?this.$j.delete(s):ed.Mh(i,e)}this.az()}Kk(t,s,i,e,n){const r=this.tz(n),h=r.lz(),o=h.getMappedRange(0,n);new Uint8Array(o).set(new Uint8Array(i,e,n)),h.unmap(),t.copyBufferToBuffer(h,0,s,e,n),this.Vj.push(r)}az(){this.Hj=0,this.qj=0,this.Xj=0,this.Zj=0}}}{const rd=self.Gs,hd=self.GPUBufferUsage,od=self.GPUMapMode,ad=self.assert,ld=0,ud=1,cd=2;rd.qw.iz=class{constructor(t,s){this.VR=t,this.uz=1,this.cz=s,this.sN=this.Tv().$F().createBuffer({mappedAtCreation:!0,size:s,usage:hd.COPY_SRC|hd.MAP_WRITE}),this.fz=0}Tv(){return this.VR.Tv()}dz(){return this.uz}Pu(){return this.cz}lz(){return this.sN}sz(){this.uz=1}async rz(){this.uz=2;try{await this.sN.mapAsync(od.WRITE)}catch(t){return void console.warn("[WebGPU] Error recycling buffer, assuming device was lost: ",t)}this.Tv().AD()||(this.uz=0,this.fz=this.Tv().zT(),this.VR.ez(this))}pz(){this.uz=0}oz(t){return this.fz<=t-25}Yn(){this.sN.destroy(),this.sN=null,this.VR=null}}}{const fd=self.Gs,dd=self.assert,pd=self.GPUBufferUsage;fd.qw.mz=class{constructor(t){const s=t.Tv();this.Rv=t,this.gz=t.yz(),this.wz=new ArrayBuffer(this.gz),this.Mz=new Float32Array(this.wz),this.Sz=!1,this.sN=s.$F().createBuffer({size:this.gz,usage:pd.UNIFORM|pd.COPY_DST}),this.Tz=s.RF(this.sN)}Yn(){this.Tv().kj(this.Tz),this.Tv().hk().nz(this.sN),this.sN=null,this.Rv=null,this.wz=null,this.Mz=null,this.Tz=null}Tv(){return this.Rv.Tv()}KI(){return this.Rv}Rj(){return this.Tz}vz(t,s){const i=this.Rv.xz(t),e=i.type,n=i.offset/4,r=this.Mz;if("color"===e){if(s.qo(r,n))return;s.Wo(r,n),this.Sz=!0}else{if("float"!==e&&"percent"!==e)throw new Error(`unexpected shader param type '${e}'`);if(r[n]===Math.fround(s))return;r[n]=s,this.Sz=!0}}Nj(){return this.Sz}Oj(t){this.Tv().hk().Kk(t,this.sN,this.wz,0,this.gz),this.Sz=!1}}}{let md=function(t){for(const s of Object.values(t))s.end=s.offset+s.size},gd=function(t){const s=[];for(let i=0;i<t;++i)s.push(null);return s},yd=function(t){return`\nstruct FragmentInput {\n\t@location(1) fragUV : vec2<f32>,\n\t@location(2) fragColor : vec4<${t?"f16":"f32"}>,\n\t@builtin(position) fragPos : vec4<f32>\n};\n\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texBack));\n}\n\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texDepth));\n}\n`},wd=function(t,s,i,e,n){return t<<10|s<<7|i<<5|e<<4|n};UpdateLayoutEndValues=md,makeNullFilledArray=gd,GetFragmentInputStructDeclaration=yd,HashPipelineState=wd;const Md=self.Gs,Sd=4,Td=2,vd=4,xd=8,bd=16,Cd=64,Id="\nstruct Uniforms {\n\ttransform\t\t: mat4x4<f32>,\n\tpointTexStart\t: vec2<f32>,\n\tpointTexEnd\t\t: vec2<f32>,\n\tzElevation\t\t: f32\n};\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\n",Gd={transform:{offset:0,size:64,end:0},Uk:{offset:64,size:16,end:0},bz:{offset:64,size:8,end:0},Cz:{offset:72,size:8,end:0},$k:{offset:80,size:4,end:0}};md(Gd);const _d=Gd.$k.end,Ed="\nstruct Uniforms {\n\tcolor2\t\t\t\t: vec4<f32>,\n\tpointColor \t\t\t: vec4<f32>,\n\ttileSize\t\t\t: vec2<f32>,\n\ttileSpacing\t\t\t: vec2<f32>,\n\tsrcRectStart\t\t: vec2<f32>,\n\tsrcRectEnd\t\t\t: vec2<f32>,\n\tpixelSize\t\t\t: vec2<f32>,\n\toutlineThickness\t: f32\n};\n@binding(1) @group(0) var<uniform> uniforms : Uniforms;\n",Ad={Wk:{offset:0,size:16,end:0},Yk:{offset:16,size:16,end:0},vj:{offset:32,size:8,end:0},xj:{offset:40,size:8,end:0},Tj:{offset:48,size:16,end:0},Iz:{offset:48,size:8,end:0},Gz:{offset:56,size:8,end:0},Mj:{offset:64,size:8,end:0},Sj:{offset:72,size:4,end:0}};md(Ad);const Dd=Ad.Sj.end,Nd="\nstruct C3Params {\n\tsrcStart\t\t\t: vec2<f32>,\n\tsrcEnd\t\t\t\t: vec2<f32>,\n\tsrcOriginStart\t\t: vec2<f32>,\n\tsrcOriginEnd\t\t: vec2<f32>,\n\tlayoutStart\t\t\t: vec2<f32>,\n\tlayoutEnd\t\t\t: vec2<f32>,\n\tdestStart\t\t\t: vec2<f32>,\n\tdestEnd\t\t\t\t: vec2<f32>,\n\tdevicePixelRatio\t: f32,\n\tlayerScale\t\t\t: f32,\n\tlayerAngle\t\t\t: f32,\n\tseconds\t\t\t\t: f32,\n\tzNear\t\t\t\t: f32,\n\tzFar\t\t\t\t: f32,\n\tisSrcTexRotated\t\t: u32\n};\n@binding(4) @group(0) var<uniform> c3Params : C3Params;\n\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcStart) / (c3Params.srcEnd - c3Params.srcStart);\n}\n\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcEnd - c3Params.srcStart, c3Params.srcStart);\n}\n\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcStart, c3Params.srcEnd), max(c3Params.srcStart, c3Params.srcEnd));\n}\n\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcOriginStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart);\n}\n\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcOriginEnd - c3Params.srcOriginStart, c3Params.srcOriginStart);\n}\n\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcOriginStart, c3Params.srcOriginEnd), max(c3Params.srcOriginStart, c3Params.srcOriginEnd));\n}\n\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcOriginStart, (c3Params.layoutEnd - c3Params.layoutStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart), c3Params.layoutStart);\n}\n\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcStart, (c3Params.destEnd - c3Params.destStart) / (c3Params.srcEnd - c3Params.srcStart), c3Params.destStart);\n}\n\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.destStart, c3Params.destEnd), max(c3Params.destStart, c3Params.destEnd));\n}\n\nfn c3_linearizeDepth(depthSample : f32) -> f32\n{\n\treturn c3Params.zNear * c3Params.zFar / (c3Params.zFar + depthSample * (c3Params.zNear - c3Params.zFar));\n}\n",Od=["srcStart","srcEnd","srcOriginStart","srcOriginEnd","c3_srcToNorm","c3_normToSrc","c3_clampToSrc","c3_srcOriginToNorm","c3_normToSrcOrigin","c3_clampToSrcOrigin","c3_getLayoutPos","c3_srcToDest"],Pd=["layoutStart","layoutEnd","destStart","destEnd","c3_clampToDest"],Rd={Tj:{offset:0,size:16,end:0},_z:{offset:0,size:8,end:0},Ez:{offset:8,size:8,end:0},Ij:{offset:16,size:16,end:0},Az:{offset:16,size:8,end:0},Dz:{offset:24,size:8,end:0},Gj:{offset:32,size:16,end:0},Nz:{offset:32,size:8,end:0},Oz:{offset:40,size:8,end:0},Cj:{offset:48,size:16,end:0},Pz:{offset:48,size:8,end:0},Rz:{offset:56,size:8,end:0},devicePixelRatio:{offset:64,size:4,end:0},_j:{offset:68,size:4,end:0},Ej:{offset:72,size:4,end:0},sg:{offset:76,size:4,end:0},Aj:{offset:80,size:4,end:0},Dj:{offset:84,size:4,end:0},Fj:{offset:88,size:4,end:0}};md(Rd);const Ld=Rd.Fj.end,Fd="\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>\n};\n",kd=new Map([["float",4],["percent",4],["color",12]]),jd=new Map([["float",4],["percent",4],["color",16]]),zd="\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\n{\n\treturn vec4<f32>(c.rgb * c.a, c.a);\n}\n\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\n{\n\tif (c.a == 0.0)\n\t{\n\t\treturn vec4<f32>(0.0);\n\t}\n\t\n\treturn vec4<f32>(c.rgb / c.a, c.a);\n}\n\nfn c3_grayscale(rgb : vec3<f32>) -> f32\n{\n\treturn dot(rgb, vec3<f32>(0.299, 0.587, 0.114));\n}\n\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\n{\n\treturn vec2<f32>(1.0) / vec2<f32>(textureDimensions(t));\n}\n\nfn c3_clamp2(v : vec2<f32>, l : f32, u : f32) -> vec2<f32>\n{\n\treturn clamp(v, vec2<f32>(l), vec2<f32>(u));\n}\n\nfn c3_mod(x : f32, y : f32) -> f32\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_mod2(x : vec2<f32>, y : vec2<f32>) -> vec2<f32>\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\n{\n\tvar hsl : vec3<f32> = vec3<f32>(0.0);\n\t\n\tvar fmin : f32 = min(min(color.r, color.g), color.b);\n\tvar fmax : f32 = max(max(color.r, color.g), color.b);\n\tvar delta : f32 = fmax - fmin;\n\n\thsl.z = (fmax + fmin) / 2.0;\n\n\tif (delta == 0.0)\n\t{\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t}\n\telse \n\t{\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\thsl.y = delta / (fmax + fmin);\n\t\t}\n\t\telse\n\t\t{\n\t\t\thsl.y = delta / (2.0 - fmax - fmin);\n\t\t}\n\t\t\n\t\tvar dR : f32 = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dG : f32 = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dB : f32 = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n\n\t\tif (color.r == fmax)\n\t\t{\n\t\t\thsl.x = dB - dG;\n\t\t}\n\t\telse if (color.g == fmax)\n\t\t{\n\t\t\thsl.x = (1.0 / 3.0) + dR - dB;\n\t\t}\n\t\telse if (color.b == fmax)\n\t\t{\n\t\t\thsl.x = (2.0 / 3.0) + dG - dR;\n\t\t}\n\n\t\tif (hsl.x < 0.0)\n\t\t{\n\t\t\thsl.x = hsl.x + 1.0;\n\t\t}\n\t\telse if (hsl.x > 1.0)\n\t\t{\n\t\t\thsl.x = hsl.x - 1.0;\n\t\t}\n\t}\n\n\treturn hsl;\n}\n\nfn c3_hueToRGB(f1 : f32, f2 : f32, hue_ : f32) -> f32\n{\n\tvar hue : f32 = hue_;\n\tif (hue < 0.0)\n\t{\n\t\thue = hue + 1.0;\n\t}\n\telse if (hue > 1.0)\n\t{\n\t\thue = hue - 1.0;\n\t}\n\t\t\n\tvar ret : f32;\n\t\n\tif ((6.0 * hue) < 1.0)\n\t{\n\t\tret = f1 + (f2 - f1) * 6.0 * hue;\n\t}\n\telse if ((2.0 * hue) < 1.0)\n\t{\n\t\tret = f2;\n\t}\n\telse if ((3.0 * hue) < 2.0)\n\t{\n\t\tret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n\t}\n\telse\n\t{\n\t\tret = f1;\n\t}\n\t\n\treturn ret;\n}\n\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n{\n\tvar rgb : vec3<f32> = vec3<f32>(hsl.z);\n\t\n\tif (hsl.y != 0.0)\n\t{\n\t\tvar f2 : f32;\n\t\t\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\tf2 = hsl.z * (1.0 + hsl.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n\t\t}\n\t\t\t\n\t\tvar f1 : f32 = 2.0 * hsl.z - f2;\n\t\t\n\t\trgb.r = c3_hueToRGB(f1, f2, hsl.x + (1.0 / 3.0));\n\t\trgb.g = c3_hueToRGB(f1, f2, hsl.x);\n\t\trgb.b = c3_hueToRGB(f1, f2, hsl.x - (1.0 / 3.0));\n\t}\n\t\n\treturn rgb;\n}\n";Md.qw.xR=class extends Md.qw.KT{constructor(t,s){if(super(t,s),this.Lz=s.Fz,this.kz=s.jz,this.zz=s.Bz,this.CL=s.Uz,this.$z=new Map,this.Vz=new Map,this.Wz=!1,this.Yz=!1,this.Bs=[],this.Qz=0,s.parameters){let t=0;for(const i of s.parameters){const s=i[2];if(!kd.has(s))throw new Error(`unrecognized effect param type '${s}'`);const e=kd.get(s),n=jd.get(s),r=t%n;0!==r&&(t+=n-r),this.Bs.push({type:s,offset:t,size:e,end:t+e}),t+=e}this.Qz=16*Math.ceil(t/16)}}static async XC(t,s){const i=t.$F(),e=s.name,n=t.hF(),r=t.nI(),h=s.src,o=Md.qw.xR.Jz(h,n,r),a=i.createShaderModule({label:e,code:o});let l,u=null;if(s.cF){const t=Md.qw.xR.Jz(s.cF,n,r);u=i.createShaderModule({label:e,code:t})}a.getCompilationInfo().then(t=>Md.qw.xR.aF(e,"fragment",t));const c=Md.qw.xR.oF(s.JC,n);let f;c?(l=i.createShaderModule({label:e,code:c}),l.getCompilationInfo().then(t=>Md.qw.xR.aF(e,"vertex",t))):l=t.VF();const d=Md.qw.xR.oF(s.dF,n);d?(f=i.createShaderModule({label:e,code:d}),f.getCompilationInfo().then(t=>Md.qw.xR.aF(e,"vertex (norm)",t))):f=t.WF();const p=Md.Wn(Md.qw.xR,t,Object.assign({Fz:a,jz:u,Bz:l,Uz:f},s));if(p.Mv=h.includes("%%C3PARAMS_STRUCT%%")&&Od.some(t=>h.includes(t)),p.Wz=p.Mv||h.includes("%%C3PARAMS_STRUCT%%")&&Pd.some(t=>h.includes(t)),p.Yz=h.includes("%%C3PARAMS_STRUCT%%")&&h.includes("isSrcTexRotated"),"<generate-mipmap>"!==e){const s=p.qz(0,0,0,0,0);let i=null;t.ek()&&(i=p.qz(0,1,0,0,0));const[e,n]=await Promise.all([s,i]);p.$z.set(wd(0,0,0,0,0),e),n&&p.$z.set(wd(0,1,0,0,0),n)}return p}static Xz(t,s){if(!t)return t;let i="";return i=s?"enable f16;\nalias f16or32 = f16;\n":"alias f16or32 = f32;\n",i+t}static Jz(t,s,i){return t=Md.qw.xR.Xz(t,s),Md.$m(t,{"%%SAMPLERFRONT_BINDING%%":"@binding(0) @group(1)","%%TEXTUREFRONT_BINDING%%":"@binding(1) @group(1)","%%SAMPLERBACK_BINDING%%":"@binding(0) @group(2)","%%TEXTUREBACK_BINDING%%":"@binding(1) @group(2)","%%SAMPLERDEPTH_BINDING%%":"@binding(0) @group(3)","%%TEXTUREDEPTH_BINDING%%":"@binding(1) @group(3)","%%SHADERPARAMS_BINDING%%":"@binding(5) @group(0)","%%FRAGMENTINPUT_STRUCT%%":yd(i),"%%FRAGMENTOUTPUT_STRUCT%%":Fd,"%%C3PARAMS_STRUCT%%":Nd,"%%C3_UTILITY_FUNCTIONS%%":zd})}static oF(t,s){return Md.qw.xR.Xz(t,s)}static aF(t,s,i){for(const e of i.messages){const i=`[WebGPU] Message (${e.type}) compiling ${s} shader '${t}': ${e.message} (line ${e.lineNum}, pos ${e.linePos})`;"error"===e.type?console.error(i):"warning"===e.type?console.warn(i):console.log(i)}}Yn(){this.Lz=null,this.kz=null,this.zz=null,this.CL=null,this.$z.clear(),this.Vz.clear(),super.Yn()}$F(){return this.tv.$F()}XF(){return this.tv.XF()}Tv(){return this.tv}bj(){return this.Wz}Pv(){return this.Yz}tG(){return this.Bs.length}sG(t){return t<0||t>=this.Bs.length?null:this.Bs[t].type}yz(){return this.Qz}xz(t){return this.Bs[t]}Zz(t,s,i,e,n){const r=this.tv,h=r.nI(),o=r.YS(t);let a=o[0],l=o[1],u=a,c=l,f="add",d="add";o.length>=4&&(u=o[2],c=o[3]),6===o.length&&(f=o[4],d=o[5]);let p="none";switch(i){case 1:p="back";break;case 2:p="front"}const m={label:`${this.Ac()} blendMode ${t} variant ${s} multisampleCount ${n}`,layout:this.XF(),primitive:{cullMode:p,frontFace:0===e?"cw":"ccw"},vertex:{module:4===s?this.CL:this.zz,entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:8,attributes:[{shaderLocation:1,offset:0,format:"float32x2"}]},{arrayStride:4*(h?2:4),attributes:[{shaderLocation:2,offset:0,format:h?"float16x4":"float32x4"}]},{arrayStride:4,attributes:[{shaderLocation:3,offset:0,format:"uint32"}]}]},fragment:{module:this.Lz,entryPoint:"main",targets:[{format:r.YF(),blend:{color:{srcFactor:a,dstFactor:l,operation:f},alpha:{srcFactor:u,dstFactor:c,operation:d}}}]}};if(n>=2&&(m.multisample={count:n}),1===s)m.fragment.module=this.kz||this.Lz,m.depthStencil={format:r.jF(),depthWriteEnabled:!0,depthCompare:"less-equal"};else if(2===s){m.fragment.module=this.kz||this.Lz,m.fragment.targets=[];const t={compare:"always",failOp:"keep",depthFailOp:"keep",passOp:"replace"};m.depthStencil={format:r.jF(),depthWriteEnabled:!0,depthCompare:"less-equal",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:1}}else if(3===s){m.fragment.module=this.kz||this.Lz;const t={compare:"equal",failOp:"keep",depthFailOp:"keep",passOp:"keep"};m.depthStencil={format:r.jF(),depthWriteEnabled:!1,depthCompare:"always",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:0}}return m}Kz(t,s,i,e,n){return this.$F().createRenderPipeline(this.Zz(t,s,i,e,n))}qz(t,s,i,e,n){return this.$F().createRenderPipelineAsync(this.Zz(t,s,i,e,n))}Gk(t,s,i,e,n){const r=wd(t,s,i,e,n);let h=this.$z.get(r);return h||(h=this.Kz(t,s,i,e,n),this.$z.set(r,h),h)}static vR(){return Gd}static CR(){return 16*Math.ceil(_d/16)}static ER(){return Ad}static DR(){return 16*Math.ceil(Dd/16)}static RR(){return Rd}static FR(){return 16*Math.ceil(Ld/16)}static SG(t){const s=t?"f16":"f32";return`\n\t\t${Id}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static lF(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\toutput.fragColor = input.color;\n\t\t\treturn output;\n\t\t}`}static fF(t){const s=t?"f16":"f32";return`\n\t\t${Id}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static pF(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static uF(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\t\t@binding(2) @group(1) var sampler1 : sampler;\n\t\t@binding(3) @group(1) var texture1 : texture_2d<f32>;\n\t\t@binding(4) @group(1) var sampler2 : sampler;\n\t\t@binding(5) @group(1) var texture2 : texture_2d<f32>;\n\t\t@binding(6) @group(1) var sampler3 : sampler;\n\t\t@binding(7) @group(1) var texture3 : texture_2d<f32>;\n\t\t@binding(8) @group(1) var sampler4 : sampler;\n\t\t@binding(9) @group(1) var texture4 : texture_2d<f32>;\n\t\t@binding(10) @group(1) var sampler5 : sampler;\n\t\t@binding(11) @group(1) var texture5 : texture_2d<f32>;\n\t\t@binding(12) @group(1) var sampler6 : sampler;\n\t\t@binding(13) @group(1) var texture6 : texture_2d<f32>;\n\t\t@binding(14) @group(1) var sampler7 : sampler;\n\t\t@binding(15) @group(1) var texture7 : texture_2d<f32>;\n\t\t@binding(16) @group(1) var sampler8 : sampler;\n\t\t@binding(17) @group(1) var texture8 : texture_2d<f32>;\n\t\t@binding(18) @group(1) var sampler9 : sampler;\n\t\t@binding(19) @group(1) var texture9 : texture_2d<f32>;\n\t\t@binding(20) @group(1) var sampler10 : sampler;\n\t\t@binding(21) @group(1) var texture10 : texture_2d<f32>;\n\t\t@binding(22) @group(1) var sampler11 : sampler;\n\t\t@binding(23) @group(1) var texture11 : texture_2d<f32>;\n\t\t@binding(24) @group(1) var sampler12 : sampler;\n\t\t@binding(25) @group(1) var texture12 : texture_2d<f32>;\n\t\t@binding(26) @group(1) var sampler13 : sampler;\n\t\t@binding(27) @group(1) var texture13 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar texXy : vec2<f32> = input.fragUV.xy;\n\t\t\tvar texIndex : u32 = input.texIndex;\n\t\t\tvar c : vec4<f32>;\n\n\t\t\tlet dx = dpdx(texXy);\n\t\t\tlet dy = dpdy(texXy);\n\t\t\t\n\t\t\tif (texIndex <= 6)\n\t\t\t{\n\t\t\t\tif (texIndex <= 2)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 0)\t\t\t{\tc = textureSampleGrad(texture0, sampler0, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 1)\t\t{\tc = textureSampleGrad(texture1, sampler1, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture2, sampler2, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 4)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 3)\t\t{\tc = textureSampleGrad(texture3, sampler3, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture4, sampler4, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex <= 5)\t\t{\tc = textureSampleGrad(texture5, sampler5, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture6, sampler6, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (texIndex <= 9)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 7)\t\t\t{\tc = textureSampleGrad(texture7, sampler7, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 8)\t\t{\tc = textureSampleGrad(texture8, sampler8, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture9, sampler9, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 11)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 10)\t\t{\tc = textureSampleGrad(texture10, sampler10, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture11, sampler11, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 12)\t\t{\tc = textureSampleGrad(texture12, sampler12, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture13, sampler13, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toutput.color = c * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static mF(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static yF(){return"\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\t\t\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar pos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-1.0, 1.0),\n\t\t\t\tvec2<f32>(1.0, 1.0),\n\t\t\t\tvec2<f32>(-1.0, -1.0),\n\t\t\t\tvec2<f32>(1.0, -1.0));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = pos[input.VertexIndex];\n\t\t\toutput.Position = vec4<f32>(p, 0.0, 1.0);\n\t\t\toutput.fragUV = p / 2.0 + 0.5;\n\t\t\treturn output;\n\t\t}"}static gF(){return"\n\t\t@binding(0) @group(0) var sampler0 : sampler;\n\t\t@binding(1) @group(0) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>\n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, vec2<f32>(input.fragUV.x, 1.0 - input.fragUV.y));\n\t\t\treturn output;\n\t\t}"}EF(t){t||(t=this.tv.sk());let s=this.Vz.get(t);return s||(s=this.$F().createRenderPipeline({label:"<mipmap generator>",layout:"auto",vertex:{module:this.zz,entryPoint:"main"},primitive:{topology:"triangle-strip",stripIndexFormat:"uint16"},fragment:{module:this.Lz,entryPoint:"main",targets:[{format:t,blend:{color:{srcFactor:"one",dstFactor:"zero"},alpha:{srcFactor:"one",dstFactor:"zero"}}}]}}),this.Vz.set(t,s)),s}static MF(){return`\n\t\t${Id}\n\n\t\tstruct PointData {\n\t\t\tdata : array<vec4<f32>>\n\t\t};\n\t\t@binding(3) @group(0) var<storage> pointBuffer : PointData;\n\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar normPos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, 0.5),\n\t\t\t\tvec2<f32>(-0.5, 0.5));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = normPos[input.VertexIndex % u32(4)];\n\t\t\tvar pointData : vec4<f32> = pointBuffer.data[input.VertexIndex / u32(4)];\n\n\t\t\tvar size : f32 = pointData.z;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(p * size + pointData.xy, uniforms.zElevation, 1.0);\n\t\t\toutput.pointOpacity = pointData.w;\n\n\t\t\tvar pointTexMin : vec2<f32> = min(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pointTexMax : vec2<f32> = max(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pn : vec2<f32> = p + vec2<f32>(0.5, 0.5);\n\t\t\tvar pointCoord : vec2<f32> = select(vec2<f32>(1.0 - pn.y, pn.x), pn, uniforms.pointTexEnd.x > uniforms.pointTexStart.x);\n\n\t\t\toutput.fragUV = mix(pointTexMin, pointTexMax, pointCoord);\n\t\t\treturn output;\n\t\t}`}static wF(t){return`\n\t\t${Ed}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32,\n\t\t\t@builtin(position) fragPos : vec4<f32>\n\t\t};\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * uniforms.pointColor * input.pointOpacity;\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static SF(t){return`\n\t\t${Ed}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar halfPixelSize : vec2<f32> = vec2<f32>(0.5, 0.5) / vec2<f32>(textureDimensions(texture0));\n\n\t\t\tvar tile : vec2<f32> = floor(input.fragUV);\n\t\t\tvar tex : vec2<f32> = fract(input.fragUV);\n\t\t\tvar tileOrigin : vec2<f32> = uniforms.srcRectStart + tile * (uniforms.tileSize + uniforms.tileSpacing);\n\t\t\tvar lowerBound : vec2<f32> = tileOrigin + halfPixelSize;\n\t\t\tvar upperBound : vec2<f32> = tileOrigin + uniforms.tileSize - halfPixelSize;\n\n\t\t\toutput.color = textureSampleLevel(texture0, sampler0, clamp(tex, lowerBound, upperBound), 0.0) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static _G(t){return`\n${Ed}\n\n%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n%%FRAGMENTINPUT_STRUCT%%\n\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>,\n\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n};\n\n%%C3_UTILITY_FUNCTIONS%%\n\nconst PI : f32 = 3.1415926;\n\nfn cospVec4(a : vec4<f32>, b : vec4<f32>, x : f32) -> vec4<f32>\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nfn randVec3(seed : vec2<f32>) -> vec3<f32>\n{\n\treturn vec3<f32>(\n\t\tfract(sin(dot(seed.xy, vec2<f32>(12.9898,78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.yx, vec2<f32>(12.9898,-78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.xy, vec2<f32>(-12.9898,-78.233))) * 43758.5453));\n}\n\nfn sampleTile(tile : vec2<f32>, uv : vec2<f32>, ddx : vec2<f32>, ddy : vec2<f32>) -> vec4<f32>\n{\n\tvar posRandom = uniforms.tileSize;\n\tvar angleRandom = uniforms.outlineThickness;\n\tvar pixelSize = c3_getPixelSize(texture0);\n\t\n\tvar rand = (randVec3(round(tile)) - 0.5) * 2.0;\n\t\n\tvar angle = angleRandom * rand.z * PI;\n\tvar sin_a = sin(angle);\n\tvar cos_a = cos(angle);\n\tvar aspect = pixelSize.x / pixelSize.y;\n\n\tvar mid = tile + vec2<f32>(0.5, 0.5);\n\tvar dp = uv - mid;\n\tdp.x /= aspect;\n\tvar r = vec2<f32>(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvar p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\treturn textureSampleGrad(texture0, sampler0, p, ddx, ddy);\n}\n\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\n\tvar output : FragmentOutput;\n\t\n\tvar blendMarginX = uniforms.tileSpacing.x;\n\tvar blendMarginY = uniforms.tileSpacing.y;\n\t\n\tvar tile = floor(input.fragUV);\n\tvar tex = fract(input.fragUV);\n\tvar ddx = dpdx(input.fragUV);\n\tvar ddy = dpdy(input.fragUV);\n\t\n\tvar curTile = sampleTile(tile, input.fragUV, ddx, ddy);\n\t\n\tvar inLeftMargin = (tex.x < blendMarginX);\n\tvar inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tvar inTopMargin = (tex.y < blendMarginY);\n\tvar inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tvar leftTile = sampleTile(tile + vec2<f32>(-1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tvar leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =     sampleTile(tile + vec2<f32>(0.0,  -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftTile = sampleTile(tile + vec2<f32>(-1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =     sampleTile(tile + vec2<f32>(0.0,  1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftTile = sampleTile(tile + vec2<f32>(-1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tvar rightTile = sampleTile(tile + vec2(1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tvar rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =      sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightTile = sampleTile(tile + vec2<f32>(1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =      sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightTile = sampleTile(tile + vec2<f32>(1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tvar topTile = sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tvar bottomTile = sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutput.color = curTile;\n\t}\n\t\n\toutput.color *= vec4<f32>(input.fragColor);\n\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\treturn output;\n}\n`}static TF(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = vec4<f32>(input.fragColor);\n\t\t\treturn output;\n\t\t}"}static vF(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\tfn fromLinear(linearRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (linearRGB < vec3<f32>(0.0031308));\n\t\t\tvar higher : vec3<f32> = vec3<f32>(1.055) * pow(abs(linearRGB), vec3<f32>(1.0/2.4)) - 0.055;\n\t\t\tvar lower : vec3<f32> = linearRGB * 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\tfn toLinear(sRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (sRGB < vec3<f32>(0.04045));\n\t\t\tvar higher : vec3<f32> = pow(abs((sRGB + 0.055) / 1.055), vec3<f32>(2.4));\n\t\t\tvar lower : vec3<f32> = sRGB / 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar linearGrad : vec3<f32> = mix(toLinear(vec3<f32>(input.fragColor.rgb)), toLinear(uniforms.color2.rgb), vec3<f32>(input.fragUV.x));\n\n\t\t\tvar a : f32 = mix(f32(input.fragColor.a), uniforms.color2.a, input.fragUV.x);\n\t\t\toutput.color = vec4<f32>(fromLinear(linearGrad) * a, a);\n\t\t\treturn output;\n\t\t}\n\t\t`}static xF(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar grad : f32 = input.fragUV.x / (1.0 - input.fragUV.y);\n\t\t\toutput.color = vec4<f32>(input.fragColor) * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);\n\t\t\treturn output;\n\t\t}\n\t\t`}static bF(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\n\t\t\tvar f : f32 = step(diffSq.x + diffSq.y, 0.25);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}static CF(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\n\t\t\tvar innerF : f32 = step(distSq, 0.25);\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm * uniforms.outlineThickness;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\t\t\tvar outerF : f32 = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static IF(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\n\t\t\tvar f : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}`}static GF(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar pxNorm : vec2<f32> = uniforms.pixelSize * norm;\n\t\t\tvar innerEdge1 : vec2<f32> = halfNorm - pxNorm;\n\t\t\tvar innerEdge1Sq : vec2<f32> = innerEdge1 * innerEdge1;\n\n\t\t\tvar innerF : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\n\n\t\t\tvar innerEdge2 : vec2<f32> = halfNorm - pxNorm * uniforms.outlineThickness;\n\t\t\tvar innerEdge2Sq : vec2<f32> = innerEdge2 * innerEdge2;\n\t\t\tvar innerEdge3 : vec2<f32> = halfNorm - pxNorm * (uniforms.outlineThickness + 1.0);\n\t\t\tvar innerEdge3Sq : vec2<f32> = innerEdge3 * innerEdge3;\n\n\t\t\tvar outerF : f32 = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static _F(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar f : f32 = 1.0 - abs(input.fragUV.y - 0.5) * 2.0;\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}}}{const Bd=self.Gs,Ud=new Set(["nearest","bilinear","trilinear"]),$d=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Vd=self.GPUTextureUsage,Wd={pb:"clamp-to-edge",mb:"clamp-to-edge",gb:"trilinear",yb:0,Mb:!0,tB:!1,eC:!1,sB:!1,iB:!1,rC:0,width:-1,height:-1},Yd=[[1,["r8unorm","r8snorm","r8uint","r8sint","stencil8"]],[2,["r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","depth16unorm"]],[3,["depth24plus"]],[4,["r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2uint","rgb10a2unorm","rg11b10ufloat","depth24plus-stencil8","depth32float"]],[8,["rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float"]],[16,["rgba32uint","rgba32sint","rgba32float"]],[5,["depth32float-stencil8"]]],Qd=new Map;for(const[qd,Xd]of Yd)for(const Zd of Xd)Qd.set(Zd,qd);const Jd=new Set,Hd={Tb:!0,flipY:!1};Bd.qw.sF=class{constructor(t,s){this.tv=t,this.Cb=null,this.eB="",this.nB=null,this.rB=null,this.hB=null,this.oB=null,this.Uy=0,this.$y=0,this.Ib=!0,this.Gb="clamp-to-edge",this._b="clamp-to-edge",this.Eb="trilinear",this.Ab=0,this.Nb=!1,this.Wp=0,this.aB=!1,this.dC=!1,this.lB=!1,this.uB=!1,this.pC=0,this.cB=0,this.fB=!0,this.dB=null,this.pB=0,this.mB=!!s,this.mB&&(this.eB=this.tv.YF(),this.aB=!0,this.dC=this.tv.HF(),this.Eb=this.tv.tk(),this.rB=this.tv.zF({gb:this.Eb}))}gB(t){if(this.Gb=t.pb,this._b=t.mb,this.Eb=t.gb,this.Ab=t.yb,this.Nb=!!t.Mb&&this.tv.$T()&&"nearest"!==t.gb,this.aB=!!t.tB,this.dC=!!t.eC,this.lB=!!t.sB,this.uB=!!t.iB,this.pC=this.tv.gj(t.rC),!Ud.has(this.Eb))throw new Error("invalid sampling");if(!$d.has(this.Gb)||!$d.has(this._b))throw new Error("invalid wrap mode");if(this.pC>=2&&this.dC)throw new Error("invalid use of multisampling");"nearest"===this.Eb&&(this.Ab=0),this.rB=this.tv.zF({pb:this.Gb,mb:this._b,gb:this.Eb,yb:this.Ab}),this.yB(),this.Wp=1}yB(){const t=this.tv,s=t.$F();this.cB=0,this.aB?(this.cB=Vd.RENDER_ATTACHMENT,this.dC&&(this.cB|=Vd.TEXTURE_BINDING),this.uB&&(this.cB|=Vd.COPY_DST),this.eB=this.tv.YF()):(this.cB=Vd.COPY_DST|Vd.TEXTURE_BINDING,this.eB=this.tv.sk()),this.lB&&(this.cB|=Vd.COPY_SRC),this.Cb=s.createTexture({size:[this.Uy,this.$y,1],mipLevelCount:this.wB(),format:this.eB,usage:this.cB,sampleCount:this.pC>=2?this.pC:1}),this.nB=this.Cb.createView();const i=[],e=Bd.qw.rF.nF();for(let t=0;t<e;++t)i.push({binding:2*t,resource:this.rB},{binding:2*t+1,resource:this.nB});this.aB&&!this.dC||(this.hB=s.createBindGroup({layout:t.ZF(),entries:i}),this.oB=s.createBindGroup({layout:t.KF(),entries:[{binding:0,resource:this.tv.zF({gb:this.tv.tk()})},{binding:1,resource:this.nB}]})),this.MB()&&this.uk(!0),Jd.add(this)}SB(){Jd.delete(this),this.dB&&this.dB.Yn(),this.uk(!1),this.Cb.destroy(),this.Cb=null,this.nB=null,this.hB=null,this.oB=null}static ak(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas}static TB(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||t instanceof ImageData}vB(t){return[t.width||t.videoWidth,t.height||t.videoHeight]}MC(t,s){if(t&&!Bd.qw.sF.ak(t))throw new TypeError("invalid texture source");if(s=Object.assign({},Wd,s),this.Cb)throw new Error("already created texture");if(this.Ib=!0,t){const[s,i]=this.vB(t);this.Uy=s,this.$y=i}else if(this.Uy=s.width,this.$y=s.height,this.Uy<=0||this.$y<=0)throw new Error("invalid texture size");if(this.gB(s),this.aB||this.dC)throw new Error("static texture cannot be render target");t&&this.xB(t)}xB(t,s=!0){if(this.Nb)this.bB(t,this.wB(),s);else{const i=this.tv.$F(),e=i.createCommandEncoder(),n=i.createTexture({size:[this.Uy,this.$y,1],mipLevelCount:1,format:this.eB,usage:Vd.COPY_SRC|Vd.COPY_DST|Vd.RENDER_ATTACHMENT});this.CB(n,t,0,s),e.copyTextureToTexture({texture:n,mipLevel:0},{texture:this.Cb,mipLevel:0},[this.Uy,this.$y,1]),i.queue.submit([e.finish()]),n.destroy()}}CB(t,s,i,e=!0){const[n,r]=this.vB(s);this.tv.$F().queue.copyExternalImageToTexture({source:s},{texture:t,mipLevel:i,premultipliedAlpha:!!e},[n,r,1])}wB(){return this.Nb?Math.floor(Math.log2(Math.max(this.Uy,this.$y))+1):1}bB(t,s,i=!0){const e=this.tv.$F(),n=e.createTexture({size:[this.Uy,this.$y,1],mipLevelCount:this.wB(),format:this.eB,usage:Vd.COPY_DST|Vd.COPY_SRC|Vd.TEXTURE_BINDING|Vd.RENDER_ATTACHMENT}),r=this.tv.EF(),h=r.getBindGroupLayout(0),o=this.tv.zF({gb:"bilinear"}),a=e.createCommandEncoder();this.CB(n,t,0,i),a.copyTextureToTexture({texture:n,mipLevel:0},{texture:this.Cb,mipLevel:0},[this.Uy,this.$y,1]);const l=[];for(let t=0;t<s;++t)l.push(n.createView({baseMipLevel:t,mipLevelCount:1}));let u=this.Uy,c=this.$y;for(let t=1;t<s;++t){u/=2,c/=2;const s=Math.max(Math.floor(u),1),i=Math.max(Math.floor(c),1),f=a.beginRenderPass({colorAttachments:[{view:l[t],loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=e.createBindGroup({layout:h,entries:[{binding:0,resource:o},{binding:1,resource:l[t-1]}]});f.setPipeline(r),f.setBindGroup(0,d),f.draw(4),f.end(),a.copyTextureToTexture({texture:n,mipLevel:t},{texture:this.Cb,mipLevel:t},[s,i,1])}e.queue.submit([a.finish()]),n.destroy()}Ub(t,s,i){if(i=Object.assign({},Wd,i),this.Cb)throw new Error("already created texture");this.Ib=!1,this.Uy=t,this.$y=s,this.gB(i)}async Qb(t,s){if(!Bd.qw.sF.ak(t)&&!Bd.qw.sF.TB(t))throw new Error("invalid texture source");if(!this.Cb||this.Wp<=0)throw new Error("texture not created");if(this.Ib)throw new Error("cannot update static texture");if(s=Object.assign({},Hd,s),(Bd.qw.sF.TB(t)||s.flipY||!s.Tb)&&(t=await createImageBitmap(t,{premultiplyAlpha:s.Tb?"premultiply":"none",imageOrientation:s.flipY?"flipY":"none"}),!this.Cb))return;this.tv.jT();const[i,e]=this.vB(t);this.Uy===i&&this.$y===e||(this.SB(),this.Uy=i,this.$y=e,this.yB(),this.tv.fj(this)),this.xB(t,s.Tb)}Jb(){if(this.Wp>0)throw new Error("texture still has references");if(!this.Cb)throw new Error("already deleted texture");this.SB()}kF(){this.fB=!1,this.uk(!1)}MB(){return this.Ib&&this.fB&&!this.aB}uk(t){this.tv.uk(this,t)}IB(t,s){if(this.dB)throw new Error("already in a group");this.dB=t,this.pB=s,this.uk(!1)}GB(){this.dB=null,this.pB=0,this.MB()&&this.uk(!0)}LF(){return this.hB}FF(){return this.oB}lj(){return null!==this.dB?this.dB._B():this.MB()?(this.tv.fk(this),null!==this.dB?this.dB._B():null):null}cj(){return this.pB}xy(){return this.mB?this.tv.xy():this.Uy}Cy(){return this.mB?this.tv.Cy():this.$y}Tv(){return this.tv}qb(){return this.Cb}Nk(){return this.nB}sj(){return this.eB}zF(){return this.rB}EB(){return this.Eb}OC(){return"nearest"!==this.Eb}rk(){return this.aB}RC(){return this.dC}ij(){return this.lB}Xb(){this.Wp++}Zb(){if(this.Wp<=0)throw new Error("no more references");this.Wp--}Kb(){return this.Wp}mj(){return this.cB}BF(t,s){this.cB=t,this.eB=s}mk(){const t=this.tv,s=t.$F();this.Cb=t.QF(),this.nB=t.JF(),t.HF()&&(this.oB=s.createBindGroup({layout:t.KF(),entries:[{binding:0,resource:this.rB},{binding:1,resource:this.nB}]}))}Mk(){this.Cb=null,this.nB=null,this.oB=null}sC(){let t=this.xy()*this.Cy()*Bd.qw.sF.ik(this.sj());return this.Nb&&(t+=Math.floor(t/3)),t}static Wv(){}static iC(){return Jd.values()}static ik(t){const s=Qd.get(t);return"number"==typeof s?s:NaN}}}{const Kd=self.Gs;Kd.qw.rF=class{constructor(t,s){if(s.length<2)throw new Error("invalid multi-texture group");this.tv=t,this.AB=s,this.DB=null;for(let t=0,i=s.length;t<i;++t)s[t].IB(this,t);s.length<Kd.qw.rF.nF()&&this.tv.ck(this,!0),this.NB()}Yn(){this.tv.ck(this,!1);for(const t of this.AB)t.GB();this.OB(),Kd.Sh(this.AB),this.tv=null}NB(){this.OB();const t=this.tv.$F(),s=[],i=Kd.qw.rF.nF();for(let t=0;t<i;++t){const i=this.AB[Math.min(t,this.AB.length-1)];s.push({binding:2*t,resource:i.zF()},{binding:2*t+1,resource:i.Nk()})}this.DB=t.createBindGroup({layout:this.tv.ZF(),entries:s})}OB(){null!==this.DB&&this.tv.dj(this.DB),this.DB=null}_B(){return this.DB}static nF(){return 14}}}{const tp=self.Gs,sp=self.ls,ip=sp.ws,ep=sp.ds,np={gb:"trilinear",alpha:!0,depth:!1,eC:!0,sB:!1,iB:!1,nC:!0,rC:0},rp=new Set;tp.qw.iF=class{constructor(t,s){this.tv=t,this.PB=!!s,this.fC=!!s&&t.ek(),this.RB=null,this.uC=!0,this.pC=0,this.LB=!1,this.kB=tp.Wn(tp.bo),this.mC=ep.create(),this.gC=0,this.yC=0,this.wC=0,this.PB&&(this.RB=tp.Wn(tp.qw.sF,t,!0))}MC(t,s,i){if(i=Object.assign({},np,i),this.RB)throw new Error("already created render target");if(this.fC=!!i.depth,this.uC=!!i.nC,this.pC=this.tv.gj(i.rC),this.pC>=2&&i.eC)throw new Error("invalid use of multisampling");this.RB=this.tv.TC(t,s,{gb:i.gb,Mb:!1,tB:!0,eC:i.eC,sB:i.sB,iB:i.iB,rC:this.pC}),this.SC(),rp.add(this)}Jb(){rp.delete(this),this.RB.SB(),this.RB=null,this.tv=null}bC(t,s){if(t===this.xy()&&s===this.Cy())return;const i=this.RB.EB(),e=this.RB.RC(),n=this.RB.ij();this.RB.SB(),this.RB=null,this.RB=this.tv.TC(t,s,{gb:i,Mb:!1,tB:!0,eC:e,sB:n}),this.SC()}Nk(){return this.PB?this.tv.JF():this.RB.Nk()}SC(){this.tv.fS(this.mC,this.xy()/this.Cy()),this.gC=this.tv.aS(),this.yC=this.tv.nS(),this.wC=this.tv.hS()}FC(){return this.uC}nk(){return this.PB}LC(){return this.fC}xy(){return this.PB?this.tv.xy():this.RB.xy()}Cy(){return this.PB?this.tv.Cy():this.RB.Cy()}DC(){if(this.RB)return this.RB;throw new Error("no texture")}Tv(){return this.tv}kC(){return this.pC}NC(){return this.tv.aS()===this.gC&&this.tv.nS()===this.yC&&this.tv.hS()===this.wC||this.SC(),this.mC}OC(){return this.RB.OC()}RC(){return this.RB.RC()}ij(){return this.RB.ij()}zC(t){return"nearest"!==(t=Object.assign({},np,t)).gb===this.OC()&&!!t.eC===this.RC()&&!!t.sB===this.ij()&&!!t.depth===this.LC()&&("number"==typeof t.width||"number"==typeof t.height?!this.FC()&&this.xy()===Math.floor(t.width)&&this.Cy()===Math.floor(t.height):this.FC())}Rk(t){this.LB=!!t}gk(){return this.LB}Ok(){return this.kB}static Wv(){}static VC(){return rp.values()}}}{const hp=self.Gs;hp.qw.Tk=class{constructor(t,s){this.tv=t,this.YM=this.tv.zT(),this.jB=s;const i=this.tv.$F();this.zB=i.createQuerySet({count:this.jB,type:"timestamp"});const e=self.GPUBufferUsage;this.BB=i.createBuffer({size:this.UB(),usage:e.QUERY_RESOLVE|e.COPY_SRC}),this.$B=i.createBuffer({size:this.UB(),usage:e.COPY_DST|e.MAP_READ}),this.jD=null}UB(){return 8*this.jB}Lk(){return this.zB}kk(t){t.resolveQuerySet(this.zB,0,this.jB,this.BB,0),t.copyBufferToBuffer(this.BB,0,this.$B,0,this.UB())}async zk(){const t=this.UB();await this.$B.mapAsync(self.GPUMapMode.READ,0,t);const s=this.$B.getMappedRange(0,t);this.jD=new BigUint64Array(s.slice(0)),this.$B.destroy(),this.$B=null,this.BB.destroy(),this.BB=null,this.zB.destroy(),this.zB=null}UD(){return null!==this.jD}$D(){if(!this.jD)throw new Error("not yet got result");return this.jD}zT(){return this.YM}}}{const op=self.Gs,ap={VB:null,WB:null,YB:null,getTime:null,QB:null};op.qw.JB=class{constructor(t){t=Object.assign({},ap,t),this.HB=t.VB,this.qB=t.WB,this.XB=t.YB,this.ZB=t.getTime,this.KB=t.QB,this.tU=null,this.sU=new Set}iU(t){this.sU.add(t)}eU(t){this.sU.delete(t)}Wv(){this.tU=null;for(const t of this.sU)t.Wv()}nU(t){return this.HB?this.HB(t):[t.xy(),t.Cy()]}SP(t){return this.qB(t)}rU(t,s){this.XB(t,s)}hU(){return this.ZB()}Pp(t){this.KB(t)}oU(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.tU||this.tU.xy()===s&&this.tU.Cy()===i||(t.CC(this.tU),this.tU=null),null===this.tU&&(this.tU=t.xP(null,{width:s,height:i,gb:"nearest",Mb:!1})),this.tU}}}{const lp=self.Gs,up=self.assert,cp=self.ls,fp=cp.ds,dp=lp.Wn(lp.Rect),pp=lp.Wn(lp.Rect),mp=lp.Wn(lp.Rect),gp=lp.Wn(lp.Rect),yp=fp.create(),wp=fp.create(),Mp={aU:null,lU:null,uU:null,cU:!1},Sp={fU:null,dU:!1,pU:!1,mU:!1,gU:!1,yU:!1,wU:!1};lp.qw.MU=class{constructor(t,s){s=Object.assign({},Mp,s),this.$p=t,this.SU=s.aU,this.TU=s.lU,this.vU=s.uU,this.xU=null,this.bU=[],this.CU=[],this.IU=[],this.GU=!1,this.Fv=0,this._U=!1,this.EU=!1,this.AU=!1,this.DU=!1,this.NU=!1,this.OU=!1,this.wN=!1,this.PU=!1,this.RU=!1,this.LU=!1,this.FU=!1,this.kU=!1,this.jU=0,this.zU=[null,null,null],this.BU=!!s.cU,this.UU=0,this.$U=0,this.VU=0,this.WU=0,this.YU=null,this.QU=null,this.JU=lp.Wn(lp.Rect),this.HU=lp.Wn(lp.Rect),this.qU=lp.Wn(lp.Rect),this.XU=lp.Wn(lp.Rect),this.ZU=lp.Wn(lp.Rect),this.KU=1,this.t$=1,this.s$=0,this.i$=0,this.e$=null,this.n$=null,this.r$=0,this.h$=0,this.o$=0,this.a$=0,this.l$=!1,this.mC=fp.create(),this.u$=fp.create(),this.$p.iU(this)}Yn(){this.$p.eU(this),lp.Sh(this.IU),lp.Sh(this.bU),lp.Sh(this.CU),this.YU=null,this.QU=null,this.SU=null,this.TU=null,this.vU=null}Wv(){this.GU=!0,lp.Sh(this.IU),lp.Sh(this.bU),lp.Sh(this.CU)}c$(){return this.GU}f$(t,s){if(s=Object.assign({},Sp,s),lp.Sh(this.IU),this.UU=0,this.$U=0,this._U=!1,this.EU=!1,this.AU=!1,this.DU=!1,this.NU=!1,this.OU=!1,this.jU=0,this.kU=!!s.gU,this.FU=!!s.wU,this.GU=!1,lp.Ch(this.bU,t),0===t.length)return;if(s.fU){if(s.fU.length!==t.length)throw new Error("incorrect indexMap length");lp.Ch(this.CU,s.fU)}else{lp.Sh(this.CU);for(let s=0,i=t.length;s<i;++s)this.CU.push(s)}for(const s of t)this.UU+=s.xv(),this.$U+=s.bv(),s.Ev()&&(this._U=!0),s.Dv()&&(this.EU=!0),s.Av()&&(this.AU=!0),s.Cv()&&(this.DU=!0),s.Pv()&&(this.NU=!0);this.OU=this.d$(t[0].Tv());const i=this.p$(t[0],s),e=this.m$(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.LU=!0);this.LU=!1;let n=0;i&&(this.jU=1,this.IU.push(lp.Wn(lp.qw.MU.y$.g$,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.jU=Math.max(this.jU,t),this.IU.push(lp.Wn(lp.qw.MU.y$.w$,this,n,t,s)),n=t}else this.jU=1,this.IU.push(lp.Wn(lp.qw.MU.y$.M$,this,-1,1,s)),n=1;e&&this.IU.push(lp.Wn(lp.qw.MU.y$.S$,this,n,0))}p$(t,s){return!!(s.dU||t.Iv()||s.mU&&!t._v()||t.Dv()&&!this.FU||0!==this.UU||0!==this.$U)||(t.Tv().YT()?t.Av()&&(s.yU||s.gU)||t.Nv()&&s.gU:t.Av()&&!this.OU&&s.yU)}m$(t,s){return!!s.pU||(t.Tv().YT()?t.Av()||t.Cv():(t.Av()||t.Cv())&&this.T$())}d$(t){return t.dS()&&this.AU&&!this.DU}v$(t,s,i){t.dS()&&null===s&&(s=t.tj()),this.e$=s,this.YU=i.x$||null,this.QU=i.b$||null,this.Fv=i.C$||0,this.KU=i.devicePixelRatio||1,this.t$=i._j||1,this.s$=i.Ej||0,this.i$="number"==typeof i.time?i.time:this.$p.hU(),this.wN=!1,t.AO(),this._U&&this.I$();let e=!1;if(this.G$()&&(this._$(t,i),e=!0,this.n$=this.$p.oU(t,this.VU,this.WU),dp.M(this.HU),dp.Tl(),t.dS()&&t.Fk(this.e$),t.pj(this.e$.DC(),this.n$,dp.Ka(),dp.tl(),dp.width(),dp.height())),this.LU)this.E$(t,i);else if(e||this._$(t,i),0!==this.qU.width()||0!==this.qU.height()){t.$O(),t.OT(),t.FO(),t.JS(0),t.qS(0),this.xU=i.A$||null,this.r$=i.D$||0,this.h$=i.N$||0,this.o$=i.O$||0,this.a$=i.P$||0,this.l$=!!i.R$,this.L$(t),this.zU[0]=s,this.zU[1]=this.jU>=1?this.F$():null,this.zU[2]=2===this.jU?this.F$():null;for(const s of this.IU){const i=this.k$(s.j$()),e=this.k$(s.z$());t.dS()?s.B$(t,i,e):s.U$(t,i,e)}t.jO(null),this.zU[1]&&this.$$(this.zU[1]),this.zU[2]&&this.$$(this.zU[2]),this.zU.fill(null),this.V$(t),this.e$=null,this.n$=null,this.YU=null,this.QU=null,this.xU=null}}_$(t,s){const[i,e]=this.$p.nU(t);this.W$(t,i,e),this.Y$(s)}W$(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.VU===s&&this.WU===i||this.Q$(t,s,i,0,0,this.mC,this.u$),this.VU=s,this.WU=i}Q$(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.fS(r,s/i);const l=t.gS(o,a,t.KM(i),o,a,0,i);fp.M(h,l)}Y$(t){if(this.JU.M(t.Gj),t.J$?this.HU.M(t.J$):this.HU.set(0,0,this.VU,this.WU),this.LU){const s=t.D$??0,i=t.N$??0;this.HU.offset(-s,-i)}this.qU.M(this.HU),this.qU.Mt(this.VU,this.WU);const s=this.t$*this.KU;this.HU.fl(this.UU*s,this.$U*s),this.ZU.M(this.HU),this.ZU.Mt(this.VU,this.WU),this.HU.vl(0,0,this.VU,this.WU),this.XU.M(this.HU),this.XU.Mt(this.VU,this.WU)}L$(t){if(this.PU=t.yP(),this.RU=t.OP(),this.FU)t.gP(!1),this.EU&&t.wP(!0);else{if(dp.M(this.HU),t.YT()){const t=this.t$*this.KU;dp.fl(Math.max(this.UU,1)*t,Math.max(this.$U,1)*t),dp.Tl(),dp.Xn(0,0,this.VU,this.WU)}else dp.Tl();t.MP(dp.Ka(),dp.tl(),dp.width(),dp.height(),this.WU)}}H$(t){t.FO(),this.FU||(this.RU?t.PP(!1):t.gP(!1),this.EU&&t.wP(!0)),t.dS()&&t.oj(!0)}V$(t){t.wP(!1),this.RU?t.NP(this.PU):t.gP(this.PU),this.FU||t.TP(),t.dS()&&t.oj(!1),this.wN=t.DO()}q$(){this.ZU.Xn(0,0,1,1)}k$(t){return t<0?null:this.zU[t]}F$(){return this.$p.SP(this)}X$(){return this.e$}$$(t){this.$p.rU(t,this)}Z$(t){return this.bU[t]}K$(t){this.xU?this.xU(this,t,()=>this.SU(t,this)):this.SU(t,this),this.LU||this.H$(t)}tV(t){if(this.FU)return!0;if(0!==this.r$||0!==this.h$||0!==this.o$||0!==this.a$)return!1;const[s,i]=t.sP(t.SP());return s===this.VU&&i===this.WU}sV(t,s){let i=this.mC,e=this.u$;if(s&&!this.tV(t)){let s,n;i=yp,e=wp,0!==this.o$&&0!==this.a$?[s,n]=[this.o$,this.a$]:[s,n]=t.sP(t.SP()),this.Q$(t,s,n,this.r$,this.h$,i,e),this.FU||t.TP()}t.xO(i),t.EO(e)}I$(){this.$p.Pp(this)}iV(t,s){return this.vU(this.CU[t],s)}eV(t,s){let i=this.ZU,e=this.XU,n=this.qU;t.YT()&&(pp.M(i),pp.ml(1),i=pp,mp.M(e),mp.ml(1),e=mp,gp.M(n),gp.ml(1),n=gp),this.nV(t,s,e,n,i,1/this.VU,1/this.WU)}rV(t,s){let i=this.XU,e=this.qU,n=1/this.VU,r=1/this.WU;if(this.TU){let{hV:t,oV:s,aV:h}=this.TU(this.YU);t||(dp.set(0,0,0,0),t=dp),s||(s=this.VU),h||(h=this.WU),i=t,e=t,n=1/s,r=1/h}else t.YT()&&(mp.M(i),mp.ml(1),i=mp,gp.M(e),gp.ml(1),e=gp);let h=this.ZU;t.YT()&&(h=pp,h.M(this.ZU),h.ml(1)),this.nV(t,s,i,e,h,n,r),t.dS()&&this.NU&&t.Lj(this.kU)}lV(t){return this.AU?t.dS()?this.G$()?this.n$:this.e$.DC():this.e$:null}nV(t,s,i,e,n,r,h){t.cP(this.lV(t),n,i,e,this.JU,r,h,this.KU,this.t$,this.s$,this.i$),t.fP(this.iV(s,t))}E$(t,s){const i=this.bU[0],e=t.yP(),n=i.Dv();n&&(t.gP(!1),t.wP(!0),this.ZU.set(0,0,1,1),this.qU.set(0,0,1,1)),t.vS(i),t.$v(this.Fv),t.IP(this.e$),t.OT();let r=0,h=1;if(this.qU.set(0,0,1,1),i.Nv()&&this.TU){const{hV:t,oV:s,aV:i}=this.TU(this.YU);t&&this.qU.M(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.$p.nU(t);r=1/s,h=1/i}s.Gj?this.JU.M(s.Gj):this.JU.set(0,0,0,0),t.cP(this.lV(t),this.ZU,this.qU,this.qU,this.JU,r,h,this.KU,this.t$,this.s$,this.i$),t.fP(this.iV(0,t)),t.dS()&&this.NU&&t.Lj(this.kU),t.JS(0),this.K$(t),n&&(t.wP(!1),t.gP(e))}G$(){return this.OU}T$(){return!this.OU}uV(){return this.AU}cV(){return!!this.LU&&!this.G$()}fV(){return this.FU}dV(){return this.YU}pV(){return this.QU}mV(){return this.Fv}gV(){return this.l$}DO(){return this.wN}yV(){return this.HU}wV(){return this.XU}MV(){return this.BU}async SV(t,s,i){}}}{const Tp=self.Gs;Tp.qw.MU.y$=class{constructor(t,s,i,e=-1){this.TV=t,this.vV=s,this.xV=i,this.$w=e}bV(){return this.TV}j$(){return this.vV}z$(){return this.xV}CV(){return this.$w}KI(){return this.bV().Z$(this.CV())}U$(t,s,i){}B$(t,s,i){}}}{const vp=self.Gs;vp.qw.MU.y$.g$=class extends vp.qw.MU.y${constructor(t,s,i,e){super(t,s,i,e)}U$(t,s,i){const e=this.bV();t.$O(),t.OT(),t.TS(),t.IP(i,e.gV()),t.dP(0,0,0,0),e.K$(t),e.q$()}B$(t,s,i){const e=this.bV();t.$O(),t.OT(),t.TS(),t.IP(i,!1),t.dP(0,0,0,0),e.K$(t),e.q$()}}}{const xp=self.Gs,bp=xp.Wn(xp.Rect),Cp=xp.Wn(xp.El);xp.qw.MU.y$.S$=class extends xp.qw.MU.y${constructor(t,s,i,e){super(t,s,i,e)}U$(t,s,i){const e=this.bV();t.TS(),t.IP(i),e.sV(t,!0),t.$v(e.mV()),t.jO(s.DC()),Cp.ql(e.yV()),bp.M(e.wV()),bp.ml(1),t.oT(Cp,bp),e.MV()&&t.EP(s)}B$(t,s,i){const e=this.bV();t.TS(),t.IP(i,!1),e.tV(t)?Cp.ql(e.wV()):(t.oj(!1),e.sV(t,!0),Cp.ql(e.yV())),t.lk(null),t.$v(e.mV()),t.jO(s.DC()),e.fV()?t.tP():t.oT(Cp,e.wV())}}}{const Ip=self.Gs;Ip.qw.MU.y$.M$=class extends Ip.qw.MU.y${constructor(t,s,i,e){super(t,s,i,e)}U$(t,s,i){const e=this.bV();t.IP(i,e.gV()),t.dP(0,0,0,0),t.YO(),t.vS(this.KI()),e.rV(t,this.CV()),e.K$(t),e.q$()}B$(t,s,i){const e=this.bV();t.IP(i,!1),t.dP(0,0,0,0),t.YO(),t.vS(this.KI()),e.rV(t,this.CV()),e.K$(t),e.q$()}}}{const Gp=self.Gs,_p=Gp.Wn(Gp.Rect),Ep=Gp.Wn(Gp.El);Gp.qw.MU.y$.w$=class extends Gp.qw.MU.y${constructor(t,s,i,e){super(t,s,i,e)}U$(t,s,i){const e=this.bV();t.IP(i);const n=0===this.z$();n?t.$v(e.mV()):(t.dP(0,0,0,0),t.YO()),t.vS(this.KI()),e.eV(t,this.CV()),t.jO(s.DC()),e.sV(t,n),Ep.ql(e.yV()),_p.M(e.wV()),_p.ml(1),t.oT(Ep,_p),e.MV()&&t.EP(s)}B$(t,s,i){const e=this.bV();t.IP(i,!1),0===this.z$()?(t.$v(e.mV()),t.lk(null),e.tV(t)?Ep.ql(e.wV()):(t.oj(!1),e.sV(t,!0),Ep.ql(e.yV()))):(t.dP(0,0,0,0),t.YO(),Ep.ql(e.wV())),t.vS(this.KI()),e.eV(t,this.CV()),t.jO(s.DC()),e.fV()?t.tP():t.oT(Ep,e.wV())}}}{let Ap=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};SortZOrderList=Ap;const Dp=self.Gs,Np=self.ks;let Op=null;const Pp=new Set,Rp=[],Lp=[];let Fp=!1,kp=!1,jp=!1;const zp=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.IV=class{constructor(t){Op=t,Object.defineProperties(this,{GV:{value:Op.EV()._V(),writable:!1},AV:{value:Op.NV().DV(),writable:!1},OV:{value:{},writable:!1},PV:{value:{},writable:!1},RV:{value:Op.LV(),writable:!1},FV:{value:Op.kV(),writable:!1},jV:{value:Op.zV(),writable:!1},BV:{value:Op.UV(),writable:!1},$V:{value:new Date(Op.VV()),writable:!1},storage:{value:new self.WV(Op),writable:!1},YV:{value:Op.QV(),writable:!1},JV:{value:Op.HV(),writable:!1},qV:{value:Op.XV(),writable:!1},gb:{value:Op.EB(),writable:!1},ZV:{value:new self.KV(t),writable:!1},tW:{value:new self.sW(t),writable:!1}}),Op.iW().addEventListener("keydown",t=>{Pp.has(t.key)?t.stopPropagation():Pp.add(t.key)}),Op.iW().addEventListener("keyup",t=>Pp.delete(t.key)),Op.Mf().addEventListener("window-blur",()=>Pp.clear()),Op.QV()&&(self.alert=t=>(Fp||(Fp=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}eW(t){Object.defineProperties(this.OV,t)}nW(t){Object.defineProperties(this.PV,t)}addEventListener(t,s){Op.iW().addEventListener(t,s)}removeEventListener(t,s){Op.iW().removeEventListener(t,s)}rW(t,...s){Np.ue(t);const i=Op.hW(),e=i.oW(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Gu())return e.aW();if(s.length<e.lW())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.lW()} expected)`);const n=e.uW();let r=n.cW();const h=i.fW();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.cW())t.has(s)||(r.push(s),t.add(s));for(const s of i.dW())t.has(s)||(r.push(s),t.add(s))}return n.pW(r,e.mW(),e.gW(),e.aW(),null,...s)}yW(t){const s=Op.MW().wW();if(!s)throw new Error("not in a function which returns a value");switch(s.SW()){case 1:"number"==typeof t&&s.TW(t);break;case 2:"string"==typeof t&&s.TW(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.TW(t)}}signal(t){Np.ue(t),Op.hW().vW(t)}xW(t){return Np.ue(t),Op.hW().bW(t)}IW(){return[Op.HV(),Op.XV()]}get GW(){return Op._W()}get EW(){return Op.AW()}get DW(){return Op.NW()}get OW(){return Op.PW()}get RW(){return Op.LW()}get FW(){return Op.kW()}get jW(){return Op.zW()}set jW(t){Np.he(t),Op.BW(t)}get UW(){return kp||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),kp=!0),Op.$W()}get framesPerSecond(){return Op.$W()}get VW(){return Op.WW()}get YW(){return Op.QW()}get JW(){return Op.HW()}get qW(){return Op.XW()}set qW(t){if(!zp.has(t))throw new Error("invalid framerate mode");Op.ZW(t)}get KW(){return Op.tY()}set KW(t){Np.he(t),Op.sY(t)}get iY(){return Op.eY()}set iY(t){Op.nY(t)}set rY(t){Op.hY(!!t)}get rY(){return Op.oY()}get aY(){return Op.EV().lY()}get uY(){return Op.EV().cY()}random(){return Op.fY()}get layout(){const t=Op.dY();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.pY()}mY(t){const s=Op.gY();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.yY(t),!i)throw new Error("invalid layout");return i.pY()}wY(){return Op.gY().MY().map(t=>t.pY())}SY(t){const s=Op.gY();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.yY(t),!i)throw new Error("invalid layout");s.TY()||s.vY(i)}get keyboard(){const t=Op.xY().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get bY(){const t=Op.xY().bY;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get CY(){const t=Op.xY().CY;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get IY(){const t=Op.xY().IY;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get t_(){return Op._Y().GY()}EY(t,s){Np.ue(t),Np.ue(s),Op.AY(t,s)}DY(t){Np.he(t);const s=Op.NY(t);return s?s.OY():null}PY(t,s){Np.Ne(s);const i=Op.RY();for(const s of t){const t=Op.LY(s),i=t.FY();i.kY()||(Rp.push([i.jY().CV(),i.zY()]),Lp.push(t))}if(0===Rp.length)return;Rp.sort(Ap),Lp.sort((t,i)=>s(t.OY(),i.OY()));let e=!1;for(let t=0,s=Rp.length;t<s;++t){const s=Lp[t],n=i.BY(Rp[t][0]),r=Rp[t][1],h=n.UY();h[r]!==s&&(h[r]=s,s.FY().$Y(n,!0),n.VY(s),e=!0)}e&&Op.WY(),Dp.Sh(Rp),Dp.Sh(Lp)}YY(t){for(const s of t){const t=Op.LY(s);Op.QY(t)}Op.hW().JY()||Op.gY().HY()||Op.hW().qY()||Op.XY()}async ZY(t,s){jp||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),jp=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await Op.KY("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return Op.KY("runtime","alert",{message:t+(Op.QV()?" [via Web Worker]":"")})}tQ(t){return Np.he(t),Op.sQ(t)}iQ(t){Op.eQ(t)}async nQ(t,s,i){Np.ce(t),Np.ie(s),Np.ze(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=Op._Y();if(!e)return;Op.WY();const n=await e.rQ(t||"image/png",s,i.x,i.y,i.width,i.height);return await Op.hQ(Dp.uQ.lQ.aQ.oQ,null),n}}}{const Bp=self.Gs,Up=self.ks;let $p=null;self.cQ=class{constructor(t){$p=t,Object.defineProperties(this,{fQ:{value:!0,writable:!1}})}dQ(t){const s=self.mQ.pQ(t);if(!s)throw new Error("invalid IImageInfo");s.gQ($p.yQ())}wQ(t){return $p.io(t)}MQ(t){return $p.eo(t)}SQ(t){return $p.no(t)}TQ(t){return $p.ro(t)}vQ(t){return Promise.resolve($p.xQ(t))}bQ(t){return $p.CQ(t)}get IQ(){return $p.GQ()}async _Q(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}EQ(...t){return $p.AQ(...t)}DQ(t){return $p.NQ(t)}OQ(t){return $p.PQ(t)}get RQ(){return $p.LQ()}}}{const Vp=self.Gs,Wp=self.ks;let Yp=null;self.FQ=class{constructor(t){Yp=t,Object.defineProperties(this,{runtime:{value:Yp.yQ(),writable:!1}})}kQ(t,s){const i=Yp.yQ(),e=i.LY(t),n=i.LY(s);return Yp.jQ(e,n)}zQ(t,s){const i=Yp.yQ(),e=i.LY(t);for(const t of s){const s=i.LY(t);if(Yp.jQ(e,s))return t}return null}BQ(t){const s=Yp.yQ().LY(t),i=Yp.UQ(s);return i?i.OY():null}$Q(t,s){if(Wp.he(t),Wp.he(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Yp.VQ(t,s)}WQ(){return Yp.YQ()}QQ(t,s){const i=Yp.yQ();let e;e=Array.isArray(t)?t.map(t=>i.JQ(t)):[i.JQ(t)];const n=Vp.Rect.Xa(s),r=[];return Yp.HQ(null,e,n,r),r.map(t=>t.OY())}}}{const Qp=self.Gs,Jp=self.ks;let Hp=null;const qp=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Xp=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["Firefox","firefox"],["Safari","safari"]]),Zp=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.KV=class{constructor(t){Hp=t,Object.defineProperties(this,{qQ:{value:Qp.Zs.oi,writable:!1},os:{value:qp.get(Qp.Zs.Ks)||"unknown",writable:!1},XQ:{value:Qp.Zs.ti,writable:!1},browser:{value:Xp.get(Qp.Zs.si)||"unknown",writable:!1},ZQ:{value:Qp.Zs.ii,writable:!1},KQ:{value:Zp.get(Qp.Zs.ni)||"unknown",writable:!1}})}get tJ(){let t=Hp.sJ();return Hp.iJ()?t="windows-webview2":"cordova"===t?t="Android"===Qp.Zs.Ks?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get t_(){return Hp._Y().eJ()}get nJ(){return Hp._Y().rJ()}get hJ(){return Hp._Y().oJ()}get aJ(){return Hp._Y().lJ()}get uJ(){return Hp._Y().cJ()}get fJ(){return Hp._Y().dJ()}get pJ(){return Hp._Y().mJ()}get gJ(){return Hp._Y().yJ()}get devicePixelRatio(){return Hp.wJ()}}}{const Kp=self.Gs,tm=self.ks;self.WV=class{constructor(t){this.MJ=t.SJ()}getItem(t){return tm.ue(t),this.MJ.getItem(t)}setItem(t,s){return tm.ue(t),this.MJ.setItem(t,s)}removeItem(t){return tm.ue(t),this.MJ.removeItem(t)}clear(){return this.MJ.clear()}keys(){return this.MJ.keys()}}}{const sm=self.Gs,im=self.ks,em=sm._s();self.TJ=class{#t;constructor(){const t=sm.xJ.vJ(em);this.#t=t,Object.defineProperties(this,{runtime:{value:t.yQ().bJ(),writable:!1},id:{value:t.CJ(),writable:!1},IJ:{value:t.GJ(),writable:!1},_J:{value:t.EJ(),writable:!1},AJ:{value:t.DJ(),writable:!1},NJ:{value:t.OJ(),writable:!1},PJ:{value:t.RJ(),writable:!1},LJ:{value:t.FJ(),writable:!1},kJ:{value:t.jJ(),writable:!1},zJ:{value:t.BJ(),writable:!1}}),t.yQ().UJ(this,t)}static $J(t){if(!t)return null;const s=sm.xJ.VJ(t);return s?s.WJ():null}YJ(){return this.#t.JJ().QJ()}HJ(){return this.#t.qJ().OY()}}}{const nm=globalThis.Gs,rm=globalThis.ks,hm=nm._s();globalThis.XJ=class{#t;constructor(){const t=nm.xJ.vJ(hm);this.#t=t,Object.defineProperties(this,{name:{value:t.Ac(),writable:!1},runtime:{value:t.yQ().bJ(),writable:!1},ZJ:{value:t.KJ().WJ(),writable:!1}}),t.yQ().UJ(this,t)}addEventListener(t,s){rm.ue(t),rm.Ne(s),this.#t.iW().addEventListener(t,s)}removeEventListener(t,s){rm.ue(t),rm.Ne(s),this.#t.iW().removeEventListener(t,s)}tH(){return[...this.sH()]}iH(){return nm.zh(this.sH())}eH(){return[...this.nH()]}rH(){return nm.zh(this.nH())}hH(t){const s=this.#t,i=s.yQ().oH(t),e=s.aH(i);return e?e.OY():null}*sH(){for(const t of this.#t.lH())yield t.OY()}*nH(){for(const t of this.#t.cH().uH())yield t.OY()}fH(t,s,...i){rm.ue(t);const e=this.#t,n=e.yQ(),r=n.hW(),h=r.dH(e,t);if(!h)throw new Error(`cannot find '${this.name}' custom action '${t}'`);if(!h.Gu())return null;if(i.length<h.lW())throw new Error(`not enough function parameters passed for '${this.name}' custom action '${t}' (${i.length} passed, ${h.lW()} expected)`);const o=h.uW();let a=o.cW();const l=r.fW();if(l){a=a.slice(0);const t=new Set(a);for(const s of l.cW())t.has(s)||(a.push(s),t.add(s));for(const s of r.dW())t.has(s)||(a.push(s),t.add(s))}if(e.pH()&&h.mH()){const r=new Map,l=[];for(const i of s){const s=n.oH(i),e=s.gH();if(e.yH(t)){const t=r.get(e);Array.isArray(t)?t.push(s):r.set(e,[s])}else l.push(s)}const u=[];if(l.length>0){const t={wH:e,MH:l},s=o.pW(a,h.mW(),0,null,t,...i);u.push(s)}if(r.size>0)for(const[s,e]of r){const n=s.SH(t).uW(),r=[...new Set([...a,...n.TH()])],o={wH:s,MH:e},l=n.pW(r,h.mW(),0,null,o,...i);u.push(l)}return Promise.all(u)}{const t={wH:h.gH(),MH:(Array.isArray(s)?s:[...s]).map(t=>n.oH(t))},e=o.pW(a,h.mW(),0,null,t,...i);return e instanceof Promise?e:Promise.resolve()}}}}{const om=globalThis.Gs,am=globalThis.ks,lm=om._s();globalThis.vH=class extends globalThis.XJ{#t;constructor(){super();const t=om.xJ.vJ(lm);this.#t=t}xH(t){am.Ne(t);const s=this.#t;if(s.bH()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.CH(t)}Ii(t,s,i,e,n){if(am.se(s),am.se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.yQ(),o=h.dY().jY(t);if(!o)throw new Error("invalid layer");const a=h.IH(r,o,s,i,e,n);e&&o.GH(a);const l=h.hW();return l._H(!0),a.EH(),l._H(!1),l.JY()||h.gY().HY()||h.XY(),a.OY()}AH(){return this.#t.DH().map(t=>t.QJ())}*NH(){for(const t of this.#t.DH())yield t.QJ()}OH(t){return am.je(t,globalThis.PH),t.RH(this)}}}{const um=globalThis.Gs,cm=globalThis.ks,fm=globalThis.vH,dm=um._s();globalThis.PH=class extends globalThis.XJ{#t;constructor(){super();const t=um.xJ.vJ(dm);this.#t=t}LH(){return this.#t.FH().map(t=>t.QJ())}*kH(){for(const t of this.#t.FH())yield t.QJ()}RH(t){cm.je(t,fm);const s=this.#t,i=s.yQ().JQ(t);return s.jH(i)}}}{const pm=self.Gs,mm=self.ks,gm=["above","below","top-sublayer","bottom-sublayer"];self.zH=class{#t;constructor(t){this.#t=t;const s=[],i=t.BH(),e=i.UH().length;for(let t=0;t<e;++t)s.push(new self.$H(i,t));Object.defineProperties(this,{runtime:{value:t.yQ().bJ(),writable:!1},name:{value:t.Ac(),writable:!1},index:{value:t.CV(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){mm.ue(t),mm.Ne(s),this.#t.iW().addEventListener(t,s)}removeEventListener(t,s){mm.ue(t),mm.Ne(s),this.#t.iW().removeEventListener(t,s)}get width(){return this.#t.xy()}set width(t){mm.he(t),this.#t.hy(t)}get height(){return this.#t.Cy()}set height(t){mm.he(t),this.#t.oy(t)}VH(t,s){mm.he(t),mm.he(s);const i=this.#t;i.hy(t),i.oy(s)}getSize(){const t=this.#t;return[t.xy(),t.Cy()]}set scale(t){mm.he(t),this.#t.WH(t)}get scale(){return this.#t.YH()}set angle(t){mm.he(t),this.#t.QH(t)}get angle(){return this.#t.JH()}set scrollX(t){mm.se(t),this.#t.HH(t)}get scrollX(){return this.#t.qH()}set scrollY(t){mm.se(t),this.#t.XH(t)}get scrollY(){return this.#t.ZH()}scrollTo(t,s){mm.se(t),mm.se(s);const i=this.#t;i.HH(t),i.XH(s)}KH(){const t=this.#t;return[t.qH(),t.ZH()]}get tq(){return this.#t.sq()}iq(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.jY(t),i?i.eq():null}nq(){return this.#t.rq().map(t=>t.eq())}*hq(){for(const t of this.#t.hq())yield t.eq()}oq(t,s,i){const e=this.#t,n=self.aq;mm.ue(t),mm.ze(s,n);const r=s?e.yQ().lq(s):null,h=gm.indexOf(i);if(h<0)throw new Error("invalid location");e.uq(t,r,h)}cq(t,s,i){const e=this.#t,n=e.yQ(),r=self.aq;mm.je(t,r);const h=n.lq(t);if(!h)throw new Error("invalid layer");mm.ze(s,r);const o=s?n.lq(s):null,a=gm.indexOf(i);if(a<0)throw new Error("invalid location");e.fq(h,o,a)}pq(t){const s=this.#t,i=self.aq;mm.je(t,i);const e=s.yQ().lq(t);if(!e)throw new Error("invalid layer");const n=e.yQ();s.mq(e),n.hW().JY()||n.XY()}gq(){const t=this.#t,s=t.yQ();t.yq(),s.hW().JY()||s.XY()}wq(t,s){mm.he(t),mm.he(s),this.#t.Mq(t,s)}Sq(){return this.#t.Tq()}set V(t){mm.ue(t);const s=this.#t;if("perspective"===t)s.vq();else{if("orthographic"!==t)throw new Error("invalid projection");s.xq()}}get V(){return this.#t.bq()?"orthographic":"perspective"}}}{const ym=self.Gs,wm=self.ks,Mm=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]),Sm=new Map([...Mm.entries()].map(t=>[t[1],t[0]])),Tm=new Set(["2d","3d"]),vm=ym.Wn(ym.bo);self.aq=class{#t;constructor(t){this.#t=t;const s=[],i=t.BH(),e=i.UH().length;for(let t=0;t<e;++t)s.push(new self.$H(i,t));Object.defineProperties(this,{runtime:{value:t.yQ().bJ(),writable:!1},name:{value:t.Ac(),writable:!1},layout:{value:t.yY().pY(),writable:!1},effects:{value:s,writable:!1}}),t.yQ().UJ(this,t)}addEventListener(t,s){this.#t.iW().addEventListener(t,s)}removeEventListener(t,s){this.#t.iW().removeEventListener(t,s)}get Cq(){const t=this.#t.Iq();return t?t.eq():null}*Gq(){for(const t of this.#t.Gq())yield t.eq()}*_q(){for(const t of this.#t.Eq())yield t.eq()}*Aq(){for(const t of this.#t.Eq())for(const s of t.Dq())yield s.eq()}get index(){return this.#t.CV()}get isVisible(){return this.#t.Nq()}set isVisible(t){this.#t.Oq(t)}get Pq(){return this.#t.Rq()}get Lq(){return this.#t.Fq()}set Lq(t){this.#t.kq(t)}get jq(){return this.#t.zq()}set jq(t){this.#t.Bq(!!t)}get Uq(){return this.#t.$q()}get opacity(){return this.#t.PO()}set opacity(t){t=ym.Xn(+t,0,1),isNaN(t)||this.#t.LO(t)}set scale(t){wm.he(t),this.#t.Vq(t)}get scale(){return this.#t.Wq()}set Yq(t){wm.he(t),this.#t.Qq(t)}get Yq(){return this.#t.Jq()}set angle(t){wm.he(t),this.#t.QH(t)}get angle(){return this.#t.Hq()}set qq(t){wm.he(t),this.#t.Xq(t)}get qq(){return this.#t.Zq()}set Kq(t){wm.he(t),this.#t.tX(t)}get Kq(){return this.#t.sX()}set $k(t){wm.he(t),this.#t.lx(t)}get $k(){return this.#t.ox()}set renderingMode(t){if(!Tm.has(t))throw TypeError("invalid rendering mode");this.#t.iX("3d"===t)}get renderingMode(){return this.#t.eX()?"3d":"2d"}set nX(t){this.#t.rX(t)}get nX(){return this.#t.hX()}set oX(t){this.#t.aX(t)}get oX(){return this.#t.lX()}set C$(t){wm.ue(t);const s=Mm.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.$v(s)}get C$(){return Sm.get(this.#t.uX())}set backgroundColor(t){if(wm.Ce(t),t.length<3)throw new Error("expected 3 elements");vm.Ao(t[0],t[1],t[2]);const s=this.#t,i=s.cX();i.Yo(vm)||(i.Fo(vm),s.yQ().WY())}get backgroundColor(){const t=this.#t.cX();return[t.ko(),t.jo(),t.zo()]}set scrollX(t){wm.se(t);const s=this.#t;s.fX(!0),s.HH(t)}get scrollX(){return this.#t.qH()}set scrollY(t){wm.se(t);const s=this.#t;s.fX(!0),s.XH(t)}get scrollY(){return this.#t.ZH()}scrollTo(t,s){wm.se(t),wm.se(s);const i=this.#t;i.fX(!0),i.HH(t),i.XH(s)}KH(){const t=this.#t;return[t.qH(),t.ZH()]}dX(){this.#t.fX(!1)}getViewport(){return this.#t.pX().el()}mX(t,s,i=0){wm.se(t),wm.se(s),wm.se(i);const e=this.#t,n=e.yQ();return e.gX(t-n.oJ(),s-n.lJ(),i)}yX(t,s,i=0){wm.se(t),wm.se(s),wm.se(i);const e=this.#t,n=e.yQ(),[r,h]=e.wX(t,s,i);return[r+n.oJ(),h+n.lJ()]}MX(t,s,i=0){return wm.se(t),wm.se(s),wm.se(i),this.#t.SX(t,s,i)}TX(t,s,i=0){return wm.se(t),wm.se(s),wm.se(i),this.#t.vX(t,s,i)}get xX(){return this.#t.bX()}}}{let xm=function(t){let s=Im.get(t);return s||(s=bm.Wn(bm.Event.Mf),Im.set(t,s),s)};GetDispatcher=xm;const bm=self.Gs,Cm=self.ks,Im=new WeakMap,Gm=bm._s();self.CX=class{#t;constructor(){const t=bm.xJ.vJ(Gm);this.#t=t;const s={runtime:{value:t.yQ().bJ(),writable:!1},objectType:{value:t.gH().QJ(),writable:!1},ZJ:{value:t.KJ().WJ(),writable:!1}};t.IX(s),t.GX(s),Object.defineProperties(this,s),t.yQ().UJ(this,t)}static _X(){return bm.xJ.EX()}AX(){const t=Im.get(this);t&&(t.Yn(),Im.delete(this))}addEventListener(t,s,i){Cm.ue(t),Cm.Ne(s),xm(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Cm.ue(t),Cm.Ne(s),xm(this).removeEventListener(t,s,i)}dispatchEvent(t){xm(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.yQ();s.QY(t),s.hW().JY()||s.gY().HY()||s.hW().qY()||s.XY()}DX(){const t=this.#t.NX();return t?t.map(t=>t.OY()):[]}*OX(){const t=this.#t;if(t.PX())for(const s of t.RX())yield s.OY()}get uid(){return this.#t.LX()}get FX(){return this.#t.kX()}get jX(){return this.#t.zX()}set jW(t){Cm.he(t),this.#t.BW(t)}get jW(){return this.#t.BX()}UX(){this.#t.$X()}get EW(){const t=this.#t;return t.yQ().AW(t)}VX(t){return Cm.ue(t),this.#t.WX(t)}YX(...t){Cm.Ce(t);const s=new Set(t.map(t=>t.toLowerCase())),i=this.#t.QX();return s.isSubsetOf(i)}JX(t){t instanceof Set||(t=new Set(t)),this.#t.HX(t)}qX(){return new Set(this.#t.XX())}signal(t){Cm.ue(t);const s=this.#t;s.yQ().hW().ZX(s,t)}xW(t){Cm.ue(t);const s=this.#t;return s.yQ().hW().KX(s,t)}fH(t,...s){return this.objectType.fH(t,[this],...s)}}}{const _m=self.Gs,Em=self.ks,Am=_m._s();self.tZ=class extends self.CX{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=_m.xJ.vJ(Am),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.sZ,this.#h=t?.iZ}AX(){this.eZ(!1),this.nZ(!1),super.AX()}rZ(){return _m.xJ.hZ()}oZ(t){const s=this.#t;s.yQ().aZ(t,s)}lZ(t){const s=this.#t;return s.yQ().hQ(t,s)}uZ(t,s){if(Em.ue(t),Em.Ne(s),!this.#r)throw new Error("no DOM component id set");this.#t.yQ().cZ(this.#r,t,s)}fZ(t){Em.Ce(t);for(const[s,i]of t)this.uZ(s,i)}dZ(t,s){if(Em.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.yQ().Uc(this.#r,t,s)}pZ(t,s){if(Em.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.yQ().KY(this.#r,t,s)}mZ(t,s){if(!this.#t.yQ().QV())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.dZ(t,s)}eZ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.yQ();if(t){if(!this.#i)if(this.#t.yQ().gZ()){const t=globalThis.yZ,s=this.ZJ;this.#i=()=>{const i=performance.now();this.wZ(),t.MZ(s,performance.now()-i)}}else this.#i=()=>this.wZ();s.Mf().addEventListener("tick",this.#i)}else s.Mf().removeEventListener("tick",this.#i)}SZ(){return this.#s}wZ(){}nZ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.yQ();if(t){if(!this.#n)if(this.#t.yQ().gZ()){const t=globalThis.yZ,s=this.ZJ;this.#n=()=>{const i=performance.now();this.TZ(),t.MZ(s,performance.now()-i)}}else this.#n=()=>this.TZ();s.Mf().addEventListener("tick2",this.#n)}else s.Mf().removeEventListener("tick2",this.#n)}vZ(){return this.#e}TZ(){}xZ(){return[]}bZ(){return null}CZ(t){}IZ(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.yQ().GZ(this.#h)}_Z(t,s){if(Em.ue(t),Em.Ne(s),!this.#h)throw new Error("no wrapper component id set");this.#t.yQ().EZ(this.#h,t,s)}AZ(t){Em.Ce(t);for(const[s,i]of t)this._Z(s,i)}DZ(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.tW.NZ(this.#h,t,s)}OZ(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.tW.PZ(this.#h,t,s)}}}{let Dm=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=Nm.xJ.vJ(jm),i=s.FY();this.#t=s,this.#s=i,km.set(this,s);const e=[],n=i.RZ();if(n){const t=i.gH().BH().UH().length;for(let s=0;s<t;++s)e.push(new self.$H(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.yY().pY()}get LZ(){return this.#s.jY().eq()}get x(){return this.#s.tx()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.tx()===t||(s.sx(t),s.FZ())}get y(){return this.#s.nx()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.nx()===t||(s.hx(t),s.FZ())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.tx()===t&&i.nx()===s||(i.kZ(t,s),i.FZ())}jZ(){const t=this.#s;return[t.tx(),t.nx()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.zZ(t,s),i.FZ()}set BZ(t){t=+t;const s=this.#s;isNaN(t)||s.UZ()===t||(s.$Z(t),s.FZ())}get BZ(){return this.#s.UZ()}set VZ(t){t=+t;const s=this.#s;isNaN(t)||s.WZ()===t||(s.YZ(t),s.FZ())}get VZ(){return this.#s.WZ()}QZ(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.UZ()===t&&i.WZ()===s||(i.$Z(t),i.YZ(s),i.FZ())}JZ(){const t=this.#s;return[t.UZ(),t.WZ()]}get $k(){return this.#s.ox()}set $k(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.ox()===t||(i.lx(t),s.yQ().WY())}get HZ(){return this.#s.qZ()}get width(){return this.#s.xy()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.xy()===t||(s.hy(t),s.FZ())}get height(){return this.#s.Cy()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Cy()===t||(s.oy(t),s.FZ())}VH(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.xy()===t&&i.Cy()===s||(i.tD(t,s),i.FZ())}getSize(){const t=this.#s;return[t.xy(),t.Cy()]}get angle(){return this.#s.JH()}set angle(t){t=Nm.Zn(+t);const s=this.#s;isNaN(t)||s.JH()===t||(s.QH(t),s.FZ())}get XZ(){return Nm.tr(this.angle)}set XZ(t){this.angle=Nm.Kn(t)}Kl(t){return t?(this.#s.ZZ(Lm,Fm,!1),Lm.el()):this.#s.KZ().el()}tK(t){return t?(this.#s.ZZ(Lm,Fm,!1),Fm.Ql()):this.#s.sK().Ql()}iK(){return this.#s.eK()}get isVisible(){return this.#s.Rq()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.Rq()!==t&&(i.Oq(t),s.yQ().WY())}get opacity(){return this.#s.PO()}set opacity(t){t=Nm.Xn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.PO()===t||(i.LO(t),s.yQ().WY())}set nK(t){if(Om.Ce(t),t.length<3)throw new Error("expected 3 elements");Um.Ao(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.rK().Yo(Um)||(i.hK(Um),s.yQ().WY())}get nK(){const t=this.#s.rK();return[t.ko(),t.jo(),t.zo()]}set C$(t){Om.ue(t);const s=zm.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.$v(s),i.yQ().WY()}get C$(){return Bm.get(this.#s.uX())}oK(){this.#s.aK()}lK(){this.#s.uK()}cK(t){Om.je(t,Rm);const s=this.#t,i=s.yQ().lq(t);if(!i)throw new Error("invalid layer");s.FY().fK(i)}dK(t,i){Om.je(t,s),this.#s.pK(km.get(t),i)}get zIndex(){return this.#s.zY()}get mK(){return this.#s.gK()}set mK(t){this.#s.yK(!!t)}Cl(t,s){return Om.se(t),Om.se(s),this.#s.wK(+t,+s)}kQ(t){Om.je(t,s);const i=this.#t,e=km.get(t);return i.yQ().NV().jQ(i,e)}BQ(){const t=this.#t,s=t.yQ().NV().UQ(t);return s?s.OY():null}getParent(){const t=this.#t.MK();return t?t.OY():null}SK(){const t=this.#t.TK();return t?t.OY():null}*vK(){for(const t of this.#t.vK())yield t.OY()}xK(){return this.#t.bK()}CK(t){const s=this.#t.IK(t);return s?s.OY():null}*children(){for(const t of this.#t.children())yield t.OY()}*GK(){for(const t of this.#t.GK())yield t.OY()}_K(t,i){Om.je(t,s),Om.we(i),i||(i={});const e=this.#t,n=km.get(t);e.EK(n,i)}removeChild(t){Om.je(t,s);const i=this.#t,e=km.get(t);i.AK(e)}DK(){const t=this.#t;t.NK()&&t.MK().AK(t)}PK(){const t=this.#s;return{RK:t.LK(),FK:t.kK(),jK:t.zK(),BK:t.UK(),$K:t.VK(),WK:t.YK(),QK:t.JK(),HK:t.qK(),XK:t.ZK()}}KK(t,s){Om.he(t),Om.he(s),this.#s.t0(t,s)}s0(){const t=this.#s;t.i0(),t.FZ()}e0(t,s,i){Om.he(t),Om.he(s),Om.ye(i);const e=this.#s;e.n0(t,s,i)&&e.FZ()}r0(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.h0()){const a=o.o0().qx(t,s);null!==a&&(i=a.tx(),e=a.nx(),n=a.ox(),r=a.ux(),h=a.gx())}return{x:i,y:e,$k:n,a0:r,l0:h}}u0(){const t=this.#s;if(!t.h0())return[0,0];const s=t.o0();return[s.jx(),s.zx()]}}};MakeIWorldInstanceClass=Dm;const Nm=self.Gs,Om=self.ks,Pm=self.CX,Rm=self.aq,Lm=Nm.Wn(Nm.Rect),Fm=Nm.Wn(Nm.El),km=new WeakMap,jm=Nm._s(),zm=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]),Bm=new Map([...zm.entries()].map(t=>[t[1],t[0]])),Um=Nm.Wn(Nm.bo);self.c0=Dm(self.CX),self.f0=Dm(self.tZ)}{const $m=self.Gs,Vm=self.ks;self.d0=class extends self.c0{#t;constructor(){super(),this.#t=self.CX._X()}p0(){return this.#t.g0().m0()}focus(){this.#t.g0().y0()}blur(){this.#t.g0().w0()}M0(t,s){Vm.ue(t),this.#t.g0().S0(t,s)}}}{let Wm=function(t){let s=Jm.get(t);return s||(s=Ym.Wn(Ym.Event.Mf),Jm.set(t,s),s)};GetDispatcher=Wm;const Ym=self.Gs,Qm=self.ks,Jm=new WeakMap,Hm=Ym._s();self.T0=class{#t;constructor(){const t=Ym.xJ.vJ(Hm);this.#t=t;const s={runtime:{value:t.yQ().bJ(),writable:!1},behavior:{value:t.x0().v0(),writable:!1},b0:{value:t.I0().C0(),writable:!1}};Object.defineProperties(this,s),t.yQ().UJ(this,t)}static _X(){return Ym.xJ.EX()}get G0(){return this.#t._0().OY()}AX(){const t=Jm.get(this);t&&(t.Yn(),Jm.delete(this))}addEventListener(t,s,i){Qm.ue(t),Qm.Ne(s),Wm(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Qm.ue(t),Qm.Ne(s),Wm(this).removeEventListener(t,s,i)}dispatchEvent(t){Wm(this).dispatchEvent(t)}}}{const qm=self.Gs,Xm=self.ks,Zm=qm._s();self.E0=class{constructor(){const t=qm.xJ.vJ(Zm),s={runtime:{value:t.yQ().bJ(),writable:!1},behavior:{value:t.x0().v0(),writable:!1},name:{value:t.Ac(),writable:!1}};Object.defineProperties(this,s)}}}{const Km=self.Gs,tg=self.ks,sg=Km._s();self.A0=class{#s;constructor(){const t=Km.xJ.vJ(sg);this.#s=t;const s={runtime:{value:t.yQ().bJ(),writable:!1},id:{value:t.CJ(),writable:!1}};Object.defineProperties(this,s),t.yQ().UJ(this,t)}tH(){return this.#s.uH().map(t=>t.OY())}static $J(t){if(!t)return null;const s=Km.xJ.D0(t);return s?s.v0():null}}}{const ig=self.Gs,eg=self.ks,ng=ig.Wn(ig.bo);self.$H=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.UH()[this.index].Ac()}get isActive(){return this.#t.N0(this.index)}set isActive(t){t=!!t;const s=this.#t;s.N0(this.index)!==t&&(s.O0(this.index,t),s.P0(),s.yQ().WY())}setParameter(t,s){eg.he(t),t=Math.floor(+t);const i=this.#t,e=i.R0(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof ig.bo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");ng.Ao(s[0],s[1],s[2]),s=ng}else if("number"!=typeof s)throw new TypeError("expected number");i.L0(this.index,t,s)&&i.N0(this.index)&&i.yQ().WY()}getParameter(t){eg.he(t),t=Math.floor(+t);const s=this.#t.R0(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof ig.bo?[s.ko(),s.jo(),s.zo()]:s}}}{const rg=self.Gs,hg=self.ks;self.F0=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Ac(),writable:!1}})}get speed(){return this.#t.k0()}get j0(){return this.#t.z0()}get B0(){return this.#t.U0()}get $0(){return this.#t.V0()}get W0(){return this.#t.Y0()}get frameCount(){return this.#t.Q0()}J0(){return this.#t.H0().map(t=>t.q0())}*frames(){for(const t of this.#t.H0())yield t.q0()}}}{const og=self.Gs,ag=self.ks;self.mQ=class{#s;constructor(t){this.#s=t}static pQ(t){return t.#s}get width(){return this.#s.xy()}get height(){return this.#s.Cy()}getSize(){const t=this.#s;return[t.xy(),t.Cy()]}X0(t){return t.Z0(this)}K0(){return this.#s.ND().el()}}}{const lg=self.Gs,ug=self.ks;self.t1=class extends self.mQ{#s;constructor(t){super(t.s1()),this.#s=t,Object.defineProperties(this,{duration:{value:t.i1(),writable:!1},BZ:{value:t.UZ(),writable:!1},VZ:{value:t.WZ(),writable:!1}})}JZ(){const t=this.#s;return[t.UZ(),t.WZ()]}e1(){return this.#s.n1()}h1(t){return this.o1(t)[0]}a1(t){return this.o1(t)[1]}o1(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.l1(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.u1(t)}return i?[i.tx(),i.nx()]:this.JZ()}c1(){const t=this.#s.f1();return t?t.mu():0}d1(t){return this.m1(t)[0]}g1(t){return this.m1(t)[1]}m1(t){ug.he(t),t=Math.floor(t);const s=this.#s.f1();if(!s||t<0||t>=s.mu())return[0,0];const i=s.pu();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.w1()}}}{let cg=function(t){const s=pg.get(t);if(s.M1())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=cg;const fg=self.Gs,dg=self.ks,pg=new WeakMap;self.S1=class{constructor(t){pg.set(this,t),t.yQ().UJ(this,t)}pause(){cg(this).T1()}resume(){cg(this).v1()}stop(){cg(this).zf()}YX(t){return cg(this).b1(t)}set time(t){dg.he(t),cg(this).C1(t)}get time(){return cg(this).hU()}set totalTime(t){dg.he(t),cg(this).I1(t)}get totalTime(){return cg(this).G1()}set j0(t){cg(this)._1(!!t)}get j0(){return cg(this).E1()}set W0(t){cg(this).A1(!!t)}get W0(){return cg(this).D1()}set playbackRate(t){dg.he(t),cg(this).N1(t)}get playbackRate(){return cg(this).O1()}get progress(){const t=cg(this);return t.hU()/t.G1()}get tags(){return cg(this).P1()}get finished(){return cg(this).R1()}get L1(){return cg(this).IsPlaying()}get F1(){return cg(this).j1()}get z1(){return pg.get(this).M1()}}}{let mg=function(t){const s=wg.get(t);if(s.M1())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=mg;const gg=self.Gs,yg=self.ks,wg=new WeakMap;let Mg=null;self.B1=class extends self.S1{constructor(t){super(t),wg.set(this,t);const s={name:{value:t.Ac(),writable:!1}};Object.defineProperties(this,s)}}}{let Sg=function(t){const s=xg.get(t);if(s.M1())throw new Error("tween was released and is no longer valid");return s};GetTweenState=Sg;const Tg=self.Gs,vg=self.ks,xg=new WeakMap,bg=new WeakMap;let Cg=null;self.U1=class extends self.S1{constructor(t,s,i){super(t),Cg||(Cg=i.V1),xg.set(this,t),s&&bg.set(this,s)}stop(){const t=Sg(this);bg.get(this).W1(t)}Y1(t){vg.ue(t);const s=self.$u.ac(Cg(t));Sg(this).Q1(s)}get G0(){const t=Sg(this).J1();return t?t.OY():null}get H1(){return Sg(this).q1()}set H1(t){Sg(this).X1(!!t)}get finished(){const t=Sg(this);return t.R1().then(()=>new Promise(s=>{t.Z1()&&s()}))}get released(){return Sg(this).K1()}get value(){const t=Sg(this);if("value"!==t.t2())throw new Error("not a value tween");return t.i2("value").s2()}}}{const Ig=self.Gs,Gg=self.ks;self.e2=class extends self.TJ{constructor(){super()}}}{const _g=self.Gs,Eg=self.ks,Ag=_g._s();self.n2=class extends self.e2{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=_g.xJ.vJ(Ag),!t?.sZ)throw new Error("no DOM component ID specified");this.#i=t.sZ,this.h2("elem-focused",t=>t.o2()),this.h2("elem-blurred",t=>{t&&t.a2()})}l2(t){const s=this.#s++;return this.#r.set(s,t),s}u2(t){this.#r.delete(t)}h2(t,s){this.#t.yQ().cZ(this.#i,t,t=>{const i=this.#r.get(t.elementId);s(i,t)})}c2(t){Eg.Ce(t);for(const[s,i]of t)this.c2(s,i)}}}{const Dg=self.Gs,Ng=self.ks,Og=new WeakMap,Pg=Dg._s();self.f2=class extends self.vH{#t;constructor(){super(),this.#t=Dg.xJ.vJ(Pg)}d2(){}m2(){return this.#t.s1().g2()}w2(t){}M2(t){}S2(){}T2(t){}}}{const Rg=self.Gs,Lg=self.ks,Fg=new WeakMap,kg=Rg._s();self.v2=class extends self.f0{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Rg.xJ.vJ(kg)}AX(){if(super.AX(),this.#n){const t=this.#t.yQ().Mf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}b2(){if(this.#n)return;this.#n=()=>this.C2(),this.#s=()=>this.I2();const t=this.#t.yQ().Mf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}C2(){}I2(){}G2(t){}_2(){return!0}av(){return!1}}}{const jg=self.Gs,zg=self.ks,Bg=jg.Wn(jg.Rect),Ug=new WeakMap,$g=jg._s();self.E2=class extends self.v2{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=jg.Wn(jg.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.sZ)throw new Error("no DOM component ID specified");super(t);const s=jg.xJ.vJ($g);Ug.set(this,s),this.#t=this.ZJ.l2(this);const i=s.yQ()._Y();this.#o=i.A2(),this.#a=i.D2(),this.eZ(!0)}AX(){super.AX(),this.ZJ.u2(this.#t),this.N2("destroy"),this.#t=-1,Ug.delete(this)}O2(){if(Ug.get(this).yQ().QV())throw new Error("not valid in worker mode");return this.P2("get-element")}N2(t,s){s||(s={}),s.elementId=this.#t,this.dZ(t,s)}P2(t,s){return s||(s={}),s.elementId=this.#t,this.mZ(t,s)}R2(t,s){return s||(s={}),s.elementId=this.#t,this.pZ(t,s)}L2(t){t||(t={});const s=Ug.get(this).FY();t.elementId=this.#t,t.isVisible=s.Rq(),t.htmlIndex=s.jY().F2(),t.htmlZIndex=s.j2(),Object.assign(t,this.z2()),this.#s=!!t.isVisible,this.mZ("create",t),this.B2(!0)}U2(t){t=!!t,this.#s!==t&&(this.#s=t,this.N2("set-visible",{isVisible:t}))}wZ(){this.B2(!1)}V2(){const t=Ug.get(this).yQ()._Y().W2();return"Android"===jg.Zs.Ks&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}B2(t){const s=Ug.get(this);if(s.kY())return;const i=s.FY(),e=i.jY(),n=i.KZ();let[r,h]=e.wX(n.Ka(),n.tl()),[o,a]=e.wX(n.sl(),n.il());const l=s.yQ()._Y(),u=l.cJ(),c=l.dJ();if(!i.Rq()||!e.Rq())return void this.U2(!1);if(!this.V2()&&(o<=0||a<=0||r>=u||h>=c))return void this.U2(!1);Bg.set(r,h,o,a);const f=l.A2(),d=l.D2(),p=e.F2(),m=i.j2();if(!t&&Bg.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.U2(!0);this.#h.M(Bg),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.U2(!0);let g=null;this.#e&&(g=e.Y2()+this.#i),this.N2("update-position",{left:Math.round(this.#h.Ka()),top:Math.round(this.#h.tl()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}Q2(){this.P2("focus",{focus:!0})}J2(){this.P2("focus",{focus:!1})}o2(){this.#r=!0}a2(){this.#r=!1}H2(){return this.#r}q2(t,s){this.X2("set-css-style",{prop:jg.To(t),val:s})}Z2(t,s){this.X2("set-attribute",{name:t,val:s})}K2(t){this.X2("remove-attribute",{name:t})}t3(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.N2("update-state",this.z2())}))}z2(){}s3(){return this.#t}}}{const Vg=self.Gs,Wg=self.ks;self.i3=class extends self.A0{constructor(){super()}}}{const Yg=self.Gs,Qg=self.ks;self.e3=class extends globalThis.E0{constructor(){super()}d2(){}}}{const Jg=self.Gs,Hg=self.ks,qg=new WeakMap,Xg=Jg._s();self.n3=class extends self.T0{#e=!1;#s=!1;#t=!1;constructor(){super(),qg.set(this,Jg.xJ.vJ(Xg))}AX(){super.AX(),this.eZ(!1),this.nZ(!1),this.r3(!1),qg.delete(this)}rZ(){return Jg.xJ.hZ()}h3(){}oZ(t){const s=qg.get(this);s.yQ().aZ(t,s._0(),s.I0())}lZ(t){const s=qg.get(this);return s.yQ().hQ(t,s._0(),s.I0())}eZ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=qg.get(this).yQ();t?s.o3(this):s.a3(this)}SZ(){return this.#e}wZ(){}nZ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=qg.get(this).yQ();t?s.l3(this):s.u3(this)}vZ(){return this.#s}TZ(){}r3(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=qg.get(this).yQ();t?s.c3(this):s.f3(this)}d3(){return this.#t}m3(){}xZ(){return[]}bZ(){return null}CZ(t){}}}{const Zg=self.Gs,Kg=self.ks;let ty=null;self.sW=class{constructor(t){ty=t,Object.defineProperties(this,{g3:{value:ty.y3(),writable:!1}})}w3(){ty.WY()}iQ(t){ty.eQ(t)}M3(t){return Kg.ue(t),ty.GZ(t)}NZ(t,s,i){Kg.ue(t),Kg.ue(s),Kg.Ie(i),ty.S3(t,s,i)}PZ(t,s,i){return Kg.ue(t),Kg.ue(s),Kg.Ie(i),ty.T3(t,s,i)}v3(t){return Kg.ce(t),new self.x3(ty,t)}set b3(t){ty.C3(!!t)}get b3(){return ty.I3()}G3(t){ty._3(!!t)}E3(t){Kg.se(t);const s=ty.A3(t);return s?s.QJ():null}}}{const sy=self.Gs,iy=self.ks;self.x3=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.hW(),e=t.fW();this.#s=e,this.#h=e.TH();const n=t.MW();this.#i=n.D3(),this.#r=n.N3(e);const r=i.O3().N3();this.#n=r,s&&r.P3(s),t.R3(!1)}L3(){const t=this.#t.hW(),s=this.#h,i=this.#n;t.F3(s),this.#s.j3(this.#i,this.#r),t.z3(s),i.B3(i.CV()+1)}get U3(){return this.#n.V3()}release(){const t=this.#t,s=t.MW(),i=t.hW().O3();t.R3(!0),i.W3(),s.W3()}}}{let ey=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};IsStaticTextureDataType=ey;const ny=self.Gs,ry=self.ks;let hy=null,oy=null;const ay=["none","back","front"],ly=["cw","ccw"];self.Y3=class{constructor(t,s){oy=t,hy=s}Q3(){hy.$O()}J3(t){hy.BO(t)}H3(){hy.GS()}q3(){hy.TS()}X3(){hy.PS()}setColor(t){hy.RO(t[0],t[1],t[2],t[3])}Z3(t,s,i,e){hy.RO(t,s,i,e)}K3(){hy.FO()}t4(t){hy.LO(t)}s4(t){hy.qS(t)}i4(){return hy.XS()}e4(t){const s=ay.indexOf(t);if(-1===s)throw new Error("invalid cull mode");hy.PT(s)}n4(){return ay[hy.VO()]}r4(t){const s=ly.indexOf(t);if(-1===s)throw new Error("invalid front face winding");hy.RT(s)}h4(){return hy.WO()}rect(t){hy.QO(t.left,t.top,t.right,t.bottom)}o4(t,s,i,e){hy.QO(t,s,i,e)}a4(t){hy.El(ny.El.Jl(t))}l4(t,s,i,e,n,r,h,o){hy.FT(t,s,i,e,n,r,h,o)}u4(t,s){hy.oT(ny.El.Jl(t),ny.Rect.nl(s))}c4(t,s){hy.qO(ny.El.Jl(t),ny.El.Jl(s))}f4(t,s,i){hy.XO(ny.El.Jl(t),ny.El.Jl(s),i)}d4(t,s,i,e,n,r,h,o,a,l,u,c,f){hy.ZO(t,s,i,e,n,r,h,o,a,l,u,c,ny.Rect.nl(f))}m4(t,s,i,e,n,r,h,o,a,l,u,c,f){hy.iT(t,s,i,e,n,r,h,o,a,l,u,c,ny.El.Jl(f))}g4(t,s,i,e,n,r,h,o,a,l,u,c,f,d){hy.KO(t,s,i,e,n,r,h,o,a,l,u,c,ny.El.Jl(f),d)}y4(t,s,i,e){hy.nb(t,s,i,e)}w4(t){hy.LT(t)}line(t,s,i,e){hy.Ay(t,s,i,e)}M4(t,s,i,e,n,r){hy.eT(t,s,i,e,n,r)}S4(t,s,i,e){hy.aT(t,s,i,e)}T4(t){hy.fT(ny.Rect.nl(t))}v4(t){hy.dT(ny.El.Jl(t))}x4(t){hy.MT(t)}b4(){hy.ST()}C4(t){hy.bT(t)}I4(){hy._T()}G4(t){ry.ze(t,self._4);const s=t?oy.lq(t):null;hy.jO(s)}E4(t,s){const i=self.mQ.pQ(t);if(!i)throw new Error("invalid IImageInfo");return i.A4(hy,{pb:s?.pb??"clamp-to-edge",mb:s?.mb??"clamp-to-edge",gb:s?.gb??"trilinear",Mb:s?.Mb??!0})}D4(t){const s=self.mQ.pQ(t);if(!s)throw new Error("invalid IImageInfo");s.SA()}Z0(t){const s=self.mQ.pQ(t);if(!s)throw new Error("invalid IImageInfo");const i=s.DC();return self._4.N4(oy,i)}O4(t,s){if(!ey(t))throw new TypeError("invalid texture data");const i=hy.xP(t,{pb:s?.pb??"clamp-to-edge",mb:s?.mb??"clamp-to-edge",gb:s?.gb??"trilinear",Mb:s?.Mb??!0});return self._4.N4(oy,i)}P4(t,s,i){ry.he(t),ry.he(s);const e=hy.TC(t,s,{pb:i?.pb??"clamp-to-edge",mb:i?.mb??"clamp-to-edge",gb:i?.gb??"trilinear",Mb:i?.Mb??!0});return self._4.N4(oy,e)}R4(t,s,i){ry.je(s,self._4);const e=oy.lq(s);hy.DD(t,e,{Tb:i?.Tb??!0})}deleteTexture(t){ry.je(t,self._4);const s=oy.lq(t);hy.CC(s)}L4(){const t=hy.XT();return new self.F4(oy,t)}j4(){oy._Y().z4(hy)}B4(t){ry.je(t,globalThis.aq),oy.lq(t).U4(hy)}}}{const uy=self.Gs,cy=self.ks,fy=new WeakMap,dy=new WeakMap;self._4=class{constructor(t,s){fy.set(this,{runtime:t,texture:s}),dy.set(s,this),t.UJ(this,s),Object.defineProperties(this,{width:{value:s.xy(),writable:!1},height:{value:s.Cy(),writable:!1}})}static N4(t,s){if(!s)return null;return dy.get(s)||new self._4(t,s)}}}{let py=function(t){return yy.get(t).V4};getActual=py;const my=self.Gs,gy=self.ks,yy=new WeakMap;self.F4=class{constructor(t,s){yy.set(this,{runtime:t,V4:s}),t.UJ(this,s)}release(){py(this).Yn()}set W4(t){gy.ue(t),py(this)._A(t)}get W4(){return py(this).IE()}set Y4(t){gy.he(t),py(this).EA(t)}get Y4(){return py(this).AA()}set lineHeight(t){gy.he(t),py(this).NA(t)}get lineHeight(){return py(this).OA()}set Q4(t){py(this).PA(t)}get Q4(){return py(this).RA()}set J4(t){py(this).LA(t)}get J4(){return py(this).FA()}setColor(t){gy.Ce(t),this.H4(t[0],t[1],t[2])}H4(t,s,i){py(this).UA(t,s,i)}q4(t){gy.ue(t),py(this).Vv(t)}set X4(t){py(this).$A(t)}get X4(){return py(this).VA()}set verticalAlign(t){py(this).WA(t)}get verticalAlign(){return py(this).YA()}set Z4(t){py(this).QA(t)}get Z4(){return py(this).JA()}set K4(t){py(this).HA(t)}get K4(){return py(this).qA()}set text(t){gy.ue(t),py(this).$c(t)}get text(){return py(this).XA()}VH(t,s,i){gy.he(t),gy.he(s),gy.he(i),py(this).tD(t,s,i)}X0(){const{runtime:t,V4:s}=yy.get(this),i=s.DC();return self._4.N4(t,i)}K0(){return py(this).ND().el()}t5(t){gy.Ne(t),py(this).xA=t}s5(){py(this).SA()}get i5(){return py(this).iD()}get e5(){return py(this).nD()}}}{let wy=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return vy.get(i)||""},My=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};GetTypeFromFileExtension=wy,AddScript=My;const Sy=self.Gs,Ty=new Set(["local","remote"]),vy=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);Sy.n5=class extends Sy.$n{constructor(t,s){super();const i=s.exportType;this.jc=t,this.r5=new Map,this.h5="cordova"===i,this.o5=!!s.isiOSCordova,this.a5=s.swClientId,this.l5=s.supportedAudioFormats||{},this.u5=new Map,this.c5=!1,this.f5=s.scriptFolder,this.d5="",this.p5="",this.m5="",this.g5=s.fileMap||new Map,this.y5=new Map,this.w5=[];const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.M5=e?"remote":"local",this.S5=new Map,this.T5=[],this.v5=[],this.x5=!1,this.b5=0,this.C5=0,this.I5=0,this.G5=!1,this._5=Sy.Wn(Sy.tp,()=>this.E5(),50),this.A5=Sy.Wn(Sy.Wd,Math.max(Sy.hardwareConcurrency,8)),this.D5=Sy.Wn(Sy.Wd,20),this.N5=new self.cQ(this)}Yn(){for(const t of this.S5.values())t.Yn();this.S5.clear(),Sy.Sh(this.v5),this.jc=null}yQ(){return this.jc}O5(){return this.f5}P5(t){this.d5=t}GQ(){return this.d5}R5(t){this.p5=t}L5(){return this.p5}F5(t){this.m5=t}k5(){return this.m5}j5(t){this.w5=t}LQ(){return this.w5}no(t,s){return s=s||this.M5,Sy.Zh(t)?"playable-ad-single-file"===this.jc.sJ()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.A5.zu(()=>Sy.no(t)):this.D5.zu(()=>Sy.no(t)):Sy.no(t)}ro(t){return Sy.Zh(t)?"playable-ad-single-file"===this.jc.sJ()?Sy.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.M5?this.A5.zu(()=>Sy.ro(t)):this.D5.zu(()=>Sy.ro(t)):Sy.ro(t)}io(t){return Sy.Zh(t)?"playable-ad-single-file"===this.jc.sJ()?Sy.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.M5?this.A5.zu(()=>Sy.io(t)):this.D5.zu(()=>Sy.io(t)):Sy.io(t)}async eo(t){const s=await this.io(t);return JSON.parse(s)}CQ(t){let s=this.d5+t;return"Gecko"===Sy.Zs.ni&&"preview"===this.jc.sJ()&&(s=this.z5(s)),s}xQ(t){return"playable-ad-single-file"===this.jc.sJ()&&Sy.Zh(t)?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):t}B5(t){if(Sy.Xh(t)||"preview"!==this.jc.sJ()||!this.a5||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.a5),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}U5(t,s){return(s?"true":"false")+"|"+t}V5(t){const s=!!t.W5;if(t.Y5&&!Ty.has(t.Y5))throw new Error("invalid load policy");const i=this.U5(t.url,s);let e=this.S5.get(i);return e||(e=Sy.Wn(Sy.Q5,this,{url:t.url,size:t.size||0,Y5:t.Y5||this.M5,W5:s}),this.S5.set(i,e),this.x5||(this.b5+=e.Pu(),this.v5.push(e.J5().then(()=>this.H5(e.Pu())))),e)}q5(t){const s=this.U5(t.X5(),t.Z5());this.S5.delete(s)}async K5(t){try{await Promise.all(this.v5),this.I5=1,t&&0===this.b5&&this.E5()}catch(t){console.error("Error loading: ",t),this.G5=!0,this.E5()}}t6(){this.x5=!0}s6(){return this.G5}H5(t){this.C5+=t,this._5.mp()}E5(){const t=Sy.Wn(Sy.Event,"loadingprogress");0===this.b5?this.I5=1:this.I5=Sy.Xn(this.C5/this.b5,0,1),t.progress=this.I5,this.jc.Mf().dispatchEvent(t),this.jc.i6(Sy.Wn(Sy.Event,"loadingprogress"))}lY(){return this.I5}cY(){return this.jc.n6().e6()}r6(t){Sy.Ch(this.T5,t),this.T5.length&&this.v5.push(this.h6())}async h6(){const t=[],s=[];for(const[i,e,n]of this.T5)this.b5+=n,t.push(this.o6(i,e,s).then(()=>this.H5(n)));await Promise.all(t),this.jc.QV()&&s.length>0&&await this.jc.KY("runtime","load-webfonts",{webfonts:s})}async o6(t,s,i){try{let e=this.xQ(s);"Gecko"===Sy.Zs.ni&&(t=`'${t}'`),("Gecko"===Sy.Zs.ni&&"preview"===this.jc.sJ()||"playable-ad-single-file"===this.jc.sJ())&&(e=this.z5(e));const n=new FontFace(t,`url('${e}')`);this.jc.QV()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.jc.QV()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}a6(t){return!!this.l5[t]}l6(t,s){this.c5=!!s;for(const[s,i,e]of t)this.u5.set(s,{fileName:s,u6:i.map(t=>({type:t[0],c6:t[1],fullName:s+t[1],fileSize:t[2]})),f6:e})}d6(t){const s=this.u5.get(t);if(!s)return null;let i=null;for(const t of s.u6)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.a6(t.type))return t;return i}p6(t){const s=this.d6(t);return s?{url:this.CQ(s.fullName),type:s.type}:null}m6(){if(this.c5){const t=[];for(const s of this.u5.values()){if(s.f6)continue;const i=this.d6(s.fileName);i&&t.push({g6:s.fileName,url:this.CQ(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}y6(t){return"preview"===this.jc.sJ()&&(t=new URL(t,location.href).toString()),this.g5.get(t)||null}z5(t){let s=this.y5.get(t);if(s)return s;const i=this.y6(t);return i?(s=URL.createObjectURL(i),this.y5.set(t,s),s):t}_V(){return this.N5}async AQ(...t){const s=t.map(t=>this.xQ(t));if(this.jc.QV())if(1===t.length){const s=t[0];await import(new URL(s,location.href).toString())}else{const s=t.map(t=>`import "${new URL(t,location.href).toString()}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>My(t)))}async NQ(t){if(WebAssembly.compileStreaming){const s=this.xQ(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await Sy.ro(t);return await WebAssembly.compile(s)}}async PQ(t){const s=this.xQ(t);return await this.jc.KY("runtime","add-stylesheet",{url:s})}}}{const xy=self.Gs;xy.w6=class extends xy.$n{constructor(t,s){super(),this.M6=t,this.jc=t.yQ(),this.S6=s.url||"",this.cz=s.size,this.T6=s.Y5,this.v6=s.blob||null,this.x6=!!this.v6,this.Ow=null}Yn(){this.Ow=null,this.M6=null,this.jc=null,this.v6=null}X5(){return this.S6}Pu(){return this.cz}J5(){return"local"===this.T6||this.v6?(this.x6=!0,Promise.resolve()):(this.Ow||(this.Ow=this.M6.no(this.S6,this.T6).then(t=>(this.x6=!0,this.Ow=null,this.v6=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.Ow=null})),this.Ow)}b6(){return this.x6}C6(){return this.v6?Promise.resolve(this.v6):this.Ow?this.Ow:this.M6.no(this.S6,this.T6)}}}{const by=self.Gs,Cy=new by.Wd,Iy=new Set;by.Q5=class extends by.w6{constructor(t,s){super(t,s),this.I6=null,this.G6=null,this.Wp=0,this._6=-1,this.E6=-1,this.A6=!!s.W5,Iy.add(this)}Yn(){if(0!==this.Wp)throw new Error("released image asset which still has references");this.M6.q5(this),this.I6=null,Iy.delete(this),super.Yn()}static D6(){for(const t of Iy)t.I6=null,t.G6=null,t.Wp=0}A4(t,s){return s=s||{},this.Wp++,this.G6?Promise.resolve(this.G6):(this.I6||(s.yb=this.jc._Y().N6(),this.I6=this.O6(t,s)),this.I6)}async O6(t,s){try{const i=await this.C6();return 0===this.Wp?(this.I6=null,null):await Cy.zu(async()=>{const e=await t.bP(i,s);return this.I6=null,0===this.Wp?(t.CC(e),null):(this.G6=e,this._6=e.xy(),this.E6=e.Cy(),this.G6)})}catch(t){throw console.error("Failed to load texture: ",t),t}}SA(){if(this.Wp<=0)throw new Error("texture released too many times");this.Wp--,0===this.Wp&&this.G6&&(this.G6.Tv().CC(this.G6),this.G6=null)}P6(){this.Wp++}R6(){return this.Wp}L6(){this.Wp--}DC(){return this.G6}xy(){return this._6}Cy(){return this.E6}Z5(){return this.A6}async F6(){const t=await this.C6();return by.Di.ImageBitmap?await createImageBitmap(t):await by.uo(t)}}}{let Gy=function(t,s){return t.FY().k6()-s.FY().k6()};SortByInstLastCachedZIndex=Gy;const _y=self.Gs,Ey=self.assert;_y.j6=class extends _y.$n{constructor(t,s,i){super(),this.z6=t,this.Aa=s,this.Da=i,this.B6=[],this.U6=!0,this.V6=new Set,this.W6=!1}Yn(){_y.Sh(this.B6),this.V6.clear(),this.z6=null}zf(){_y.Sh(this.B6),this.U6=!0,this.V6.clear(),this.W6=!1}Y6(){this.U6=!1}Du(){return!this.B6.length||!(this.B6.length>this.V6.size)&&(this.Q6(),!0)}J6(t){if(this.V6.has(t))return this.V6.delete(t),void(0===this.V6.size&&(this.W6=!1));this.B6.push(t),this.U6=1===this.B6.length}Zf(t){this.V6.add(t),this.W6=!0,this.V6.size>=50&&this.Q6()}Q6(){this.W6&&(this.B6.length!==this.V6.size?(_y.Ah(this.B6,this.V6),this.V6.clear(),this.W6=!1):this.zf())}H6(){this.U6||(this.B6.sort(Gy),this.U6=!0)}q6(t){this.Q6(),this.H6(),this.B6.length&&t.push(this.B6)}}}{const Ay=self.Gs;Ay.X6=class extends Ay.$n{constructor(t,s){super(),this.Z6=t,this.K6=s,this.t8=Ay.Wn(Ay._u)}Yn(){this.t8.Yn(),this.t8=null}s8(t,s,i){let e=this.t8.Ys(t,s);return e||(i?(e=Ay.Wn(Ay.j6,this,t,s),this.t8.Set(t,s,e),e):null)}i8(t){return Math.floor(t/this.Z6)}e8(t){return Math.floor(t/this.K6)}n8(t,s,i){if(s)for(let e=s.Ka(),n=s.sl();e<=n;++e)for(let n=s.tl(),r=s.il();n<=r;++n){if(i&&i.Cl(e,n))continue;const s=this.s8(e,n,!1);s&&(s.Zf(t),s.Du()&&this.t8.Nu(e,n))}if(i)for(let e=i.Ka(),n=i.sl();e<=n;++e)for(let n=i.tl(),r=i.il();n<=r;++n)s&&s.Cl(e,n)||this.s8(e,n,!0).J6(t)}r8(t,s){let i=this.i8(t.Ka());const e=this.e8(t.tl()),n=this.i8(t.sl()),r=this.e8(t.il());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.s8(i,t,!1);e&&e.q6(s)}}h8(t){let s=t.Ka();const i=t.tl(),e=t.sl(),n=t.il();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.s8(s,t,!1);i&&i.Y6()}}}}{let Dy=function(t,s){return t.FY().k6()-s.FY().k6()},Ny=function(t,s){return t.FY().ox()-s.FY().ox()};SortByInstLastCachedZIndex=Dy,SortByInstZElevation=Ny;const Oy=self.Gs,Py=self.assert,Ry=new Oy.Rect,Ly=new Oy.El,Fy=[],ky=new Oy.Rect,jy=new Oy.Rect,zy=self.ls,By=zy.ws,Uy=zy.Ms,$y=zy.ds,Vy=$y.create(),Wy=By.create(),Yy=Uy.create(),Qy=By.create(),Jy=By.create(),Hy=By.create(),qy=Oy.Wn(Oy.Ea),Xy=Oy.Wn(Oy.Rect),Zy=[],Ky=[],tw=[],sw={name:"",o8:-1,a8:!1,isVisible:!0,Lq:!0,jq:!1,backgroundColor:[1,1,1,1],nX:!0,l8:[1,1],opacity:1,oX:!1,u8:!1,c8:!1,f8:!1,Yq:1,C$:0,$k:0,d8:[],p8:[],m8:[]},iw=new Map,ew=t=>{if(!t.G0.gH().g8())return;const s=t.G0.LX();iw.has(s)&&(iw.delete(s),iw.size||t.G0.yQ().Mf().removeEventListener("instancedestroy",ew))};Oy.y8=class extends Oy.$n{constructor(t,s,i){super(),i=Object.assign({},sw,i),this.w8=t,this.jc=t.yQ(),this.M8=s,this.Hn=i.name,this.$w=-1,this.S8=!!i.jq,this.T8=-1,this.v8=i.o8,this.x8=!!i.a8,this.b8=!!i.isVisible,this.C8=!!i.Lq,this.I8=Oy.Wn(Oy.bo),this.I8.Ma(i.backgroundColor),this.G8=!!i.nX,this._8=i.l8[0],this.E8=i.l8[1],this.kv=Oy.Wn(Oy.bo,1,1,1,i.opacity),this.A8=Oy.Wn(Oy.bo),this.D8=!!i.oX,this.N8=!!i.u8,this.O8=!!i.c8,this.P8=!!i.f8,this.L8=i.Yq,this.Fv=i.C$,this.F8=null,this.k8=1,this.jv=i.$k,this.j8=0,this.z8=0,this.B8=0,this.U8=!1,this.yN=Oy.Wn(Oy.Rect),this.V8=Oy.Wn(Oy.Rect),this.W8=Oy.Wn(Oy.Rect),this.Y8=!0,this.mC=$y.create(),this.Q8=!0,this.u$=$y.create(),this.J8=!0,this.H8=Oy.Wn(Oy.qw.tM),this.q8=!0,this.X8=[],this.Z8=i.d8,this.K8=[],this.t7=[],this.s7=new Map,this.B6=[],this.i7=!1,this.e7=!1,this.n7=!1;const e=this.jc._Y();this.r7=Oy.Wn(Oy.h7,this,i.p8),this.TV=Oy.Wn(Oy.qw.MU,e.o7(),{aU:(t,s)=>{const i=s.dV(),n=i.SP();t.Vv(i.a7()),t._P(n),t.EP(n),e.l7(n)},uU:t=>this.BH().u7(t)}),this.c7=!0,this.f7=!0,this.d7=null,this.p7=[],this.m7=!1,this.g7=Oy.Wn(Oy.Rect,0,0,-1,-1),this.y7=Oy.Wn(Oy.Rect,0,0,-1,-1),this.w7=new self.aq(this),this.M7=Oy.Wn(Oy.Event.Mf),this.S7(),this.T7()&&(this.d7=Oy.Wn(Oy.X6,this.jc.HV(),this.jc.XV())),this.v7=i.m8.map(t=>Oy.y8.x7(this.w8,this,t))}b7(){for(const t of this.Z8){const s=this.jc.C7(t[1]);this.w8.I7(s),s.G7()||(s._7(t),s.E7(this.$w)),this.K8.push(t),this.s7.set(t[2],t)}Oy.Ch(this.X8,this.K8),this.Z8=null}static x7(t,s,i){return Oy.Wn(Oy.y8,t,s,{name:i[0],o8:i[2],isVisible:i[3],Lq:i[13],jq:i[19],backgroundColor:i[4].map(t=>t/255),nX:i[5],l8:[i[6],i[7]],opacity:i[8],oX:i[9],u8:i[17],c8:i[18],f8:i[10],Yq:i[11],C$:i[12],$k:i[16],d8:i[14],p8:i[15],m8:i[20]})}Yn(){for(const t of this.v7)t.Yn();Oy.Sh(this.v7);for(const t of this.B6)this.jc.QY(t);Oy.Sh(this.B6),this.r7.Yn(),this.r7=null,this.TV.Yn(),this.TV=null,this.w7=null,this.M8=null,this.w8=null,this.jc=null}Qn(){return!this.w8}A7(t){return this.s7.get(t)}D7(t){const s=this.w8.N7(),i=this.K8;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.jc.C7(r[1]);let o=!0;if(!h.O7()||s)if(h.g8()&&iw.has(r[2]))o=!1;else{const s=this.jc.P7(r,this,!0);t.push(s),h.g8()&&(iw.size||this.jc.Mf().addEventListener("instancedestroy",ew),iw.set(s.LX(),s),o=!1,this.t7.push(s.LX()))}o&&(i[e]=i[n],++e)}Oy.Mh(i,e),this.jc.XY(),this.VY()}R7(t,s){if(!t.KJ().EJ())throw new Error("instance is not of world type");const i=t.FY();if(i.jY()!==this)throw new Error("instance added to wrong layer");this.B6.push(t),0!==i.ox()&&(this.n7=!0),s&&this.T7()&&t.FY().FZ(),this.VY(t)}L7(t){this.B6.includes(t)||(this.B6.push(t),0!==t.FY().ox()&&(this.n7=!0),this.VY(t))}F7(t,s){const i=t.FY();if(i.jY()!==this)throw new Error("instance added to wrong layer");this.B6.unshift(t),0!==i.ox()&&(this.n7=!0),this.VY(t),s&&this.T7()&&t.FY().FZ()}k7(t,s){const i=this.B6.indexOf(t);i<0||(s&&this.T7()&&t.FY().j7(),this.B6.splice(i,1),this.VY(t),this.z7())}B7(){this.n7=!0}z7(){0===this.B6.length&&(this.n7=!1)}U7(t){if(t){const t=new Set;for(const s of this.B6){const i=s.FY().k6();i>=0&&t.add(i)}let s=-1;for(const i of this.B6){const e=i.FY();if(!(e.k6()>=0)){for(++s;t.has(s);)++s;e.V7(s)}}}this.B6.sort(Dy)}W7(){}Y7(){for(const t of this.B6)t.gH().g8()||this.jc.QY(t);this.jc.XY(),Oy.Sh(this.B6),this.n7=!1,this.VY()}Q7(t,s,i,e,n,r){const h=this.jc.hW(),o=this.jc.J7(),a=t.pH(),l=[];for(const u of this.K8){const c=u[0],f=c[0],d=c[1];if(!s.Cl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.jH(p))continue}let m=n;if(!m){const t=this.jc.RY();this.yY()===t?m=this:(m=t.H7(this.Ac()),m||(m=t.BY(this.CV())))}const g=this.jc.P7(u,m,!1,void 0,void 0,!1,r,void 0,r);r&&m.GH(g);const y=g.FY();y.zZ(i,e),y.FZ(),h._H(!0),g.EH(),h._H(!1),l.push(g)}return l}bH(){return this.B6.length}yY(){return this.w8}Ac(){return this.Hn}q7(t){this.$w=t}CV(){return this.$w}X7(t){this.T8=t}F2(){return this.T8}zq(){return this.S8}Bq(t){t=!!t,this.S8!==t&&(this.S8=t,this.w8.Z7(),this.jc.WY())}K7(){let t=-1;const s=this.Iq();return t=s?s.Eq().indexOf(this):this.yY().t9().indexOf(this),t}s9(){return this.v8}yQ(){return this.jc}i9(){return this.x8}e9(){for(const t of this.Gq())if(t.i9())return!0;return!1}wJ(){return this.jc.wJ()}BH(){return this.r7}bV(){return this.n9(),this.TV}n9(){const t=this.r9();if(!this.c7&&t===this.f7&&!this.TV.c$())return;const s=this.BH().h9();this.TV.f$(s.map(t=>t.KI()),{fU:s.map(t=>t.CV()),dU:!t,wU:!0}),this.c7=!1,this.f7=t}P0(){this.BH().P0(),this.c7=!0}T7(){return this.P8&&!this.O8}o9(){return this.d7}a9(){this.m7=!1}Rq(){for(const t of this.l9())if(!t.Nq())return!1;return!0}Nq(){return this.b8}Oq(t){t=!!t,this.b8!==t&&(this.b8=t,this.jc.WY())}kq(t){this.C8=!!t}Fq(){return this.C8}$q(){for(const t of this.l9())if(!t.Fq())return!1;return!0}fX(t){if(t=!!t,this.U8!==t){if(this.U8=t,t){const t=this.yY();this.z8=t.qH(),this.B8=t.ZH()}this.u9(),this.jc.WY()}}c9(){return this.U8}HH(t){const s=this.yY(),i=s.f9(),e=s.d9();t>e&&(t=e),t<i&&(t=i),this.z8!==t&&(this.z8=t,this.c9()&&(this.u9(),this.jc.WY()))}XH(t){const s=this.yY(),i=s.p9(),e=s.m9();t>e&&(t=e),t<i&&(t=i),this.B8!==t&&(this.B8=t,this.c9()&&(this.u9(),this.jc.WY()))}qH(){return this.c9()?this.z8:this.yY().qH()}ZH(){return this.c9()?this.B8:this.yY().ZH()}pX(){return this.g9(),this.yN}y9(){return this.g9(),this.V8}w9(){return this.g9(),this.W8}M9(){return this.yY().Tq()}KM(t){return this.jc.KM(t)}S9(t,s){const i=this.y9();if(0===t)s.M(i);else{let e=i.ol(),n=i.al();const r=this.T9(t),h=i.width()/r,o=i.height()/r,[a,l]=this.M9();if(.5!==a||.5!==l){const s=this.v9(),i=this.jc,r=this.KM()/s;let h=(a-.5)*i.x9()/r,o=(l-.5)*i.b9()/r;const u=this.JH();0!==u&&(qy.set(h,o),qy.rotate(u),h=qy.Pa(),o=qy.La());const c=Oy.mr(s,0,t);e+=Oy.Gt(h,0,c),n+=Oy.Gt(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}PO(){return this.kv.Bo()}LO(t){t=Oy.Xn(t,0,1),this.kv.Bo()!==t&&(this.kv.Lo(t),this.S7(),this.jc.WY())}S7(){this.A8.M(this.kv),this.A8.Zo()}a7(){return this.A8}r9(){return this.kv.Jo(1,1,1,1)}Jq(){return this.L8}Qq(t){this.L8!==t&&(this.L8=t,this.u9(),this.jc.WY())}Zq(){return this._8}sX(){return this.E8}C9(t,s){this._8===t&&this.E8===s||(this._8=t,this.E8=s,this.u9(),this.jc.WY())}Xq(t){this.C9(t,this.sX())}tX(t){this.C9(this.Zq(),t)}lx(t){this.jv!==t&&(this.jv=t,this.jc.WY())}ox(){return this.jv}QH(t){t=Oy.Zn(t),this.j8!==t&&(this.j8=t,this.u9(),this.jc.WY())}JH(){return Oy.Zn(this.w8.JH()+this.j8)}Hq(){return this.j8}I9(){return this.B6.length>0}UY(){return this.B6}G9(){return this._9()&&this.O8?(Oy.Ch(tw,this.UY()),tw.sort((t,s)=>this.E9(t,s)),tw):this.UY()}A9(t){Oy.On(t,this.G9());for(const s of this.v7)s.Rq()&&s.PO()>0&&s.A9(t)}E9(t,s){const i=this.yY().D9(),e=i[0],n=i[1],r=i[2],h=t.FY(),o=s.FY(),a=h.tx()-e,l=h.nx()-n,u=h.ox()-r,c=o.tx()-e,f=o.nx()-n,d=o.ox()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}cX(){return this.I8}hX(){return this.G8}rX(t){t=!!t,this.G8!==t&&(this.G8=t,this.jc.WY())}lX(){return this.D8}aX(t){t=!!t,this.D8!==t&&(this.D8=t,this.jc.WY())}iX(t){t=!!t,this.N8!==t&&(this.N8=t,this.u9(),this.jc.WY())}eX(){return this.N8}N9(){return!this.yQ().O9()||!this.N8}_9(){return!this.N9()}P9(){return this._9()&&this.yY().R9()}L9(){if(!this.P9())return!1;for(const t of this.v7)if(!t.L9())return!1;return!0}$v(t){this.Fv!==t&&(this.Fv=t,this.jc.WY())}uX(){return this.Fv}F9(){return!this.M8}Iq(){return this.M8}k9(t){this.M8=t}Eq(){return this.v7}j9(){return this.v7.length>0}z9(t,s=!0){s?this.v7.push(t):this.v7.unshift(t)}B9(t,s,i){let e=this.v7.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.v7.splice(e,0,t)}U9(t){const s=this.v7.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.v7.splice(s,1)}V9(){for(const t of this.v7)if(t.W9())return!0;return!1}*Dq(){for(const t of this.v7)yield*t.Dq();yield this}*Gq(){let t=this.Iq();for(;t;)yield t,t=t.Iq()}*l9(){yield this,yield*this.Gq()}Y9(t){for(const s of this.Gq())if(s===t)return!0;return!1}Q9(t){return this===t||this._8===t._8&&this.E8===t.E8&&this.k8===t.k8&&this.L8===t.L8&&this.j8===t.j8&&this.qH()===t.qH()&&this.ZH()===t.ZH()}J9(){return{parallaxX:this.Zq(),parallaxY:this.sX(),scale:this.Wq(),scaleRate:this.Jq(),angle:this.Hq(),hasOwnScroll:this.c9(),scrollX:this.qH(),scrollY:this.ZH()}}H9(t){this.C9(t.parallaxX,t.parallaxY),this.Vq(t.scale),this.Qq(t.scaleRate),this.QH(t.angle),this.fX(t.hasOwnScroll),this.HH(t.scrollX),this.XH(t.scrollY),this.g9()}q9(t){0!==t.size&&Oy.Ah(this.B6,t)>0&&(this.z7(),this.VY())}VY(t){this.i7=!1,this.m7=!1,t&&!t.gH().KJ().DJ()||(this.e7=!1)}X9(){if(!this.i7){if(this.B6.sort(Ny),this.T7())for(let t=0,s=this.B6.length;t<s;++t){const s=this.B6[t].FY();s.V7(t),this.d7.h8(s.Z9())}else for(let t=0,s=this.B6.length;t<s;++t)this.B6[t].FY().V7(t);this.i7=!0}}K9(){if(this.e7)return;const t=this.w8.ttt(this.F2()).map(t=>[...t.Dq()]).flat();let s=0;for(const i of t){for(const t of i.UY())t.gH().KJ().DJ()&&t.FY().stt(s++);i.itt()}}itt(){this.e7=!0}ett(){return{isVisible:this.Rq(),opacity:this.PO(),isInteractive:this.Fq()}}ntt(t,s,i){const e=t.FY(),n=s.FY();if(e.jY()!==this||n.jY()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.zY();let h=n.zY();return r!==h+(i?1:-1)&&(Oy.Ih(this.B6,r),r<h&&h--,i&&h++,h===this.B6.length?this.B6.push(t):this.B6.splice(h,0,t),this.VY(t),!0)}htt(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.FY().k6()<h.FY().k6()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}ott(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.htt(i,n))}return i%2==1&&s.push(t[i-1]),s}att(t){for(;t.length>1;)t=this.ott(t);return t[0]}ltt(){return this.X9(),Oy.Sh(Fy),this.d7.r8(this.pX(),Fy),Fy.length?1===Fy.length?Fy[0]:this.att(Fy):[]}W9(){return this.Rq()&&this.PO()>0&&this.utt()}utt(){if(this.I9()||!this.hX()||this.M7.bf("beforedraw")||this.M7.bf("afterdraw"))return!0;for(const t of this.v7)if(t.utt())return!0;return!1}ctt(){return this.lX()||!this.r9()||0!==this.uX()||this.r7.ftt()}dtt(){if(this.ctt())return!0;for(const t of this.v7)if(t.dtt())return!0;return!1}SP(){return this.F8}T9(t){if(this.w8.bq())return 1;{const s=this.ptt();return s/(s-t)}}mtt(t){const s=this.jc.bX();if(this.w8.bq())return s;{const i=this.ptt();return this.KM()/Math.abs(i-t)*s}}u9(){this.J8=!0,this.q8=!0,this.Y8=!0}gtt(t){return this.J8&&(this.ytt(t,this.u$,0,0,null),this.J8=!1),this.u$}v9(t){return this.KM(t)/this.wtt()}ptt(){return this.P9()?this.yY().D9()[2]:this.v9()}Mtt(){if(this.P9()){const t=this.yY().D9();return[t[0],t[1],t[2]]}return this.Stt()}Stt(t=0,s=0,i=0){const e=this.jc,n=this.yY(),r=e.Ttt(),h=e.vtt();let o=(this.qH()-r)*this._8+r,a=(this.ZH()-h)*this.E8+h;e.oY()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.bq()?this.KM(i):this.v9(i),[f,d]=this.M9();if(.5!==f||.5!==d){const t=this.KM(i)/c;let s=(f-.5)*e.x9()/t,n=(d-.5)*e.b9()/t;const r=this.JH();0!==r&&(qy.set(s,n),qy.rotate(r),s=qy.Pa(),n=qy.La()),l+=s,u+=n}return[l,u,c]}ytt(t,s,i,e,n){const r=this.jc,h=this.yY();if(this.P9()){By.M(Qy,h.D9()),By.M(Jy,h.xtt()),By.M(Hy,h.btt());const t=r.Ttt(),s=r.vtt(),i=Jy[0]-Qy[0],e=Jy[1]-Qy[1],n=Jy[2]-Qy[2];Qy[0]=(Qy[0]-t)*this._8+t,Qy[1]=(Qy[1]-s)*this.E8+s,Qy[2]*=Math.max(this._8,this.E8),Jy[0]=Qy[0]+i,Jy[1]=Qy[1]+e,Jy[2]=Qy[2]+n}else{const[t,s,r]=this.Stt(i,e,n);By.set(Qy,t,s,r),By.set(Jy,t,s,r-100);const h=this.JH();0===h?By.set(Hy,0,1,0):By.set(Hy,Math.sin(h),Math.cos(h),0)}t.mS(s,Qy,Jy,Hy,n||r.b9())}Ctt(){this.Q8=!0,this.q8=!0,this.Y8=!0}Itt(t){return this.Q8&&(this.Gtt(t),this.Q8=!1),this.mC}Gtt(t){const s=this.jc._Y(),[i,e]=this.M9();if(this.w8.bq())t.pS(this.mC,s._tt(),s.Ett());else if(.5===i&&.5===e)$y.M(this.mC,s.Att());else{const n=s._tt(),r=s.Ett();t.fS(this.mC,n/r,i,e)}}U4(t,s=!0,i=0,e=0,n=0){s&&t.xO(this.Itt(t));let r=null;0===i&&0===e&&0===n?r=this.gtt(t):(this.ytt(t,Vy,i,e,n),r=Vy),t.EO(r)}Dtt(t){this.U4(t),t.JS(this.ox())}Ntt(t){let s=null;if(t.YT()&&this.jc.Ott()){const i=this.jc._Y().Ptt(this);i&&(s=i.nN(),t.RP(s))}return s}Rtt(t){if(t.dS()&&this.jc.Ott()){const s=2*(this.CV()+1);t.vk(s,s+1)}}Ltt(t,s){if(this.M7.bf(s)){t.TS(),t.jO(null),t.$O(),t.OT(),t.RO(1,1,1,1),t.JS(this.ox()),t.qS(0);const i=new Oy.Event(s);i.t_=this.jc._Y().GY(),this.i6(i)}}eb(t,s,i){const e=this.jc._Y(),n=this.ctt();let r=null;const h=this.Ntt(t);if(this.Rtt(t),n){const s={gb:this.jc.EB(),eC:!0,sB:!!t.dS()&&this.jc.Ftt()};"low"===e.ktt()&&(s.width=e._tt(),s.height=e.Ett()),r=this.jc.jtt(s),this.F8=r,t.IP(r),this.hX()&&t.dP(0,0,0,0)}else this.F8=s,t.IP(s);if(this.hX()||t.Au(this.I8),this.w8.ztt(t,this.F8,this.v7,n&&this.hX()),this.Rtt(t),this.U4(t),t.JS(this.ox()),t.gP(this._9()),this.Ltt(t,"beforedraw"),this.wtt()>Number.EPSILON){this.X9();const s=this.T7()&&0===this.ox()&&!this.n7;this.P9()?this.Btt(t):s?this.Utt(t):this.$tt(t,this.G9())}this.Ltt(t,"afterdraw"),t.JS(0),t.qS(0),n&&(t.gP(!1),this.Vtt(t,r,s,i)),h&&t.FP(h),this.F8=null}$tt(t,s){const i=this.pX(),e=this.F8,n=this.yY().bq(),r=this.yY().Wtt();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.FY();l.Rq()&&l.Ytt(i,r,n)&&this.Qtt(a,l,t,e)}}Btt(t){const s=this.F8,i=this.Jtt(),e=Zy,n=Ky,r=this.G9();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.FY();if(!l.Rq()||!l.Htt(i)){++h;continue}(!a.qtt()||l.Xtt()>0)&&n.push(a);const u=a.FY().qZ();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.FY();if(s.Rq()&&s.Htt(i)){if(s.qZ()!==u)break;t.qtt()?(s.Xtt()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].Ztt()){this.Ktt(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.FY();r.tst(!0),this.Qtt(e,r,t,s),r.tst(!1)}}else{this.Qtt(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.FY();r.jY().Qtt(e,r,t,s)}}h=c,Oy.Sh(e),Oy.Sh(n)}}Ktt(t,s){const i=this.F8;t.DP();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.FY();n.sst(!0),this.ist(e,n,t)}t.NP();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.FY();this.Qtt(n,r,t,i),r.sst(!1)}t.PP()}Utt(t){const s=this.d7,i=this.y7,e=this.g7,n=this.pX();let r;i.set(s.i8(n.Ka()),s.e8(n.tl()),s.i8(n.sl()),s.e8(n.il())),this.m7&&i.equals(e)?r=this.p7:(r=this.ltt(),this.m7=!0,e.M(i)),this.$tt(t,r),r!==this.p7&&Oy.Ch(this.p7,r)}Qtt(t,s,i,e){s.ftt()?this.est(t,s,i,e):this.ist(t,s,i)}ist(t,s,i){const e=s.nst();i.LS()!==e&&e.Uv(),t.eb(i)}est(t,s,i,e){this.rst(t,s,i,e,null)&&this.U4(i)}rst(t,s,i,e,n){const r=s.RZ().bV();return r.v$(i,e,{x$:t,C$:s.uX(),devicePixelRatio:this.jc.hst(),time:t.ost(),_j:this.jc.ast()*this.wtt(),Ej:this.JH(),Gj:s.KZ(),J$:r.cV()?null:this.lst(s),A$:n&&n.A$,D$:n&&n.D$,N$:n&&n.N$,O$:n&&n.O$,P$:n&&n.P$,R$:n&&n.R$}),i.JS(this.ox()),r.DO()}Vtt(t,s,i,e){const n=this.r7.h9(),r=this.jc;0===n.length?(t.IP(i),t.TS(),e&&0===this.Fv&&this.r9()?t.GP(s):(t.$v(this.Fv),t.Vv(this.A8),t._P(s)),t.EP(s),r.l7(s)):this.bV().v$(t,i,{x$:this,C$:this.uX(),devicePixelRatio:r.hst(),_j:r.ast()*this.wtt(),Ej:this.JH(),Gj:this.pX(),J$:null,cU:!0})}Wq(){return this.k8}Vq(t){this.k8!==t&&(this.k8=t,this.w8.ust(),this.u9(),this.jc.WY())}bX(){return this.wtt()*this.jc.bX()}Y2(){return this.wtt()*this.jc.Y2()}wtt(){return(this.k8*this.w8.YH()-1)*this.L8+1}g9(){if(!this.Y8)return;this.Y8=!1;const t=this.jc.Ttt(),s=this.jc.vtt(),i=(this.qH()-t)*this._8+t,e=(this.ZH()-s)*this.E8+s,n=this.wtt(),r=this.jc.x9()/n,h=this.jc.b9()/n;let o=i-r/2,a=e-h/2;this.jc.oY()&&(o=Math.round(o),a=Math.round(a));const l=this.V8;l.set(o,a,o+r,a+h);const u=this.JH();0!==u&&(Ry.M(l),Ry.offset(-l.ol(),-l.al()),Ly.Xl(Ry,u),Ly.Kl(Ry),Ry.offset(l.ol(),l.al()),l.M(Ry));const c=this.jv;this.S9(c,this.yN),this.P9()?this.cst(c,this.W8):this.W8.M(this.yN)}cst(t,s){const i=this.jc._Y(),e=i.cJ(),n=i.dJ(),[r,h]=this.gX(0,0,t),[o,a]=this.gX(e,0,t),[l,u]=this.gX(e,n,t),[c,f]=this.gX(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}gX(t,s,i=0){return this.fst(t,s,i,this.Y2())}SX(t,s,i=0){return this.fst(t,s,i,this.bX()*this.wJ())}fst(t,s,i,e){const n=this.jc,r=n.Tv(),h=this.wtt(),o=n.x9()/h,a=n.b9()/h,l=Yy;Uy.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.Itt(r),c=this.gtt(r),f=Wy;return Oy.qw.Kw(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}dst(t,s){const i=this.k8,e=this.L8,n=this._8,r=this.E8,h=this.j8,o=this.P9();o&&this.yY().pst(!1),this.k8=1,this.L8=1,this._8=1,this.E8=1,this.j8=0,this.u9();const a=this.gX(t,s);return this.k8=i,this.L8=e,this._8=n,this.E8=r,this.j8=h,this.u9(),o&&this.yY().pst(!0),a}wX(t,s,i=0){return this.mst(t,s,i,this.Y2())}vX(t,s,i=0){return this.mst(t,s,i,this.bX()*this.wJ())}mst(t,s,i,e){const n=this.jc,r=n.Tv(),h=this.wtt(),o=n.x9()/h,a=n.b9()/h,l=Yy;Uy.set(l,0,0,o,a);const u=this.Itt(r),c=this.gtt(r),f=Wy;return Oy.qw.Xw(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}gst(t,s){return t*=this.bX()*this.wJ(),0!==s&&(t*=this.T9(s)),t}lst(t){const s=t.KZ(),i=t.qZ(),e=t.Xtt(),n=i+e,r=s.Ka(),h=s.tl(),o=s.sl(),a=s.il();if(this.P9()){if(this.yst(r,h,i)||this.yst(o,h,i)||this.yst(o,a,i)||this.yst(r,a,i))return null;if(e>0&&(this.yst(r,h,n)||this.yst(o,h,n)||this.yst(o,a,n)||this.yst(r,a,n)))return null}else if(n>=this.v9())return null;let[l,u]=this.vX(r,h,i),[c,f]=this.vX(o,a,i);if(0!==this.JH()||e>0||this.P9()){const[t,s]=this.vX(o,h,i),[d,p]=this.vX(r,a,i);if(e>0){const[i,e]=this.vX(r,h,n),[m,g]=this.vX(o,h,n),[y,w]=this.vX(o,a,n),[M,S]=this.vX(r,a,n);let T=Math.min(l,c,t,d,i,m,y,M);c=Math.max(l,c,t,d,i,m,y,M),l=T,T=Math.min(u,f,s,p,e,g,w,S),f=Math.max(u,f,s,p,e,g,w,S),u=T}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Ry.set(l,u,c,f),Ry}Jtt(){return this.q8&&(this.wst(),this.q8=!1),this.H8}wst(){const t=this.jc.Tv(),s=this.Itt(t),i=this.gtt(t);this.H8.oM(i,s)}yst(t,s,i){return this.Jtt().lM(t,s,i)}Mst(){return{d:this.i9(),s:this.Wq(),a:this.Hq(),v:this.Nq(),i:this.Fq(),html:this.zq(),bc:this.I8.toJSON(),t:this.hX(),sx:this.z8,sy:this.B8,hosp:this.U8,px:this.Zq(),py:this.sX(),c:this.kv.toJSON(),sr:this.Jq(),fx:this.r7.Sx(),cg:this.t7}}Sst(t){this.x8=!!t.d,this.k8=t.s,this.j8=t.a,this.b8=!!t.v,this.C8=!t.hasOwnProperty("i")||t.i,this.S8=!!t.html,this.I8.Ma(t.bc),this.G8=!!t.t,t.hasOwnProperty("sx")&&(this.z8=t.sx),t.hasOwnProperty("sy")&&(this.B8=t.sy),t.hasOwnProperty("hosp")&&(this.U8=!!t.hosp),this._8=t.px,this.E8=t.py,this.kv.Ma(t.c),this.S7(),this.L8=t.sr,Oy.Ch(this.t7,t.cg),Oy.Ch(this.K8,this.X8);const s=new Set(this.t7);let i=0;for(let t=0,e=this.K8.length;t<e;++t)s.has(this.K8[t][2])||(this.K8[i]=this.K8[t],++i);Oy.Mh(this.K8,i),this.r7.Tx(t.fx),this.c7=!0}Tst(){this.U7(!1),this.VY(),this.u9(),this.Ctt()}eq(){return this.w7}iW(){return this.M7}i6(t){t.LZ=this.eq(),this.M7.dispatchEvent(t)}GH(t,s=!1,i=!1){if(this.B6.includes(t))return s&&this.B6.sort((t,s)=>(t.FY().vst()??0)-(s.FY().vst()??0)),void(i&&this.B6.forEach((t,s)=>t.FY().V7(s)));if(t.xst()){const s=[...t.GK()];s.push(t),s.sort((t,s)=>(t.FY().vst()??0)-(s.FY().vst()??0));for(const t of s)if(t.PX())for(const i of t.RX()){if(s.includes(i))continue;const t=[...i.GK()];t.push(i),t.sort((t,s)=>(t.FY().vst()??0)-(s.FY().vst()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.KJ().EJ()&&this.R7(t,!0);i&&this.B6.forEach((t,s)=>t.FY().V7(s))}else{if(t.KJ().EJ()&&this.R7(t,!0),!t.PX())return void(i&&this.B6.forEach((t,s)=>t.FY().V7(s)));for(const s of t.RX()){const t=[...s.GK()];if(t.push(s),t.sort((t,s)=>(t.FY().vst()??0)-(s.FY().vst()??0)),t&&t.length)for(const s of t)s.KJ().EJ()&&this.R7(s,!0)}i&&this.B6.forEach((t,s)=>t.FY().V7(s))}}}}{let nw=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},rw=function(t,s){Mw!==t&&(t.Dtt(s),Mw=t)};vec3EqualsXYZ=nw,MaybePrepareLayerDraw=rw;const hw=self.Gs,ow=self.yZ,aw=self.assert,lw=hw.Wn(hw.Rect),uw=hw.Wn(hw.Rect),cw=hw.Wn(hw.Rect),fw=hw.Wn(hw.bo),dw=self.ls,pw=dw.ws,mw=[],gw=[],yw=[],ww=[];let Mw=null;hw.bst=class extends hw.$n{constructor(t,s,i){super(),this.Cst=t,this.jc=t.yQ(),this.Hn=i[0],this.Ist=i[1],this.Gst=i[2],this.Uy=i[1],this.$y=i[2],this._st=!!i[3],this.Est=!!i[4],this.Ast=i[5],this.Dst=i[6],this.Nst=i[7],this.Ost=null,this.v8=i[8],this.$w=s,this.z8=0,this.B8=0,this.k8=1,this.j8=0,this.Pst=new Set,this.Rst=new Set,this.Lst=new Set,this.Fst=[],this.kst=[],this.jst=new Map,this.zst=new Map,this.Bst=[],this.Ust=!1,this.$st=pw.create(),this.Vst=pw.create(),this.Wst=pw.create(),this.Yst=[],this.Qst=[],this.Jst=new Map,this.Hst=new Map,this.qst=-1;const e=this.jc._Y();this.r7=hw.Wn(hw.h7,this,i[11]),this.TV=hw.Wn(hw.qw.MU,e.o7(),{aU:(t,s)=>{const i=s.dV().SP();t.FO(),t._P(i),t.EP(i),e.l7(i)},uU:t=>this.BH().u7(t)}),this.c7=!0,this.Xst=!1,this.F8=null,this.Zst={},this.Kst=new Map,this.tit=!0,this.sit=new self.zH(this),this.M7=hw.Wn(hw.Event.Mf);for(const t of i[9])this.Yst.push(hw.y8.x7(this,null,t));this.iit();for(const t of this.hq())t.b7();for(const t of i[10]){const s=this.jc.C7(t[1]);if(!s)throw new Error("missing nonworld object class");s.G7()||s._7(t),this.Bst.push(t),this.I7(s)}}Yn(){for(const t of this.Qst)t.Yn();hw.Sh(this.Qst),this.Lst.clear(),this.Ost=null,this.Cst=null,this.jc=null}yQ(){return this.jc}Ac(){return this.Hn}s9(){return this.v8}CV(){return this.$w}BH(){return this.r7}bV(){return this.n9(),this.TV}n9(){const t="low"===this.jc._Y().ktt();if(!this.c7&&this.Xst===t&&!this.TV.c$())return;const s=this.BH().h9();this.TV.f$(s.map(t=>t.KI()),{fU:s.map(t=>t.CV()),pU:t,wU:!0}),this.c7=!1,this.Xst=t}P0(){this.BH().P0(),this.c7=!0}eit(){let t=this.Qst[0].wtt();for(let s=1,i=this.Qst.length;s<i;++s){const i=this.Qst[s];0===i.Zq()&&0===i.sX()||(t=Math.min(t,i.wtt()))}return t}nit(){return.5*this.jc.x9()/this.eit()}rit(){return.5*this.jc.b9()/this.eit()}f9(){return this.sq()?-1/0:this.nit()}d9(){return this.sq()?1/0:this.xy()-this.nit()}p9(){return this.sq()?-1/0:this.rit()}m9(){return this.sq()?1/0:this.Cy()-this.rit()}HH(t){const s=this.f9(),i=this.d9();t>i&&(t=i),t<s&&(t=s),this.z8!==t&&(this.z8=t,this.hit(),this.jc.WY())}qH(){return this.z8}XH(t){const s=this.p9(),i=this.m9();t>i&&(t=i),t<s&&(t=s),this.B8!==t&&(this.B8=t,this.hit(),this.jc.WY())}ZH(){return this.B8}sq(){return this._st}ust(){this.HH(this.qH()),this.XH(this.ZH());for(const t of this.Qst)t.c9()&&(t.HH(t.qH()),t.XH(t.ZH()))}Mq(t,s){this.Ast===t&&this.Dst===s||(this.Ast=t,this.Dst=s,this.oit()&&(this.ait(),this.hit(),this.jc.WY()))}lit(){return this.bq()?.5:this.Ast}uit(){return this.bq()?.5:this.Dst}Tq(){return[this.lit(),this.uit()]}Wtt(){const t=this.lit(),s=this.uit();return t<0||t>1||s<0||s>1}vq(){this.Est&&(this.Est=!1,this.ait(),this.hit(),this.jc.WY())}xq(){this.Est||(this.Est=!0,this.ait(),this.hit(),this.jc.WY())}bq(){return this.Est}oit(){return!this.bq()}pst(t){t=!!t,this.Ust!==t&&(this.Ust=t,this.hit(),this.jc.WY())}R9(){return this.Ust}cit(t,s,i,e,n,r,h,o,a){nw(this.$st,t,s,i)&&nw(this.Vst,e,n,r)&&nw(this.Wst,h,o,a)||(pw.set(this.$st,t,s,i),pw.set(this.Vst,e,n,r),pw.set(this.Wst,h,o,a),this.fit())}fit(){this.hit(),this.jc.WY()}D9(){return this.$st}xtt(){return this.Vst}btt(){return this.Wst}YH(){return this.k8}WH(t){this.k8!==t&&(this.k8=t,this.hit(),this.ust(),this.jc.WY())}QH(t){t=hw.Zn(t),this.j8!==t&&(this.j8=t,this.hit(),this.jc.WY())}JH(){return this.j8}xy(){return this.Uy}hy(t){!isFinite(t)||t<1||(this.Uy=t)}Cy(){return this.$y}oy(t){!isFinite(t)||t<1||(this.$y=t)}dit(){return this.Ost}t9(){return this.Yst}*hq(){for(const t of this.Yst)yield*t.Dq()}rq(){return this.Qst}pit(){return this.Qst.length}jY(t){return"number"==typeof t?this.BY(t):this.H7(t.toString())}BY(t){return t=hw.Xn(Math.floor(t),0,this.Qst.length-1),this.Qst[t]}H7(t){return this.Jst.get(t.toLowerCase())||null}mit(t){return!!this.H7(t)}git(t){return this.Hst.get(t)||null}ait(){for(const t of this.Qst)t.Ctt()}hit(){for(const t of this.Qst)t.u9()}uq(t,s,i){if(this.mit(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.Iq(),n=hw.Wn(hw.y8,this,e,{name:t,o8:Math.floor(1e15*Math.random()),a8:!0});this.yit(n,s,i),this.yQ().WY(),this.Z7()}fq(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.wit(t),this.yit(t,s,i),this.yQ().WY(),this.Z7())}mq(t){if(this.wit(t)){const s=this.jc.hW();s._H(!0),t.Yn(),s._H(!1),this.yQ().WY(),this.Z7()}}yq(){const t=new Set;for(const s of this.hq())s.i9()&&!s.e9()&&t.add(s);if(0===t.size)return;const s=this.jc.hW();s._H(!0);for(const s of t)this.wit(s),s.Yn();s._H(!1),this.yQ().WY(),this.Z7()}yit(t,s,i){if(i>=2)if(s){if(s===t||s.Y9(t))throw new Error(`cannot move layer '${t.Ac()}' to sub-layer of itself`);s.z9(t,2===i),t.k9(s)}else 2===i?this.Yst.push(t):this.Yst.unshift(t),t.k9(null);else{const e=s.Iq();if(e){if(s.Y9(t))throw new Error(`cannot move layer '${t.Ac()}' to sub-layer of itself`);e.B9(t,s,0===i),t.k9(e)}else{let e=this.Yst.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.Yst.splice(e,0,t),t.k9(null)}}}wit(t){const s=t.Iq();if(s)return s.U9(t),!0;if(this.Yst.length>1){const s=this.Yst.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.Yst.splice(s,1),!0}return!1}iit(){this.Qst=[...this.hq()],this.Jst.clear(),this.Hst.clear();for(let t=0,s=this.Qst.length;t<s;++t){const s=this.Qst[t];s.q7(t),this.Jst.set(s.Ac().toLowerCase(),s),this.Hst.set(s.s9(),s)}}Mit(){let t=0;for(const s of this.Yst){for(const i of s.Dq())i.X7(t);s.zq()&&t++}}Sit(){return this.Yst.at(-1).F2()+1}async Z7(){this.iit(),this.Mit(),this.qst=this.Sit()}Tit(){return this.qst}vit(){this.qst=-1}ttt(t){const s=[];for(const i of this.Yst){const e=i.F2();if(e===t)s.push(i);else if(e>t)break}return s}J9(){return{scrollX:this.qH(),scrollY:this.ZH(),scale:this.YH(),angle:this.JH(),vpX:this.lit(),vpY:this.uit()}}H9(t){this.HH(t.scrollX),this.XH(t.scrollY),this.WH(t.scale),this.QH(t.angle),this.Mq(t.vpX,t.vpY)}xit(){let t=this.Yst.filter(t=>t.W9())[0];for(;t;){if(!t.hX())return fw.Fo(t.cX()),fw.Lo(1),fw;if(t.ctt())return fw.Eo(0,0,0,0),fw;t=t.Eq().filter(t=>t.W9())[0]}return fw.Eo(0,0,0,0),fw}N7(){return this.tit}bit(){return[...this.Pst]}I7(t){if(t.PX())for(const s of t.Iit().Cit())this.Pst.add(s);else this.Pst.add(t)}Git(){return[...this.Rst]}_it(t,s){if(t===this||!s)return Promise.resolve();t&&(hw.mo(this.Rst,t.Rst),t.Rst.clear());const i=[];for(const t of this.Pst)this.Rst.has(t)||(i.push(t.Eit(s)),this.Rst.add(t));return Promise.all(i)}async Ait(t){if(t.pH())throw new Error("cannot load textures for family");const s=this.jc.Tv();if(!s||s.AD()||this.Rst.has(t))return;this.Rst.add(t);const i=t.Eit(s);this.Dit(i),await i,t.Nit(),this.jc.WY()}Dit(t){this.Lst.add(t),t.then(()=>this.Lst.delete(t)).catch(()=>this.Lst.delete(t))}Oit(){return Promise.all([...this.Lst])}Pit(t){if(t.pH()||t.bH()>0)throw new Error("cannot unload textures");const s=this.jc.Tv();s&&this.Rst.has(t)&&(this.Rst.delete(t),t.Rit(s))}Lit(t,s){if(t!==this&&s)for(const s of this.Rst)s.g8()||t.Pst.has(s)||(s.Rit(),this.Rst.delete(s))}Fit(){this.Rst.clear()}async kit(t){const s=this.jc,i=this.Cst,e=s.hW();this.Nst&&(this.Ost=e.jit(this.Nst),this.Ost.zit()),i.Bit(this),this.Uy=this.Ist,this.$y=this.Gst,this.z8=s.HV()/2,this.B8=s.XV()/2,this.ust(),this.ait(),this.hit(),this.Mit(),await this.jc._Y().Uit(this.Sit(),!0),this.$it(t),this.jc.Vit(!0),this.Wit(),this.tit||this.Yit(),this.Qit(this.Fst),this.Qit(this.kst),this.Jit(),i.Hit(),s.XY(),this.jc.Vit(!1);const n=this.jc.qit();if(await Promise.all(n),hw.Sh(n),!s.Xit()){for(const t of this.Fst)t.Zit();for(const t of this.kst)t.Kit(this.jst,this.zst);for(const[t,s]of Object.entries(this.Zst)){const i=this.jc.A3(parseInt(t,10));i&&!i.pH()&&i.O7()&&hw.Sh(s)}for(const t of this.Fst)t.tet();for(const t of this.kst)t.tet();for(const t of this.Fst)t.NK()||t.iet();for(const t of this.kst)t.NK()||t.iet()}hw.Sh(this.Fst),hw.Sh(this.kst),this.jst.clear(),this.zst.clear(),await Promise.all([...this.Pst].map(t=>t.eet(this.jc.Tv()))),t&&(s.Mf().dispatchEvent(new hw.Event("beforefirstlayoutstart")),await s.net(new hw.Event("beforeprojectstart"))),await this.ret(new hw.Event("beforeanylayoutstart")),s.Mf().dispatchEvent(new hw.Event("beforelayoutstart")),await this.net(new hw.Event("beforelayoutstart")),s.Xit()||await s.hQ(hw.uQ.lQ.aQ.het,null,null),s.Mf().dispatchEvent(new hw.Event("afterlayoutstart")),await this.net(new hw.Event("afterlayoutstart")),await this.ret(new hw.Event("afteranylayoutstart")),t&&(s.Mf().dispatchEvent(new hw.Event("afterfirstlayoutstart")),await s.net(new hw.Event("afterprojectstart"))),e.oet(i),await this.Oit(),this.tit=!1}$it(t){for(const t of this.jc.J7())if(!t.pH()&&t.EJ())for(const s of t.uH()){const t=s.FY(),i=t.jY(),e=i.Ac(),n=this.H7(e);if(n)t.$Y(n,!0),n.L7(s);else{const e=hw.Xn(i.CV(),0,this.Qst.length-1),n=this.Qst[e];t.$Y(n,!0),n.L7(s)}}if(!t)for(const t of this.Qst)t.U7(!1)}Wit(){for(const t of this.Qst)t.D7(this.Fst),t.W7()}Yit(){let t=!1;for(const[s,i]of Object.entries(this.Zst)){const e=this.jc.A3(parseInt(s,10));if(e&&!e.pH()&&e.O7())for(const s of i){let i=null;if(e.EJ()&&(i=s.hasOwnProperty("instJson")?this.git(s.instJson.w.l):this.git(s.w.l),!i))continue;const n=this.jc.P7(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.Tx(s.instJson):n.Tx(s),t=!0,this.kst.push(n),s.hasOwnProperty("instJson")&&(this.jst.set(n,s),this.zst.set(s.index,n))}}for(const t of this.Qst)t.U7(!0),t.VY();t&&(this.jc.XY(),this.jc.aet())}Qit(t){for(const s of t){if(!s.PX())continue;const i=s.FY(),e=s.kX();for(const n of s.gH().Iit().kH()){if(n===s.gH())continue;const r=n.uH();if(r.length>e)s.let(r[e]);else{let e;e=i?this.jc.P7(n,i.jY(),!0,i.tx(),i.nx(),!0):this.jc.P7(n,null,!0,0,0,!0),this.jc.XY(),n.uet(),s.let(e),t.push(e)}}}}Jit(){for(const t of this.Bst)this.jc.C7(t[1]).PX()||this.jc.P7(t,null,!0)}cet(){const t=[],s=this.Bst;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.jc.C7(n[1]);r.g8()?r.PX()&&r.Iit().fet()||t.push(this.jc.P7(n,null,!0)):(s[i]=n,++i)}hw.Mh(s,i),this.jc.XY(),this.Qit(t)}Q7(t,s,i,e,n,r,h){if(i)return i.Q7(t,s,n,r,e,h);{const i=[];for(const o of this.Qst)i.push(o.Q7(t,s,n,r,e,h));return i.flat()}}async det(){const t=this.Cst;this.jc.Xit()||(await this.ret(new hw.Event("beforeanylayoutend")),await this.net(new hw.Event("beforelayoutend")),await this.jc.hQ(hw.uQ.lQ.aQ.pet,null,null),await this.net(new hw.Event("afterlayoutend")),await this.ret(new hw.Event("afteranylayoutend"))),t.met(!0),this.jc.hW().yet(),this.tit||this.wet();for(const t of this.Qst)t.Y7();for(const t of this.jc.J7())if(!(t.g8()||t.EJ()||t.KJ().GJ()||t.pH())){for(const s of t.uH())this.jc.QY(s);this.jc.XY()}t.met(!1),t.dY()===this&&t.Bit(null)}Met(t,s){const i=t.gH().s9().toString();this.Zst.hasOwnProperty(i)||(this.Zst[i]=[]);const e=this.Zst[i],n={index:s,instJson:t.Sx(),sceneGraphJson:{children:[]}};e.push(n),this.Kst.set(t,n)}Tet(t){const s=this.Kst.get(t);for(const i of t.vet()){const t=this.Kst.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:hw.bet.xet(i.FY())})}}wet(){this.Kst.clear();let t=0;for(const s of this.Qst){s.X9();for(const i of s.UY()){const s=i.gH();!s.g8()&&s.O7()&&(this.Met(i,t),t++)}}for(const t of this.Qst)for(const s of t.UY()){const t=s.gH();!t.g8()&&t.O7()&&this.Tet(s)}this.Kst.clear()}Cet(){this.Zst={},this.tit=!0}SP(){return this.F8}ctt(){const t=this.jc,s=t.Tv().YT();return"low"===t._Y().ktt()||s&&t.Ftt()||this.r7.ftt()||s&&t.O9()}Iet(t){const s=this.jc._Y();if(this.ctt()){t.IP(null),t.dP(0,0,0,0);const i={gb:this.jc.EB(),eC:t.dS()||this.jc.Ftt()||this.r7.ftt(),sB:!!t.dS()&&this.jc.Ftt()};"low"===s.ktt()&&(i.width=s._tt(),i.height=s.Ett()),this.F8=this.jc.jtt(i)}else this.F8=null}Get(t){this.jc._et(t)&&(t.gP(!1),t.IP(null),t.TS(),t.GP(this.F8))}Eet(t){this.ctt()&&(t.gP(!1),this.Aet(t,this.F8))}Det(t){t.IP(this.F8),t.Au(this.xit()),this.jc.O9()&&t.mP();const s=this.ttt(0);this.ztt(t,this.F8,s,!0),t.dS()&&t.vk(0,1),this.Eet(t),this.F8=null}Net(t,s){let i=null;this.jc._et(t)&&(i=this.F8),t.IP(i),t.dP(0,0,0,0),this.jc.O9()&&t.mP();const e=this.ttt(s);this.ztt(t,i,e,!0),this.Get(t),t.jT(),this.jc._Y().Oet(s)}ztt(t,s,i,e){const n=i.filter(t=>t.W9());for(let i=0,r=n.length;i<r;){const h=n[i];if(h.L9()&&!h.dtt()){mw.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.L9()||s.dtt())break;mw.push(n[t])}if(mw.length>=2||1===mw.length&&mw[0].V9()){this.Pet(t,s,mw),i+=mw.length,hw.Sh(mw);continue}hw.Sh(mw)}h.eb(t,s,e&&0===i),++i}}Aet(t,s){const i=this.r7.h9(),e=this.jc;0===i.length?(t.IP(null),t.TS(),t.GP(s),t.EP(s),e.l7(s)):(cw.set(0,0,e.x9(),e.b9()),this.bV().v$(t,null,{x$:this,C$:3,devicePixelRatio:this.jc.hst(),_j:this.jc.ast()*this.YH(),Ej:this.JH(),Gj:cw,J$:null,cU:!0}))}Pet(t,s,i){const e=i[0],n=e.Ntt(t);e.Rtt(t),i[0].hX()||(fw.Fo(i[0].cX()),fw.Lo(1),t.Au(fw)),t.gP(!0);const r=gw,h=yw,o=ww;for(const s of i)s.X9(),s.A9(r),s.Ltt(t,"beforedraw");for(let i=0,e=r.length;i<e;){const n=r[i],a=n.FY(),l=a.jY();if(!a.Rq()||!a.Htt(l.Jtt())){++i;continue}(!n.qtt()||a.Xtt()>0)&&o.push(n);const u=n.FY().qZ();h.push(n);let c=i+1;for(;c<e;++c){const t=r[c],s=t.FY();if(s.Rq()&&s.Htt(s.jY().Jtt())){if(s.qZ()!==u)break;t.qtt()?(s.Xtt()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].Ztt()){this.Ret(t,s,h);for(let i=0,e=o.length;i<e;++i){const e=o[i],n=e.FY(),r=n.jY();n.tst(!0),rw(r,t),r.Qtt(e,n,t,s),n.tst(!1)}}else{rw(l,t),l.Qtt(n,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===n)continue;const r=e.FY(),h=r.jY();rw(h,t),h.Qtt(e,r,t,s)}}i=c,hw.Sh(h),hw.Sh(o)}for(const s of i)s.Ltt(t,"afterdraw");n&&t.FP(n),hw.Sh(r),Mw=null}Ret(t,s,i){t.DP();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.FY(),r=n.jY();n.sst(!0),rw(r,t),r.ist(e,n,t)}t.NP();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.FY(),h=r.jY();rw(h,t),h.Qtt(n,r,t,s),r.sst(!1)}t.PP()}Mst(){const t={sx:this.qH(),sy:this.ZH(),s:this.YH(),a:this.JH(),w:this.xy(),h:this.Cy(),ortho:this.bq(),vpX:this.lit(),vpY:this.uit(),fv:this.tit,persist:this.Zst,fx:this.r7.Sx(),layers:{},dynamicLayers:[]};for(const s of this.Qst)if(s.i9()){const i=s.Iq();t.dynamicLayers.push({sid:s.s9(),name:s.Ac(),parentSid:i?i.s9():null,siblingIndex:s.K7(),data:s.Mst()})}else t.layers[s.s9().toString()]=s.Mst();return t}Sst(t){this.z8=t.sx,this.B8=t.sy,this.k8=t.s,this.j8=t.a,this.Uy=t.w,this.$y=t.h,this.Est=!!t.ortho,t.hasOwnProperty("vpX")&&(this.Ast=t.vpX),t.hasOwnProperty("vpY")&&(this.Dst=t.vpY),this.tit=!!t.fv,this.Zst=t.persist,this.r7.Tx(t.fx),this.c7=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.git(t);e&&e.Sst(i)}if(t.hasOwnProperty("dynamicLayers")){this.yq(),this.jc.XY();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.iit(),this.mit(r)||this.git(n))continue;let l,u;if(null===h)l=null,u=this.Yst;else{if(l=this.git(h),!l)continue;u=l.Eq()}const c=hw.Wn(hw.y8,this,l,{name:r,o8:n,a8:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({LZ:c,Let:o}),c.Sst(a)}for(const[t,i]of s){i.sort((t,s)=>t.Let-s.Let);for(const s of i){const i=s.LZ,e=s.Let;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.Z7(),this.ait(),this.hit()}pY(){return this.sit}iW(){return this.M7}i6(t){t.layout=this.pY();const s=this.jc,i=s.gZ()&&!s.hW().JY();i&&ow.Fet(),this.M7.dispatchEvent(t),i&&ow.ket()}net(t){return t.layout=this.pY(),this.M7.Gf(t)}ret(t){return t.layout=this.pY(),this.jc.net(t)}jet(){this.zet(this.Yst)}zet(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Ac()}`),this.zet(t.Eq(),s+1)}}}{const Sw=self.Gs;Sw.Bet=class extends Sw.$n{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}Yn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,Sw.Sh(this.#i),this.#f.clear(),this.#a.clear(),Sw.Sh(this.#t)}XC(t){const s=Sw.Wn(Sw.bst,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Ac().toLowerCase(),s),this.#a.set(s.s9(),s)}yQ(){return this.#s}Uet(t){this.#r=t}$et(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}Vet(t){return this.#f.get(t.toLowerCase())||null}Wet(t){return this.#a.get(t)||null}Yet(t){return t=Sw.Xn(Math.floor(t),0,this.#i.length-1),this.#i[t]}yY(t){return"number"==typeof t?this.Yet(t):this.Vet(t.toString())}MY(){return this.#i}Bit(t){this.#e=t}dY(){return this.#e}Qet(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}Jet(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*Het(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}qet(t){return this.#e===t||this.#t.includes(t)}met(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}HY(){return this.#h>0}vY(t){this.#d=t}Hit(){this.#d=null}TY(){return!!this.#d}Xet(){return this.#d}Zet(){const t=this.dY();t&&t.ait()}Ket(){const t=this.dY();t&&t.hit()}}}{const Tw=self.Gs,vw=new RegExp("<(.+?)>","g");Tw.tnt=class extends Tw.$n{constructor(t){super(),this.jc=t,this.snt=Tw.Wn(Tw.int),this.ent=null,this.nnt=[],this.rnt=new Map,this.hnt=new Map,this.ont=new Map,this.ant=[],this.lnt=[],this.unt=[],this.cnt=!1,this.fnt=!1,this.dnt=!1,this.pnt=()=>this.mnt(),this.gnt=()=>this.ynt(),this.wnt=()=>this.Mnt(),this.Snt=()=>this.Tnt(),this.vnt=t=>this.xnt(t.G0),this.bnt=t=>this.Cnt(),this.Int=t=>this.Gnt(),this._nt=t=>this.Ent(),this.Ant=[],this.Dnt=0}Yn(){this.Nnt(),this.pnt=null,this.gnt=null,this.wnt=null,this.Snt=null,this.vnt=null,this.Int=null;for(const t of this.nnt)t.T1(),t.Yn();Tw.Sh(this.nnt),this.nnt=null,this.snt.Yn(),this.snt=null,Tw.Sh(this.ant),this.ant=null,Tw.Sh(this.lnt),this.lnt=null,Tw.Sh(this.unt),this.unt=null,this.rnt.clear(),this.rnt=null,this.hnt.clear(),this.hnt=null,this.ont.clear(),this.ont=null,Tw.Sh(this.Ant),this.Ant=null,this.jc=null}Ont(){const t=this.jc.Mf();t.addEventListener("pretick",this.pnt),t.addEventListener("tick2",this.gnt),t.addEventListener("beforelayoutchange",this.wnt),t.addEventListener("layoutchange",this.Snt),t.addEventListener("instancedestroy",this.vnt),t.addEventListener("beforeload",this.bnt),t.addEventListener("afterload",this.Int),t.addEventListener("afterlayoutstart",this._nt)}Nnt(){const t=this.jc.Mf();t.removeEventListener("pretick",this.pnt),t.removeEventListener("tick2",this.gnt),t.removeEventListener("beforelayoutchange",this.wnt),t.removeEventListener("layoutchange",this.Snt),t.removeEventListener("instancedestroy",this.vnt),t.removeEventListener("beforeload",this.bnt),t.removeEventListener("afterload",this.Int),t.removeEventListener("afterlayoutstart",this._nt)}XC(t){this.snt.zu(t);const s=Tw.Rnt.Pnt(t,this);this.zu(s),this.Lnt(s),this.ont.set(s.Ac(),0)}Fnt(t){const s=this.knt(),i=t.zX(),e=s.Ys(i),n=Tw.Rnt.Fnt(`${i}:${this.ont.get(i)}`,e,this);return this.jnt(i),this.zu(n),this.jc.gZ()&&globalThis.yZ.znt(n),n}Bnt(t){return this.ont.get(t)}jnt(t){this.ont.set(t,this.ont.get(t)+1)}Unt(){for(const t of this.nnt){if(t.$nt())continue;const s=t.zX();this.jnt(s)}}Vnt(){for(const t of this.ont.keys())this.ont.set(t,0)}zu(t){this.nnt.push(t),this.rnt.set(t.Ac().toLowerCase(),t)}Zf(t){t.Wnt(),t.$nt()||(Tw.Gh(this.nnt,t),Tw.Gh(this.ant,t),Tw.Gh(this.lnt,t),Tw.Gh(this.unt,t),this.rnt.delete(t.Ac().toLowerCase()),this.Ynt(t),this.jc.gZ()&&globalThis.yZ.Qnt(t),t.M1()||t.Yn())}aZ(t){this.jc.aZ(t,this.ent,null)}yQ(){return this.jc}knt(){return this.snt}Jnt(t){this.ent=t}Hnt(){return this.ent}*qnt(){for(const t of this.nnt)yield t}*Xnt(){for(const t of this.lnt)yield t}Znt(t,s){this.hnt.has(t)||this.hnt.set(t,new Set),this.hnt.get(t).add(s)}Lnt(t){for(const s of t.Knt())this.Znt(s,t)}Ynt(t){for(const[s,i]of this.hnt.entries())i.has(t)&&(i.delete(t),0===i.size&&this.hnt.delete(s))}trt(t){if(this.hnt.has(t))return this.hnt.get(t)}srt(t,s){if(s)for(const i of this.nnt)if(s.every(t=>i.irt(t.G0,t.trackId))&&i.Ac().includes(t.Ac()))return i}ert(t){return this.rnt.get(t.toLowerCase())||null}nrt(t){for(const s of this.ant)if(s.Ac()===t)return s;for(const s of this.lnt)if(s.Ac()===t)return s;return null}*rrt(t){if(vw.test(t)){let s;vw.lastIndex=0;const i=new Set;do{if(s=vw.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.ert(t);s&&(yield s)}i.clear()}else{const s=this.ert(t);s&&(yield s)}}*hrt(t){for(const s of this.nnt)s.b1(t)&&(yield s)}ort(t){this.ant.includes(t)||this.ant.push(t),this.art()}lrt(t){Tw.Gh(this.lnt,t),this.urt()}crt(t){this.lnt.includes(t)?(t.frt(!0),t.drt(!1),t.prt(!1)):(t.frt(!1),t.drt(!0),t.prt(!1),this.ant.includes(t)||this.ant.push(t)),this.art()}mrt(t){t.frt(!1),t.drt(!1),t.grt(),Tw.Gh(this.ant,t),this.urt()}yrt(t){t.frt(!1),t.drt(!1),this.lnt.includes(t)&&(t.prt(!0),this.unt.push(t),Tw.Gh(this.lnt,t)),this.ant.includes(t)&&t.prt(!0)}wrt(t){t.frt(!1),t.drt(!1),t.prt(!1),t.N1(1),Tw.Gh(this.lnt,t)}Mrt(t){this.yrt(t),t.grt()}mnt(){const t=this.yQ();if(t.Xit())return;if(!this.cnt)return;if(this.fnt)return;let s=0;for(t.gZ()&&(s=performance.now()),this.dnt=!0;this.ant.length;){const t=this.ant.pop();t.Srt()?(t.Trt(),this.unt.push(t)):(t.vrt(),this.lnt.push(t)),0!==t.xrt()&&(this.Dnt=1)}const i=this.jc.brt(),e=this.jc.Crt(),n=this.jc.zW();for(let t=this.lnt.length-1;t>=0;t--){const s=this.lnt[t];s&&s.Irt(i,n,e)}this.dnt=!1,t.gZ()&&globalThis.yZ.Grt(performance.now()-s),0!==this.Dnt&&t.WY()}ynt(){const t=this.yQ();if(t.Xit())return;if(!this.cnt)return;if(this.fnt)return;let s,i=0;t.gZ()&&(i=performance.now());for(let t=0,i=this.unt.length;t<i;t++){const i=this.unt[t];s||(s=new Set),i.Wnt(),this._rt(i),s.add(i)}if(s){Tw.Ah(this.unt,s),this.Dnt=0;for(let t=0,s=this.lnt.length;t<s;t++)if(0!==this.lnt[t].xrt()){this.Dnt=1;break}}this.urt(),t.gZ()&&globalThis.yZ.Grt(performance.now()-i)}_rt(t){t.M1()||t.Ert()&&t.Z1()&&t.Art()&&t.Drt()}art(){this.cnt||(this.cnt=!0)}urt(){this.unt.length||this.lnt.length||this.ant.length||this.dnt||(this.cnt=!1)}Mnt(){for(this.fnt=!0;this.ant.length;)this.mrt(this.ant.pop());const t=new Set;for(const s of this.lnt)s.Mnt()&&(s.Wnt(),t.add(s));Tw.Ah(this.lnt,t),t.clear();for(const s of this.unt)s.Mnt()&&(s.Wnt(),t.add(s));Tw.Ah(this.unt,t),this.urt();for(const t of this.nnt)t.Nrt()}Tnt(){this.fnt=!1}xnt(t){const s=t.gH(),i=this.trt(s);if(i)if(this.jc.Xit())this.Ant.push(t);else for(const t of i)t.$nt()||(t.M1()?this.Zf(t):t.Ert()||(this._rt(t),this.Zf(t)))}Cnt(){for(const t of this.ant.map(t=>t))this._rt(t),this.Zf(t);for(const t of this.lnt.map(t=>t))this._rt(t),this.Zf(t)}Gnt(){for(const t of this.Ant)this.xnt(t);Tw.Sh(this.Ant);for(const t of this.nnt)t.Gnt()}Ent(){const t=this.jc.gY().dY();if(t)for(const s of this.nnt){const i=s.Ort();i&&t.Ac()===i&&this.crt(s)}}Mst(){return{timelinesJson:this.Prt(),scheduledTimelinesJson:this.Rrt(),playingTimelinesJson:this.Lrt(),markedForRemovalTimelinesJson:this.Frt(),hasRuntimeListeners:this.cnt,changingLayout:this.fnt,isTickingTimelines:this.dnt}}Sst(t){t&&(this.Vnt(),this.krt(t.timelinesJson),this.jrt(t.scheduledTimelinesJson),this.zrt(t.playingTimelinesJson),this.Brt(t.markedForRemovalTimelinesJson),this.cnt=!t.hasRuntimeListeners,this.fnt=!!t.changingLayout,this.dnt=!!t.isTickingTimelines,this.Unt(),this.art(),this.urt())}Prt(){return this.nnt.map(t=>t.Mst())}krt(t){for(const s of t){let t=this.ert(s.name);if(t)t.Sst(s);else{const i=this.Urt(s);if(!i)continue;const e=this.ert(i);t=this.Fnt(e),t.Sst(s)}t.$rt()||this.Zf(t)}}Urt(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}Rrt(){return this.Vrt(this.ant)}jrt(t){this.Wrt(t,this.ant)}Lrt(){return this.Vrt(this.lnt)}zrt(t){this.Wrt(t,this.lnt)}Frt(){return this.Vrt(this.unt)}Brt(t){this.Wrt(t,this.unt)}Yrt(t,s){if(!s)return!1;for(const i of s)if(i===t.Ac())return!0;return!1}Vrt(t){return t.map(t=>t.Ac())}Wrt(t,s){const i=new Set;for(const e of s)this.Yrt(e,t)||i.add(e);if(Tw.Ah(s,i),t){const i=t=>s=>s.Ac()===t;for(const e of t){const t=this.ert(e);t&&(s.find(i(e))||s.push(t))}}}}}{const xw=self.Gs,bw=100,Cw=.01,Iw=25,Gw=20,_w=5,Ew=[0,0],Aw=[0,0],Dw=[0,0],Nw=[0,0,0,0,0],Ow=new Array(4),Pw=[{x:0,y:0,t:0,Tt:0},{x:0,y:0,t:0,Tt:0},{x:0,y:0,t:0,Tt:0}],Rw={x:0,y:0,t:0,Tt:0};xw.Qrt=class{constructor(t,s){this.Jrt=!1,this.Hrt=t,this.qrt=[];let i=null;if(i=s?this.Hrt.Xrt(s):xw.zh(this.Hrt.Zrt()),!i)return;const e=i.i2("offsetX"),n=i.i2("offsetY");if(!e||!n)return;this.Krt=e,this.tht=n;const r=e.sht(),h=n.sht();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.iht(),s.eht()),e=h[t],n=(e.iht(),e.eht());i&&"cubic-bezier"===i.nht()&&n&&"cubic-bezier"===n.nht()?this.qrt.push(xw.Wn(xw.rht,i,n,s,e,this.qrt.length)):(i&&"line"===i.nht()&&n&&n.nht(),this.qrt.push(xw.Wn(xw.hht,s,e,this.qrt.length)))}this.Jrt=!0}Yn(){for(const t of this.qrt)t.Yn();xw.Sh(this.qrt),this.qrt=null,this.Hrt=null,this.Krt=null,this.tht=null}oht(){return this.Jrt}aht(){return this.qrt}lht(t){const s="relative"===this.Krt.uht()?t.tx():0,i="relative"===this.tht.uht()?t.nx():0;for(const t of this.qrt)t.lht(s,i)}Xw(t,s,i){let e=NaN,n=this.qrt.length;for(let i=0;i<n;i++){const n=this.qrt[i];if("cubic-bezier"===n.iG()){const i=n.Xw(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],Dw[0]=i[2],Dw[1]=n.CV())}}return Dw}cht(t,s,i){const e=i.fht;xw.te(e[0])||(e[0]=0),xw.te(e[1])||(e[1]=1);let n=NaN,r=this.qrt.length;for(let i=0;i<r;i++){const r=this.qrt[i];if("cubic-bezier"===r.iG()){const i=r.dht(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],Dw[0]=i[2],Dw[1]=r.CV())}}return Dw}pht(t,s){return this.qrt[s].pht(t)}mht(t,s){return this.qrt[s].mht(t)}},xw.rht=class{constructor(t,s,i,e,n){this.$w=n;const r=t.ght("cubic-bezier"),h=i.ght("cubic-bezier"),o=s.ght("cubic-bezier"),a=e.ght("cubic-bezier");this.yht=t.wht(),this.Mht=s.wht(),this.Sht=t.wht()+r.Tht(),this.vht=s.wht()+o.Tht(),this.xht=i.wht()+h.bht(),this.Cht=e.wht()+a.bht(),this.Iht=i.wht(),this.Ght=e.wht(),this._ht=0,this.Eht=0,this.Aht=0,this.Dht=0,this.Nht=0,this.Oht=0,this.Pht=0,this.Rht=0,this.Lht=0,this.Fht=0,this.kht=0,this.jht=0,this.zht=0,this.Bht=0,this.Uht=0,this.$ht=0,this.Vht=0,this.Wht=0,this.Yht=0,this.Qht=0,this.Jht=NaN,this.Jrt=!1,this.Hht=100,this.qht=new Array(this.Hht+1),this.qht[0]=0,this.Xht=0,this.Zht=[],this.Kht=[];for(let t=0;t<100;t++)this.Kht.push({x:0,y:0,t:0,Tt:0});this.tot()}Yn(){xw.Sh(this.qht),this.qht=null,xw.Sh(this.Zht),this.Zht=null,xw.Sh(this.Kht),this.Kht=null}iG(){return"cubic-bezier"}CV(){return this.$w}sot(){return Math.floor(this.Xht/25)}iot(){return 1/this.sot()}lht(t,s){this.eot=t,this.not=s,this.qht=new Array(this.Hht+1),this.qht[0]=0,this.tot(),this._ht=this.yht+this.eot,this.Eht=this.Mht+this.not,this.Aht=this.Sht+this.eot,this.Dht=this.vht+this.not,this.Nht=this.xht+this.eot,this.Oht=this.Cht+this.not,this.Pht=this.Iht+this.eot,this.Rht=this.Ght+this.not,this.Lht=3*(this.Aht-this._ht),this.Fht=3*(this.Dht-this.Eht),this.kht=3*(this.Nht-this.Aht),this.jht=3*(this.Oht-this.Dht),this.zht=3*(this.Pht-this.Nht),this.Bht=3*(this.Rht-this.Oht),this.Uht=3*(this.Aht-this._ht),this.$ht=3*(this._ht+this.Nht-2*this.Aht),this.Vht=this.Pht-this._ht+3*(this.Aht-this.Nht),this.Wht=3*(this.Dht-this.Eht),this.Yht=3*(this.Eht+this.Oht-2*this.Dht),this.Qht=this.Rht-this.Eht+3*(this.Dht-this.Oht)}Map(t){if(!this.Jrt)return NaN;const s=this.rot(t);return Aw[0]=this.hot(s),Aw[1]=this.oot(s),Aw}Xw(t,s){const i=this.aot(100),e=this.lot(t,s,i),n=this.uot(t,s,i,e);return Nw[0]=n.x,Nw[1]=n.y,Nw[2]=n.t,Nw[3]=n.Tt,Nw}dht(t,s,i){const e=this.aot(100),n=this.cot(t,s,e,i),r=this.uot(t,s,e,n);return Nw[0]=r.x,Nw[1]=r.y,Nw[2]=r.t,Nw[3]=r.Tt,Nw}pht(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.Lht+e*this.kht+n*this.zht,h=i*this.Fht+e*this.jht+n*this.Bht,o=xw.sr(r,h);return Ew[0]=r/o,Ew[1]=h/o,Ew}mht(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.Lht+e*this.kht+n*this.zht,h=i*this.Fht+e*this.jht+n*this.Bht;return Math.atan2(h,r)}rot(t){if(!this.Jrt)return;let s=t*this.qht[this.Hht],i=0,e=this.Hht,n=0;for(;i<e;)n=i+((e-i)/2|0),this.qht[n]<s?i=n+1:e=n;this.qht[n]>s&&n--;const r=this.qht[n];return r===s?n/this.Hht:(n+(s-r)/(this.qht[n+1]-r))/this.Hht}hot(t){return this.Jrt?self.$u.hc("cubicbezier")(t,this.yht+this.eot,this.Sht+this.eot,this.xht+this.eot,this.Iht+this.eot):NaN}oot(t){return this.Jrt?self.$u.hc("cubicbezier")(t,this.Mht+this.not,this.vht+this.not,this.Cht+this.not,this.Ght+this.not):NaN}aot(t){if(t=t||100,this.Zht.length>=t)return this.Zht;this.Zht=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.Uht*i,h=this.$ht*e,o=this.Vht*n,a=this.Wht*i,l=this.Yht*e,u=this.Qht*n,c=this._ht+r+h+o,f=this.Eht+a+l+u;this.Kht[s].x=c,this.Kht[s].y=f,this.Kht[s].t=i,this.Kht[s].Tt=0,this.Zht[s]=this.Kht[s]}return this.Zht}lot(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.Jht))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.Tt=o*o+a*a,h.Tt<n&&(n=h.Tt,r=e)}else{for(let e=this.Jht;e<this.Jht+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.Tt=o*o+a*a,h.Tt<n&&(n=h.Tt,r=e)}for(let e=this.Jht;e>this.Jht-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.Tt=o*o+a*a,h.Tt<n&&(n=h.Tt,r=e)}}return this.Jht=r,r}cot(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.Jht))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.Tt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.Tt<n&&(n=o.Tt,r=h)}else{for(let h=this.Jht;h<this.Jht+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.Tt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.Tt<n&&(n=o.Tt,r=h)}for(let h=this.Jht;h>this.Jht-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.Tt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.Tt<n&&(n=o.Tt,r=h)}}return this.Jht=r,r}uot(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;Ow[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.Uht*r,f=this.$ht*o,d=this.Vht*a,p=this.Wht*r,m=this.Yht*o,g=this.Qht*a,y=this._ht+c+f+d,w=this.Eht+p+m+g,M=y-t,S=w-s,T=M*M+S*S;if(T<h){h=T,e=i,Rw.x=y,Rw.y=w,Rw.t=r,Rw.Tt=T,n=Rw;break t}const v=Pw[i-1];v.x=y,v.y=w,v.t=r,v.Tt=T,Ow[i]=v}Ow[3]=i[a],i=Ow}while(r++<20);return n}tot(){this.Jrt=!0;let t=this.hot(0),s=this.oot(0),i=0;for(let e=1;e<=this.Hht;e++){const n=this.hot(.01*e),r=this.oot(.01*e),h=t-n,o=s-r;i+=xw.sr(h,o),this.qht[e]=i,t=n,s=r}this.Xht=i}},xw.hht=class{constructor(t,s,i){this.$w=i,this.fot=t.wht(),this.dot=s.wht(),this.eot=0,this.not=0}Yn(){}iG(){return"line"}CV(){return this.$w}lht(t,s){this.eot=t,this.not=s}tx(){return this.fot+this.eot}nx(){return this.dot+this.not}}}{const Lw=self.Gs,Fw=0,kw=1;Lw.Rnt=class extends Lw.$n{constructor(t,s,i){super(),this.jc=i.yQ(),this.pot=i,this.mot=s,this.Hn=t,this.got=[],this.yot=0,this.wot=null,this.Mot=0,this.Sot(),this.Tot=null,this.vot=null,this.xot=0,this.bot=0,this.Cot=1,this.Iot=0,this.Got=-1,this._ot=1,this.Eot=!1,this.Aot=!1,this.Dot=!1,this.Not=!0,this.Oot=!1,this.Pot=!1,this.Rot=-1,this.Lot=!1,this.Fot=!1,this.kot=!1,this.jot=!1,this.zot=NaN,this.Bot=[""],this.Uot="",this.$ot=!1,this.Dnt=0,this.Vot=0,this.Wot=null,this.Yot=null}static Pnt(t,s){const i=s.knt(),e=i.Qot(),n=i.Ys(t[e]),r=Lw.Wn(Lw.Rnt,t[e],n,s);return r.Jot(!0),r}static Fnt(t,s,i){return Lw.Wn(Lw.Rnt,t,s,i)}Yn(){if(this.M1())return;const t=this.jc.Mf();this.pot.mrt(this),this.pot.Mrt(this);for(const t of this.got)t.Yn();Lw.Sh(this.got),this.got=null,this.jc=null,this.pot=null,this.mot=null,this.Oot=!0,this.Tot=null,this.vot=null,this.Hot(t)}Hot(t){const s=Lw.Wn(Lw.Event,"timelinestatereleased");s.qot=this,t.dispatchEvent(s)}iG(){return 0}Sot(){for(const t of this.mot.Zot().Xot())this.yot=this.got.push(Lw.Kot.XC(this,t))}tat(){return this.pot}yQ(){return this.jc}Zrt(){return this.got}sat(t,s,i,e){if(!this.Vot)return;let n;for(let r=0;r<this.got.length;r++){let h=this.got[r];if(t!==h.J1())continue;const o=h.i2(i);o&&s.constructor===o.iat().constructor&&o.uht()===e.uht()&&(n||(n=[]),n.push(o))}return n}$rt(){return!!this.got.length}Xrt(t){for(const s of this.got)if(Lw.Ze(s.t2(),t))return s;return null}eat(t){for(const s of this.got)if(!s.nat()&&Lw.Ze(s.Ac(),t))return s;return null}P3(t){this.Hn=t}Ac(){return this.Hn}rat(){return this.mot}zX(){return this.mot.Ac()}G1(){return this.mot.G1()}I1(t){this.mot.I1(t)}hat(){return this.mot.hat()}oat(t){this.mot.oat(t)}aat(){return this.mot.aat()}lat(t){this.mot.lat(t)}uht(){return this.mot.uht()}uat(t){this.mot.uht(t)}Q1(t){for(const s of this.Zrt())s.Q1(t)}E1(){return this.mot.E1()}_1(t){return this.mot._1(t)}D1(){return this.mot.D1()}A1(t){return this.mot.A1(t)}U0(){return this.mot.U0()}cat(){return this._ot}fat(t){return this.mot.fat(t)}N1(t){if(t=Number(t),Lw.te(t))return this.Cot=t}O1(){return this.Cot}Ort(){return this.mot.Ort()}dat(){return this.mot.dat()}pat(){return this.mot.pat()}mat(){return this.Iot}gat(){return!this.IsPlaying()||this.Cot>0}yat(){return this.IsPlaying()?"playing":this.j1()?"paused":this.Z1()?"complete":"other"}R1(){return this.Tot||(this.Tot=new Promise(t=>{this.vot=t})),this.Tot}grt(){this.Tot&&(this.vot(),this.Tot=null,this.vot=null)}wat(t){this.Bot=Lw.Rnt.Mat(t),this.$ot=!0}P1(){return this.Bot}Sat(){return this.$ot&&(this.Uot=this.Bot.join(" ")),this.$ot=!1,this.Uot}b1(t){if(!this.Bot)return!1;if(!this.Bot.length)return!1;const s=Lw.Rnt.Mat(t);return!!s&&!!s.length&&s.every(Lw.Rnt.Tat,this)}vat(){Lw.uQ.xat&&this.constructor===Lw.Rnt&&(Lw.uQ.xat.aQ.bat(this),this.pot.aZ(Lw.uQ.xat.aQ.Cat),this.pot.aZ(Lw.uQ.xat.aQ.Iat),this.pot.aZ(Lw.uQ.xat.aQ.Gat),this.pot.aZ(Lw.uQ.xat.aQ._at),Lw.uQ.xat.aQ.Eat())}Aat(){this.Rot=this.jc.LW()}Drt(){this.kot||(this.kot=!0,Lw.uQ.xat&&this.constructor===Lw.Rnt&&(Lw.uQ.xat.aQ.bat(this),this.pot.aZ(Lw.uQ.xat.aQ.Dat),this.pot.aZ(Lw.uQ.xat.aQ.Nat),this.pot.aZ(Lw.uQ.xat.aQ.Oat),this.pot.aZ(Lw.uQ.xat.aQ.Pat),Lw.uQ.xat.aQ.Eat()))}frt(t){this.Eot=t}Rat(){return this.Rot===this.jc.LW()}IsPlaying(t=!1){return!!this.Rat()||!(!this.Lat()||t)||this.Eot}Fat(){return this.IsPlaying(!0)}j1(){return this.kat()}kat(){return!(this.M1()||this.Lat()||this.Fat()||this.Z1())}drt(t){this.Aot=t}Lat(){return this.Aot}jat(t){this.Not=t;const s=this.E1(),i=this.D1();if(s||i){if(s&&!i);else if(!s&&i){const t=this.hU();1===this.Iot&&(t<=0||t>=this.G1())&&(this.Not=!0)}}else{const t=this.hU();(t<=0||t>=this.G1())&&(this.Not=!0)}}Z1(){return this.Not}M1(){return this.Oot}prt(t){this.Pot=t}Srt(){return this.Pot}zat(t){this.Lot=t}Bat(){return this.Lot}Jot(t){this.Fot=!!t}$nt(){return this.Fot}Art(){return this.Dot}hU(){return this.xot}C1(t){if(t=Number(t),!Lw.te(t))return;const s=this.hU();this.Uat(t),this.jat(!1),this.Z1()||this.zat(!0),(this.Fat()||this.Lat()||!this.Dot)&&(this.Fat()||this.Lat()||this.Dot?this.Fat()?this.T1():this.Lat()&&(this.pot.mrt(this),this.$at()):this.$at()),this.Vat(),this.Wat(this.hU(),!1,!0,!0,s),this.Yat(),this.Dnt&&this.yQ().WY(),this.Qat()}Uat(t){Lw.te(t)||(t=this.G1()),t<0?this.xot=0:t>=this.G1()?this.xot=this.G1():this.xot=t}Jat(t){Lw.te(t)||(t=this.G1()),t<0?this.xot=0:t>=this.G1()?this.xot=this.G1():this.xot=t;for(const t of this.got)t.Hat()}Qat(){Lw.uQ.xat&&this.constructor===Lw.Rnt&&(Lw.uQ.xat.aQ.bat(this),this.pot.aZ(Lw.uQ.xat.aQ.qat),this.pot.aZ(Lw.uQ.xat.aQ.Xat),this.pot.aZ(Lw.uQ.xat.aQ.Zat),Lw.uQ.xat.aQ.Eat())}Kat(){if(this.E1())return!0;if(this.D1()&&1===this.Iot){if(this.gat()){if(this.hU()>=this.G1())return!1}else if(this.hU()<=0)return!1}else if(!this.E1()&&!this.D1())if(this.gat()){if(this.hU()>=this.G1())return!1}else if(this.hU()<=0)return!1;return!0}v1(){this.M1()||this.Kat()&&this.Play(!0)}Play(t=!1){return!this.M1()&&!this.Lat()&&(this.Fat()&&this.Rat()?this.tlt():!this.Fat()&&!!(this.Z1()||t||this.Bat())&&this.slt())}tlt(){return this.zat(!1),this.pot.lrt(this),this.pot.crt(this),this.R1(),!0}slt(){return this.zat(!1),this.pot.crt(this),this.R1(),!0}T1(t=!1){this.M1()||(this.jat(t),this.pot.yrt(this),this.Z1()&&this.grt())}zf(t=!0,s=!1){if(this.M1())return;if(!this.Fat()&&this.Lat())return this.pot.mrt(this);if(this.Z1())return;this.T1(!0),this.gat()?this.Uat(0):this.Uat(this.G1());const i=this.hU();this.Vat(),s?this.ilt(i):this.Wat(i,!1,!1,!0),t&&this.Qat(),this.Yat(),this.Dnt&&t&&this.yQ().WY()}elt(){this.zf(!1,!0)}ilt(t){this.Wat(t,!1,!1,!0,NaN,!1,!0)}Mnt(){return!!this.M1()||!(!this.yQ().Xit()&&this.nlt())&&(this.pot.wrt(this),this.yQ().Xit()||this.elt(),!0)}$at(){this.vrt(!0)}Trt(){this.vrt(!1,!0),this.frt(!1),this.drt(!1)}vrt(t=!1,s=!1){if(!this.Srt()||s)if(t){this.kot=!1,this.Dot=!0,this.jot=!0,this.Vat();for(const t of this.got)t.vrt();this.Yat()}else if(this.frt(!0),this.drt(!1),this.vat(),this.Z1()){this.Rot=-1,0!==this.Iot&&(this.Cot=Math.abs(this.Cot)),this.Iot=0,this.Got=-1,this._ot=1,this.Not=!1,this.kot=!1,this.Dot=!0,this.jot=!0,this.gat()?this.Uat(0):this.Uat(this.G1()),this.Vat();for(const t of this.got)t.vrt();this.Yat()}else{-1!==this.Got&&(this.Iot=this.Got),this.jot=!0,this.kot=!1,this.Vat();for(const t of this.got)t.rlt();this.Yat()}}xrt(){return this.Dnt}Vat(){this.Vot=0;for(const t of this.got)t.ZD()&&(this.Vot=1)}Yat(){this.Dnt=0;for(const t of this.got)t.hlt(),0===this.Dnt&&1===t.xrt()&&(this.Dnt=1),this.wot||1!==t.olt()||(this.wot||(this.wot=[]),this.Mot=this.wot.push(t))}Irt(t,s,i){if(this.pat()){if(0===t&&0===this.zot)return;this.zot=t,t=i}else{if(0===i&&0===this.zot)return;this.zot=i,t=i,s=1}const e=this.xot+this.bot,n=e+t*s*this.Cot,r=this.mot.llt;n<0?(this.xot=0,this.bot=-n):n>=r?(this.xot=r,this.bot=this.xot-n):(this.xot=n,this.bot=0);let h=!1,o=!1;const a=this.E1(),l=this.D1();let u;a||l?a&&!l?this.Cot>0?this.xot>=r&&(this.Jat(0),o=!0):this.xot<=0&&(this.Jat(r),o=!0):!a&&l?this.Cot>0?this.xot>=r&&(this.Uat(r),this.N1(-1*this.O1()),o=!0,1===this.Iot?this._ot<this.U0()?(this._ot++,this.Iot=0):h=!0:0===this.Iot&&(this.Iot=1)):this.xot<=0&&(this.Uat(0),this.N1(-1*this.O1()),o=!0,1===this.Iot?this._ot<this.U0()?(this._ot++,this.Iot=0):h=!0:0===this.Iot&&(this.Iot=1)):a&&l&&(this.Cot>0?this.xot>=r&&(this.Uat(r),this.N1(-1*this.O1()),o=!0,this.Iot++,Lw.wrap(this.Iot,0,2)):this.xot<=0&&(this.Uat(0),this.N1(-1*this.O1()),o=!0,this.Iot++,Lw.wrap(this.Iot,0,2))):this.Cot>0?this.xot>=r&&(this._ot<this.U0()?(this._ot++,this.Jat(0),o=!0):(this.Uat(r),h=!0)):this.xot<=0&&(this._ot<this.U0()?(this._ot++,this.Jat(r),o=!0):(this.Uat(0),h=!0));const c=this.yot;if(h){for(u=0;u<c;u++)this.got[u].ult();return this.T1(!0),void this.Aat()}const f=this.Mot;for(u=0;u<f;u++){const t=this.wot[u],s=t.clt();this.xot-s<0&&e-s>0?t.flt(s):t.flt(this.xot)}if(1===this.Vot)for(u=0;u<c;u++){const t=this.got[u],s=t.clt();this.xot-s<0&&e-s>0?t.Sc(s,!0,!1,o,this.jot,!1):t.Sc(this.xot,!0,!1,o,this.jot,!1)}else for(u=0;u<c;u++)this.got[u].Sc(this.xot,!0,!1,o,this.jot,!1);if(!this.IsPlaying()&&this.Wot){const t=this.Wot.hU()+this.Wot.plt().dlt().clt(),s=this.xot-t;this.xot-=s,0!==this.bot&&(this.bot-=s),this.Wot=null}for(u=0;u<f;u++){const t=this.wot[u],s=t.clt();this.xot-s<0&&e-s>0?t.mlt(s):t.mlt(this.xot)}this.jot&&(this.jot=!1)}glt(t){this.Wot=t}ylt(){return this.Wot}wlt(t,s,i,e=!1){let n=t;if("number"==typeof s&&!isNaN(s)){const t=this.hU()-i.clt(),r=s-i.clt();t<0&&r>0&&(n=i.clt(),e&&this.Uat(n))}return n}Wat(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const s of this.got){const e=this.wlt(t,n,s);s.flt(e,i)}for(const r of this.got){const o=this.wlt(t,n,r,!0);r.Sc(o,s,i,e,this.jot,h)}for(const s of this.got){const e=this.wlt(t,n,s);s.mlt(e,i)}this.jot&&r&&(this.jot=!1)}Mlt(){const t=this.mot.Zot().Slt(),s=Lw.Kot.XC(this,t);return this.yot=this.got.push(s),s}Wnt(){if(!this.M1())for(const t of this.got)t.Tlt()}Nrt(){for(const t of this.got)t.Nrt()}*uH(){for(const t of this.got)t.J1()&&(yield t.J1())}vlt(){for(const t of this.got)t.xlt()}blt(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.got[i];if(!t)return;return t.Clt(s),void this.pot.Znt(s.gH(),this)}for(const i of this.got)if(i.nat()){if(t){if(i.t2()!==t)continue;i.Clt(s),this.pot.Znt(s.gH(),this);break}if(!i.Ilt()){i.Clt(s),this.pot.Znt(s.gH(),this);break}}}}irt(t,s){for(const i of this.got)if(i.nat())if(s){if(s===i.t2()&&t===i.J1())return!0}else if(t===i.J1())return!0;return!1}Ert(){return this.got.some(t=>!t.nat()||t.Glt())}nlt(){return this.got.some(t=>{if(t.nat()){if(!t.Glt())return!1;const s=t.gH();return!!s&&s.g8()}return!1})}i2(t){for(const s of this.Zrt())for(const i of s._lt())if(i.Elt()===t)return i}Alt(t){for(const s of this.got)if(t===s.J1())return s;return null}Dlt(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.Zrt())for(const i of t.Nlt())if(s.every(t=>i.WX(t)))return i}Knt(){const t=[];for(const s of this.Zrt())t.push(s.gH());return t.filter(t=>t)}Gnt(){for(const t of this.Zrt())t.Gnt()}Mst(){return{tracksJson:this.Olt(),name:this.Hn,playheadTime:this.hU(),playbackRate:this.Cot,pingPongState:this.Iot,resumePingPongState:this.Got,currentRepeatCount:this._ot,isPlaying:this.Eot,isScheduled:this.Aot,initialStateSet:this.Dot,finishedTriggers:this.kot,complete:this.Not,released:this.Oot,markedForRemoval:this.Pot,completedTick:this.Rot,implicitPause:this.Lot,isTemplate:this.Fot,tags:this.Bot.join(" "),stringTags:this.Uot,tagsChanged:this.$ot,firstTick:this.jot}}Sst(t){t&&(this.Plt(t.tracksJson),this.Hn=t.name,this.xot=t.playheadTime,this.Cot=t.playbackRate,this.Iot=t.pingPongState,this.Got=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this._ot=t.currentRepeatCount,this.Eot=!!t.isPlaying,this.Aot=!!t.isScheduled,this.Dot=!!t.initialStateSet,this.kot=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Not=!!t.complete,this.Oot=!!t.released,this.Pot=!!t.markedForRemoval,this.Rot=t.completedTick,this.Lot=!!t.implicitPause,this.Fot=!!t.isTemplate,this.Bot=t.tags.split(" "),this.Uot=t.stringTags,this.$ot=!!t.tagsChanged,this.jot=!!t.firstTick)}Olt(){return this.got.map(t=>t.Mst())}Plt(t){this.vlt(),t.forEach((t,s)=>{this.got[s].Sst(t)}),this.got.filter(t=>t.Glt())}static Tat(t){const s=this.P1();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Mat(t){if(Lw.be(t))return t.slice(0);if(Lw.le(t))return t.split(" ");throw new Error("invalid tags")}Rlt(){return this.Yot||(this.Yot=Lw.Wn(self.B1,this)),this.Yot}}}{const jw=self.Gs,zw=0,Bw=1,Uw=2;jw.Kot=class extends jw.$n{constructor(t,s){super(),this.Hrt=t,this.Llt=s,this.Flt=s.Zot(),this.klt=NaN,this.jlt=NaN,this.zlt=null,this.Blt=null,this.Ult=!1,this.YD=s.clt()>0,this.$lt=!1,this.Vlt=!1,this.Wlt=NaN,this.Ylt=null,this.Qlt=this.Llt.plt().Jlt(),this.Hlt=[],this.qlt(),this.Xlt=0,this.Dnt=0,this.Zlt=0,this.Klt=null}static XC(t,s){return jw.Wn(jw.Kot,t,s)}Yn(){this.Qlt=null;for(const t of this.Hlt)t.Yn();jw.Sh(this.Hlt),this.Hlt=null,this.Hrt=null,this.zlt=null,this.Blt=null,this.Llt=null,this.Ylt=null}qlt(){for(const t of this.Llt.sut().tut())this.Hlt.push(jw.iut.XC(this,t))}Tlt(){for(const t of this.Hlt)t.Tlt()}Nrt(){for(const t of this.Hlt)t.Nrt();this.zlt=null,this.Blt=null}eut(){return this.Hrt}yQ(){return this.Hrt.yQ()}Nlt(){return this.Qlt||(this.Qlt=this.Llt.plt().Jlt()),this.Qlt}_lt(){return this.Hlt}i2(t){for(let s=0;s<this.Hlt.length;s++){const i=this.Hlt[s];if(i.Elt()===t)return i}}nut(){this.zlt||this.J1()}rut(){return!!this.zlt&&!this.zlt.kY()}Glt(){if(!this.nat())return!1;if(this.Ult)return!1;const t=this.hut(),s=this.yQ().NY(t);return!!s&&!s.kY()}gH(){if(!this.nat())return;const t=this.out();return-1!==t?this.yQ().C7(t):void 0}aut(){return this.Hrt.Zrt().indexOf(this)}xlt(){this.zlt=null,this.klt=NaN,this.Blt=null,this.jlt=NaN,this.Ult=!0}Ilt(){return!!this.zlt}J1(){if(this.Ult)return;if(this.zlt&&this.rut())return this.zlt;const t=this.hut();return this.zlt=this.yQ().NY(t),this.zlt}Clt(t){if(this.Ult=!1,this.zlt!==t){this.Nrt(),this.zlt=t,this.jlt=t.gH().CV(),this.klt=t.LX(),this.Blt=t.FY();for(const s of this.lut()){const i=s.uut,e=s.cut;switch(i.fut()){case"instance-variable":{e.dut();const i=t.gH(),n=i.mut(s.name),r=i.gut(n),h=i.yut(n);r===s.name&&h===s.type&&e.wut(n);break}case"behavior":{const i=s.b0,n=this.gH(),r=t.gH(),h=e.I0(r);if(i&&h){const t=i.Ac();n.Mut(t),r.Mut(t),e.dut(),e.Sut(h.s9())}break}}}}}*lut(){for(const t of this.Hlt){const s=t.iat(),i=this.gH(),e={uut:t,cut:s};switch(t.fut()){case"world-instance":e.Tut=t.Elt();break;case"instance-variable":{const t=s.dut();e.name=i.gut(t),e.type=i.yut(t);break}case"effect":{const t=i.BH(),n=s.vut(t);e.xut=n;break}case"behavior":{const t=s.I0(i);e.b0=t;break}case"plugin":e.ZJ=i.KJ()}yield e}}FY(){if(this.Blt&&this.rut())return this.Blt;const t=this.J1();return t&&(this.Blt=t.FY()),this.Blt}dlt(){return this.Llt}hut(){return isNaN(this.klt)?this.Llt.hut():this.klt}but(t){this.Llt.but(t)}aat(){return this.Llt.aat()}lat(t){this.Llt.lat(t)}uht(){return this.Llt.uht()}t2(){return this.Llt.t2()}clt(){return this.Llt.clt()}Cut(){return this.Llt.Cut()}Iut(t){this.Llt.Iut(t)}uat(t){this.Llt.uat(t)}Q1(t){for(const s of this.Nlt())s.Q1(t);for(const s of this._lt())s.Q1(t)}Gut(){return this.Llt.Gut()}_ut(t){this.Llt._ut(t)}out(){return isNaN(this.jlt)?this.Llt.out():this.jlt}Eut(t){this.Llt.Eut(t)}Aut(t){this.Llt.Aut(t)}Dut(){const t=this.J1();return t&&t.g0().Nut()?t.g0().Dut():this.Llt.Dut()}Out(t){this.Llt.Out(t)}Put(){const t=this.J1();return t&&t.g0().Nut()?t.g0().Put():this.Llt.Put()}iG(){return this.Llt.iG()}Ac(){return this.Llt.Ac()}nat(){return 0===this.iG()}Rut(){return 1===this.iG()}Lut(){return 2===this.iG()}Fut(){return this.Xlt}xrt(){return this.Dnt}olt(){return this.Zlt}ZD(){return this.YD}Hat(){for(const t of this.Hlt)t.Hat();const t=this.eut(),s=t.hU();t.gat()?this.Ylt=this.kut(s):this.Ylt=this.jut(s)}vrt(){if(this.nut(),!this.rut()&&this.nat())return;const t=this.eut().gat(),s=t?0:this.Cut();for(const t of this.Hlt)t.vrt(s),0===this.Xlt&&1===t.Fut()&&(this.Xlt=1),0===this.Dnt&&1===t.xrt()&&(this.Dnt=1);this.Zlt=0,this.Hlt.some(t=>t.olt())&&(this.Zlt=1),this.Ylt=t?this.kut(s):this.jut(s),this.$lt=!1,this.Vlt=!1,this.Sc(s),this.zut(this.Ylt)}But(){const t=this.Uut(),s=this.$ut();let i,e;return this.Hrt.gat()?(i={hU:()=>t.hU()+this.clt(),P1:()=>t.Vut()||"<no tags>"},e={hU:()=>s?s.hU()+this.clt():this.Cut(),P1:()=>s?.Vut()||"<no tags>"}):(i={hU:()=>s?s.hU()+this.clt():this.Cut(),P1:()=>s?.Vut()||"<no tags>"},e={hU:()=>t.hU()+this.clt(),P1:()=>t.Vut()||"<no tags>"}),[i,e]}Uut(){const t=this.Hrt.hU()-this.clt();return this.Hrt.gat()?this.kut(t):this.jut(t)}$ut(){return this.Hrt.gat()?this.Uut().iht():this.Uut().Wut()}rlt(){if(this.nut(),!this.rut()&&this.nat())return;const t=this.Hrt.gat(),s=this.Hrt.hU()-this.clt();this.Ylt=t?this.kut(s):this.jut(s);for(const t of this.Hlt)t.rlt(s)}ult(){if(!this.eut().Z1()&&(this.nut(),(this.rut()||!this.nat())&&!this.YD)){const t=this.Hrt.hU();t>=this.clt()+this.Cut()?this.Sc(this.Cut(),!0,!1,!0,!1,!1,!0):t<=0&&this.Sc(0,!0,!1,!0,!1,!1,!0)}}hlt(){for(let t=0,s=this.Hlt.length;t<s;t++){const s=this.Hlt[t];s.hlt(),0===this.Xlt&&1===s.Fut()&&(this.Xlt=1),0===this.Dnt&&1===s.xrt()&&(this.Dnt=1)}}flt(t,s=!1){const i=this.Hlt.length;for(let e=0;e<i;e++)this.Hlt[e].flt(t,s)}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.zlt||this.J1();const o=this.zlt&&!this.zlt.kY(),a=0===this.Llt.Qc;if((o||!a)&&!(r&&a&&this.gH().g8()||(t-=this.clt())<0)){this.Yut(t,s),this.Qut(t,s,n),!this.eut().IsPlaying()&&this.eut().ylt()&&(t=this.eut().ylt().hU());for(let s=0,n=this.Hlt.length;s<n;s++)this.Hlt[s].Sc(t,i,e,h);this.Jut(t,s),0!==this.Xlt&&(this.Blt||(this.Blt=this.zlt.FY()),this.Blt&&this.Blt.FZ())}}mlt(t,s=!1){const i=this.Hlt.length;for(let e=0;e<i;e++)this.Hlt[e].mlt(t,s)}Yut(t,s){if(s&&this.YD&&!this.$lt){if(this.eut().gat()){if(t<0)return}else if(t>this.Cut())return;for(const t of this.Hlt)t.vrt();this.$lt=!0}}Jut(t,s){if(s&&this.YD&&!this.Vlt)if(this.eut().gat()){if(t>=this.Cut()){for(const t of this.Hlt)t.Sc(this.Cut(),!1,!0);this.Vlt=!0}}else if(t<=0){for(const t of this.Hlt)t.Sc(0,!1,!0);this.Vlt=!0}}Qut(t,s,i){if(this.Klt=null,i)return;if(!s)return;if(!jw.uQ.xat)return;const e=this.eut();if(e.gat()){const s=this.Ylt.iht(),i=this.Ylt.hU(),n=s?s.hU():e.G1();(t<=i||t>=n)&&(this.Ylt=this.Flt.Hut(t,this.Llt),s&&this.qut(this.Ylt))}else{if(!this.Flt.Xut(t,this.Llt))return;this.Ylt||(this.Ylt=this.Flt.Xut(t,this.Llt));const s=this.Ylt.Wut(),i=this.Ylt.hU(),e=s?s.hU():0;(t>=i||t<=e)&&(this.Ylt=this.Flt.Xut(t,this.Llt),this.Ylt&&this.qut(this.Ylt))}}kut(t){return this.Flt.Zut(t,this.Llt)||this.Flt.Hut(t,this.Llt)}jut(t){return this.Flt.Zut(t,this.Llt)||this.Flt.Xut(t,this.Llt)}qut(t,s=!1){if(!jw.uQ.xat)return;const i=this.eut(),e=i.tat();jw.uQ.xat.aQ.bat(i),jw.uQ.xat.aQ.Kut(t),e.aZ(jw.uQ.xat.aQ.tct),e.aZ(jw.uQ.xat.aQ.qut),i.IsPlaying()||s||i.glt(t),jw.uQ.xat.aQ.Eat(i),jw.uQ.xat.aQ.sct(t),this.Klt=t}ict(){return this.Klt}zut(t){this.qut(t,!0)}ect(){return this.Llt.plt().nct()}rct(){const t=this.Llt.sut().hct(),s=jw.iut.XC(this,t);return this.Hlt.push(s),s}oct(t){this.Llt.plt().act(t)}lct(t){for(const s of this.Hlt)s.lct(t)}uct(){for(const t of this.Hlt)t.uct()}cct(){if(this.nut(),this.rut()||!this.nat())for(const t of this.Hlt)t.cct()}fct(){if(this.nut(),!this.rut()&&this.nat())return;let t=!1;for(const s of this.Hlt){const i=s.fct();!t&&i&&(t=!0)}if(t){const t=this.ect();t.C1(this.eut().hU()),t.Q1("noease"),t._ut(!0),t.wat("")}}Gnt(){isNaN(this.Wlt)||this.dct(this.Wlt),this.Wlt=NaN}Mst(){const t=this.J1(),s=t?t.LX():this.hut();return{propertyTracksJson:this.pct(),lastKeyframeDataItemJson:this.mct(),initialStateOfNestedSet:this.$lt,endStateOfNestedSet:this.Vlt,instanceUid:s,cleared:this.Ult}}Sst(t){if(t){this.gct(t.propertyTracksJson),this.yct(t.lastKeyframeDataItemJson),this.Wlt=t.instanceUid,this.$lt=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.$lt=t.initialStateOfNestedSet),this.Vlt=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Vlt=t.endStateOfNestedSet),this.Ult=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Hlt)0===this.Xlt&&1===t.Fut()&&(this.Xlt=1),0===this.Dnt&&1===t.xrt()&&(this.Dnt=1);this.Zlt=0,this.Hlt.some(t=>t.olt())&&(this.Zlt=1)}}mct(){return this.Llt.plt().wct(this.Ylt)}pct(){return this.Hlt.map(t=>t.Mst())}gct(t){t.forEach((t,s)=>{this.Hlt[s].Sst(t)})}dct(t){if(!jw.te(t))return;const s=this.yQ().NY(t);s&&this.eut().blt(this.Llt.t2(),s,this.aut())}yct(t){const s=this.Llt.plt();this.Ylt=s.Mct(t)}}}{const $w=self.Gs;$w.iut=class extends $w.$n{constructor(t,s){super(),this.Sct=t,this.Tct=s,this.vct=s.sut(),this.Xlt=0,this.Dnt=0,this.Zlt=0,this.xct=this.iat(),this.bct=this.Tct.Ict().Cct(),this.Gct=null,this._ct=null}static XC(t,s){return $w.Wn($w.iut,t,s)}Yn(){this.Sct=null,this.xct&&(this.xct.Yn(),this.xct=null),this.bct=null,this.Tct=null,this.vct=null}Fut(){return this.Xlt}xrt(){return this.Dnt}olt(){return this.Zlt}Ect(){return!!this._ct}Act(t){this._ct=t}Dct(){return this._ct}Nct(){return this.Sct}Oct(){return this.Tct}sut(){return this.vct}eut(){return this.Sct.eut()}yQ(){return this.Sct.yQ()}J1(){return this.Sct.J1()}iat(){if(this.xct)return this.xct;let t;switch(this.Tct.fut()){case"behavior":t=new $w.iut.Pct(this);break;case"effect":t=new $w.iut.Rct(this),this.Dnt=1;break;case"instance-variable":t=new $w.iut.Lct(this);break;case"plugin":t=new $w.iut.Fct(this),this.Dnt=1;break;case"world-instance":t=new $w.iut.kct(this),this.Dnt=1,this.Xlt=1;break;case"value":t=new $w.iut.jct(this);break;case"audio":t=new $w.iut.zct(this)}return this.xct=t,this.xct}fut(){return this.Tct.fut()}Bct(t){this.Tct.Bct(t)}Uct(){return this.Tct.$ct()}Vct(t){this.Tct.Wct(t)}s2(){return this.iat().Yct()}Elt(){return this.Tct.Qct()}Jct(t){this.Tct.Hct(t)}qct(){return this.Tct.iG()}Xct(t){this.Tct.Zct(t)}Kct(){return this.sut().tft(this.Tct).iG()}sft(){return this.Tct.sft()}ift(t){this.Tct.ift(t)}eft(){return this.Tct.eft()}nft(t){this.Tct.nft(t)}Gut(){return this.Tct.Gut()}_ut(t){this.Tct._ut(t)}aat(){return this.Tct.aat()}lat(t){this.Tct.lat(t)}uht(){return this.Tct.uht()}uat(t){this.Tct.uat(t)}Q1(t){for(const s of this.rft())s.Q1(t)}hft(){return this.Tct.hft()}rft(){return this.bct||(this.bct=this.Tct.Ict().Cct()),this.bct}sht(){return this.Tct.Ict().sht()}oft(t){return this.vct.oft(t,this.Tct)}aft(t){return this.vct.aft(t,this.Tct)}lft(t){let s,i=this.vct.oft(t,this.Tct);return i?s=this.vct.uft(t,this.Tct):(i=this.vct.aft(t,this.Tct),s=this.vct.cft(t,this.Tct)),{start:i,end:s}}*fft(){for(const t of this.rft())yield t.wht()}*dft(){for(const t of this.rft())yield t.hU()}Tlt(){this.iat().Tlt()}Nrt(){this.iat().Nrt()}pft(){return this.iat().pft()}Hat(){this.iat().Hat()}vrt(t){this.iat().vrt(),this.Gct=this.mft(t),this.hlt()}rlt(t){this.iat().rlt(),this.Gct=this.mft(t)}hlt(){const t=this.Nct();if(this.Zlt=0,t.nat()){const s=this.eut(),i=t.J1(),e=this.iat(),n=this.Elt();if(e.gft()){const t=s.sat(i,e,n,this);t&&t.length&&(this.Zlt=1)}else this.Zlt=0}}mft(t){const s=this.eut();return this.vct.oft(t,this.Tct)||(s.gat()?this.vct.aft(t,this.Tct):this.vct.cft(t,this.Tct))}flt(t,s){let i,e;if(s)i=this.vct.aft(t,this.Tct);else{if(this.Gct){const s=this.eut(),i=this.Gct.iht(),e=this.Gct.hU(),n=i?i.hU():s.G1();(t<=e||t>=n)&&(this.Gct=this.vct.aft(t,this.Tct))}else this.Gct=this.vct.aft(t,this.Tct);i=this.Gct}i&&(e=i.iht()),this.xct.flt(i,e)}Sc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.vct.aft(t,this.Tct);else{if(this.Gct){const s=this.eut(),i=this.Gct.iht(),e=this.Gct.hU(),n=i?i.hU():s.G1();(t<=e||t>=n)&&(this.Gct=this.vct.aft(t,this.Tct),h=!0)}else this.Gct=this.vct.aft(t,this.Tct),h=!0;n=this.Gct}n&&(r=n.iht()),this.xct.Sc(t,n,r,s,i,e,h)}yft(t){if(this.Gct){const s=this.eut(),i=this.Gct.iht(),e=this.Gct.hU(),n=i?i.hU():s.G1();(t<=e||t>=n)&&(this.Gct=this.vct.aft(t,this.Tct))}else this.Gct=this.vct.aft(t,this.Tct);const s=this.Gct,i=s.iht();return this.xct.yft(t,s,i)}wft(t,s,i){return this.xct.yft(t,s,i)}mlt(t,s){let i,e;if(s)i=this.vct.aft(t,this.Tct);else{if(this.Gct){const s=this.eut(),i=this.Gct.iht(),e=this.Gct.hU(),n=i?i.hU():s.G1();(t<=e||t>=n)&&(this.Gct=this.vct.aft(t,this.Tct))}else this.Gct=this.vct.aft(t,this.Tct);i=this.Gct}i&&(e=i.iht()),this.xct.mlt(i,e)}static Mft(t,s){const i=s.Oct();return s.vct.aft(t,i)}static Sft(t,s){const i=s.Oct();return s.vct.cft(t,i)}static Tft(t,s,i){return s?i.eut().gat()?t.wht():s.wht():t.wht()}vft(){const t=this.Tct.Ict().xft();return this.Gct=null,t}lct(t){this.Gct=null,this.Tct.Ict().bft(t)}uct(){this.iat().uct()}cct(){if(this.iat().cct()){const t=this.vct.tft(this.Tct),s=this.iat().pft();t.Cft(s)}}fct(){const t=this.iat().fct();return t&&this.Ift(),this.iat().Gft(),t}Ift(){const t=this.eut().hU(),s=this.iat(),i=$w.iut.Mft(t,this),e=this.vft();e.Zct(i.iG()),e.C1(t),e.Q1(i._ft()),e._ut(!0),e.Eft(s.Aft()),e.Cft(s.pft())}Mst(){return{sourceAdapterJson:this.iat().Mst()}}Sst(t){t&&this.iat().Sst(t.sourceAdapterJson)}}}{const Vw=self.Gs,Ww=Vw.iut;Ww.kct=class{constructor(t){this.Dft=t,this.Nft=null,this.Oft()}Yn(){this.Nft&&(this.Nft.Yn(),this.Nft=null),this.Dft=null}gft(){return this.Nft.gft()}i2(){return this.Dft}Tlt(){this.Nft&&this.Nft.Tlt()}Nrt(){this.Nft&&this.Nft.Nrt()}Oft(){return this.Nft||(this.Nft=this.Pft()),this.Nft}dut(){}CV(){return this.dut()}Rft(){}Hat(){this.Oft().Hat()}vrt(){this.Oft().vrt()}rlt(){this.Oft().rlt()}flt(t,s){this.Nft.Lft(t,s)}Sc(t,s,i,e,n,r,h){let o;switch(this.Dft.Kct()){case"numeric":o=Ww.Fft.Sc(t,s,i,this.Dft);break;case"angle":o=Ww.kft.Sc(t,s,i,this.Dft);break;case"boolean":o=Ww.jft.Sc(t,s,i,this.Dft);break;case"color":o=Ww.zft.Sc(t,s,i,this.Dft);break;case"text":o=Ww.Bft.Sc(t,s,i,this.Dft)}this.Nft.Uft(t,o,s,i,e,n,r,h)}yft(t,s,i){switch(this.Dft.Kct()){case"numeric":return Ww.Fft.Sc(t,s,i,this.Dft);case"angle":return Ww.kft.Sc(t,s,i,this.Dft);case"boolean":return Ww.jft.Sc(t,s,i,this.Dft);case"color":return Ww.zft.Sc(t,s,i,this.Dft);case"text":return Ww.Bft.Sc(t,s,i,this.Dft)}}mlt(t,s){this.Nft.$ft(t,s)}uct(){this.Oft().Vft()}Gft(){this.Oft().Gft()}pft(){return this.Oft().pft()}cct(){return this.Oft().cct()}fct(){return this.Oft().fct()}Aft(){const t=this.Dft,s=t.Nct().eut().hU(),i=Ww.Mft(s,t),e=i.iht();switch(t.Kct()){case"numeric":return Ww.Fft.Sc(s,i,e,t);case"angle":return Ww.kft.Sc(s,i,e,t);case"boolean":return Ww.jft.Sc(s,i,e,t);case"color":return Ww.zft.Sc(s,i,e,t);case"text":return Ww.Bft.Sc(s,i,e,t)}}Pft(){const t=this.Dft;switch(t.hft()?t.Kct():""){case"combo":case"boolean":case"text":case"string":return new Ww.Yft.Wft(this);case"numeric":case"number":case"angle":return"combo"===this.Dft.qct()?new Ww.Yft.Wft(this):new Ww.Yft.Qft(this);case"color":case"offsetColor":return new Ww.Yft.Jft(this);default:return new Ww.Yft.Qft(this)}}Mst(){return{propertyAdapterJson:this.Oft().Mst()}}Sst(t){t&&this.Oft().Sst(t.propertyAdapterJson)}}}{const Yw=self.Gs,Qw=0;class Jw extends Yw.iut.kct{constructor(t){super(t),this.Hft=NaN}dut(){return this.Dft.Oct().$ct()[0]}CV(){return this.Hft?this.Hft:super.CV()}Rft(){return this.Dft.Nct().J1()}wut(t){this.Dft.Oct().$ct()[0]!==t&&(this.Hft=t)}Sc(t,s,i,e,n,r,h){this.Oft().qft(s.Yct())&&super.Sc(t,s,i,e,n,r,h)}yft(t,s,i){if(this.Oft().qft(s.Yct()))return super.yft(t,s,i)}Mst(){return Object.assign(super.Mst(),{index:this.Hft})}Sst(t){t&&(super.Sst(t),this.Hft=t.index)}}Yw.iut.Lct=Jw}{const Hw=self.Gs,qw=0,Xw=1,Zw=2;class Kw extends Hw.iut.kct{constructor(t){super(t),this.v8=NaN}dut(){return this.Dft.Oct().$ct()[1]}Rft(){const t=this.Dft.Oct(),s=this.Dft.Nct(),i=this.v8?this.v8:t.$ct()[0],e=s.J1(),n=e.Xft(i);return e.Zft()[n].g0()}I0(t){const s=this.Dft.Oct().$ct()[2];return t.Kft(s)}Sut(t){this.Dft.Oct().$ct()[0]!==t&&(this.v8=t)}Sc(t,s,i,e,n,r,h){const o=this.Dft.Nct().J1();this.I0(o.gH())&&super.Sc(t,s,i,e,n,r,h)}yft(t,s,i){const e=this.Dft.Nct().J1();if(this.I0(e.gH()))return super.yft(t,s,i)}Mst(){return Object.assign(super.Mst(),{sid:this.v8})}Sst(t){t&&(super.Sst(t),this.v8=t.sid)}}Hw.iut.Pct=Kw}{const tM=self.Gs,sM=0,iM=1;class eM extends tM.iut.kct{constructor(t){super(t)}dut(){return this.Dft.Oct().$ct()[1]}Rft(){const t=this.Dft.Nct().FY().RZ(),s=t.BH(),i=this.vut(s).CV();return t.N0(i)?t.tdt(i):null}vut(t){const s=this.Dft.Oct().$ct()[0];return t.sdt(s)}Sc(t,s,i,e,n,r,h){this.idt()&&super.Sc(t,s,i,e,n,r,h)}yft(t,s,i){if(this.idt())return super.yft(t,s,i)}idt(){const t=this.Dft.Nct().FY().RZ(),s=t.BH(),i=this.vut(s);if(!i)return;const e=i.CV();return t.N0(e)}}tM.iut.Rct=eM}{const nM=self.Gs,rM=0,hM=1,oM=0;class aM extends nM.iut.kct{constructor(t){super(t),this.edt=null,this.ndt=null,this.rdt=!1}dut(){return this.Dft.Oct().$ct()[0]}Rft(){return this.Dft.Nct().J1().g0()}Sc(t,s,i,e,n,r,h){const o=this.Dft.Nct();o.gH().KJ()===o.J1().gH().KJ()&&super.Sc(t,s,i,e,n,r,h)}yft(t,s,i){const e=this.Dft.Nct();if(e.gH().KJ()===e.J1().gH().KJ())return super.yft(t,s,i)}hdt(t,s){if(!s)return!0;if(t?.wht()===s?.wht())return!0;const i=this.Dft?.aat();return"discrete"===i}odt(t,s,i){const e=t.ict();return!!e&&(this.Dft.eut().gat()?e.hU()===s.hU():e.hU()===i.hU())}Hat(){this.Oft().Hat();const t=this.Dft.Nct().gH().KJ();this.rdt=!1,nM.uQ.adt&&t instanceof nM.uQ.adt&&"initial-animation"===this.Dft.Elt()&&(this.rdt=!0)}ldt(){const t=this.rdt;return this.rdt=!1,t}udt(t,s){const i=this.Dft.Nct(),e=i.gH().KJ();if(nM.uQ.adt&&e instanceof nM.uQ.adt&&("initial-frame"===this.Dft.Elt()||"initial-animation"===this.Dft.Elt()))switch(this.Dft.uht()){case"relative":return this.edt?(this.edt.cdt=t.ght("initial-animation")?.fdt()??0,this.edt.ddt=this.odt(i,t,s),this.edt.pdt=this.hdt(t,s),this.edt):(this.edt={mdt:(t,s,e,n,r)=>{if(s!==n){const e=n/s,r=i.i2("offsetWidth"),h=i.i2("offsetScaleX");if(r||h){const o=r?.iat()?.Oft(),a=h?.iat()?.Oft();if(t.NK()&&t.zK())a&&a.gdt(n),t.hy(this.ydt(n,s,t,i,o,a));else{const s=n*((t.Mdt()?.wdt()??this.Sdt(t,i))/this.Sdt(t,i));a&&a.gdt(n);const r=o?.Tdt()??0,h=a?.Tdt()??0;t.hy(s+(r+h*e))}}else t.hy(t.xy()*e)}if(e!==r){const s=r/e,n=i.i2("offsetHeight"),h=i.i2("offsetScaleY");if(n||h){const o=n?.iat()?.Oft(),a=h?.iat()?.Oft();if(t.NK()&&t.UK())a&&a.gdt(r),t.oy(this.vdt(r,e,t,i,o,a));else{const e=r*((t.Mdt()?.xdt()??this.bdt(t,i))/this.bdt(t,i));a&&a.gdt(r);const n=o?.Tdt()??0,h=a?.Tdt()??0;t.oy(e+(n+h*s))}}else t.oy(t.Cy()*s)}},cdt:t.ght("initial-animation")?.fdt()??0,ddt:this.odt(i,t,s),pdt:this.hdt(t,s)},this.edt);case"absolute":return this.ndt?(this.ndt.cdt=t.ght("initial-animation")?.fdt()??0,this.ndt.ddt=this.odt(i,t,s),this.ndt.pdt=this.hdt(t,s),this.ndt):(this.ndt={cdt:t.ght("initial-animation")?.fdt()??0,ddt:this.odt(i,t,s),pdt:this.hdt(t,s)},this.ndt)}}Cdt(t,s,i,e=0){const n=s.eut().Alt(t.J1());if(!n)return e;const r=n.i2(i);if(!r)return e;const h=r.Oct().Ict();if(!h)return e;const o=h.Idt();return o?o.Yct():e}Sdt(t,s){const i=s.eut().Alt(t.J1());if(i)return i.Dut();const e=t.J1().g0();return e.Nut()?e.Dut():t.Mdt().wdt()}bdt(t,s){const i=s.eut().Alt(t.J1());if(i)return i.Put();const e=t.J1().g0();return e.Nut()?e.Put():t.Mdt().xdt()}ydt(t,s,i,e,n,r){const h=i.Mdt().wdt(),o=h/i.MK().Mdt().wdt();let a=1;const l=r?.Gdt()??0;if(0!==l){const t=h/this.Sdt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?._dt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.MK().xy()*o*a*f}vdt(t,s,i,e,n,r){const h=i.Mdt().xdt(),o=h/i.MK().Mdt().xdt();let a=1;const l=r?.Edt()??0;if(0!==l){const t=h/this.bdt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.Adt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.MK().Cy()*o*a*f}}nM.iut.Fct=aM}{const lM=self.Gs;class uM extends lM.iut.kct{constructor(t){super(t),this.Ddt=0,this.Ndt=!1}gft(){return!1}vrt(){const t=this.Dft.sut();let s=this.Dft.Oct();s=t.tft(s),this.Ddt=s.wht()}rlt(){}Yct(){return this.Ndt||this.Dft.Sc(0),this.Ddt}Sc(t,s,i,e,n,r,h){this.Ddt=lM.iut.Fft.Sc(t,s,i,this.Dft),this.Ndt=!0}uct(){}Gft(){}pft(){return this.Ddt}cct(){return!1}fct(){return!1}Mst(){return{value:this.Ddt,init:this.Ndt}}Sst(t){t&&(this.Ddt=t.value,this.Ndt=!t.hasOwnProperty("init")||t.init)}}lM.iut.jct=uM}{const cM=self.Gs,fM=0,dM=0,pM=1,mM=1,gM=2,yM=3;class wM extends cM.iut.kct{constructor(t){super(t),this.Odt=!1,this.Pdt=null,this.Rdt=null,this.Ldt=null,this.Hrt=this.Dft.eut(),this.Sct=this.Dft.Nct(),this.Fdt=this.Dft.Uct(),this.kdt=this.Fdt[0],this.jdt=this.Fdt[1],this.Fdt[3]?this.zdt=this.Fdt[3]:this.zdt=Math.random().toString(36).slice(2),this.Bdt=NaN,this.Udt=NaN,this.$dt=NaN,this.Vdt=null,this.Wdt()}Yn(){super.Yn(),this.Pdt=null,this.Rdt=null,this.Ldt=null,this.Hrt=null,this.Sct=null,this.Fdt=null,this.kdt=null,this.Vdt=null}Wdt(){if(!self.Gs.uQ.Audio)return;const t=this.Dft.yQ().Ydt(self.Gs.uQ.Audio);t&&(this.Pdt=t.qJ().g0()),this.Rdt=self.Gs.uQ.Audio.Qdt,this.Ldt=self.Gs.uQ.Audio.Jdt}Hdt(){if(this.Vdt)return;const t=this.Dft.Nct().i2("audioSource");t&&(this.Vdt=t.iat())}qdt(){const t=this.Dft.Nct().i2("volume");return t?t.iat().Udt:this.Udt}Tlt(){super.Tlt(),this.Odt=!1,this.Pdt&&(this.Ldt&&(this.Bdt=this.Ldt.Xdt.call(this.Pdt,this.zdt),this.Udt=this.Ldt.Zdt.call(this.Pdt,this.zdt)),this.Rdt&&this.Rdt.T1.call(this.Pdt,this.zdt))}Kdt(){return this.zdt}tpt(){return this.$dt}spt(t){this.$dt=t}vrt(){super.vrt(),this.Bdt=NaN,this.Odt=!1}rlt(){super.rlt();const t=this.Dft.eut().hU();switch(this.Bdt=t-this.jdt,this.Dft.Elt()){case"audioSource":break;case"volume":this.Udt=this.Dft.yft(t)}this.Odt=!1}Sc(t,s,i,e,n,r,h){if(this.Pdt)switch(this.Dft.Elt()){case"audioSource":{if(!this.Hrt.gat())return;if(e)return void(this.Rdt&&this.Rdt.T1.call(this.Pdt,this.zdt));if(t<this.jdt)return void(this.Odt=!1);const s=this.Ldt.ipt.call(this.Pdt,this.zdt),i=this.Hrt.O1();if(i!==s&&this.Rdt.N1.call(this.Pdt,this.zdt,i),this.Odt)return;if(!this.Dft.eut().IsPlaying())return;if(this.Odt=!0,isNaN(this.Bdt)){const s=self.performance.now(),i=t-this.jdt;if("suspended"===this.Pdt.ept())return void(this.Odt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.Rdt){let t=this.tpt();isNaN(t)?(this.spt(0),t=0):this.spt(t),this.Rdt.npt.call(this.Pdt,this.kdt,t,this.zdt,e)}}else{const t=this.Bdt;this.Bdt=NaN;const s=this.qdt();if(this.Udt=NaN,"suspended"===this.Pdt.ept())return void(this.Odt=!1);this.Rdt&&(this.spt(s),this.Rdt.npt.call(this.Pdt,this.kdt,s,this.zdt,t))}break}case"volume":this.Hdt(),super.Sc(t,s,i,e,n,r,h)}}yft(t,s,i){if(this.Pdt)switch(this.Dft.Elt()){case"audioSource":return;case"volume":return this.Hdt(),super.yft(t,s,i)}}rpt(t,s){return this.Vdt?this.Vdt.tpt():0}hpt(t,s,i,e){this.Vdt&&this.Vdt.spt(this.rpt()+s),this.Rdt&&this.Vdt&&this.Rdt.spt.call(this.Pdt,this.Vdt.Kdt(),this.Vdt.tpt())}opt(t,s,i){this.Vdt&&this.Vdt.spt(s),this.Rdt&&this.Vdt&&this.Rdt.spt.call(this.Pdt,this.Vdt.Kdt(),this.Vdt.tpt())}apt(){return!0}Mst(){return{audioPlaybackStarted:this.Odt,audioTag:this.zdt,pauseTime:this.Bdt,pauseVolume:this.Udt,volume:this.$dt}}Sst(t){t&&(this.Odt=t.audioPlaybackStarted,this.zdt=t.audioTag,this.Bdt=t.pauseTime,this.Udt=t.pauseVolume,this.$dt=t.volume,this.Wdt())}}cM.iut.zct=wM}{const MM=self.Gs;MM.iut.Yft=class{constructor(t){this.xct=t,this.Dft=t.i2(),this.Blt=this.Dft.Nct().FY(),this.lpt=this.Dft.Elt(),this.upt=!1,this.cpt=null,this.fpt=null}Yn(){this.xct=null,this.Dft=null,this.Blt=null,this.cpt=null,this.fpt=null}gft(){return!1}Tlt(){}Nrt(){this.Blt=null,this.cpt=null,this.fpt=null}iat(){return this.xct}i2(){return this.Dft}FY(){return this.Blt||(this.Blt=this.Dft.Nct().FY()),this.Blt}dpt(t){this.upt=!!t}ppt(){return this.upt}Hat(){}vrt(){}rlt(){}Vft(){this.cpt=this.pft()}Gft(){this.cpt=null}pft(){}cct(){}fct(){}qft(t){return typeof this.mpt()==typeof t}Lft(t,s){}Uft(t,s,i,e,n,r,h,o){}$ft(t,s){}gpt(){return this.wpt(()=>{const t=this.Dft.Oct();return this.Dft.sut().tft(t)},()=>{const t=this.Dft.Oct();return this.Dft.sut().Idt(t)}).ypt()}Mpt(){const t=this.Dft.eut().hU()-this.Dft.Nct().clt();return this.wpt(()=>{const s=this.Dft.Oct();return this.Dft.sut().aft(t,s)},()=>{const s=this.Dft.Oct(),i=this.Dft.sut();return i.cft(t,s)||i.Idt(s)}).ypt()}wpt(t,s){return this.Dft.eut().gat()?t():s()}Spt(t,s){return"relative"===this.Dft.uht()?t():s()}Tpt(t,s){return this.ppt()?(this.dpt(!1),t()):s()}vpt(t){}xpt(){return this.xct.CV()}bpt(){return this.fpt||(this.fpt=this.xct.Rft()),this.fpt}Cpt(t,s,i,e,n,r){switch(this.Dft.fut()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}Mst(){return{firstAbsoluteUpdate:this.upt,saveState:this.cpt}}Sst(t){t&&(this.upt=t.firstAbsoluteUpdate,this.cpt=t.saveState)}Ipt(t,s=!1){const i=[];for(const e of t){const t=e.Nct().clt();for(const n of e.rft())s&&0===n.hU()?i.push({time:t+n.hU(),value:n.ypt()}):s||i.push({time:t+n.hU(),value:n.ypt()})}return i.sort((t,s)=>t.time-s.time)}Gpt(t,s,i){return this._pt(s,i)}_pt(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}}}{const SM=self.Gs,TM=new Map,vM=[0,0,0];class xM extends SM.iut.Yft{constructor(t){super(t)}Hat(){}vrt(){}rlt(){}pft(){const t=this.Dft.fut(),s=this.bpt(),i=this.xpt();switch(t){case"behavior":case"plugin":return this.Ept(s.Apt(i));case"effect":return this.Ept(s[i]);case"world-instance":return this.Ept(this.mpt())}}cct(){const t=this.gpt();return!this.Dpt(t,this.mpt())}fct(){return!SM.ee(this.cpt)&&!this.Dpt(this.cpt,this.mpt())}Dpt(t,s){return t=this.Npt(t),s=this.Npt(s),t.Yo(s)}gpt(){const t=super.gpt();return this.Npt(t)}Mpt(){const t=super.Mpt();return this.Npt(t)}vpt(t){}Ept(t){return SM.Fe(t,SM.bo)?t.toArray().slice(0,3):t.slice(0,3)}Npt(t){return SM.Fe(t,SM.bo)?t:new SM.bo(t[0],t[1],t[2],1)}qft(t){return!0}gft(){return!0}Lft(){const t=this.Dft.eut(),s=this.Dft.J1(),i=this.Dft.iat(),e=t.sat(s,i,this.lpt,this.Dft);if(e&&e.length>1){TM.has(s)||TM.set(s,new Map);const t=TM.get(s),i=this.Dft.fut();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.lpt)||e.set(this.lpt,{Opt:!1,color:new SM.bo(0,0,0,1)})}}Ppt(t,s,i){const e=TM.get(t).get(s).get(i);return e.Opt=!0,e.color}Uft(t,s,i,e,n,r,h,o){const a=this.Dft.eut(),l=this.Dft.Nct(),u=this.Dft.J1(),c=this.Dft.iat(),f=this.Dft.fut(),d=this.lpt,p=a.sat(u,c,d,this.Dft);if(p&&p.length>1){const t=this.Ipt(p,!0),i=this.Gpt(a,a.hU(),t);if(i){const t=l.clt(),e=i.time-t;if(0===e)this.Ppt(u,f,this.lpt).Do(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.Dft.Sc(e,!1,!0),h=SM.bo.xa(t,r[0]),o=SM.bo.xa(i,r[1]),a=SM.bo.xa(n,r[2]);this.Ppt(u,f,this.lpt).Do(h,o,a)}}}else this.Rpt(s[0],s[1],s[2])}$ft(){const t=this.Dft.J1();if(!TM.has(t))return;const s=TM.get(t),i=this.Dft.fut();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.lpt))return;const n=e.get(this.lpt),r=n.Opt,h=n.color;r&&this.Rpt(h.ko(),h.jo(),h.zo()),0===e.size&&s.delete(i),0===s.size&&TM.delete(t)}mpt(){const t=this.Dft.fut(),s=this.bpt(),i=this.xpt();switch(t){case"behavior":case"plugin":return this.Npt(s.Apt(i));case"effect":return s[i].clone();case"world-instance":return this.FY().rK().clone()}}Rpt(t,s,i){const e=this.Dft.fut(),n=this.bpt(),r=this.xpt();switch(e){case"behavior":case"plugin":vM[0]=t,vM[1]=s,vM[2]=i,n.Lpt(r,vM);break;case"effect":n[r].Ao(t,s,i);break;case"world-instance":this.FY().Fpt(t,s,i)}}Mst(){}Sst(t){}}SM.iut.Yft.Jft=xM}{const bM=self.Gs,CM=bM.iut;class IM extends bM.iut.Yft{constructor(t){super(t)}Hat(){}vrt(){}rlt(){}pft(){return this.mpt()}cct(){return this.gpt()!==this.pft()}fct(){return!bM.ee(this.cpt)&&this.cpt!==this.pft()}gft(){return!1}Uft(t,s,i,e,n,r,h,o){const a=this.Dft,l=a.Nct(),u=a.fut(),c=a.eut(),f=l.J1(),d=a.iat(),p=this.lpt,m=c.sat(f,d,p,a);if(m&&m.length>1){const i=this.Ipt(m),e=t+l.clt(),n=this.Gpt(c,e,i);n&&(s=n.value)}switch(a.Kct()){case"numeric":if(!CM.Fft.kpt(this.xpt(),this.bpt(),s,u))return;this.Rpt(s,i,e);break;case"angle":if(!CM.kft.kpt(this.xpt(),this.bpt(),s,u))return;this.Rpt(s,i,e);break;case"boolean":if(!CM.jft.kpt(this.xpt(),this.bpt(),s,u))return;this.Rpt(s,i,e);break;case"color":if(!CM.zft.kpt(this.xpt(),this.bpt(),s,u))return;this.Rpt(s,i,e);break;case"text":{const t=this.jpt();if(!CM.Bft.kpt(this.xpt(),this.bpt(),s,u)&&!t)return;this.Rpt(s,i,e);break}}}jpt(){switch(this.Dft.fut()){case"behavior":case"effect":case"instance-variable":return!1;case"plugin":return this.iat().ldt()}return!1}mpt(){const t=this.Dft.fut(),s=this.bpt(),i=this.xpt();switch(t){case"behavior":case"plugin":return s.Apt(i);case"effect":return s[i];case"instance-variable":return s.zpt(i)}}Rpt(t,s,i){const e=this.Dft.fut(),n=this.bpt(),r=this.xpt();switch(e){case"behavior":n.Lpt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Bpt(r,t);break;case"plugin":n.Lpt(r,t,this.iat().udt(s,i))}}}bM.iut.Yft.Wft=IM}{const GM=self.Gs,_M=GM.iut.Yft,EM=new Map,AM=(t,s,i,e,n,r=!1,h=null,o=null)=>{EM.set(t,{Upt:s,$pt:i,Vpt:e,round:n,Wpt:r,init:h,reset:o})},DM=(t,s)=>{const i=s.eut().Alt(t.J1());if(i)return i.Dut();const e=t.J1().g0();return e.Nut()?e.Dut():t.Mdt().wdt()},NM=(t,s,i,e=0)=>{const n=s.eut().Alt(t.J1());if(!n)return e;const r=n.i2(i);if(!r)return e;const h=r.Oct().Ict();if(!h)return e;const o=h.Idt();return o?o.Yct():e},OM=t=>{const s=[];let i=t.MK();for(;i;)s.push(i),i=i.MK();return s.reverse(),s};AM("offsetX",(t,s,i,e)=>{"relative"===e.Dft.uht()?t.Ypt(s,i.eut().dat()):t.Ypt(s)},(t,s)=>t.sx(s),t=>t.tx(),!0),AM("offsetY",(t,s,i,e)=>{"relative"===e.Dft.uht()?t.Qpt(s,i.eut().dat()):t.Qpt(s)},(t,s)=>t.hx(s),t=>t.nx(),!0),AM("offsetWidth",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.Dft.uht(),o=1===e.Jpt.iG();if((h||o)&&t.NK()&&t.zK()){if(isNaN(e.Hpt)){const s=OM(t);let i;i=o?s[s.length-1].xy():s[s.length-1].Mdt().wdt(),e.Hpt=0===i?Number.EPSILON:i}if(n)return;e.qpt+=s;const i=s/e.Hpt;t.ky(i,r),e.Xpt+=i}else t.ky(s),e.Xpt+=s},(t,s)=>t.hy(s),t=>t.xy(),!0,!1,null,t=>{t.Xpt=0,t.qpt=0}),AM("offsetHeight",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.Dft.uht(),o=1===e.Jpt.iG();if((h||o)&&t.NK()&&t.UK()){if(isNaN(e.Hpt)){const s=OM(t);let i;i=o?s[s.length-1].Cy():s[s.length-1].Mdt().xdt(),e.Hpt=0===i?Number.EPSILON:i}if(n)return;e.Zpt+=s;const i=s/e.Hpt;t.Kpt(i,r),e.Xpt+=i}else t.Kpt(s),e.Xpt+=s},(t,s)=>t.oy(s),t=>t.Cy(),!0,!1,null,t=>{t.Xpt=0,t.Zpt=0}),AM("offsetAngle",(t,s,i,e,n)=>{t.tmt(s)},(t,s)=>t.QH(s),t=>t.JH(),!1,!0),AM("offsetOpacity",(t,s,i,e,n)=>{s/=e.smt?e.smt:1;const r=t.PO()+s;if(0===e.imt)r>1?e.imt+=r-1:r<0&&(e.imt+=r),t.emt(s);else{const i=t.PO()+s;s>0&&e.imt>0?i>1&&(e.imt+=i-1):s>0&&e.imt<0?(e.imt+=s,e.imt>0&&(t.emt(e.imt),e.imt=0)):s<0&&e.imt>0?(e.imt+=s,e.imt<0&&(t.emt(e.imt),e.imt=0)):s<0&&e.imt<0&&i<0&&(e.imt+=i)}},(t,s)=>{t.LO(s)},t=>t.PO(),!1,!0,(t,s,i)=>{switch(t.imt=0,t.Dft.uht()){case"relative":{t.Dft.sut();const s=t.Dft.Oct().Ict().Cct();let i=t.FY().PO(),e=i;for(const n of s){const s=n.hU();e=i+t.Dft.yft(s),e=GM.Xn(e,0,1)}t.nmt=i-e,t.nmt=Math.round(100*(t.nmt+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].hU();e-=t.Dft.yft(n),e=GM.Xn(e,0,1)}t.rmt=e,t.rmt=Math.round(100*(t.rmt+Number.EPSILON))/100;break}}const e="relative"===t.Dft.uht(),n=1===t.Jpt.iG();if((e||n)&&s.NK()&&s.JK()){const e=OM(s);let n=e[0].Mdt().hmt();n+=NM(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=NM(e[t],i,"offsetOpacity");t.smt=0===n?1:n}},t=>{switch(t.Dft.uht()){case"relative":{t.imt=0;const s=t.FY();let i=s.PO();i=Math.round(100*(i+Number.EPSILON))/100,t.Dft.eut().gat()?(s.LO(i+t.nmt),t.YG=0):(s.LO(i-t.rmt),t.YG=t.iat().Aft());break}}}),AM("offsetOriginX",(t,s)=>t.omt(s),(t,s)=>t.$Z(s),t=>t.UZ(),!1),AM("offsetOriginY",(t,s)=>t.amt(s),(t,s)=>t.YZ(s),t=>t.WZ(),!1),AM("offsetZElevation",(t,s)=>t.lmt(s),(t,s)=>t.lx(s),t=>t.ox(),!0),AM("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const n=t.xy()<0?-1:1;if(e.umt+=s,"relative"===e.Dft.uht()&&t.NK()&&t.zK()){const r=NM(t,i,"offsetWidth"),h=isNaN(e.cmt)?i.Dut():e.cmt,o=(h+r/(t.Mdt().wdt()/h))*n*s;isNaN(e.Hpt)&&EM.get("offsetWidth").Upt(t,1,i,e,!0);const a=o/e.Hpt;t.ky(a,!0),e.Xpt+=a}else{const r=(isNaN(e.cmt)?i.Dut():e.cmt)*n*s;t.ky(r),e.Xpt+=r}},(t,s,i)=>{t.hy(i.Dut()*s)},(t,s)=>{const i=t.xy()<0?-1:1;if(t.zK()){const e=t.MK(),n=s.eut().Alt(e.J1());let r=NaN;if(n)r=e.xy()/n.Dut();else{const t=e.J1().g0();r=t.Nut()?e.xy()/t.Dut():1}return t.xy()*i/(s.Dut()*r)}return t.xy()*i/s.Dut()},!1,!1,null,t=>{t.Xpt=0,t.cmt=NaN,t.umt=0}),AM("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const n=t.Cy()<0?-1:1;if(e.fmt+=s,"relative"===e.Dft.uht()&&t.NK()&&t.UK()){const r=NM(t,i,"offsetHeight"),h=isNaN(e.cmt)?i.Put():e.cmt,o=(h+r/(t.Mdt().xdt()/h))*n*s;isNaN(e.Hpt)&&EM.get("offsetHeight").Upt(t,1,i,e,!0);const a=o/e.Hpt;t.Kpt(a,!0),e.Xpt+=a}else{const r=(isNaN(e.cmt)?i.Put():e.cmt)*n*s;t.Kpt(r),e.Xpt+=r}},(t,s,i)=>{t.oy(i.Put()*s)},(t,s)=>{const i=t.Cy()<0?-1:1;if(t.UK()){const e=t.MK(),n=s.eut().Alt(e.J1());let r=NaN;if(n)r=e.Cy()/n.Put();else{const t=e.J1().g0();r=t.Nut()?e.Cy()/t.Put():1}return t.Cy()*i/(s.Put()*r)}return t.Cy()*i/s.Put()},!1,!1,null,t=>{t.Xpt=0,t.cmt=NaN,t.fmt=0});class PM extends GM.iut.Yft{constructor(t){super(t),this.YG=0,this.imt=0,this.nmt=0,this.rmt=0,this.smt=NaN,this.Hpt=NaN,this.Xpt=0,this.cmt=NaN,this.qpt=0,this.umt=0,this.Zpt=0,this.fmt=0,this.dmt=void 0,this.pmt=void 0,this.mmt=null,this.gmt=null,this.ymt=null,this.wmt=null,this.Mmt=null,this.Smt=null,this.Tmt=null,this.vmt=null,this.xmt=!1,this.bmt=!1,GM.Fe(this.Dft.eut(),GM.Cmt)?this.Jpt=new GM.iut.Yft.Imt(this):this.Jpt=new GM.iut.Yft.Gmt(this);const s=this.Dft.Elt();switch(this.Dft.fut()){case"world-instance":{const t=EM.get(s);this.mmt=t.Vpt,this.gmt=t.Upt,this.ymt=t.$pt,this.xmt=t.round,this.bmt=t.Wpt,this.Mmt=t.init,this.wmt=t.reset;break}case"audio":this.Smt=t.rpt,this.Tmt=t.hpt,this.vmt=t.opt,this.xmt=!!t.apt(),this.bmt=!1}}Yn(){this.Jpt=null,this.mmt=null,this.gmt=null,this.ymt=null,this.wmt=null,this.Mmt=null,this.Smt=null,this.Tmt=null,this.vmt=null,super.Yn()}gft(){return this.Jpt.gft()}_mt(){return this.YG}Emt(t){this.YG=t}Hat(){this.wmt&&this.wmt(this)}vrt(){const t=this.Jpt.vrt();if("number"==typeof t&&(this.YG=t),this.Mmt){const t=this.FY(),s=this.Dft.Nct();this.Mmt(this,t,s)}}rlt(){const t=this.Jpt.rlt();"number"==typeof t&&(this.YG=t)}pft(){return this.mpt()}cct(){return this.gpt()!==this.pft()}fct(){return!GM.ee(this.cpt)&&this.cpt!==this.pft()}Lft(t,s){this.Jpt.Lft(t,s)}Uft(t,s,i,e,n,r,h,o){return this.Jpt.Uft(t,s,i,e,n,r,h,o)}$ft(t,s){this.Jpt.$ft(t,s)}mpt(){const t=this.bpt(),s=this.xpt(),i=this.FY(),e=this.Dft.Nct();switch(this.Dft.fut()){case"behavior":case"plugin":return t.Apt(s);case"effect":return t[s];case"instance-variable":return t.zpt(s);case"world-instance":return this.mmt(i,e);case"audio":return this.Smt.call(this.iat(),i,e)}}Rpt(t,s,i,e=!0){const n=this.bpt(),r=this.xpt(),h=this.FY(),o=this.Dft.Nct();switch(this.Dft.fut()){case"behavior":n.Amt(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.Dmt(r,t);break;case"plugin":n.Amt(r,t,this.iat().udt(s,i));break;case"world-instance":this.gmt(h,t,o,this,!1,e);break;case"audio":this.Tmt.call(this.iat(),h,t,o,this)}}Nmt(t,s,i,e,n){let r=this.Dft.aat();if(r="default"===r?"continuous":r,"discrete"===r&&!s)return;if("discrete"===r&&i){const t=this.Dft.eut().hU();if(!this.Dft.oft(t))return}const h=this.bpt(),o=this.xpt(),a=this.FY(),l=this.Dft.Nct();switch(this.Dft.fut()){case"behavior":h.Lpt(o,t);break;case"effect":h[o]=t;break;case"instance-variable":h.Bpt(o,t);break;case"plugin":h.Lpt(o,t,this.iat().udt(e,n));break;case"world-instance":this.ymt(a,t,l);break;case"audio":this.vmt.call(this.iat(),a,t,l)}}Omt(t,s,i,e,n,r,h,o){this.Jpt.Omt(t,s,i,e,n,r,h,o)}Pmt(t,s,i,e,n){"angle"===this.Dft.qct()&&(t=GM.tr(t));const r=(t.toString().split(".")[1]||"").length,h=this.mpt();let o;switch(o=0===r?this.xmt?Math.round(h):this.bmt?"angle"===this.Dft.qct()?GM.Kn(Math.round(GM.tr(h))):Number(GM.toFixed(h,2)):h:this.xmt?Number(GM.toFixed(h,r)):(this.bmt,h),this.Rpt(o-h,s,i,!1),this.Dft.Elt()){case"offsetWidth":case"offsetScaleX":{const t=this.FY(),s=t.xy(),i=Number(GM.toFixed(s,2));t.ky(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.FY(),s=t.Cy(),i=Number(GM.toFixed(s,2));t.Kpt(i-s);break}}}Mst(){return Object.assign(super.Mst(),{v:this.YG,a:this.imt,fod:this.nmt,bod:this.rmt,of:this.smt,sf:this.Hpt,armorf:this.dmt,armandf:this.pmt,ca:this.Xpt,os:this.cmt,awo:this.qpt,aho:this.Zpt,asxo:this.umt,asyo:this.fmt})}Sst(t){t&&(super.Sst(t),this.YG=t.v,this.imt=t.a,this.nmt=GM.te(t.fod)?t.fod:0,this.rmt=GM.te(t.bod)?t.bod:0,this.smt=GM.te(t.of)?t.of:NaN,this.Hpt=GM.te(t.sf)?t.sf:NaN,this.dmt=GM.te(t.armorf)?t.armorf:void 0,this.pmt=GM.te(t.armandf)?t.armandf:void 0,this.Xpt=GM.te(t.ca)?t.ca:0,this.cmt=GM.te(t.os)?t.os:NaN,this.qpt=GM.te(t.awo)?t.awo:0,this.Zpt=GM.te(t.aho)?t.aho:0,this.umt=GM.te(t.asxo)?t.asxo:0,this.fmt=GM.te(t.asyo)?t.asyo:0)}gdt(t){this.cmt=t}Tdt(){return this.Xpt}_dt(){return this.qpt}Adt(){return this.Zpt}Gdt(){return this.umt}Edt(){return this.fmt}}GM.iut.Yft.Qft=PM}{const RM=self.Gs;class LM{constructor(t){this.Rmt=!1,this.Ddt=0,this.Lmt=!1,this.Fmt=!1,this.Hlt=t;for(let t=0,s=this.Hlt.length;t<s;t++)this.Hlt[t].Act(this)}_lt(){return this.Hlt}kmt(){this.Rmt=!0}jmt(){return this.Rmt}Eft(t){this.Ddt=t}Yct(){return this.Ddt}zmt(t){this.Lmt=t}Bmt(){return this.Lmt}ult(t){this.Fmt=t}Umt(){return this.Fmt}zf(){this.Rmt=!1,this.Ddt=0,this.Lmt=!1,this.Fmt=!1}}class FM{constructor(t){this.$mt=t}Yn(){this.$mt=null}iG(){return 0}vrt(){const t=this.$mt;return this.$mt.i2(),t.Spt(()=>t.wpt(()=>0,()=>t.iat().Aft()),()=>{})}rlt(){}gft(){switch(this.$mt,this.$mt.i2().uht()){case"relative":return!1;case"absolute":return!0}}Lft(t,s){this.$mt;const i=this.$mt.i2(),e=i.Elt();switch(i.uht()){case"relative":break;case"absolute":if(i.Ect())i.Dct().zf();else{const t=i.eut(),s=i.J1(),n=i.iat(),r=t.sat(s,n,e,i);r&&r.length>1&&new LM(r)}}}Uft(t,s,i,e,n,r,h,o){const a=this.$mt,l=this.$mt.i2();switch(l.uht()){case"relative":{const h=a._mt();a.Rpt(s-h,i,e),r&&this.Omt(t,i,e,n,h,s),a.Emt(s);break}case"absolute":{const t=l.eut(),n=l.Nct();if(l.J1(),l.iat(),l.Ect()){const i=l.Dct(),e=i._lt(),r=a.Ipt(e,!0),u=a.Gpt(t,t.hU(),r);if(u){const t=n.clt(),e=u.time-t;if(0===e)i.ult(h),i.zmt(o),i.kmt(),i.Eft(i.Yct()+s);else{if(e<0)return;const t=l.yft(e);i.ult(h),i.zmt(o),i.kmt(),i.Eft(i.Yct()+(s-t))}}}else a.Nmt(s,o,h,i,e);break}}}$ft(t,s){const i=this.$mt,e=this.$mt.i2();switch(e.uht()){case"relative":break;case"absolute":if(e.Ect()){const n=e.Dct();n.jmt()&&i.Nmt(n.Yct(),n.Bmt(),n.Umt(),t,s)}}}Omt(t,s,i,e,n,r){const h=this.$mt;e||(s&&t===s.hU()?h.Pmt(s.wht(),s,i):i&&t===i.hU()?h.Pmt(i.wht(),s,i):r-n===0&&h.Pmt(s.wht(),s,i))}}RM.iut.Yft.Gmt=FM}{const kM=self.Gs;class jM{constructor(t){this.$mt=t}Yn(){this.$mt=null}iG(){return 1}vrt(){const t=this.$mt;return t.dpt(!0),this.vpt(t.gpt())}rlt(){const t=this.$mt;if(t.gpt()!==t.Mpt())return t.dpt(!0),this.vpt(t.Mpt())}gft(){return!1}Lft(){}Uft(t,s,i,e,n,r,h,o){const a=this.$mt,l=a._mt();switch(a.i2().uht()){case"relative":a.Rpt(s-l,i,e),r&&this.Omt(t,i,e,n,l,s,!1,h);break;case"absolute":a.ppt()?(a.dpt(!1),a.Rpt(l,i,e)):0===t&&0===a.i2().eut().G1()?a.Nmt(s,!0,!1,i,e):(a.Rpt(s-l,i,e),r&&this.Omt(t,i,e,n,l,s,this.Vmt(),h))}a.Emt(s)}$ft(){}vpt(t){return t-this.$mt.pft()}Vmt(){const t=this.$mt,s=t.FY().J1(),i=t.i2().yQ().tat();let e=0;for(const t of i.Xnt())0===t.iG()?t.irt(s)&&e++:1===t.iG()&&t.J1()===s&&e++;return e<=1}Omt(t,s,i,e,n,r,h,o){const a=this.$mt;e?s&&t===s.hU()?a.Pmt(s.wht(),s,i,h,o):i&&t===i.hU()?a.Pmt(i.wht(),s,i,h,o):i||a.Pmt(s.wht(),s,i,h,o):s&&t===s.hU()?a.Pmt(s.wht(),s,i,h,o):i&&t===i.hU()?a.Pmt(i.wht(),s,i,h,o):r-n===0&&a.Pmt(s.wht(),s,i,h,o)}}kM.iut.Yft.Imt=jM}{const zM=self.Gs,BM=self.$u;zM.iut.Fft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.zpt(t)}return n!==i}static Sc(t,s,i,e){if(!i){const t=e.Oct();return e.sut().Idt(t).wht()}let n=e.aat();if("default"===n&&(n="continuous"),"combo"===e.qct()&&(n="discrete"),"discrete"===n)return zM.iut.Tft(s,i,e);if("continuous"===n||"step"===n){const r=e.eut().hat();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.wht(),o=i.wht(),a=s.ght("cubic-bezier"),l=i.ght("cubic-bezier"),u=a&&a.Wmt()&&l&&l.Ymt();if(!u&&h===o)return h;const c=s.hU(),f=i.hU();"step"===n&&0!==r&&(t=zM.Xn(t,c,f));const d=zM.normalize(t,c,f),p=s._ft();let m;if(u){const t=f-c;m=BM.hc(p)(t*d,0,1,t),m=BM.hc("cubicbezier")(m,h,h+a.Tht(),o+l.bht(),o)}else m=BM.hc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.qct()?Math.floor(m):m}}}}{const UM=self.Gs;UM.iut.kft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.zpt(t)}return n!==i}static Sc(t,s,i,e){if(!i){const t=e.Oct();return e.sut().Idt(t).wht()}let n=e.aat();if("default"===n&&(n="continuous"),"combo"===e.qct()&&(n="discrete"),"discrete"===n)return UM.iut.Tft(s,i,e);if("continuous"===n||"step"===n){const r=e.eut().hat();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.hU(),o=i.hU(),a=s.wht(),l=i.wht();"step"===n&&0!==r&&(t=UM.Xn(t,h,o));const u=s.ght("angle");if(!u){if(a===l)return a;const i=UM.normalize(t,h,o),e=self.$u.hc(s._ft());return UM.ur(a,l,e(i,0,1,1))}{const i=u.Qmt();if(a===l&&0===i)return a;const e=UM.normalize(t,h,o),n=self.$u.hc(s._ft())(e,0,1,1);switch(u.Jmt()){case"closest":return UM.ur(a,l,n,i);case"clockwise":return UM.cr(a,l,n,i);case"anti-clockwise":return UM.dr(a,l,n,i)}}}}}}{const $M=self.Gs;$M.iut.jft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.zpt(t)}return!!n!=!!i}static Sc(t,s,i,e){if(!i){const t=e.Oct();return e.sut().Idt(t).wht()?1:0}return $M.iut.Tft(s,i,e)?1:0}}}{const VM=self.Gs,WM=[0,0,0],YM=[0,0,0],QM=[0,0,0];VM.iut.zft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.zpt(t)}return Array.isArray(i)?(WM[0]=i[0],WM[1]=i[1],WM[2]=i[2]):(QM.oa(i),WM[0]=Math.floor(255*QM.ko()),WM[1]=Math.floor(255*QM.jo()),WM[2]=Math.floor(255*QM.zo())),Array.isArray(n)?(YM[0]=n[0],YM[1]=n[1],YM[2]=n[2]):(QM.oa(n),YM[0]=Math.floor(255*QM.ko()),YM[1]=Math.floor(255*QM.jo()),YM[2]=Math.floor(255*QM.zo())),WM[0]!==YM[0]||WM[1]!==YM[1]||WM[2]!==YM[2]}static Sc(t,s,i,e){if(!i){const t=e.Oct(),s=e.sut().Idt(t).wht();return WM[0]=s[0],WM[1]=s[1],WM[2]=s[2],WM}let n=e.aat();if("default"===n&&(n="continuous"),"discrete"===n){const t=VM.iut.Tft(s,i,e);return WM[0]=t[0],WM[1]=t[1],WM[2]=t[2],WM}if("continuous"===n||"step"===n){const r=e.eut().hat();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.hU(),o=i.hU(),a=s.wht(),l=i.wht();"step"===n&&0!==r&&(t=VM.Xn(t,h,o));const u=VM.normalize(t,h,o),c=s._ft(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.$u.hc(c),M=o-h,S=M*u;return WM[0]=f===m?f:w(S,f,m-f,M),WM[1]=d===g?d:w(S,d,g-d,M),WM[2]=p===y?p:w(S,p,y-p,M),WM}}}}{const JM=self.Gs;JM.iut.Bft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.zpt(t)}return n!==i}static Sc(t,s,i,e){if(!i){const t=e.Oct();return e.sut().Idt(t).wht()}return JM.iut.Tft(s,i,e)}}}{const HM=self.Gs;HM.int=class{constructor(){this.Hmt=new Map}Yn(){for(const t of this.Hmt.values())t.Yn();this.Hmt.clear(),this.Hmt=null}zu(t){const s=new HM.qmt(t),i=s.Ac();this.Hmt.set(i,s)}Ys(t){return this.Hmt.get(t)}Qot(){return 0}static Xmt(t,s,i,e){if(s)for(const n of s)HM.int.Zmt("create",n,t,i,e)}static Kmt(t,s,i,e){if(s)for(const n of s)HM.int.Zmt("create-including-disabled",n,t,i,e)}static tgt(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].Sst(s)}):s.forEach(s=>{HM.int.Zmt("load",s,t,i,e)})}static Zmt(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.sgt],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.Sst(s),i.push(r);break;case"create":if("function"==typeof r.Gut&&!r.Gut())return r.Yn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const qM=self.Gs,XM=0,ZM=1,KM=2,tS=3,sS=4,iS=5,eS=6,nS=7,rS=8,hS=9,oS=10,aS=11;qM.qmt=class{constructor(t){this.Hn="",this.llt=NaN,this.igt=0,this.egt="default",this.ngt="default",this.rgt=!1,this.hgt=!1,this.ogt=1,this.Flt=null,this.agt="",this.lgt=!1,this.ugt=!0,t&&(this.Hn=t[0],this.llt=t[1],this.igt=t[2],this.egt=t[3],this.ngt=t[4],this.rgt=!!t[6],this.hgt=!!t[7],this.ogt=t[8],this.agt=t[9],this.lgt=!!t[10],this.ugt=!!t[11],this.Flt=new qM.cgt(t[5],this))}Yn(){this.Flt.Yn(),this.Flt=null}Zot(){return this.Flt||(this.Flt=new qM.cgt(null,this)),this.Flt}Ac(){return this.Hn}P3(t){this.Hn=t}G1(){return this.llt}I1(t){this.llt=t}hat(){return this.igt}oat(t){this.igt=t}aat(){return this.egt}lat(t){this.egt=t}uht(){return this.ngt}uat(t){this.ngt=t}E1(){return this.rgt}_1(t){this.rgt=t}D1(){return this.hgt}A1(t){this.hgt=t}U0(){return this.ogt}fat(t){this.ogt=t}Ort(){return this.agt}dat(){return this.lgt}pat(){return this.ugt}Mst(){return{trackDataJson:this.Flt.Mst(),name:this.Hn,totalTime:this.llt,step:this.igt,interpolationMode:this.egt,resultMode:this.ngt,loop:this.rgt,pingPong:this.hgt,repeatCount:this.ogt,startOnLayout:this.agt,transformWithSceneGraph:!!this.lgt,useSystemTimescale:this.ugt}}Sst(t){t&&(this.Zot().Sst(t.trackDataJson),this.Hn=t.name,this.llt=t.totalTime,this.igt=t.step,this.egt=t.interpolationMode,this.ngt=t.resultMode,this.rgt=t.loop,this.hgt=t.pingPong,this.ogt=t.repeatCount,this.agt=t.startOnLayout,this.lgt=!!t.transformWithSceneGraph,this.ugt=!!t.useSystemTimescale)}}}{const lS=self.Gs,uS=0,cS=1,fS=2,dS=1,pS=2,mS=3,gS=4,yS=5,wS=6,MS=7,SS=0,TS=1,vS=8,xS=0,bS=1,CS=9,IS=10;class GS{constructor(t,s){this.Flt=s,this.fgt=null,this.dgt=null,this.klt=NaN,this.jlt=NaN,this.egt="default",this.ngt="default",this.du=!1,this.pgt=null,this.vct=null,this.Bc="",this.mgt=null,this.ggt=0,this.ygt=this.Flt.rat().G1(),this.Qc=0,this.Hn="",t&&(t[0]&&(this.fgt=t[0],this.klt=t[0][2],this.jlt=t[0][1]),this.egt=t[1],this.ngt=t[2],this.du=!!t[3],t[6]&&(this.Bc=t[6]),t[7]&&(this.mgt=t[7],this.ggt=t[7][0],this.ygt=t[7][1]),t[8]&&(this.dgt=t[8]),t[8]&&(this.dgt=t[8]),t[9]&&(this.Qc=t[9]),t[10]&&(this.Hn=t[10]),this.pgt=new lS.wgt(t[4],this),this.vct=new lS.Mgt(t[5],this))}Yn(){this.fgt=null,this.Flt=null,this.pgt&&(this.pgt.Yn(),this.pgt=null),this.vct&&(this.vct.Yn(),this.vct=null),this.mgt=null}Zot(){return this.Flt}plt(){return this.pgt||(this.pgt=new lS.wgt(null,this)),this.pgt}sut(){return this.vct||(this.vct=new lS.Mgt(null,this)),this.vct}Sgt(){return this.fgt}out(){return this.jlt}Eut(t){this.jlt=t}hut(){return this.klt}but(t){this.klt=t}aat(){return this.egt}lat(t){this.egt=t}uht(){return this.ngt}uat(t){this.ngt=t}Gut(){return this.du}_ut(t){this.du=!!t}t2(){return this.Bc}clt(){return this.ggt}Cut(){return this.ygt}Iut(t){this.ygt=t}Dut(){return this.dgt[0]}Aut(t){this.dgt||(this.dgt=[]),this.dgt[0]=t}Put(){return this.dgt||(this.dgt=[]),this.dgt[1]}Out(t){this.dgt||(this.dgt=[]),this.dgt[1]=t}iG(){return this.Qc}Ac(){return this.Hn}Mst(){return{keyframeDataJson:this.pgt.Mst(),propertyTrackDataJson:this.vct.Mst(),instanceData:this.fgt,additionalInstanceData:this.dgt,instanceUid:this.klt,objectClassIndex:this.jlt,interpolationMode:this.egt,resultMode:this.ngt,enabled:this.du,id:this.Bc,nestedData:this.mgt,type:this.Qc,name:this.Hn}}Sst(t){t&&(this.fgt=t.instanceData,this.klt=t.instanceUid,this.jlt=t.objectClassIndex,this.egt=t.interpolationMode,this.ngt=t.resultMode,this.du=t.enabled,this.Bc=t.id,this.Qc=t.type?t.type:0,this.Hn=t.name?t.name:"",this.ygt=this.Flt.rat().G1(),t.nestedData&&(this.mgt=t.nestedData,this.ggt=this.mgt[0],this.ygt=this.mgt[1]),t.additionalInstanceData&&(this.dgt=t.additionalInstanceData),this.plt().Sst(t.keyframeDataJson),this.sut().Sst(t.propertyTrackDataJson))}}lS.cgt=class{constructor(t,s){this.mot=s,this.Tgt=[],lS.int.Xmt(this.Tgt,t,GS,this)}Yn(){this.mot=null;for(const t of this.Tgt)t.Yn();lS.Sh(this.Tgt),this.Tgt=null}rat(){return this.mot}Slt(){const t=new GS(null,this);return this.Tgt.push(t),t}vgt(t){return t.plt().Jlt()[0]}xgt(t){return t.plt().Jlt().at(-1)}Zut(t,s){const i=s.plt().Jlt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.hU()===t)return e}}bgt(t,s){const i=s.plt().Jlt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.hU()>t)return e}}Xut(t,s){const i=s.plt().Jlt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.hU()>=t)return e}}Hut(t,s){const i=s.plt().Jlt();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.hU()<=t)return e}}*Xot(){for(const t of this.Tgt)yield t}Mst(){return{trackDataItemsJson:this.Tgt.map(t=>t.Mst())}}Sst(t){t&&lS.int.tgt(this.Tgt,t.trackDataItemsJson,GS,this)}}}{const _S=self.Gs,ES=0,AS=0,DS=1,NS=2,OS=3,PS=4,RS=5,LS=6,FS=7,kS=8,jS=9;class zS{constructor(t,s){this.vct=s,this.Cgt="",this.Igt=null,this.lpt=null,this.Qc=null,this.Ggt=NaN,this._gt=NaN,this.egt="default",this.ngt="default",this.du=!1,this.Egt=null,this.Agt=!0,t&&(this.Cgt=t[0][0],this.Igt=t[0].slice(1),this.lpt=t[1],this.Qc=t[2],this.Ggt=t[3],this._gt=t[4],this.egt=t[5],this.ngt=t[6],this.du=!!t[7],this.Egt=new _S.Dgt(t[8],this),this.Agt=t[9])}Yn(){this.Egt.Yn(),this.Egt=null,this.vct=null,this.Igt=null}sut(){return this.vct}Ict(){return this.Egt||(this.Egt=new _S.Dgt(null,this)),this.Egt}fut(){return this.Cgt}Bct(t){this.Cgt=t}$ct(){return this.Igt}Wct(t){this.Igt=t}Qct(){return this.lpt}Hct(t){this.lpt=t}iG(){return this.Qc}Zct(t){this.Qc=t}sft(){return this.Ggt}ift(t){this.Ggt=t}eft(){return this._gt}nft(t){this._gt=t}aat(){return this.egt}lat(t){this.egt=t}uht(){return this.ngt}uat(t){this.ngt=t}Gut(){return this.du}_ut(t){this.du=!!t}hft(){return!!this.Agt}Mst(){return{propertyKeyframeDataJson:this.Egt.Mst(),sourceAdapterId:this.Cgt,sourceAdapterArguments:this.Igt,property:this.lpt,type:this.Qc,min:this.Ggt,max:this._gt,interpolationMode:this.egt,resultMode:this.ngt,enabled:this.du,canHavePropertyKeyframes:this.Agt}}Sst(t){t&&(this.Cgt=t.sourceAdapterId,this.Igt=t.sourceAdapterArguments,this.lpt=t.property,this.Qc=t.type,this.Ggt=t.min,this._gt=t.max,this.egt=t.interpolationMode,this.ngt=t.resultMode,this.du=t.enabled,this.Agt=t.canHavePropertyKeyframes,this.Ict().Sst(t.propertyKeyframeDataJson))}}_S.Mgt=class{constructor(t,s){this.Llt=s,this.Ngt=[],_S.int.Xmt(this.Ngt,t,zS,this)}Yn(){this.Llt=null;for(const t of this.Ngt)t.Yn();_S.Sh(this.Ngt),this.Ngt=null}dlt(){return this.Llt}hct(){const t=new zS(null,this);return this.Ngt.push(t),t}tft(t){return t.Ict().Cct()[0]}Idt(t){return t.Ict().Cct().at(-1)}oft(t,s){const i=s.Ict().Cct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.hU()===t)return e}}uft(t,s){const i=s.Ict().Cct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.hU()>t)return e}}cft(t,s){const i=s.Ict().Cct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.hU()>=t)return e}}aft(t,s){const i=s.Ict().Cct();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.hU()<=t)return e}}*tut(){for(const t of this.Ngt)yield t}Mst(){return{propertyTrackDataItemsJson:this.Ngt.map(t=>t.Mst())}}Sst(t){t&&_S.int.tgt(this.Ngt,t.propertyTrackDataItemsJson,zS,this)}}}{const BS=self.Gs,US=0,$S=1,VS=2,WS=3;class YS{constructor(t,s){if(this.pgt=s,this.i$=-1,this.Ogt="noease",this.Pgt=!1,this.Bot=null,this.Rgt=null,!t)return;this.i$=t[0],this.Ogt=t[1],this.Pgt=!!t[2];const i=t[3];this.Bot=i?i.split(" "):[],this.Rgt=new Set(this.Bot.map(t=>t.toLowerCase())),this.Lgt=null,this.Fgt=null}Yn(){this.pgt=null,BS.Sh(this.Bot),this.Bot=null,this.Rgt.clear(),this.Rgt=null,this.Lgt=null}plt(){return this.pgt}iht(){return this.Lgt}kgt(t){this.Lgt=t}Wut(){return this.Fgt}jgt(t){this.Fgt=t}hU(){return this.i$}C1(t){this.i$=t,this.pgt.zgt()}_ft(){return this.Ogt}Q1(t){this.Ogt=t}Gut(){return this.Pgt}_ut(t){this.Pgt=!!t}P1(){return this.Bot}wat(t){this.Bot=t?t.split(" "):[],this.Rgt=new Set(this.Bot.map(t=>t.toLowerCase()))}Bgt(){return this.Rgt}Vut(){return Array.from(this.Rgt).join(",").trim()}WX(t){return this.Rgt.has(t.toLowerCase())}Mst(){return{time:this.i$,ease:this.Ogt,enable:this.Pgt,tags:this.Bot}}Sst(t){t&&(this.i$=t.time,this.Ogt=t.ease,this.Pgt=t.enable,this.Bot=t.tags,this.Rgt=new Set(this.Bot.map(t=>t.toLowerCase())))}}BS.wgt=class{constructor(t,s){this.Llt=s,this.Qlt=[],BS.int.Xmt(this.Qlt,t,YS,this),this.zgt()}Yn(){this.Llt=null;for(const t of this.Qlt)t.Yn();BS.Sh(this.Qlt),this.Qlt=null}zgt(){this.Qlt.sort((t,s)=>t.hU()-s.hU());for(let t=0;t<this.Qlt.length;t++){const s=this.Qlt[t];s.kgt(this.Qlt[t+1]),s.jgt(this.Qlt[t-1])}}dlt(){return this.Llt}Ugt(){return this.Qlt.length}Jlt(){return this.Qlt}nct(){const t=new YS(null,this);return this.Qlt.push(t),this.zgt(),t}act(t){for(const s of this.Qlt){if(!t(s))continue;const i=this.Qlt.indexOf(s);-1!==i&&(s.Yn(),this.Qlt.splice(i,1))}this.$gt(),this.zgt()}$gt(){this.Qlt.sort((t,s)=>t.hU()-s.hU())}wct(t){return this.Qlt.indexOf(t)}Mct(t){return this.Qlt[t]}*Vgt(){for(const t of this.Qlt)yield t}*Wgt(){for(let t=this.Qlt.length-1;t>=0;t--)yield this.Qlt[t]}Mst(){return{keyframeDataItemsJson:this.Qlt.map(t=>t.Mst())}}Sst(t){t&&(BS.int.tgt(this.Qlt,t.keyframeDataItemsJson,YS,this),this.zgt())}}}{const QS=self.Gs,JS=0,HS=0,qS=1,XS=2,ZS=1,KS=2,tT=3,sT=4,iT=5;class eT{constructor(t,s){this.Egt=s,this.Ddt=null,this.Ygt=null,this.Qc="",this.i$=NaN,this.Ogt="noease",this.Pgt=!1,this.Qgt=null,this.Jgt=void 0,this.Hgt="line",t&&(this.Ddt=t[0][0],this.Ygt=t[0][1],this.Qc=t[0][2],this.i$=t[1],this.Ogt=t[2],this.Pgt=!!t[3],this.Hgt=t[5],this.Qgt=null,t[4]&&(this.Qgt=new QS.qgt(t[4],this)),this.Lgt=null,this.Xgt=null)}Yn(){this.Egt=null,this.Qgt&&(this.Qgt.Yn(),this.Qgt=null),this.Lgt=null,this.Xgt=null}Zgt(){return this.Qgt}kgt(t){this.Lgt=t}iht(){return this.Lgt}Kgt(t){this.Xgt=t}eht(){return this.Xgt}Yct(){return this.Ddt}Eft(t){"color"===this.Qc&&QS.te(t)?(this.Ddt[0]=QS.Ar(t),this.Ddt[1]=QS.Dr(t),this.Ddt[2]=QS.Nr(t)):this.Ddt=t}ypt(){return this.Ygt}Cft(t){"color"===this.Qc&&QS.te(t)?(this.Ygt[0]=QS.Ar(t),this.Ygt[1]=QS.Dr(t),this.Ygt[2]=QS.Nr(t)):this.Ygt=t}wht(){const t=this.Egt.Oct().uht();return"relative"===t?this.Yct():"absolute"===t?this.ypt():void 0}iG(){return this.Qc}Zct(t){this.Qc=t}hU(){return this.i$}C1(t){this.i$=t,this.Egt.tyt()}_ft(){return this.Ogt}Q1(t){this.Ogt=t}Gut(){return this.Pgt}_ut(t){this.Pgt=!!t}nht(){return this.Hgt}ght(t){if(!this.Qgt)return;if(this.Jgt||null===this.Jgt)return this.Jgt;const s=this.Qgt.syt();if(!s)return this.Jgt=null,this.Jgt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.t2()===t)return this.Jgt=i,this.Jgt}return this.Jgt=null,this.Jgt}Mst(){const t=this.Qgt;return{addonDataJson:t?t.Mst():t,value:this.Ddt,aValue:this.Ygt,type:this.Qc,time:this.i$,ease:this.Ogt,enable:this.Pgt}}Sst(t){t&&(t.addonDataJson&&this.Qgt.iyt(t.addonDataJson),this.Ddt=t.value,this.Ygt=t.aValue,this.Qc=t.type,this.i$=t.time,this.Ogt=t.ease,this.Pgt=t.enable)}}QS.Dgt=class{constructor(t,s){this.Tct=s,this.bct=[],this.eyt=[],QS.int.Xmt(this.bct,t,eT,this),QS.int.Kmt(this.eyt,t,eT,this),this.tyt()}Yn(){this.Tct=null;for(const t of this.bct)t.Yn();QS.Sh(this.bct),this.bct=null;for(const t of this.eyt)t.Yn();QS.Sh(this.eyt),this.eyt=null}tyt(){let t=this.bct;t.sort((t,s)=>t.hU()-s.hU());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.kgt(t[s+1]),s-1>=0&&i.Kgt(t[s-1])}t=this.eyt,t.sort((t,s)=>t.hU()-s.hU());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.kgt(t[s+1]),s-1>=0&&i.Kgt(t[s-1])}}xft(){const t=new eT(null,this);return this.bct.push(t),this.tyt(),t}bft(t){for(const s of this.bct){if(!t(s))continue;const i=this.bct.indexOf(s);-1!==i&&(s.Yn(),this.bct.splice(i,1))}this.nyt(),this.tyt()}nyt(){this.bct.sort((t,s)=>t.hU()-s.hU())}Oct(){return this.Tct}ryt(){return this.bct.length}Idt(){return this.bct[this.bct.length-1]}Cct(){return this.bct}sht(){return this.eyt}*hyt(){for(const t of this.bct)yield t}*oyt(){for(let t=this.bct.length-1;t>=0;t--)yield this.bct[t]}Mst(){const t=this.bct,s=this.eyt;return{propertyKeyframeDataItemsJson:t.map(t=>t.Mst()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.Mst())}}Sst(t){t&&(QS.int.tgt(this.bct,t.propertyKeyframeDataItemsJson,eT,this),QS.int.tgt(this.eyt,t.propertyKeyframeDataItemsIncludingDisabledJson,eT,this),this.tyt())}}}{const nT=self.Gs,rT=0,hT=1;class oT{constructor(t,s){this.Qgt=s,this.Bc=t[0],this.ayt=t[1]}Yn(){this.Qgt=null,this.ayt=null}Zgt(){return this.Qgt}t2(){return this.Bc}Mst(){return{id:this.Bc,data:this.ayt}}Sst(t){t&&(this.Bc=t.id,this.ayt=t.data)}}const aT=0,lT=1,uT=2,cT=3;class fT extends oT{constructor(t,s){super(t,s),this.lyt=this.ayt[0],this.uyt=!!this.ayt[1],this.cyt=this.ayt[2],this.fyt=!!this.ayt[3]}Yn(){super.Yn()}Tht(){return this.lyt}Wmt(){return this.uyt}bht(){return this.cyt}Ymt(){return this.fyt}Mst(){return Object.assign(super.Mst(),{startAnchor:this.lyt,startEnable:!!this.uyt,endAnchor:this.cyt,endEnable:!!this.fyt})}Sst(t){t&&(super.Sst(t),this.lyt=t.startAnchor,this.uyt=!!t.startEnable,this.cyt=t.endAnchor,this.fyt=!!t.endEnable)}}const dT=0,pT=1;class mT extends oT{constructor(t,s){super(t,s),this.dyt=this.ayt[0],this.pyt=this.ayt[1]}Yn(){super.Yn()}Jmt(){return this.dyt}Qmt(){return this.pyt}Mst(){return Object.assign(super.Mst(),{direction:this.dyt,revolutions:this.pyt})}Sst(t){t&&(super.Sst(t),this.dyt=t.direction,this.pyt=t.revolutions)}}const gT=0;class yT extends oT{constructor(t,s){super(t,s),this.myt=this.ayt[0]}Yn(){super.Yn()}fdt(){return this.myt}Mst(){return Object.assign(super.Mst(),{startFrom:this.myt})}Sst(t){t&&(super.Sst(t),this.myt=t.startFrom)}}nT.qgt=class{constructor(t,s){this.gyt=s,this.yyt=[],nT.int.Xmt(this.yyt,t,{sgt:0,map:new Map([["cubic-bezier",fT],["angle",mT],["initial-animation",yT]])},this)}Yn(){this.gyt=null;for(const t of this.yyt)t.Yn();nT.Sh(this.yyt),this.yyt=null}wyt(){return this.gyt}syt(){return this.yyt}*Myt(){for(const t of this.yyt)yield t}Mst(){return{addonDataItemsJson:this.yyt.map(t=>t.Mst())}}Sst(t){t&&nT.int.tgt(this.yyt,t.addonDataItemsJson,{sgt:"id",map:new Map([["cubic-bezier",fT],["angle",mT],["initial-animation",yT]])},this)}}}{const wT=self.Gs,MT="start-value",ST="current-state",TT=0,vT=1;let xT=0;wT.Cmt=class extends wT.Rnt{constructor(t,s){super("tween-"+xT++,t,s),this.Bc="",this.Syt=!1,this.Tyt="start-value",this.zlt=null,this.vyt=null,this.xyt=null,this.byt=null,this.Cyt=null,this.Iyt=null,this.Sct=null,this.Gyt=null}Yn(){this.M1()||(this._yt(wT.Dyt.Ayt.aQ.Eyt),this._yt(wT.Dyt.Ayt.aQ.Nyt),this.Oyt(),super.Yn(),this.zlt=null,this.vyt=null,this.xyt=null,this.Iyt=null,this.Sct=null,this.byt=null,this.Cyt=null)}Hot(t){const s=wT.Wn(wT.Event,"tweenstatereleased");s.Pyt=this,t.dispatchEvent(s)}iG(){return 1}Sot(){for(const t of this.mot.Zot().Xot())this.got.push(wT.Ryt.XC(this,t));this.Sct=this.got[0]}Mlt(){const t=this.mot.Zot().Slt(),s=wT.Ryt.XC(this,t);return this.got.push(s),this.Lyt(),s}Lyt(){this.Sct=this.got[0]}i2(t){return this.Sct._lt()[0]}Xct(t){this.Fyt=t}J1(){const t=this.Zrt();if(!t||!t.length)return;const s=t[0];if(this.Sct=s,!s)return;const i=s.J1();return s.rut()?i:void 0}kyt(t){this.Iyt=t}K1(){return this.byt||(this.byt=new Promise(t=>{this.Cyt=t})),this.byt}Oyt(){this.byt&&(this.Cyt&&this.Cyt(),this.byt=null,this.Cyt=null)}jyt(t){this.xyt||(this.xyt=[]),this.xyt.push(t)}zyt(t){this.vyt||(this.vyt=[]),this.vyt.push(t)}Byt(t){if(!this.xyt)return;const s=this.xyt.indexOf(t);-1!==s&&this.xyt.splice(s,1)}Uyt(t){if(!this.vyt)return;const s=this.vyt.indexOf(t);-1!==s&&this.vyt.splice(s,1)}$yt(t,s){for(const i of this.got)for(const e of i.Hlt){if(e.Elt()!==s)continue;const i=e.sut(),n=e.Oct(),r=i.tft(n);r.Eft(t),r.Cft(t)}}Vyt(t){for(const s of this.got)for(const i of s.Hlt)if(i.Elt()===t)return i}Wyt(t){let s=!1;for(const i of t){const t=this.Vyt(i);t&&(this.$yt(t.pft(),i),s=!0)}if(s){if(this.gat()){const t=this.G1()-this.hU();this.I1(t);for(const s of this.got)s.Iut(t);this.Uat(0)}else{const t=this.hU();this.I1(t);for(const s of this.got)s.Iut(t);this.Uat(t)}this.$at()}}Yyt(t,s){const i=this.Vyt(s);if(!i)return;const e=i.sut(),n=i.Oct(),r=e.Idt(n);r.C1(this.G1()),r.Eft(t),r.Cft(t)}Qyt(t){this.Bc=t}t2(){return this.Bc}Jyt(t){this.Tyt=t}Hyt(){return this.Tyt}X1(t){this.Syt=t}q1(){return this.Syt}vat(){if(this.xyt)for(const t of this.xyt)t(this);if(!this.Z1())for(const t of this.got)t.fct()}Aat(){this.Rot=this.jc.LW()}Drt(){if(!this.kot&&(this.kot=!0,this.vyt))for(const t of this.vyt)t(this)}C1(t){this.qyt(),super.C1(t)}Jat(t){wT.te(t)||(t=this.G1()),t<0?this.xot=0:t>=this.G1()?this.xot=this.G1():this.xot=t,this.Sct.Hat()}vrt(t){if(!this.Art()&&"current-state"===this.Hyt())for(const t of this.got)t.cct();super.vrt(t)}T1(t=!1){if(super.T1(t),!this.Z1())for(const t of this.got)t.uct()}zf(t=!0,s=!1){this.qyt(),super.zf(t,s)}qyt(){for(const t of this.got){const s=t=>{const s=t.hU(),i=this.G1();return 0!==s&&s!==i};t.oct(s),t.lct(s)}}Mnt(){if(this.M1())return!0;const t=this.J1();return!(t&&t.gH().g8()||(this.pot.wrt(this),this.elt(),0))}Irt(t,s,i){if(this.zlt||(this.zlt=this.J1()),!this.zlt||this.zlt.kY())return this.T1(!0),void this.Aat();const e=this.zlt.zW();if(-1!==e&&(t=i*e),0===t&&0===this.zot)return;this.zot=t;const n=this.xot+this.bot+t*this.Cot,r=this.mot.llt;n<0?(this.xot=0,this.bot=-n):n>=r?(this.xot=r,this.bot=this.xot-n):(this.xot=n,this.bot=0);let h=!1,o=!1;const a=this.E1(),l=this.D1();if(a||l?a&&!l?this.Cot>0?this.xot>=r&&(this.Jat(0),this._yt(wT.Dyt.Ayt.aQ.Xyt),this._yt(wT.Dyt.Ayt.aQ.Zyt),o=!0):this.xot<=0&&(this.Jat(r),this._yt(wT.Dyt.Ayt.aQ.Xyt),this._yt(wT.Dyt.Ayt.aQ.Zyt),o=!0):!a&&l?this.Cot>0?this.xot>=r&&(this.Uat(r),this.N1(-1*this.O1()),o=!0,1===this.Iot?this._ot<this.U0()?(this._ot++,this._yt(wT.Dyt.Ayt.aQ.Xyt),this._yt(wT.Dyt.Ayt.aQ.Zyt),this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt),this.IsPlaying()?this.Iot=0:this.Got=0):(this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt),h=!0):0===this.Iot&&(this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt),this.IsPlaying()?this.Iot=1:this.Got=1)):this.xot<=0&&(this.Uat(0),this.N1(-1*this.O1()),o=!0,1===this.Iot?this._ot<this.U0()?(this._ot++,this._yt(wT.Dyt.Ayt.aQ.Xyt),this._yt(wT.Dyt.Ayt.aQ.Zyt),this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt),this.IsPlaying()?this.Iot=0:this.Got=0):(h=!0,this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt)):0===this.Iot&&(this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt),this.IsPlaying()?this.Iot=1:this.Got=1)):a&&l&&(this.Cot>0?this.xot>=r&&(this.Uat(r),this.N1(-1*this.O1()),o=!0,0===this.Iot&&(this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt)),1===this.Iot&&(this._yt(wT.Dyt.Ayt.aQ.Xyt),this._yt(wT.Dyt.Ayt.aQ.Zyt),this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt)),this.IsPlaying()?(this.Iot++,this.Iot=wT.wrap(this.Iot,0,2)):(this.Got=this.Iot+1,this.Got=wT.wrap(this.Got,0,2))):this.xot<=0&&(this.Uat(0),this.N1(-1*this.O1()),o=!0,0===this.Iot&&(this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt)),1===this.Iot&&(this._yt(wT.Dyt.Ayt.aQ.Xyt),this._yt(wT.Dyt.Ayt.aQ.Zyt),this._yt(wT.Dyt.Ayt.aQ.Kyt),this._yt(wT.Dyt.Ayt.aQ.twt)),this.IsPlaying()?(this.Iot++,this.Iot=wT.wrap(this.Iot,0,2)):(this.Got=this.Iot+1,this.Got=wT.wrap(this.Got,0,2)))):this.Cot>0?this.xot>=r&&(this._ot<this.U0()?(this._ot++,this.Jat(0),this._yt(wT.Dyt.Ayt.aQ.Xyt),this._yt(wT.Dyt.Ayt.aQ.Zyt),o=!0):(this.Uat(r),h=!0)):this.xot<=0&&(this._ot<this.U0()?(this._ot++,this.Jat(r),this._yt(wT.Dyt.Ayt.aQ.Xyt),this._yt(wT.Dyt.Ayt.aQ.Zyt),o=!0):(this.Uat(0),h=!0)),!this.M1()&&this.IsPlaying()){if(h)return this.Sct.ult(),this.T1(!0),void this.Aat();this.Sct.Sc(this.xot,!0,!1,o,this.jot,!1),this.jot&&(this.jot=!1)}}_yt(t){const s=this.J1();this.Iyt.swt(this),this.jc.aZ(t,s,this.Iyt.I0()),this.Iyt.iwt()}Mst(){const t=super.Mst(),s=this.rat();return Object.assign(t,{tweenDataItemJson:s.Mst(),id:this.Bc,destroyInstanceOnComplete:this.Syt,initialValueMode:this.Tyt})}Sst(t){t&&(this.rat().Sst(t.tweenDataItemJson),super.Sst(t),this.Bc=t.id,this.Syt=t.destroyInstanceOnComplete,this.Tyt=t.initialValueMode,this.Lyt())}static IsPlaying(t){return t.IsPlaying()}static j1(t){return t.j1()}static ewt(t){return!!t.D1()&&0===t.mat()}static nwt(t){return!!t.D1()&&1===t.mat()}static rwt(t){const s=t.runtime.tat(),i=new wT.qmt;if(t.json){i.Sst(t.json.tweenDataItemJson);const e=new wT.Cmt(i,s);return e.Sst(t.json),e}{const e=new wT.Cmt(i,s);wT.be(t.hwt)||(t.hwt=[t.hwt]),e.Qyt(t.id),e.wat(t.tags),e.Jyt(t.owt),e.X1(t.awt),e._1(t.loop),e.A1(t.lwt),e.I1(t.time),e.oat(0),e.lat("default"),e.uat(t.hwt[0].uwt),e.fat(t.B0);const n=e.Mlt();n.but(t.G0.LX()),n.lat("default"),n.uat(t.hwt[0].uwt),n._ut(!0),n.Eut(t.G0.gH().CV());const r=t.G0.g0(),h=r.Nut()?r.Dut():t.G0.FY().xy(),o=r.Nut()?r.Put():t.G0.FY().Cy();n.Aut(h),n.Out(o);const a=n.ect();a.C1(0),a.Q1("noease"),a._ut(!0),a.wat("");const l=n.ect();l.C1(t.time),l.Q1("noease"),l._ut(!0),l.wat("");for(const s of t.hwt){const i=n.rct();i.Bct(s.cwt),i.Vct(s.fwt),i.Jct(s.Tut),i.Xct(s.type),i.ift(NaN),i.nft(NaN),i.lat("default"),i.uat(s.uwt),i._ut(!0);const e=i.vft();e.Zct(s.valueType),e.C1(0),e.Q1(s.dwt),e._ut(!0),e.Eft(s.pwt),e.Cft(s.pwt);const r=i.vft();r.Zct(s.valueType),r.C1(t.time),r.Q1(s.dwt),r._ut(!0),r.Eft(s.mwt),r.Cft(s.mwt),i.iat()}return e}}static but(t,s){if(!isNaN(s))for(const i of t.Zrt())i.but(s)}static kyt(t,s){t.kyt(s)}gwt(t,s){return this.Gyt||(this.Gyt=wT.Wn(self.U1,this,t,s)),this.Gyt}}}{const bT=self.Gs;bT.Ryt=class extends bT.Kot{constructor(t,s){super(t,s),this.ywt=null,this.wwt=null}static XC(t,s){return bT.Wn(bT.Ryt,t,s)}Mwt(){1===this.Hlt.length?this.ywt=this.Hlt[0]:(this.ywt=this.Hlt[0],this.wwt=this.Hlt[1])}qlt(){for(const t of this.Llt.sut().tut())this.Hlt.push(bT.Swt.XC(this,t));this.Mwt()}rct(){const t=this.Llt.sut().hct(),s=bT.Swt.XC(this,t);return this.Hlt.push(s),this.Mwt(),s}vrt(){if(this.nut(),!this.rut()&&this.nat())return;const t=this.eut().gat()?0:this.Cut();for(const s of this.Hlt)s.vrt(t),0===this.Xlt&&1===s.Fut()&&(this.Xlt=1),0===this.Dnt&&1===s.xrt()&&(this.Dnt=1);this.Zlt=0,this.Hlt.some(t=>t.olt())&&(this.Zlt=1),this.Ylt=this.kut(t),this.$lt=!1,this.Vlt=!1,this.Sc(t)}flt(){}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.zlt||this.J1(),this.zlt)return!this.zlt.kY()&&(!r||!this.gH().g8())&&(this.wwt?(this.ywt.Sc(t,i,e,h),this.wwt.Sc(t,i,e,h)):this.ywt.Sc(t,i,e,h),void(0!==this.ywt.Fut()&&(this.Blt||(this.Blt=this.zlt.FY()),this.Blt&&this.Blt.FZ())))}mlt(){}Sst(t){super.Sst(t),this.Mwt()}}}{const CT=self.Gs;CT.Swt=class extends CT.iut{constructor(t,s){super(t,s),this.Twt=!1}static XC(t,s){return CT.Wn(CT.Swt,t,s)}Sc(t,s=!1,i=!1,e=!1){let n,r;if(this.Twt)n=this.bct[0],r=this.bct[1];else if(s)n=this.vct.aft(t,this.Tct),r=n.iht();else{if(this.Gct){const s=this.eut(),i=this.Gct.iht(),e=this.Gct.hU(),n=i?i.hU():s.G1();(t<=e||t>=n)&&(this.Gct=this.vct.aft(t,this.Tct))}else this.Gct=this.vct.aft(t,this.Tct);n=this.Gct,r=n.iht()}this.xct.Sc(t,n,r,s,i,e)}vft(){const t=this.Tct.Ict().xft();return this.Gct=null,this.Twt=this.rft().length<=2,t}lct(t){this.Gct=null,this.Tct.Ict().bft(t),this.Twt=this.rft().length<=2}Mst(){return{sourceAdapterJson:this.iat().Mst(),basic:this.Twt}}Sst(t){t&&(this.iat().Sst(t.sourceAdapterJson),this.Twt=t.basic)}}}{const IT=self.Gs,GT=self.$u,_T=0,ET=1,AT=2;IT.Tc=class extends IT.$n{constructor(t,s=!0){super(),this.Hn=t[0],this.vwt=t[2],this.xwt=[];for(const s of t[1]){const t=IT.bwt.XC(this,s);this.xwt.push(t)}for(let t=0;t<this.xwt.length;t++){const s=this.xwt[t],i=this.xwt[t+1],e=this.xwt[t-1];s.kgt(i),s.Kgt(e)}this.Cwt=new Map,this.Iwt=new Map,this.Gwt(),s&&GT.xc(this.Hn,(t,s,i,e)=>this.Sc(t,s,i,e),null,{transition:this})}static XC(t){return IT.Wn(IT.Tc,t)}Yn(){for(const t of this.xwt)t.Yn();IT.Sh(this.xwt),this.xwt=null,this.Cwt.clear(),this.Cwt=null,this.Iwt.clear(),this.Iwt=null}vc(t){this.vwt=!!t}_wt(t){const s=this.Iwt.get(t);if(s)return s;for(const s of this.xwt)if(s.Ewt()===t)return this.Iwt.set(t,s),s}Awt(t){for(let s=this.xwt.length-1;s>=0;s--){const i=this.xwt[s],e=i.Ewt();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.eht();if(!t)break;if(t.Ewt()!==s.Ewt())break;s=t}return s}}}}Sc(t,s,i,e){let n=t/e;if(this.vwt){const n=this._wt(0),r=this._wt(1),h=s+(s+i)*n.Dwt(),o=(s+i)*r.Dwt()-h;return 0===e?h+o:GT.Cc(t,h,o,e)}0===e&&(n=1);let r=this.Awt(n),h=r.iht();if(!h){const t=r.eht(),s=r;r=t,h=s}const o=h.Ewt()-r.Ewt(),a=IT.qn(n,r.Ewt(),h.Ewt(),0,o);if(r.Nwt()||0===o){const t=s+(s+i)*r.Dwt(),e=(s+i)*h.Dwt()-t;return 0===o?1===a?t+e:t:GT.Cc(a,t,e,o)}const l=r.Ewt(),u=r.Dwt(),c=r.Ewt()+r.Owt(),f=r.Dwt()+r.Pwt(),d=h.Ewt()+h.Rwt(),p=h.Dwt()+h.Lwt(),m=h.Ewt(),g=h.Dwt();let y=GT.hc("spline")(a,l,u,c,f,d,p,m,g,this.Cwt.get(r));return y+=r.Dwt(),(1-y)*s+y*(s+i)}Gwt(){this.Cwt.clear();for(let t=0;t<this.xwt.length-1;t++){const s=this.xwt[t];if(!s.Wmt())continue;const i=s,e=this.xwt[t+1];if(!e.Ymt())continue;const n=i.Ewt(),r=i.Ewt()+i.Owt(),h=e.Ewt()+e.Rwt(),o=e.Ewt();this.Cwt.set(i,GT.Ic(n,r,h,o))}}}}{const DT=self.Gs,NT=0,OT=1,PT=2,RT=3,LT=4,FT=5,kT=6,jT=7,zT=8;DT.bwt=class extends DT.$n{constructor(t,s){super(),this.Fwt=t,this.kwt=s[0],this.jwt=s[1],this.zwt=s[2],this.Bwt=s[3],this.Uwt=s[4],this.$wt=s[5],this.uyt=s[6],this.fyt=s[7],this.Vwt=s[8],this.Lgt=null,this.Xgt=null}Yn(){this.Fwt=null}static XC(t,s){return DT.Wn(DT.bwt,t,s)}kgt(t){this.Lgt=t}iht(){return this.Lgt}Kgt(t){this.Xgt=t}eht(){return this.Xgt}Ewt(){return this.kwt}Dwt(){return this.jwt}Owt(){return this.zwt}Pwt(){return this.Bwt}Rwt(){return this.Uwt}Lwt(){return this.$wt}Wmt(){return this.uyt}Ymt(){return this.fyt}Nwt(){return"linear"===this.Vwt}Wwt(){return"cubic"===this.Vwt}}}{const BT=self.Gs;BT.Ywt=class extends BT.$n{constructor(t){super(),this.jc=t,this.Qwt=[]}Yn(){for(const t of this.Qwt)t.Yn();BT.Sh(this.Qwt),this.Qwt=null}XC(t){this.Qwt.push(BT.Tc.XC(t))}}}{const UT=self.Gs;UT.Jwt=class extends UT.$n{constructor(t){super(),this.jc=t,this.Hwt=null,this.qwt=null,this.vnt=t=>this.xnt(t.G0)}Yn(){if(this.Nnt(),this.Hwt){for(const t of this.Hwt.values())t.clear();this.Hwt.clear()}this.Hwt=null,this.jc=null}XC(t){if(this.Hwt||(this.Hwt=new Map),!t)return;const s=t[0][16][0],i=t[1];this.Hwt.has(i)||this.Hwt.set(i,new Map),this.Hwt.get(i).set(s,t)}Ont(){const t=this.jc.Mf();t&&t.addEventListener("instancedestroy",this.vnt)}Nnt(){const t=this.jc.Mf();t&&t.removeEventListener("instancedestroy",this.vnt)}Xwt(){return!!this.Hwt&&0!==this.Hwt.size}Zwt(t,s){let i=0;if(i=t instanceof UT.Kwt?t.CV():t,!this.Hwt.has(i))return;const e=this.Hwt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}tMt(t,s){this.qwt||(this.qwt=new WeakMap),this.qwt.has(t)||this.qwt.set(t,s)}sMt(t){if(!this.qwt)return"";return this.qwt.get(t)||""}xnt(t){this.qwt&&this.qwt.has(t)&&this.qwt.delete(t)}}}{const $T=self.Gs;$T.iMt=class{constructor(t){this.jc=t,this.eMt=new $T.nMt}Yn(){this.eMt.Yn(),this.eMt=null,this.jc=null}yQ(){return this.jc}XC(t){this.eMt.zu(t)}rMt(t){return this.eMt.Ys(t)}hMt(){return this.eMt.hMt()}}}{const VT=self.Gs;VT.oMt=class{constructor(t,s,i,e,n,r,h){this.jc=n.yQ(),this.aMt=n,this.lMt=t,this.uMt=i,this.cMt=e,this.Vw=s,this.ent=r,this.fMt=h??r.J1().LX(),this.dMt(),this.pMt=this.gMt?.mMt()??-1,this.yMt=[],this.wMt=null,this.MMt=NaN,this.SMt=null,this.TMt=null,this.vMt=null,this.xMt="",this.bMt=null,this.CMt="",this.IMt="",this.GMt=0,this._Mt=!1,this.Oot=!1}Yn(){this.Oot||(VT.Sh(this.yMt),this.yMt=null,this.jc=null,this.aMt=null,this.cMt=null,this.ent=null,this.wMt=null,this.MMt=NaN,this.SMt&&this.SMt.clear(),this.SMt=null,this.TMt=null,this.vMt=null,this.xMt="",this.bMt=null,this.CMt="",this.IMt="",this.Oot=!0)}Qn(){return this.Oot}EMt(){return this.aMt}yQ(){return this.jc}Ac(){return this.lMt}AMt(){return this.cMt}w1(){return this.Vw}Hnt(){return this.ent||(this.ent=this.jc.NY(this.fMt).g0()),this.ent}DMt(){return this.NMt(this.pMt)}OMt(){const t=this.DMt();return t?t.w1():""}PMt(){const t=this.DMt();return t?t.P1():[]}RMt(t){const s=this.PMt();if(!s)return!1;if(!s.length)return!1;const i=VT.oMt.Mat(t);return!(!i||!i.length)&&i.every(VT.oMt.Tat,s)}LMt(t,s){const i=this.PMt();if(!i)return!1;if(!i.length)return!1;const e=VT.oMt.Mat(t);return!(!e||!e.length)&&e.every(t=>VT.oMt.FMt.call(i,t,s))}static Tat(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Mat(t){return t.trim().split(" ")}static FMt(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>VT.compare(i.trim(),s,t.trim()))}kMt(t){const s=this.DMt();if(s){if(VT.te(t)){const i=s.jMt(),e=i?i[t]:void 0;if(VT.te(e))return this.NMt(e)}if("string"==typeof t)for(const i of s.jMt()){const s=this.NMt(i);if(s.b1(t))return this.NMt(s.mMt())}}}zMt(t){const s=this.kMt(t);return s?s.w1():""}BMt(t){const s=this.kMt(t);return s?s.P1():""}UMt(t){const s=this.DMt();if(!s)return-1;const i=s.jMt();if(!i)return-1;const e=this.kMt(t);return e?i.indexOf(e.mMt()):-1}$Mt(){const t=this.DMt();if(!t)return 0;const s=t.jMt();return s?s.length:0}NMt(t){return this.cMt.NMt(t)}zf(){this.WMt().VMt(!0)}VMt(t){if(this.YMt()){for(const[t,s]of this.YMt().entries())s.VMt(!1);this.YMt().clear()}if(this.SMt=null,this.wMt=null,this.QMt=null,this.TMt=null,this.xMt="",this.bMt=null,this.CMt="",this.IMt="",this.yMt=[],t){this.aMt.JMt(this);const t=this.gMt.mMt();t!==this.pMt&&this.HMt(t)}else this.pMt=this.gMt.mMt()}qMt(){const t=this.cMt.NMt(this.pMt);return t?t.ZMt().XMt():0}KMt(t){return!(t<0)&&t===this.tSt()}tSt(){const t=this.cMt.NMt(this.pMt);if(!t)return-1;let s=t.ZMt().sSt();return s?t.ZMt().iSt().indexOf(s):-1}eSt(t){const s=this.nSt(t);return s?s.Ac():""}rSt(t){let s;return VT.te(t)&&(s=this.nSt(t)),"string"==typeof t&&(s=this.hSt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Yct():""}oSt(t,s){if(t.Gut())return t.mMt();{const i=t.ZMt().sSt();if(!i)return s.mMt();const e=i.aSt();if(!VT.te(e))return s.mMt();const n=this.NMt(e);return n?this.oSt(n,s):s.mMt()}}lSt(t,s){if(t.Gut()){if("reference"===t.iG()){const s=t.uSt(),i=t.cSt(),e=this.aMt.rMt(s);if(!e)return[-1,null];const n=e.fSt(i);return n?this.lSt(n,e):this.lSt(e.dSt(),e)}return[t.mMt(),s]}{const i=t.ZMt().sSt();if(!i)return[-1,null];const e=i.aSt();if(!VT.te(e))return[-1,null];const n=s.NMt(e);return n?this.lSt(n,s):[-1,null]}}pSt(t,s){let i=this.NMt(t);if(i){if(!i.Gut()){const s=this.NMt(this.pMt);t=this.oSt(i,s)}if(VT.te(t)&&t!==this.pMt)if(i=this.NMt(t),"reference"===i.iG()){const e=i.uSt(),n=i.cSt(),r=this.aMt.rMt(e);let h=r.fSt(n);if(h){const i=this.lSt(h,r);if(-1===i[0])return;s(this.pMt,t,i[1],i[0])}else s(this.pMt,t)}else s(this.pMt,t)}}mSt(t){let s;if(VT.te(t)&&(s=this.nSt(t)),"string"==typeof t&&(s=this.hSt(t)),!s)return;let i=s.aSt();VT.te(i)&&this.pSt(i,(t,s,i,e)=>{this.yMt.push(t),this.HMt(s,i,e)})}gSt(){const t=this.ySt();if(!t)return;const s=t.aSt();VT.te(s)&&this.pSt(s,(t,s,i,e)=>{this.yMt.push(t),this.HMt(s,i,e)})}wSt(t){const s=this.cMt.fSt(t);if(!s)return;const i=s.mMt();VT.te(i)&&this.pSt(i,(t,s,i,e)=>{this.yMt.push(t),this.HMt(s,i,e)})}MSt(){const t=this.yMt.pop();VT.te(t)?this.HMt(t):this.SSt()&&(this.aMt.JMt(this.SSt(),!0,!1,!1),this.SSt().HMt(this.TSt()),this.WMt().vSt(this.SSt()))}xSt(t){if(!this.DMt())return;const s=this.kMt(t);if(s){if(!s.Gut())return;const t=s.mMt();if(!VT.te(t))return;this.yMt.push(this.pMt),this.HMt(s.mMt())}}bSt(t){if(VT.te(t))return!!this.cMt.NMt(this.pMt).ZMt().iSt()[t];if("string"==typeof t){const s=this.cMt.NMt(this.pMt).ZMt().iSt();for(let i=0;i<s.length;i++)if(s[i].Ac()===t)return!0;return!1}return!1}CSt(){this._Mt=!0}ISt(){return this.GMt>0}GSt(){this.GMt++}_St(){this.GMt--,0===this.GMt&&this._Mt&&this.aMt.ESt(this)}HMt(t,s,i){const e=this.pMt,n=this.Hnt().J1();this.GSt(),this.aMt.ASt(this),this.jc.aZ(VT.uQ.NSt.aQ.DSt,n),this.jc.aZ(VT.uQ.NSt.aQ.OSt,n),this.jc.aZ(VT.uQ.NSt.aQ.PSt,n),this.jc.aZ(VT.uQ.NSt.aQ.RSt,n),this.pMt=t;let r=this.NMt(this.pMt);if("dictionary"===r.iG()&&(this.jc.aZ(VT.uQ.NSt.aQ.LSt,n),this.jc.aZ(VT.uQ.NSt.aQ.FSt,n),this.jc.aZ(VT.uQ.NSt.aQ.kSt,n),this.jc.aZ(VT.uQ.NSt.aQ.jSt,n)),this.aMt.zSt(),this._St(),!this.Qn()&&(r=this.NMt(this.pMt),"reference"===r.iG())){const t=s?s.Ac():r.uSt();if(this.BSt(r)){this.yMt.pop();const t=this.USt(r);this.aMt.JMt(t,!0,!0,!1),t.$St(this,e),this.WMt().vSt(t)}else{const s="number"==typeof i?i:r.cSt();if(t){this.yMt.pop();let i=r.VSt();if(i){let t=this.aMt.WSt(i);for(;t;)i=VT.Gm(i),t=this.aMt.WSt(i)}else{i=`${t}-ref`;let s=this.aMt.WSt(i);for(;s;)i=VT.Gm(i),s=this.aMt.WSt(i)}const n=this.aMt.YSt(t,s,i,this.ent,!0);n.$St(this,e),this.QSt(r,n);const h=this.WMt();n.JSt(h),h.vSt(n)}}}}ySt(){const t=this.cMt.NMt(this.pMt);return t?t.ZMt().sSt():null}nSt(t){const s=this.cMt.NMt(this.pMt);if(!s)return null;const i=s.ZMt().iSt();if(!i)return null;return i[t]||null}hSt(t){const s=this.cMt.NMt(this.pMt);if(!s)return null;return s.ZMt().HSt(t)||null}dMt(t){if("number"==typeof t){let s=this.NMt(t);s||(s=this.cMt.dSt()),this.gMt=s}else if("number"==typeof this.uMt){let t=this.NMt(this.uMt);t||(t=this.cMt.dSt()),this.gMt=t}else{let t=this.cMt.fSt(this.uMt);t||(t=this.cMt.dSt()),this.gMt=t}}Mst(){return this._Mt?null:{flowchartName:this.lMt,flowchartTag:this.Vw,startNodeTag:this.uMt,currentNodeId:this.pMt,previousNodeIds:this.yMt,pluginUID:this.ent.J1().LX(),reference:{previousFlowchartTag:this.SSt()?this.SSt().w1():"",previousStartNodeId:VT.te(this.TSt())?this.TSt():NaN,referencesJson:this.qSt(),currentReferenceFlowchartTag:this.XSt()?this.XSt().w1():"",rootFlowchartTag:this.WMt()?this.WMt().w1():""}}}qSt(){if(!this.ZSt())return null;const t=[];for(const[s,i]of this.YMt().entries())t.push({flowchartElementId:s.mMt(),flowchartStateTag:i.w1()});return t.length?t:null}Sst(t){if(t){if(this.lMt=t.flowchartName,this.Vw=t.flowchartTag,this.uMt=t.startNodeTag,this.pMt=t.currentNodeId,this.yMt=t.previousNodeIds,this.fMt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.xMt=s.previousFlowchartTag,this.MMt=s.previousStartNodeId,this.bMt=s.referencesJson,this.CMt=s.currentReferenceFlowchartTag,this.IMt=s.rootFlowchartTag}this.dMt()}}SSt(){return"string"==typeof this.xMt&&this.xMt&&(this.wMt=this.aMt.WSt(this.xMt),this.xMt=""),this.wMt}TSt(){return this.MMt}$St(t,s){this.wMt=t,this.MMt=s}XSt(){return"string"==typeof this.CMt&&this.CMt&&(this.TMt=this.aMt.WSt(this.CMt),this.CMt=""),this.TMt}vSt(t){this.TMt=t,this.TMt===this&&(this.TMt=null)}WMt(){return"string"==typeof this.IMt&&this.IMt&&(this.vMt=this.aMt.WSt(this.IMt),this.IMt=""),this.vMt?this.vMt:this}JSt(t){this.vMt=t}ZSt(){return this.KSt(),!!this.SMt}BSt(t){return this.KSt(),this.SMt&&this.SMt.has(t)}KSt(){if(this.bMt){this.SMt&&this.SMt.clear(),this.SMt||(this.SMt=new Map);for(const t of this.bMt){const s=this.aMt.WSt(t.flowchartStateTag),i=s.NMt(t.flowchartElementId);this.SMt.set(i,s)}this.bMt=null}}YMt(){return this.KSt(),this.SMt}USt(t){return this.KSt(),this.SMt.get(t)}QSt(t,s){this.SMt||(this.SMt=new Map),this.SMt.set(t,s)}}}{const WT=self.Gs;WT.tTt=class{constructor(t){this.jc=t,this.sTt=new Map,this.iTt=null,this.eTt=[],this.nTt=()=>this.Gnt(),this.rTt=null}Yn(){WT.Sh(this.eTt),this.eTt=null,this.sTt.clear(),this.sTt=null,this.iTt=null,this.jc=null,this.rTt=null}yQ(){return this.jc}rMt(t){return this.jc.EMt().rMt(t)}YSt(t,s,i,e,n,r){const h=this.jc.EMt().rMt(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.sTt.has(i)){const t=this.sTt.get(i);t&&this.ESt(t)}const o=new WT.oMt(t,i,s,h,this,e,r);return this.sTt.set(i,o),n&&this.JMt(o,!0),o}ESt(t){if(t.CSt(),t.ISt())return;const s=t.w1();this.sTt.delete(s),t.Yn(),this.iTt===t&&(this.iTt=null)}hTt(t){t.zf()}WSt(t){return this.sTt.get(t)}ASt(t){this.eTt.push(t)}zSt(){this.eTt.pop()}JMt(t,s=!1,i=!1,e=!0){if(e){const s=t.XSt();t=s||t}t!==this.iTt&&(this.oTt(),this.aTt(t,s,i))}lTt(t){return"string"==typeof t?this.WSt(t):this.eTt.length?this.eTt[this.eTt.length-1]:this.iTt}oTt(){if(!this.iTt)return;if(this.iTt.Qn())return;const t=this.iTt.Hnt().J1();this.iTt.GSt(),this.ASt(this.iTt),this.jc.aZ(WT.uQ.NSt.aQ.uTt,t),this.zSt(),this.iTt._St()}aTt(t,s=!1,i=!1){if(this.iTt=t,!this.iTt)return;if(this.iTt.Qn())return;const e=this.iTt.Hnt().J1();this.iTt.GSt(),this.ASt(this.iTt),this.jc.aZ(WT.uQ.NSt.aQ.cTt,e),!0!==i&&"number"!=typeof i||this.iTt.dMt(i),s&&(this.jc.aZ(WT.uQ.NSt.aQ.LSt,e),this.jc.aZ(WT.uQ.NSt.aQ.FSt,e),this.jc.aZ(WT.uQ.NSt.aQ.kSt,e),this.jc.aZ(WT.uQ.NSt.aQ.jSt,e)),this.zSt(),this.iTt._St()}Mst(){return{flowchartJsonObjects:[...this.sTt.values()].map(t=>t.Mst()),currentFlowchartTag:this.iTt?this.iTt.w1():null}}Sst(t){if(!t)return;this.rTt=t;const s=new Map;for(const t of this.rTt.flowchartJsonObjects){const i=t.flowchartTag;if(this.sTt.has(i)){const e=this.sTt.get(i);e.Sst(t),s.set(i,e)}else{const i=this.YSt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.Sst(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.sTt.entries())s.has(t)||i.Yn();this.sTt.clear(),this.sTt=s,this.jc.Xit()?this.jc.Mf().addEventListener("afterload",this.nTt):this.Gnt()}Gnt(){this.jc.Mf().removeEventListener("afterload",this.nTt);const t=this.sTt.get(this.rTt.currentFlowchartTag);t&&this.JMt(t,!0),this.rTt=null}}}{const YT=self.Gs;YT.nMt=class{constructor(){this.fTt=new Map}Yn(){for(const t of this.fTt.values())t.Yn();this.fTt.clear(),this.fTt=null}zu(t){const s=new YT.dTt(t),i=s.Ac();this.fTt.set(i,s)}Ys(t){return this.fTt.get(t)}hMt(){return!!this.fTt.size}static pTt(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const QT=self.Gs,JT=0,HT=1;QT.dTt=class{constructor(t){this.Hn=t[0],this.mTt=new QT.gTt(t[1],this)}Yn(){this.mTt.Yn(),this.mTt=null}yTt(){return this.mTt}NMt(t){return this.mTt.NMt(t)}fSt(t){return this.mTt.fSt(t)}dSt(){return this.mTt.dSt()}Ac(){return this.Hn}}}{const qT=self.Gs,XT=0,ZT=1,KT=2,tv=3,sv=4,iv=5,ev=6,nv=7,rv=8,hv=8,ov=9,av=10,lv=11;class uv{constructor(t,s){this.mTt=s,this.Qc=t[7],this.wTt=t[0],this.Vw=t[1],this.Vw?this.Bot=this.Vw.trim().split(" ").map(t=>t.trim()):this.Bot=[],this.MTt=t[2],this.STt=null,this.TTt=null,this.Pgt=!1,"dictionary"===this.Qc&&(this.STt=t[3],this.TTt=t[4],this.Pgt=t[8]),this.vTt=t[6],this.xTt=null,this.bTt=null,this.CTt=null,"reference"===this.Qc&&(this.xTt=t[8],this.bTt=t[9],this.CTt=t[10],this.Pgt=t[11]),this.ITt=new qT.GTt(t[5],this)}Yn(){this.mTt=null}yTt(){return this.mTt}ZMt(){return this.ITt}mMt(){return this.wTt}w1(){return this.Vw}P1(){return this.Bot}b1(t){if(!this.Bot)return!1;if(!this.Bot.length)return!1;const s=qT.oMt.Mat(t);return!(!s||!s.length)&&s.every(qT.oMt.Tat,this.Bot)}_Tt(){return this.vTt}ETt(t){this.vTt=!!t}ATt(){if("dictionary"===this.Qc)return!0;if("reference"===this.Qc)return!1;throw new Error(`unexpected flowchart node type: ${this.Qc}`)}jMt(){return this.MTt}DTt(){return this.STt}NTt(){return this.TTt}iG(){return this.Qc}Gut(){return this.Pgt}uSt(){return this.xTt}cSt(){return this.bTt}VSt(){return this.CTt}}qT.gTt=class{constructor(t,s){this.cMt=s,this.OTt=[],this.PTt=new Map,this.RTt=new Map,this.LTt=null,qT.nMt.pTt(this.OTt,t,uv,this);for(const t of this.OTt){const s=t.mMt(),i=t.w1(),e=t.P1(),n=t._Tt();if(this.PTt.set(s,t),i)for(const s of e)this.RTt.has(s)||this.RTt.set(s,new Set),this.RTt.get(s).add(t);n&&(this.LTt=t);const r=t.ZMt();for(const t of r.FTt()){const s=t.mMt();this.PTt.set(s,t)}}this.LTt||this.kTt()}Yn(){this.cMt=null;for(const t of this.OTt)t.Yn();qT.Sh(this.OTt),this.OTt=null}AMt(){return this.cMt}NMt(t){return this.PTt.get(t)}fSt(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.RTt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}dSt(){return this.LTt}*jTt(){for(const t of this.OTt)yield t}kTt(){let t=0;for(const s of this.jTt())s._Tt()&&t++;if(0===t){for(const t of this.jTt())if(t.ATt()&&!t._Tt())return void t.ETt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.jTt())s.ATt()&&(s._Tt()&&t?t=!1:s._Tt()&&!t&&s.ETt(!1))}}for(const t of this.jTt())if(t.ATt()&&t._Tt())return void(this.LTt=t)}}}{const cv=self.Gs,fv=0,dv=1,pv=2,mv=3,gv=4,yv=5;class wv{constructor(t,s){this.ITt=s,this.wTt=t[0],this.Hn=t[1],this.Ddt=t[2],this.zTt=t[3],this.Pgt=t[4],this.BTt=t[5]}Yn(){this.ITt=null}ZMt(){return this.ITt}mMt(){return this.wTt}Ac(){return this.Hn}Yct(){return this.Ddt}aSt(){return this.zTt}Gut(){return this.Pgt}UTt(){return this.BTt}}cv.GTt=class{constructor(t,s){this.$Tt=s,this.VTt=[],this.WTt=new Map,cv.nMt.pTt(this.VTt,t,wv,this),this.YTt=this.VTt.filter(t=>t.Gut());for(const t of this.YTt)this.WTt.set(t.Ac(),t)}Yn(){this.$Tt=null;for(const t of this.VTt)t.Yn();cv.Sh(this.VTt),this.VTt=null,cv.Sh(this.YTt),this.YTt=null}QTt(){return this.$Tt}XMt(){return this.YTt.length}iSt(){return this.YTt}HSt(t){return this.WTt.get(t)}sSt(){for(const t of this.YTt)if(t.UTt())return t}*FTt(){for(const t of this.YTt)yield t}}}{const Mv=self.Gs;Mv.JTt=class extends Mv.$n{constructor(t){super(),this.HTt=t,this.qTt=[],this.qTt.push(Mv.Wn(Mv.XTt,this)),this.$w=0,this.ZTt=this.qTt[0]}Yn(){for(const t of this.qTt)t.Yn();Mv.Sh(this.qTt),this.ZTt=null,this.HTt=null}gH(){return this.HTt}cH(){return this.ZTt}KTt(){return this.qTt[this.$w-1]}Au(){this.cH().Au()}tvt(){const t=this.qTt,s=++this.$w;if(s===t.length){const s=Mv.Wn(Mv.XTt,this);t.push(s),this.ZTt=s}else{const i=t[s];i.zf(),this.ZTt=i}}svt(){const t=this.qTt,s=++this.$w;s===t.length&&t.push(Mv.Wn(Mv.XTt,this));const i=t[s];i.hd(t[s-1]),this.ZTt=i}W3(){this.ZTt=this.qTt[--this.$w]}ivt(t){const s=this.qTt;for(let i=0,e=s.length;i<e;++i)s[i].ivt(t)}}}{const Sv=self.Gs;Sv.XTt=class extends Sv.$n{constructor(t){super(),this.qTt=t,this.HTt=this.qTt.gH(),this.evt=this.HTt.yQ().MW(),this.nvt=!0,this.B6=[],this.rvt=[]}Yn(){this.hvt(),this.qTt=null,this.HTt=null,this.evt=null}hvt(){Sv.Sh(this.B6),Sv.Sh(this.rvt)}gH(){return this.HTt}ovt(){return this.nvt}avt(){return this.nvt?!!this.HTt.bH():!!this.B6.length}uH(){return this.nvt?this.HTt.uH():this.B6}lvt(){return!!this.rvt.length}uvt(){return this.rvt}cvt(){const t=this.uH();return t.length?t:this.rvt}zf(){this.nvt=!0,Sv.Sh(this.rvt)}Au(){this.nvt=!0}hd(t){t.ovt()?this.zf():(this.nvt=!1,Sv.Ch(this.B6,t.B6),Sv.Sh(this.rvt))}fvt(t){this.B6.push(t)}dvt(t){this.rvt.push(t)}pvt(t){this.nvt=!!t}mvt(){return this.B6}gvt(){return this.rvt}yvt(t){this.nvt=!1,Sv.Sh(this.B6),this.B6.push(t)}wvt(t){this.nvt=!1,Sv.Ch(this.B6,t)}Mvt(t){this.nvt=!1,Sv.Sh(this.B6);for(const s of t)this.B6.push(s)}Svt(t,s){for(const i of s)t.has(i)||this.rvt.push(i)}Tvt(t){for(const s of t)this.B6.push(s);Sv.Ah(this.rvt,t)}vvt(){Sv.Sh(this.rvt)}xvt(t){if(t)if(this.evt.D3().fW().bvt()){this.ovt()&&(Sv.Sh(this.B6),Sv.Ch(this.rvt,t.gH().uH()),this.nvt=!1);const s=this.rvt.indexOf(t);-1!==s&&(this.B6.push(this.rvt[s]),this.rvt.splice(s,1))}else this.yvt(t)}ivt(t){Sv.Ah(this.B6,t),Sv.Ah(this.rvt,t)}}}{const Tv=self.Gs;Tv.Cvt=class extends Tv.$n{constructor(t){super(),this.Ivt=t,this.jc=this.Ivt.yQ(),this.qTt=[],this.qTt.push(Tv.Wn(Tv.Gvt,this,null)),this.$w=0,this._vt=[]}Yn(){for(const t of this.qTt)t.Yn();Tv.Sh(this.qTt),Tv.Sh(this._vt),this.Ivt=null,this.jc=null}hW(){return this.Ivt}yQ(){return this.jc}D3(){return this.qTt[this.$w]}Evt(){return this.qTt}Avt(){return this.$w}N3(t){const s=this.qTt,i=++this.$w;if(i===s.length){const i=Tv.Wn(Tv.Gvt,this,t);return s.push(i),i}{const e=s[i];return e.zf(t),e}}W3(){--this.$w}Dvt(t){this._vt.push(t)}Nvt(){this._vt.pop()}wW(){const t=this._vt;return 0===t.length?null:t.at(-1)}}}{const vv=self.Gs;vv.Gvt=class extends vv.$n{constructor(t,s){super(),this.qTt=t,this.jc=this.qTt.yQ(),this.Ovt=s,this.Pvt=0,this.Rvt=0,this.Lvt=!1,this.Fvt=!1,this.kvt=null,this.jvt=0,this.zvt=0,this.Bvt=null}Yn(){this.zf(null),this.qTt=null,this.jc=null}zf(t){this.Ovt=t,this.Pvt=0,this.Rvt=0,this.Lvt=!1,this.Fvt=!1,this.Bvt=null}Uvt(t,s){this.Ovt=t,this.Pvt=0,this.Rvt=s}$vt(){this.Pvt=0,this.Rvt=0}fW(){return this.Ovt}Vvt(t){this.Ovt=t}Wvt(){return this.Pvt}Yvt(t){this.Pvt=t}Qvt(){return this.Rvt}Jvt(t){this.Rvt=t}Hvt(t){this.Lvt=!!t}qvt(){return this.Lvt}Xvt(t){this.Fvt=!!t}Zvt(){return this.Fvt}Kvt(t){this.kvt=t}txt(){return this.kvt}sxt(t,s){this.jvt=t,this.zvt=s}SW(){return this.jvt}TW(t){this.zvt=t}ixt(){return this.zvt}nxt(){const t=this.Ovt;return!!t.rxt()||this.Pvt<t.hxt()-1&&!!t.TH().length}oxt(t){this.Bvt=t}axt(){return this.Bvt}}}{const xv=self.Gs;xv.lxt=class extends xv.$n{constructor(t){super(),this.Ivt=t,this.jc=this.Ivt.yQ(),this.qTt=[],this.$w=-1,this.ZTt=null,this.uxt=[]}Yn(){xv.Sh(this.qTt),this.Ivt=null,this.jc=null}cxt(t){this.uxt=t;const s=this.uxt.slice(0);this.qTt.push(s),this.$w=0,this.ZTt=s}hW(){return this.Ivt}yQ(){return this.jc}fxt(){return this.ZTt}N3(){const t=++this.$w,s=this.qTt;t===s.length?s.push(this.uxt.slice(0)):xv.Ch(s[t],this.uxt),this.ZTt=s[t]}W3(){this.ZTt=this.qTt[--this.$w]}}}{const bv=self.Gs;bv.dxt=class extends bv.$n{constructor(t){super(),this.Ivt=t,this.jc=this.Ivt.yQ(),this.qTt=[],this.$w=-1}Yn(){bv.Sh(this.qTt),this.Ivt=null,this.jc=null}hW(){return this.Ivt}yQ(){return this.jc}pxt(){return this.$w>=0}fxt(){return this.qTt[this.$w]}N3(){if(++this.$w,this.$w===this.qTt.length){const t=bv.Wn(bv.mxt,this);return this.qTt.push(t),t}{const t=this.qTt[this.$w];return t.zf(),t}}W3(){--this.$w}gxt(t){const s=this.qTt;for(let i=this.$w;i>=0;--i){const e=s[i];if(e.Ac()===t)return e}return null}yxt(){return this.qTt.slice(0,this.$w+1)}}}{const Cv=self.Gs;Cv.mxt=class extends Cv.$n{constructor(t){super(),this.wxt=t,this.Hn="",this.$w=0,this.Mxt=!1,this.Sxt=NaN}zf(){this.Hn="",this.$w=0,this.Mxt=!1,this.Sxt=NaN}P3(t){this.Hn=t}Ac(){return this.Hn}B3(t){this.$w=t}CV(){return this.$w}T1(){this.Mxt=!0}V3(){return this.Mxt}Txt(t){this.Sxt=t}vxt(){return this.Sxt}}}{const Iv=self.Gs;Iv.xxt=class extends Iv.$n{constructor(){super(),this.qTt=[],this.$w=-1}Yn(){Iv.Sh(this.qTt)}fxt(){return this.qTt[this.$w]}N3(){if(++this.$w,this.$w===this.qTt.length){const t=[];return this.qTt.push(t),t}return this.qTt[this.$w]}W3(){--this.$w}}}{let Gv=function(t,s){return t.CV()-s.CV()},_v=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};SortSolArray=Gv,IsSolArrayIdentical=_v;const Ev=self.Gs,Av=self.assert;Ev.bxt=class extends Ev.$n{constructor(t){super(),this.jc=t,this.Cxt=[],this.Ixt=new Map,this.Gxt=[],this._xt=new Map,this.Ext=new Map,this.Axt=new Map,this.Dxt=new Map,this.Nxt=new Map,this.Oxt=new Map,this.Pxt=0,this.Rxt=[],this.Lxt=[],this.Fxt=[],this.kxt=new Map,this.jxt=new Map,this.evt=Ev.Wn(Ev.Cvt,this),this.zxt=Ev.Wn(Ev.lxt,this),this.wxt=Ev.Wn(Ev.dxt,this),this.Bxt=[],this.Uxt=[],this.$xt=[],this.Vxt=0,this.Wxt=0,this.Yxt=0,this.Qxt=[],this.Jxt=[],this.Hxt=[],this.qxt=new Map,this.Xxt=new Map,self.c3_callFunction=(t,s)=>this.Zxt(t,s)}Yn(){this.yet(),this.evt.Yn(),this.evt=null,this.zxt.Yn(),this.zxt=null,Ev.Sh(this.Uxt),Ev.Sh(this.$xt),this.jc=null,Ev.Sh(this.Cxt),this.Ixt.clear()}XC(t){const s=Ev.Wn(Ev.Kxt,this,t);this.Cxt.push(s),this.Ixt.set(s.Ac().toLowerCase(),s)}tbt(t){this.Bxt.push(t)}sbt(){for(const t of this.jxt.values())t.ibt();for(const t of this.kxt.values())t.sbt();for(const t of this.jxt.values())t.sbt();for(const t of this.Cxt)t.sbt();for(const t of this.Cxt)t.zit();for(const t of this.Bxt)t.sbt(!1);Ev.Sh(this.Bxt),this.zxt.cxt(this.Fxt)}yQ(){return this.jc}jit(t){return this.Ixt.get(t.toLowerCase())||null}ebt(t){this.Gxt.push(t),this._xt.set(t.nbt(),t)}rbt(t){this.Ext.set(t.s9(),t)}hbt(t){this.Axt.set(t.s9(),t)}obt(t){this.Dxt.set(t.s9(),t)}abt(t){switch(t.lbt()){case 0:this.kxt.set(t.ubt().toLowerCase(),t);break;case 1:this.jxt.set(t.ubt().toLowerCase(),t)}}cbt(t){this.Oxt.set(t.s9(),t),t.g8()?this.Rxt.push(t):this.Lxt.push(t)}fbt(t){t.length>=2&&t.sort(Gv);let s=this.Nxt.get(t.length);s||(s=[],this.Nxt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(_v(t,e))return e}return s.push(t),t}dbt(t){return this.Fxt.push(t.pbt()),this.Pxt++}MW(){return this.evt}mbt(){return this.MW().D3()}fW(){return this.mbt().fW()}gbt(){const t=this.mbt();return t.fW().ybt(t.Wvt())}wbt(){const t=this.mbt();return t.fW().Mbt(t.Qvt())}Sbt(){return this.zxt}O3(){return this.wxt}Tbt(t){const s=[];for(t=t.vbt();t;)Ev.On(s,t.xbt()),t=t.vbt();return s}bbt(t){const s={};for(const i of this.Tbt(t))s[i.Cbt()]=i.Ibt();return Object.create(Object.prototype,s)}Gbt(t){return this.Oxt.get(t)||null}_bt(t){return this.Ext.get(t)||null}Ebt(t){return this.Axt.get(t)||null}Abt(t){return this.Dxt.get(t)||null}oW(t){return this.kxt.get(t.toLowerCase())||null}dH(t,s){let i=this.jxt.get((t.Ac()+"."+s).toLowerCase());if(i)return i;if(!t.pH())for(const e of t.DH())if(i=this.jxt.get((e.Ac()+"."+s).toLowerCase()),i)return i;return null}Dbt(){return this.Rxt}Nbt(){return this.Lxt}Obt(t){for(const t of this.Rxt)t.Pbt();if(t)for(const t of this.Lxt)t.tC()&&t.Pbt()}Rbt(t){return this._xt.get(t.toLowerCase())||null}Lbt(t){const s=this.Ext.get(t);return s&&s.Fbt()?s:null}kbt(){return this.Gxt}jbt(){for(const t of this.Gxt)t.zbt()}Bbt(){for(const t of this.Cxt)t.Ubt()}$bt(t){this.Bbt(),this.Vxt++;for(const s of t.Het()){const t=s.dit();t&&(this.jc.Vbt(s),t.xE(),this.jc.Wbt())}this.Vxt--}async Ybt(t){this.Bbt(),this.Vxt++;for(const s of this.Qbt(t))await this.jc.Jbt(s);this.Vxt--}*Qbt(t){for(const s of t.Het()){const t=s.dit();t&&(this.jc.Vbt(s),yield*t.Hbt(),this.jc.Wbt())}}qbt(t,s,i,e){let n=!1;if(!t.dY())return this.Xbt(s,i,e);this.Wxt++;for(const r of t.Het()){const t=r.dit();if(!t)continue;this.jc.Vbt(r);for(const r of t.Zbt()){const t=r.qbt(s,i,e);n=n||t}const h=t.qbt(s,i,e);n=n||h,this.jc.Wbt()}return this.Wxt--,n}*Kbt(t,s,i,e){let n=!1;if(!t.dY())return this.Xbt(s,i,e);this.Wxt++;for(const r of t.Het()){const t=r.dit();if(!t)continue;this.jc.Vbt(r);for(const r of t.Zbt()){const t=yield*r.Kbt(s,i,e);n=n||t}const h=yield*t.Kbt(s,i,e);n=n||h,this.jc.Wbt()}return this.Wxt--,n}Xbt(t,s,i){return this.Uxt.push([t,s,i]),!1}tCt(t,s,i){let e=null;const n=new Promise(t=>e=t);return this.$xt.push([t,s,i,e]),n}*sCt(){if(this.jc.iCt())throw new Error("should not be in breakpoint");const t=this.jc.gY();for(;this.$xt.length;){const[s,i,e,n]=this.$xt.shift();n(yield*this.Kbt(t,s,i,e))}}async eCt(){for(const t of this.sCt())await this.jc.Jbt(t)}nCt(t,s,i,e){let n=!1;const r=t.dY(),h=r.dit();if(!h)return;this.Wxt++,this.jc.Vbt(r);const o=h.Zbt();for(let t=0,r=o.length;t<r;++t){const r=o[t].nCt(s,i,e);n=n||r}const a=h.nCt(s,i,e);return n=n||a,this.jc.Wbt(),this.Wxt--,n}*rCt(t,s,i,e){let n=!1;const r=t.dY(),h=r.dit();if(!h)return;this.Wxt++,this.jc.Vbt(r);const o=h.Zbt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].rCt(s,i,e);n=n||r}const a=yield*h.rCt(s,i,e);return n=n||a,this.jc.Wbt(),this.Wxt--,n}hCt(){return this.Wxt}oCt(){return this.hCt()>0}aCt(){return++this.Wxt}lCt(){--this.Wxt}uCt(){return this.Vxt>0}JY(){return this.uCt()||this.oCt()}oet(t){for(const[s,i,e]of this.Uxt)this.qbt(t,s,i,e);Ev.Sh(this.Uxt)}_H(t){t?this.Yxt++:this.Yxt--}qY(){return this.Yxt>0}cCt(t){for(let s=0,i=t.length;s<i;++s)t[s].fCt().Au()}dCt(t){for(let s=0,i=t.length;s<i;++s)t[s].fCt().tvt()}F3(t){for(let s=0,i=t.length;s<i;++s)t[s].fCt().svt()}z3(t){for(let s=0,i=t.length;s<i;++s)t[s].fCt().W3()}dW(t){const s=new Set,i=this.evt.Evt(),e=this.evt.Avt();for(let n=0;n<=e;++n){const e=i[n].axt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}pCt(t){const s=new Set([...t]),i=this.dW(s);if(i.size>0){for(const t of i)t.fCt().tvt();return[...i]}return null}mCt(){const t=Ev.Wn(Ev.gCt,this);return this.Qxt.push(t),t}yCt(){return this.Qxt}wCt(){if(!this.Qxt.length)return;const t=this.mbt();let s=!1;this.Vxt++;for(let i=0,e=this.Qxt.length;i<e;++i){const e=this.Qxt[i];e.MCt()&&e.SCt(t),e.TCt()&&(s=!0)}s&&(this.vCt(),t.zf(null)),this.Vxt--}async xCt(){if(!this.Qxt.length)return;const t=this.mbt();let s=!1;this.Vxt++;for(let i=0,e=this.Qxt.length;i<e;++i){const e=this.Qxt[i];e.MCt()&&await e.bCt(t),e.TCt()&&(s=!0)}s&&(this.vCt(),t.zf(null)),this.Vxt--}vCt(){const t=Ev.Eh(this.Qxt,t=>t.TCt());for(const s of t)s.Yn()}yet(){for(const t of this.Qxt)t.Yn();Ev.Sh(this.Qxt)}CCt(t){for(const s of this.Qxt)s.ivt(t);for(const s of t){const t=this.Xxt.get(s);if(this.Xxt.delete(s),t)for(const{resolve:s}of t.ICt.values())s(!0)}}GCt(t){this.Jxt.push({promise:t,_Ct:this.hCt()})}ECt(){Ev.Sh(this.Jxt)}ACt(){const t=this.hCt(),s=Promise.all(this.Jxt.filter(s=>s._Ct===t).map(t=>t.promise));return this.Jxt=this.Jxt.filter(s=>s._Ct<t),s}vW(t){const s=t.toLowerCase();this.Hxt.push(s),this.jc.aZ(Ev.uQ.lQ.aQ.DCt,null),this.Hxt.pop();for(const t of this.jc.hW().yCt())t.NCt()&&t.OCt()===s&&t.PCt();const i=this.qxt.get(s);i&&(i.resolve(),this.qxt.delete(s))}bW(t){const s=t.toLowerCase(),i=this.qxt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.qxt.set(s,{promise:i,resolve:t}),i}}RCt(){if(0===this.Hxt.length)throw new Error("not in a signal");return this.Hxt.at(-1)}LCt(t){let s=this.Xxt.get(t);return s||(s={FCt:[],ICt:new Map},this.Xxt.set(t,s)),s}ZX(t,s){const i=this.LCt(t),e=s.toLowerCase();i.FCt.push(e),this.jc.aZ(t.KJ().jCt().aQ.kCt,t),i.FCt.pop();for(const s of this.jc.hW().yCt())s.zCt()&&s.OCt()===e&&s.BCt(t);const n=i.ICt.get(e);n&&(n.resolve(!1),i.ICt.delete(e)),0===i.FCt.length&&0===i.ICt.size&&this.Xxt.delete(t)}KX(t,s){const i=this.LCt(t),e=s.toLowerCase(),n=i.ICt.get(e);if(n)return n.promise;{let t=null;const s=new Promise(s=>t=s);return i.ICt.set(e,{promise:s,resolve:t}),s}}UCt(t){const s=this.LCt(t);if(!s||0===s.FCt.length)throw new Error("not in a signal");return s.FCt.at(-1)}Mst(){return{groups:this.$Ct(),cnds:this.VCt(),acts:this.WCt(),vars:this.YCt(),waits:this.QCt()}}Sst(t){this.JCt(t.groups),this.HCt(t.cnds),this.qCt(t.acts),this.XCt(t.vars),this.ZCt(t.waits)}$Ct(){const t={};for(const s of this.kbt())t[s.s9().toString()]=s.KCt();return t}JCt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Lbt(t);e&&e.tIt(i)}}VCt(){const t={};for(const[s,i]of this.Axt){const e=i.Mst();e&&(t[s.toString()]=e)}return t}HCt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Axt)i.Sst(s.get(t)||null)}WCt(){const t={};for(const[s,i]of this.Dxt){const e=i.Mst();e&&(t[s.toString()]=e)}return t}qCt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Dxt)i.Sst(s.get(t)||null)}YCt(){const t={};for(const[s,i]of this.Oxt)i.sIt()||!i.g8()&&!i.tC()||(t[s.toString()]=i.Yct());return t}XCt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Gbt(t);e&&e.Eft(i)}}QCt(){return this.Qxt.filter(t=>!t.iIt()).map(t=>t.Mst())}ZCt(t){this.yet();for(const s of t){const t=Ev.gCt.eIt(this,s);t&&this.Qxt.push(t)}}nIt(){return[...this.jc.gY().Het()].map(t=>t.dit()).filter(t=>t).map(t=>t.rIt())}hIt(t){for(;t;){const s=t.vbt();if(s instanceof Ev.oIt)return s;t=s}return null}Zxt(t,s){Array.isArray(s)||(s=[]);const i=this.oW(t.toLowerCase());if(!i)return null;if(!i.Gu())return i.aW();const e=i.aIt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].pbt())}while(s.length<e.length)}const n=i.uW();return n.pW(n.cW(),!1,i.gW(),i.aW(),null,...s)}}}{const Dv=self.Gs;Dv.Kxt=class extends Dv.$n{constructor(t,s){super(),this.Ivt=t,this.jc=t.yQ(),this.Hn=s[0],this.lIt=[],this.uIt=new Map,this.cIt=new Map,this.fIt=new Map,this.dIt=!1,this.pIt=[],this.mIt=[],this.gIt=new Set;for(const t of s[1])this.yIt(t,null,this.lIt);this.wIt=this.jc.gZ()?{type:"sheet",name:this.Hn,MIt:0,children:[]}:null}Yn(){this.Ivt=null,this.jc=null}yIt(t,s,i){switch(t[0]){case 0:case 3:this.SIt(t,s,i);break;case 1:this.TIt(t,s,i);break;case 2:this.vIt(t,s,i);break;case 4:this.xIt(t,s);break;case 5:this.bIt(t,s,i);break;case 6:this.CIt(t,s);break;default:throw new Error("invalid event type")}}SIt(t,s,i){const e=Dv.IIt.XC(this,s,t);if(e.bvt()){i.push(e);const t=e.GIt();for(let s=0,i=t.length;s<i;++s)t[s]._It()&&this.EIt(e,s)}else e._It()?this.EIt(e,0):i.push(e)}xIt(t,s){const i=Dv.oIt.AIt(this,s,t);this.Ivt.abt(i)}CIt(t,s){const i=Dv.oIt.DIt(this,s,t);this.Ivt.abt(i)}TIt(t,s,i){const e=Dv.NIt.XC(this,s,t);i.push(e)}vIt(t,s,i){const e=Dv.OIt.XC(this,s,t);i.push(e)}bIt(t,s,i){const e=Dv.PIt.XC(this,s,t);i.push(e)}EIt(t,s){t.bvt()||this.Ivt.tbt(t);const i=t.ybt(s),e=i.RIt(),n=i.gH();if(i.LIt()){let r=this.cIt.get(n);r||(r=new Map,this.cIt.set(n,r));const h=i.FIt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.uIt.get(n);r||(r={kIt:new Map,jIt:new Map},this.uIt.set(n,r));const h=i.I0();let o;h?(o=r.jIt.get(h),o||(o=new Map,r.jIt.set(h,o))):o=r.kIt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}sbt(){const t=this.lIt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof Dv.IIt&&t[s+1].zIt();t[s].sbt(e)}}BIt(t){this.pIt.push(t)}zit(){Dv.Sh(this.mIt),this.UIt(this),this.gIt.clear()}UIt(t){const s=t.mIt,i=t.gIt;for(const e of this.pIt){const n=e.$It();e.VIt()&&t!==n&&!i.has(n)&&(i.add(n),n.UIt(t),s.push(n))}}Zbt(){return this.mIt}hW(){return this.Ivt}yQ(){return this.jc}Ac(){return this.Hn}WIt(t,s){this.fIt.set(s,t)}YIt(t){return this.fIt.get(t)||null}Ubt(){this.dIt=!1}xE(){if(this.dIt)return;const t=this.jc,s=t.QIt(),i=s?performance.now():0;this.dIt=!0;const e=this.hW(),n=e.mbt();for(const s of this.lIt)s.xE(n),e.cCt(s.TH()),e.ECt(),t.XY();n.zf(null),s&&(this.wIt.MIt+=performance.now()-i)}*Hbt(){if(this.dIt)return;this.dIt=!0;const t=this.jc,s=this.hW(),i=s.mbt();for(const e of this.lIt)yield*e.Hbt(i),s.cCt(e.TH()),s.ECt(),t.XY();i.zf(null)}qbt(t,s,i){if(!s)return this.JIt(t,s,null,null);{const e=s.gH();let n=!1,r=this.JIt(t,s,e,i);n=n||r;for(const h of e.DH())r=this.JIt(t,s,h,i),n=n||r}}JIt(t,s,i,e){const n=this.uIt.get(i);if(!n)return!1;const r=e?n.jIt.get(e):n.kIt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.HIt(s,t,i);o=o||e}return o}*Kbt(t,s,i){if(!s)return yield*this.qIt(t,s,null,null);{const e=s.gH();let n=!1,r=yield*this.qIt(t,s,e,i);n=n||r;for(const h of e.DH())r=yield*this.qIt(t,s,h,i),n=n||r}}*qIt(t,s,i,e){const n=this.uIt.get(i);if(!n)return!1;const r=e?n.jIt.get(e):n.kIt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.XIt()?this.HIt(s,t,i):yield*this.ZIt(s,t,i),o=o||e}return o}nCt(t,s,i){const e=s.gH(),n=this.cIt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.HIt(null,s[0],s[1]);o=o||i}return o}*rCt(t,s,i){const e=s.gH(),n=this.cIt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.XIt()?this.HIt(null,i,e):yield*this.ZIt(null,i,e),o=o||n}return o}HIt(t,s,i){const e=this.jc,n=this.Ivt,r=n.fW(),h=n.MW(),o=n.hCt();let a=!1;r&&n.dCt(r.cW()),n.dCt(s.cW());const l=o>1;l&&n.Sbt().N3();const u=h.N3(s);t&&(s.GIt()[i].gH().cH().yvt(t),t.PX()&&t.KIt());let c=!0;if(s.MK()){const t=s.tGt();for(let s=0,i=t.length;s<i;++s)if(!t[s].sGt(u)){c=!1;break}}return c&&(s.bvt()?s.iGt(u,i):s.xE(u),a=u.qvt()),h.W3(),l&&n.Sbt().W3(),n.z3(s.cW()),r&&n.z3(r.cW()),r||1!==o||(n.ECt(),n.qY()||e.XY()),a}*ZIt(t,s,i){const e=this.jc,n=this.Ivt,r=n.fW(),h=n.MW(),o=n.hCt();let a=!1;r&&n.dCt(r.cW()),n.dCt(s.cW());const l=o>1;l&&n.Sbt().N3();const u=h.N3(s);t&&(s.GIt()[i].gH().cH().yvt(t),t.PX()&&t.KIt());let c=!0;if(s.MK()){const t=s.tGt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].eGt(u))){c=!1;break}}return c&&(s.bvt()?yield*s.nGt(u,i):yield*s.Hbt(u),a=u.qvt()),h.W3(),l&&n.Sbt().W3(),n.z3(s.cW()),r&&n.z3(r.cW()),r||1!==o||(n.ECt(),n.qY()||e.XY()),a}rIt(){return this.wIt}}}{let Nv=function(t,s){return!0};NoActions=Nv;const Ov=self.Gs,Pv=[];function*Rv(t,s){return!0}Ov.IIt=class extends Ov.$n{constructor(t,s,i){super(),this.Ost=t,this.jc=t.yQ(),this.rGt=s,this.hGt=null,this.evt=this.jc.hW().MW(),this.oGt=[],this.aGt=[],this.lGt=!1,this.uGt=!1,this.cGt=!1,this.fGt=!1,this.dGt=!!i[2],this.pGt=!1,this.mGt=null,this.gGt=[],this.Rdt=[],this.yGt=[],this.wGt=Nv,this.MGt=Rv,this.SGt=!1,this.TGt=!1,this.vGt="",this.xGt=!1,this.bGt=null,this.wIt=null,this.v8=i[4],this.CGt=i[5],this.Ost.WIt(this,this.CGt),this.IGt=this.jc.gZ()?{GGt:i[3][0],_Gt:i[3][1],EGt:!1,AGt:!1,DGt:!1,NGt:!1}:null,this.hW().rbt(this),3===i[0]&&this.OGt(i[1]);let e=0;for(const t of i[6]){const s=Ov.PGt.XC(this,t,e++);this.gGt.push(s),this.RGt(s.gH())}e=0;for(const t of i[7]){const s=Ov.LGt.XC(this,t,e++);this.Rdt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.Ost.yIt(s,this,this.yGt)}this.gGt.length&&(this.pGt=null===this.gGt[0].gH()&&this.gGt[0].RIt()===Ov.uQ.lQ.aQ.FGt),0===this.gGt.length&&(this.gGt=Pv),0===this.Rdt.length&&(this.Rdt=Pv),0===this.yGt.length&&(this.yGt=Pv)}static XC(t,s,i){return Ov.Wn(Ov.IIt,t,s,i)}OGt(t){this.SGt=!0,this.TGt=!!t[0],this.xGt=this.TGt,this.vGt=t[1].toLowerCase(),this.bGt=[],this.hW().ebt(this),this.jc.gZ()&&(this.wIt={type:"group",name:t[1],MIt:0,children:[]})}kGt(t){this.bGt.push(t)}jGt(t,s){for(const i of t.Iit().kH())s.includes(i)||s.push(i)}zGt(t,s){if(t)if(s.includes(t)||s.push(t),t.pH())for(const i of t.FH())i.PX()&&this.jGt(i,s);else t.PX()&&this.jGt(t,s)}RGt(t){this.zGt(t,this.oGt)}BGt(t){this.zGt(t,this.aGt)}UGt(){this.oGt=this.jc.J7()}sbt(t){this.fGt=!!t,this.$Gt(),this.VGt();for(const t of this.gGt)t.sbt();if(this.Rdt.length>0){let t=!1;for(const s of this.Rdt)s.sbt(),s.WGt()&&(t=!0);t?(this.wGt=this.YGt,this.MGt=this.QGt):(this.wGt=this.JGt,this.MGt=this.HGt)}const s=this.yGt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Ov.IIt&&s[t+1].zIt();s[t].sbt(e)}this.IGt&&this.qGt(),this.wIt&&this.XGt().rIt().children.push(this.wIt)}rIt(){return this.wIt}XGt(){let t=this.MK();for(;t;){if(t.Fbt())return t;t=t.MK()}return this.Ost}qGt(){const t=this.IGt;t.EGt=this.gGt.every(t=>t.XIt()),t.AGt=this.Rdt.every(t=>t.XIt()),t.DGt=this.yGt.every(t=>t.XIt()),t.NGt=t.EGt&&t.AGt&&t.DGt}ZGt(){let t=this;do{t.qGt(),t=t.MK()}while(t)}$Gt(){if(!this.Fbt())return;let t=this.MK();for(this.cGt=!0;t;){if(!t.Fbt()){this.cGt=!1;break}t=t.MK()}}KGt(){const t=this.jc.J7();if(this.oGt===t)this.aGt=t;else{this.aGt=Ov.Oh(this.oGt);let t=this.MK();for(;t;){for(const s of t.oGt)this.BGt(s);t=t.MK()}const s=this.hW();this.oGt=s.fbt(this.oGt),this.aGt=s.fbt(this.aGt)}}VGt(){if(!this.t_t())return;this.mGt=[];let t=this.MK();for(;t;)this.mGt.push(t),t=t.MK();this.mGt.reverse()}s_t(){this.uGt=!0,this.rGt&&this.rGt.s_t()}rxt(){return this.uGt}TH(){return this.oGt}cW(){return this.lGt||(this.lGt=!0,this.KGt()),this.aGt}i_t(t){return this.oGt.includes(t)}tGt(){return this.mGt}dit(){return this.Ost}hW(){return this.Ost.hW()}yQ(){return this.jc}MK(){return this.rGt}e_t(t){this.hGt=t}vbt(){return this.hGt||this.rGt}n_t(){return this.CGt}r_t(){return this.IGt&&this.IGt._Gt}h_t(){return this.r_t()&&this.IGt.GGt}o_t(t){this.IGt.GGt=!!t,this.ZGt()}Fbt(){return this.SGt}a_t(){return this.cGt}zIt(){return this.pGt}l_t(){return this.fGt}nbt(){return this.vGt}KCt(){return this.xGt}zbt(){this.tIt(this.TGt)}tIt(t){if(t=!!t,!this.SGt)throw new Error("not a group");if(this.xGt!==t){this.xGt=t;for(const t of this.bGt)t.u_t();if(this.bGt.length){const t=this.jc.RY().dit();t&&t.zit()}}}s9(){return this.v8}bvt(){return this.dGt}_It(){return this.gGt.length&&this.gGt[0]._It()}c_t(){return this.hGt&&this.hGt instanceof Ov.oIt}t_t(){return this.c_t()||this.gGt.some(t=>t._It())}GIt(){return this.gGt}hxt(){return this.gGt.length}ybt(t){if((t=Math.floor(t))<0||t>=this.gGt.length)throw new RangeError("invalid condition index");return this.gGt[t]}f_t(t){return this.ybt(t)}d_t(t){let s=t.CV();if(0===s)return!0;--s;const i=t.p_t()?t.m_t():t.gH();for(;s>=0;--s){const t=this.gGt[s];if(i===t.gH()||t.p_t()&&t.m_t()===i)return!1}return!0}g_t(){return this.Rdt}y_t(){return this.Rdt.length}Mbt(t){if((t=Math.floor(t))<0||t>=this.Rdt.length)throw new RangeError("invalid action index");return this.Rdt[t]}w_t(t){t=Math.floor(t);const s=this.Rdt.find(s=>s.M_t()===t);if(!s)throw new RangeError("invalid action debug index");return s}S_t(t){return(t=Math.floor(t))>=0&&t<this.Rdt.length}T_t(){return this.yGt}xbt(){return this.yGt.filter(t=>t instanceof Ov.NIt)}sGt(t){t.Vvt(this);const s=this.gGt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Yvt(e),n.z0())throw new Error("trigger cannot be used as sub-event to a loop");if(n.xE())i=!0;else if(!this.dGt)return!1}return!this.dGt||i}iGt(t,s){t.Vvt(this),t.Yvt(s),this.gGt[s].xE()&&(this.wGt(t,0)&&this.v_t(t),t.Hvt(!0))}*eGt(t){t.Vvt(this);const s=this.gGt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Yvt(e),n.z0())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.XIt()?n.xE():yield*n.Hbt(),r)i=!0;else if(!this.dGt)return!1}return!this.dGt||i}*nGt(t,s){t.Vvt(this),t.Yvt(s);const i=this.gGt[s];let e;if(e=i.XIt()?i.xE():yield*i.Hbt(),e){let s;s=this.x_t()?this.wGt(t,0):yield*this.MGt(t,0),s&&(this.b_t()?this.v_t():yield*this.C_t()),t.Hvt(!0)}}xE(t){t.Vvt(this),this.pGt||t.Xvt(!1),this.dGt?this.I_t(t):this.G_t(t)}*Hbt(t){(this.h_t()||this.jc.__t())&&(yield this),t.Vvt(this),this.pGt||t.Xvt(!1),this.dGt?yield*this.E_t(t):yield*this.A_t(t)}I_t(t){const s=this.gGt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n._It())continue;t.Yvt(e);const r=n.xE();i=i||r}t.Hvt(i),i&&(this.wGt(t,0)&&this.v_t(t),this.fGt&&t.Xvt(!0))}*E_t(t){const s=this.gGt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n._It())continue;let r;t.Yvt(e),r=n.XIt()?n.xE():yield*n.Hbt(),i=i||r}if(t.Hvt(i),i){let s;s=this.x_t()?this.wGt(t,0):yield*this.MGt(t,0),s&&(this.b_t()?this.v_t():yield*this.C_t()),this.fGt&&t.Xvt(!0)}}G_t(t){const s=this.gGt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.Yvt(i),!e.xE())return void t.Hvt(!1)}t.Hvt(!0),this.wGt(t,0)&&this.v_t(t),t.qvt()&&this.fGt&&t.Xvt(!0)}*A_t(t){const s=this.gGt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.Yvt(i),n=e.XIt()?e.xE():yield*e.Hbt(),!n)return void t.Hvt(!1)}let i;t.Hvt(!0),i=this.x_t()?this.wGt(t,0):yield*this.MGt(t,0),i&&(this.b_t()?this.v_t():yield*this.C_t()),t.qvt()&&this.fGt&&t.Xvt(!0)}JGt(t,s){const i=this.Rdt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.Jvt(e),s.xE()}return!0}*HGt(t,s){const i=this.Rdt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.Jvt(e),s.XIt()?s.xE():yield*s.Hbt()}return!0}YGt(t,s){const i=this.hW(),e=this.Rdt;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.Jvt(n);const r=s.xE();if(s.D_t()&&!0===r)return!1;s.N_t()&&r instanceof Promise&&i.GCt(r)}return!0}*QGt(t,s){const i=this.hW(),e=this.Rdt;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.Jvt(n),r=s.XIt()?s.xE():yield*s.Hbt(),s.D_t()&&!0===r)return!1;s.N_t()&&r instanceof Promise&&i.GCt(r)}return!0}O_t(t){this.wGt(t,t.Qvt())&&this.v_t()}*P_t(t){(yield*this.MGt(t,t.Qvt()))&&(yield*this.C_t())}v_t(){if(!this.yGt.length)return;const t=this.Fbt()&&this.jc.QIt(),s=t?performance.now():0,i=this.evt,e=i.N3(this);this.uGt?this.R_t(e):this.L_t(e),i.W3(),t&&(this.wIt.MIt+=performance.now()-s)}R_t(t){const s=this.SGt,i=this.cGt,e=this.hW(),n=this.yGt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.TH(),l=!i||!s&&r<o;l&&e.F3(a),h.xE(t),l?e.z3(a):e.cCt(a)}}L_t(t){const s=this.yGt;for(let i=0,e=s.length;i<e;++i)s[i].xE(t)}*C_t(){if(!this.yGt.length)return;const t=this.evt,s=t.N3(this);this.uGt?yield*this.F_t(s):yield*this.k_t(s),t.W3()}*F_t(t){const s=this.SGt,i=this.cGt,e=this.hW(),n=this.yGt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.TH(),l=!i||!s&&r<o;l&&e.F3(a),yield*h.Hbt(t),l?e.z3(a):e.cCt(a)}}*k_t(t){const s=this.yGt;for(let i=0,e=s.length;i<e;++i)yield*s[i].Hbt(t)}j3(t,s){s.$vt();const i=this.gGt;if(!this.bvt())for(let e=t.Wvt()+1,n=i.length;e<n;++e){const t=i[e];if(s.Yvt(e),!t.xE())return!1}return this.wGt(s,0)&&this.v_t(s),!0}*j_t(t,s){s.$vt();const i=this.gGt;if(!this.bvt())for(let e=t.Wvt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.Yvt(e),n=t.XIt()?t.xE():yield*t.Hbt(),!n)return!1}let e;return e=this.x_t()?this.wGt(s,0):yield*this.MGt(s,0),e&&(this.b_t()?this.v_t():yield*this.C_t()),!0}XIt(){return!this.h_t()&&!this.jc.__t()&&this.IGt.NGt}x_t(){return!this.jc.__t()&&this.IGt.AGt}b_t(){return!this.jc.__t()&&this.IGt.DGt}z_t(t){if(this.MK()){const s=this.tGt();for(let i=0,e=s.length;i<e;++i)if(!s[i].sGt(t))return!1}return!0}*B_t(t){if(this.MK()){const s=this.tGt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].eGt(t)))return!1}return!0}U_t(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.Ys(0));t.Sbt().N3(),this.hGt.$_t(i)}else this.hGt.V_t(s);else i&&t.Sbt().N3()}#s(t,s,i,e){let n=null;if(s.W_t){const t=i?s.W_t.cH():s.W_t.fCt().KTt(),e=s.Y_t.cH();e.wvt(t.uH()),e.vvt(),i||s.Y_t.Q_t()}else if(s.wH){const t=s.wH.cH();t.wvt(s.MH),t.vvt()}return s.J_t&&(n=t.pCt(e)),n}H_t(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.jc,l=this.evt,u=a.hW(),c=this.hGt,f=c.N_t(),d=u.aCt()>1;this.U_t(u,s,d),h&&(i?u.F3(t):u.dCt(t)),null!==e&&(o=this.#s(u,e,i,t));const p=l.N3(this);return i&&p.oxt(t),this.z_t(p)&&(p.Vvt(this),f&&([r,n]=c.q_t()),this.G_t(p),f&&c.X_t(r)),l.W3(),d&&u.Sbt().W3(),null!==o&&u.z3(o),h&&u.z3(t),u.lCt(),n}*Z_t(t,s,i,e){let n,r;(this.h_t()||this.jc.__t())&&(yield this);const h=t.length>0;let o=null;const a=this.jc,l=this.evt,u=a.hW(),c=this.hGt,f=c.N_t(),d=u.aCt()>1;if(this.U_t(u,s,d),h&&(i?u.F3(t):u.dCt(t)),null!==e){if(e.W_t){const t=i?e.W_t.cH():e.W_t.fCt().KTt(),s=e.Y_t.cH();s.wvt(t.uH()),s.vvt(),i||e.Y_t.Q_t()}else if(e.wH){const t=e.wH.cH();t.wvt(e.MH),t.vvt()}e.J_t&&(o=u.pCt(t))}const p=l.N3(this);return i&&p.oxt(t),(yield*this.B_t(p))&&(p.Vvt(this),f&&([r,n]=c.q_t()),yield*this.A_t(p),f&&c.X_t(r)),l.W3(),d&&u.Sbt().W3(),null!==o&&u.z3(o),h&&u.z3(t),u.lCt(),n}K_t(t,s){const i=this.cW(),e=i.length>0,n=this.jc,r=this.evt,h=n.hW(),o=h.aCt()>1;o&&h.Sbt().N3(),this.hGt.$_t(t),e&&(s?h.F3(i):h.dCt(i));const a=r.N3(this);this.z_t(a)&&(a.Vvt(this),this.G_t(a)),r.W3(),o&&h.Sbt().W3(),e&&h.z3(i),h.lCt()}*tEt(t,s){(this.h_t()||this.jc.__t())&&(yield this);const i=this.cW(),e=i.length>0,n=this.jc,r=this.evt,h=n.hW(),o=h.aCt()>1;o&&h.Sbt().N3(),this.hGt.$_t(t),e&&(s?h.F3(i):h.dCt(i));const a=r.N3(this);(yield*this.B_t(a))&&(a.Vvt(this),yield*this.A_t(a)),r.W3(),o&&h.Sbt().W3(),e&&h.z3(i),h.lCt()}pW(t,s,i,e,n,...r){let h,o;const a=t.length>0;let l=null;const u=this.jc,c=this.evt,f=u.hW(),d=this.hGt,p=d.N_t(),m=f.aCt()>1;m&&f.Sbt().N3(),r.length>0&&this.hGt.$_t(r),a&&(s?f.F3(t):f.dCt(t)),null!==n&&(l=this.#s(f,n,s,t));const g=c.N3(this);return g.sxt(i,e),s&&g.oxt(t),c.Dvt(g),u.R3(!1),this.z_t(g)&&(g.Vvt(this),p&&([o,h]=d.q_t()),this.G_t(g),p&&d.X_t(o)),u.R3(!0),c.W3(),c.Nvt(),m&&f.Sbt().W3(),null!==l&&f.z3(l),a&&f.z3(t),f.lCt(),h||g.ixt()}}}{const Lv=self.Gs,Fv=[];let kv=!1;Lv.PIt=class extends Lv.$n{constructor(t,s,i){super();const e=t.yQ(),n=t.hW();this.Ost=t,this.Ivt=n,this.jc=t.yQ(),this.rGt=s;const r=e.sEt(i[1]);this.iEt=r,this.CGt=i[2],this.Ost.WIt(this,this.CGt),this.IGt=e.gZ()?{GGt:i[3][0],_Gt:i[3][1]}:null}static XC(t,s,i){return Lv.Wn(Lv.PIt,t,s,i)}sbt(){const t=this.iEt,s=this.jc.hW().bbt(this);this.iEt=t.bind(null,this.jc.bJ(),s)}MK(){return this.rGt}vbt(){return this.rGt}dit(){return this.Ost}n_t(){return this.CGt}r_t(){return this.IGt&&this.IGt._Gt}h_t(){return this.r_t()&&this.IGt.GGt}o_t(t){this.IGt.GGt=!!t}zIt(){return!1}TH(){return Fv}cW(){return this.rGt?this.rGt.cW():Fv}xE(t){t.Vvt(this),this.Ivt.GCt(this.eEt())}async eEt(){try{await this.iEt()}catch(t){console.error(`Unhandled exception running script %c${this.dit().Ac()}, event ${this.n_t()}:`,"font-size: 1.2em; font-weight: bold;",t),self.yZ&&self.yZ.nEt(this),kv||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),kv=!0)}}*Hbt(t){t.Vvt(this),(this.h_t()||this.jc.__t())&&(yield this),this.xE(t)}XIt(){return!this.h_t()&&!this.jc.__t()}static rEt(){return kv}static hEt(){kv=!0}}}{const jv=self.Gs,zv=self.assert;jv.oIt=class extends jv.$n{constructor(t,s,i){super(),this.Ost=t,this.jc=t.yQ(),this.rGt=s,this.oEt=0,this.aEt="",this.lEt=0,this.uEt=[],this.cEt=!0,this.fEt="",this.HTt=null,this.dEt=!1,this.pEt=[],this.mEt=!1,this.gEt=!1,this.yEt=0,this.wEt=-1,this.MEt=new Map,this.SEt=jv.IIt.XC(t,s,i),this.SEt.e_t(this)}TEt(t){this.oEt=0,this.aEt=t[0],this.lEt=t[1],this.uEt=t[2].map(t=>jv.NIt.XC(this.Ost,this,t)),this.cEt=t[3],this.gEt=t[4],this.mEt=t[5]}vEt(t){this.oEt=1,this.fEt=t[1],this.HTt=this.jc.C7(t[2]),this.SEt.RGt(this.HTt),this.aEt=this.HTt.Ac()+"."+this.fEt,this.lEt=t[3],this.uEt=t[4].map(t=>jv.NIt.XC(this.Ost,this,t)),this.cEt=t[5],this.gEt=t[6],this.mEt=t[7],this.HTt.xEt(this)}static AIt(t,s,i){const e=jv.Wn(jv.oIt,t,s,i),n=i[1];return e.TEt(n),e}static DIt(t,s,i){const e=jv.Wn(jv.oIt,t,s,i),n=i[1];return e.vEt(n),e}ibt(){if(this.HTt&&this.HTt.pH())for(const t of this.HTt.FH())if(t.yH(this.fEt)){this.dEt=!0;break}}sbt(){for(const t of this.uEt)t.sbt();this.SEt.sbt(!1)}lbt(){return this.oEt}xbt(){return this.uEt}aIt(){return this.uEt}lW(){return this.uEt.length}bEt(t){this.pEt.push(t)}CEt(){return this.pEt}V_t(t){const s=this.uEt;for(let i=0,e=s.length;i<e;++i)s[i].Eft(t[i].Ys(0))}$_t(t){const s=this.uEt;for(let i=0,e=s.length;i<e;++i)s[i].Eft(t[i])}IEt(){return this.uEt.map(t=>t.Yct())}MK(){return this.rGt}vbt(){return this.rGt}ubt(){return this.aEt}GEt(){return this.fEt}mH(){return this.dEt}gW(){return this.lEt}gH(){return this.HTt}Gu(){return this.cEt}aW(){switch(this.lEt){case 0:return null;case 2:return"";default:return 0}}uW(){return this.SEt}mW(){return this.mEt}N_t(){return this.gEt}q_t(){const t=this.yEt++;let s;this.wEt=t;const i=new Promise(t=>s=t);return this.MEt.set(t,{resolve:s,_Et:0}),[t,i]}X_t(t){const s=this.MEt.get(t);0===s._Et&&(s.resolve(),this.MEt.delete(t)),this.wEt=-1}EEt(){return this.MEt.get(this.wEt)._Et++,this.wEt}AEt(t){this.wEt=t,this.MEt.get(t)._Et--}DEt(t,s){const i=new Map,e=[];for(const t of this.HTt.cH().uH()){const s=t.gH();if(s.yH(this.fEt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.SEt.H_t(t,s,this.mEt,{wH:this.HTt,MH:e}),i.size>0)for(const[e,n]of i){const i=e.SH(this.fEt).uW(),r=[...new Set([...t,...i.TH()])];i.H_t(r,s,this.mEt,{wH:e,MH:n})}}*NEt(t,s){const i=new Map,e=[];for(const t of this.HTt.cH().uH()){const s=t.gH();if(s.yH(this.fEt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.SEt.Z_t(t,s,this.mEt,{wH:this.HTt,MH:e})),i.size>0)for(const[e,n]of i){const i=e.SH(this.fEt).uW(),r=[...new Set([...t,...i.TH()])];yield*i.Z_t(r,s,this.mEt,{wH:e,MH:n})}}}}{const Bv=self.Gs,Uv=[];Bv.NIt=class extends Bv.$n{constructor(t,s,i){super();const e=t.hW();this.Ost=t,this.Ivt=e,this.jc=t.yQ(),this.rGt=s,this.zxt=e.Sbt(),this.Hn=i[1],this.Qc=i[2],this.OEt=i[3],this.Ib=!!i[4],this.PEt=!!i[5],this.REt=s instanceof Bv.oIt,this.v8=i[6],this.LEt=this.jc.Cbt(i[8]),this.FEt=t=>this.kEt(t),this.jEt=()=>this.zEt(),this.BEt=!this.rGt||this.Ib||this.PEt,this.Ddt=this.OEt,this.UEt=-1,this.$Et()&&(this.Ddt=this.Ddt?1:0),!this.VEt()||this.tC()||this.sIt()||(this.UEt=e.dbt(this)),e.cbt(this)}static XC(t,s,i){return Bv.Wn(Bv.NIt,t,s,i)}sbt(){if(this.VEt()&&!this.tC()&&!this.sIt()&&!this.WEt()){const t=this.Ivt.hIt(this);t&&t.bEt(this)}}Ac(){return this.Hn}Cbt(){return this.LEt}MK(){return this.rGt}vbt(){return this.MK()}g8(){return!this.MK()}VEt(){return!this.g8()}WEt(){return this.REt}tC(){return this.Ib}sIt(){return this.PEt}Ki(){return 0===this.Qc}le(){return 1===this.Qc}$Et(){return 2===this.Qc}zIt(){return!1}s9(){return this.v8}pbt(){return this.OEt}TH(){return Uv}xE(t){!this.VEt()||this.tC()||this.sIt()||this.Eft(this.pbt())}XIt(){return!0}*Hbt(t){this.xE(t)}Eft(t){this.Ki()?"number"!=typeof t&&(t=parseFloat(t)):this.le()?"string"!=typeof t&&(t=t.toString()):this.$Et()&&(t=t?1:0),this.BEt?this.Ddt=t:this.zxt.fxt()[this.UEt]=t}kEt(t){if(this.sIt())throw new Error(`assignment to constant event variable '${this.Ac()}'`);this.Eft(t)}Yct(){return this.BEt?this.Ddt:this.zxt.fxt()[this.UEt]}zEt(){let t=this.Yct();return this.$Et()&&(t=!!t),t}Pbt(){this.Ddt=this.OEt}Ibt(){return{configurable:!1,enumerable:!0,get:this.jEt,set:this.FEt}}}}{const $v=self.Gs,Vv=self.assert,Wv=[];$v.OIt=class extends $v.$n{constructor(t,s,i){super();const e=t.hW();this.Ost=t,this.Ivt=e,this.jc=t.yQ(),this.rGt=s,this.YEt=null,this.QEt=i[1],this.jf=!0}static XC(t,s,i){return $v.Wn($v.OIt,t,s,i)}sbt(){this.YEt=this.Ivt.jit(this.QEt),this.Ost.BIt(this);let t=this.MK();for(;t;)t instanceof $v.IIt&&t.Fbt()&&t.kGt(this),t=t.MK();this.u_t(),this.jc.gZ()&&this.Ost.rIt().children.push(this.YEt.rIt())}MK(){return this.rGt}TH(){return Wv}$It(){return this.YEt}xE(t){const s=!!this.MK(),i=this.jc.J7();s&&this.Ivt.dCt(i),this.YEt.xE(),s&&this.Ivt.z3(i)}*Hbt(t){const s=!!this.MK(),i=this.jc.J7();s&&this.Ivt.dCt(i),yield*this.YEt.Hbt(),s&&this.Ivt.z3(i)}XIt(){return!1}VIt(){return this.jf}u_t(){let t=this.MK();for(;t;){if(t instanceof $v.IIt&&t.Fbt()&&!t.KCt())return void(this.jf=!1);t=t.MK()}this.jf=!0}}}{let Yv=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=Yv;const Qv=self.Gs,Jv=self.assert;Qv.JEt=class extends Qv.$n{constructor(t){super(),this._x=t,this.jc=t.yQ()}sbt(){}static HEt(t,s){const i=s[0],e=[Kv,Xv,Zv,tx,Hv,qv];return Qv.Wn(e[i],t,s)}};class Hv extends Qv.JEt{constructor(t,s){super(t),this.qEt=this.jc.n6(),this.iEt=this.jc.sEt(s[1]),this.iEt!==Qv.uQ.lQ.Jdt.random&&this.iEt!==Qv.uQ.lQ.Jdt.XEt||this._x.ZEt()}KEt(){return this.qEt.tAt(this.iEt,this.qEt)}}class qv extends Qv.JEt{constructor(t,s){super(t),this.sAt=null,this.aEt=s[1],this._x.ZEt()}sbt(){const t=this.jc.hW();this.sAt=t.oW(this.aEt),this.aEt=null;const s=this._x.uW(),i=this.sAt.uW();this.iAt=[...new Set([...s.cW(),...i.cW()])],this.iAt=t.fbt(this.iAt)}KEt(){const t=this.sAt;if(t.Gu()){const s=t.uW();return Qv.IIt.prototype.pW.bind(s,this.iAt,t.mW(),t.gW(),t.aW(),null)}{const s=t.aW();return()=>s}}}class Xv extends Qv.JEt{constructor(t,s){super(t),this.HTt=this.jc.C7(s[1]),this.iEt=this.jc.sEt(s[2]),this.eAt=!!s[3],this.evt=this.jc.hW().MW(),this._x.nAt(this.HTt)}KEt(){return this.HTt.KJ().tAt(this.iEt,this.HTt.qJ().g0())}rAt(...t){const s=this.HTt,i=s.cH().cvt(),e=i.length;if(0===e)return this.eAt?"":0;const n=Yv(this._x.hAt(),e);return this.evt.D3().Kvt(s),this.iEt.apply(i[n].g0(),t)}oAt(t,...s){const i=this.HTt,e=i.uH(),n=e.length;if(0===n||"number"!=typeof t)return this.eAt?"":0;const r=Yv(t,n);return this.evt.D3().Kvt(i),this.iEt.apply(e[r].g0(),s)}}class Zv extends Qv.JEt{constructor(t,s){super(t),this.HTt=this.jc.C7(s[1]),this.aAt=s[3],this.eAt=!!s[2],this._x.nAt(this.HTt)}lAt(){const t=this.HTt.cH().cvt(),s=t.length;return 0===s?this.eAt?"":0:t[Yv(this._x.hAt(),s)].uAt(this.aAt)}cAt(){const t=this.HTt,s=t.cH().cvt(),i=s.length;if(0===i)return this.eAt?"":0;const e=s[Yv(this._x.hAt(),i)],n=e.gH().fAt(t.dAt());return e.uAt(this.aAt+n)}pAt(t){const s=this.HTt,i=s.uH(),e=i.length;if(0===e||"number"!=typeof t)return this.eAt?"":0;const n=i[Yv(t,e)];let r=0;return s.pH()&&(r=n.gH().fAt(s.dAt())),n.uAt(this.aAt+r)}}class Kv extends Qv.JEt{constructor(t,s){super(t),this.HTt=this.jc.C7(s[1]),this.mAt=this.HTt.Kft(s[2]),this.gAt=this.HTt.Mut(s[2]),this.iEt=this.jc.sEt(s[3]),this.eAt=!!s[4],this.evt=this.jc.hW().MW(),this._x.nAt(this.HTt)}yAt(...t){const s=this.HTt,i=s.cH().cvt(),e=i.length;if(0===e)return this.eAt?"":0;const n=Yv(this._x.hAt(),e);this.evt.D3().Kvt(s);const r=i[n];let h=0;return s.pH()&&(h=r.gH().wAt(s.dAt())),this.iEt.apply(r.Zft()[this.gAt+h].g0(),t)}MAt(t,...s){const i=this.HTt,e=i.uH(),n=e.length;if(0===n||"number"!=typeof t)return this.eAt?"":0;const r=Yv(t,n);this.evt.D3().Kvt(i);const h=e[r];let o=0;return i.pH()&&(o=h.gH().wAt(i.dAt())),this.iEt.apply(h.Zft()[this.gAt+o].g0(),s)}}class tx extends Qv.JEt{constructor(t,s){super(t),this.SAt=null,this.TAt=s[1]}sbt(){this.SAt=this.jc.hW().Gbt(this.TAt)}vAt(){return this.SAt}}}{let sx=function(t){const s=self.xAt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=sx;const ix=self.Gs,ex=self.assert;ix.bAt=class extends ix.$n{constructor(t,s,i){super(),this._x=t,this.$w=i,this.Qc=s,this.Ys=null,this.CAt=!1,this.PEt=!1}static XC(t,s,i){const e=s[0],n=[nx,rx,fx,ox,lx,hx,ux,nx,ox,ox,dx,px,fx,gx,rx,cx,ax,mx,yx,wx,Mx,Sx];return ix.Wn(n[e],t,e,i,s)}sbt(){}ZEt(){this.CAt=!0}nAt(t){this.CAt||t&&(t.KJ().GJ()||(this.CAt=!0))}IAt(){return this.CAt}CV(){return this.$w}yQ(){return this._x.yQ()}uW(){return this._x.uW()}sIt(){return this.PEt}GAt(){return 4===this.Qc}};class nx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this._At=0;const n=e[1];this.EAt=n[0],this.AAt=[],this.DAt=null;for(let t=1,s=n.length;t<s;++t)this.AAt.push(ix.JEt.HEt(this,n[t]));this.AAt.length?this.Ys=this.NAt:(this.Ys=sx(this.EAt),this.PEt=!0)}OAt(t){if(t<0||t>=this.AAt.length)throw new RangeError("invalid numbered node");return this.AAt[t]}sbt(){for(const t of this.AAt)t.sbt();const t=sx(this.EAt);this.AAt.length?this.DAt=t(this):this.DAt=t}hAt(){return this._At}NAt(t){return this._At=t,this.DAt()}}class rx extends nx{constructor(t,s,i,e){super(t,s,i,e),this.Ys=this.PAt,14===s&&(this.uW().UGt(),this._x instanceof ix.LGt&&this.uW().s_t())}PAt(t){this._At=t;const s=this.DAt();return"string"==typeof s?s:""}RAt(){return sx(this.EAt)()}}class hx extends nx{constructor(t,s,i,e){super(t,s,i,e),t.LAt()>=2?this.Ys=this.eq:this.Ys=this.jY,this.PEt=!1}jY(t){this._At=t;const s=this.DAt();return this.yQ().RY().jY(s)}eq(t){const s=this.jY(t);return s?s.eq():null}}class ox extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.FAt=e[1],this.Ys=this.kAt,this.PEt=!0}kAt(){return this.FAt}}class ax extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.jAt=e[1],this.Ys=this.zAt,this.PEt=!0}zAt(){return this.jAt}}class lx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.HTt=this.yQ().C7(e[1]),t.LAt()>=2?this.Ys=this.QJ:this.Ys=this.gH;const n=this.uW();n.RGt(this.HTt),this._x instanceof ix.LGt?n.s_t():n.MK()&&n.MK().s_t(),this.PEt=!0}gH(){return this.HTt}QJ(){return this.HTt?this.HTt.QJ():null}}class ux extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.w8=this.yQ().gY().Vet(e[1]),t.LAt()>=2?this.Ys=this.pY:this.Ys=this.yY,this.PEt=!0}yY(){return this.w8}pY(){return this.w8?this.w8.pY():null}}class cx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.Hrt=this.yQ().tat().ert(e[1]),t.LAt()>=2?this.Ys=this.Rlt:this.Ys=this.eut,this.PEt=!0}eut(){return this.Hrt}Rlt(){return this.Hrt?this.Hrt.Rlt():null}}class fx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.BAt=e[1],this.Ys=this.UAt,this.PEt=!0}UAt(){return this.BAt}}class dx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.$At=e[1];const n=this._x.gH();this._x instanceof ix.PGt&&this._x.tC()?(this.Ys=this.VAt,this.PEt=!0):n&&n.pH()?(this.Ys=this.WAt,this.ZEt()):(this.Ys=this.VAt,this.PEt=!0)}VAt(){return this.$At}WAt(t){t=t||0;const s=this._x.gH(),i=s.cH(),e=i.uH();let n=null;if(e.length)n=e[t%e.length].gH();else if(i.lvt()){const s=i.uvt();n=s[t%s.length].gH()}else{if(!(s.bH()>0))return 0;{const i=s.uH();n=i[t%i.length].gH()}}return this.$At+n.fAt(s.dAt())}}class px extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.TAt=e[1],this.SAt=null,t.LAt()>=2?this.Ys=this.YAt:this.Ys=this.QAt,this.PEt=!0}sbt(){this.SAt=this.yQ().hW().Gbt(this.TAt)}QAt(){return this.SAt}YAt(){return null}}class mx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.JAt=e[1],this.sAt=null,t.LAt()>=2?this.Ys=this.HAt:this.Ys=this.qAt,this.PEt=!0}sbt(){this.sAt=this.yQ().hW().oW(this.JAt),this.JAt=null}qAt(){return this.sAt}HAt(){return null}}class gx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.XAt=[],this.ZAt=[],this.PEt=!0;for(let t=1,s=e.length;t<s;++t){const s=ix.bAt.XC(this._x,e[t],0);this.XAt.push(s),this.ZAt.push(0),s.sIt()||(this.PEt=!1)}this.Ys=this.KAt}sbt(){for(const t of this.XAt)t.sbt()}KAt(){const t=this.XAt,s=this.ZAt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Ys(0);return s}}class yx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.tDt=e[1],this.Ys=this._ft,this.PEt=!0}_ft(){return this.tDt}}class wx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.sDt=e[1],this.Ys=this.iDt,this.PEt=!0}iDt(){return this.sDt}}class Mx extends nx{constructor(t,s,i,e){super(t,s,i,e),this.Ys=this.zX,this.PEt=!1}zX(){return this.DAt()}}class Sx extends ix.bAt{constructor(t,s,i,e){super(t,s,i),this.cMt=this.yQ().EMt().rMt(e[1]),this.Ys=this.eDt,this.PEt=!0}eDt(){return this.cMt.Ac()}}}{let Tx=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Ys(0)};EvalParams=Tx;const vx=self.Gs,xx=self.assert,bx=[],Cx=function(){};vx.PGt=class extends vx.$n{constructor(t,s,i){if(super(),this.SEt=t,this.jc=t.yQ(),this.$w=i,this.iEt=this.jc.sEt(s[1]),this.nDt=s[3]>0,this.rDt=2===s[3],this.hDt=!!s[4],this.oDt=!!s[5],this.Ib=!!s[6],this.v8=s[7],this.aDt=this.SEt.bvt(),this.HTt=null,this.mAt=null,this.gAt=-1,this.qEt=null,this.xE=Cx,this.Hbt=Cx,this.Bs=[],this.lDt=[],this.uDt=!1,this.cDt=null,this.fDt=null,this.IGt=this.jc.gZ()?{GGt:s[8][0],dDt:s[8][1]}:null,-1===s[0]?this.qEt=this.jc.n6():(this.HTt=this.jc.C7(s[0]),s[2]&&(this.mAt=this.HTt.Kft(s[2]),this.gAt=this.HTt.Mut(s[2])),this.SEt.MK()&&this.SEt.MK().s_t()),10===s.length){let t=s[9];for(let s of t)this.Bs.push(vx.bAt.XC(this,s,this.Bs.length)),this.lDt.push(0)}0===this.Bs.length&&(this.Bs=bx,this.lDt=bx),this.SEt.hW().hbt(this)}static XC(t,s,i){return vx.Wn(vx.PGt,t,s,i)}sbt(){for(const t of this.Bs)t.sbt(),t.IAt()&&(this.uDt=!0);this.rDt?(this.xE=this.pDt,this.Hbt=this.mDt):this.qEt?(this.gDt(),this.Hbt=this.yDt):this.HTt.KJ().GJ()?(this.wDt(),this.Hbt=this.MDt):this.Ib?(this.xE=this.SDt,this.Hbt=this.TDt):(this.xE=this.vDt,this.Hbt=this.xDt)}gDt(){const t=this.qEt,s=this.qEt;this.bDt(t,s,this.CDt)}wDt(){const t=this.HTt.KJ(),s=this.HTt.qJ().g0();this.bDt(t,s,this.IDt)}bDt(t,s,i){const e=this.iEt,n=this.oDt,r=this.Bs;if(0===r.length){const i=t.tAt(e,s);this.xE=n?function(){return vx.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.sIt())this.xE=t.GDt(e,s,i.Ys(0));else{const r=t.tAt(e,s);this.xE=function(){return vx.xor(r(i.Ys(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.sIt()&&h.sIt())this.xE=t._Dt(e,s,i.Ys(0),h.Ys(0));else{const r=t.tAt(e,s);this.xE=function(){return vx.xor(r(i.Ys(0),h.Ys(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.sIt()&&h.sIt()&&o.sIt())this.xE=t.EDt(e,s,i.Ys(0),h.Ys(0),o.Ys(0));else{const r=t.tAt(e,s);this.xE=function(){return vx.xor(r(i.Ys(0),h.Ys(0),o.Ys(0)),n)}}}else this.xE=i}s9(){return this.v8}RIt(){return this.iEt}gH(){return this.HTt}I0(){return this.mAt}ADt(){return this.mAt?this.mAt.x0():this.HTt?this.HTt.KJ():null}LAt(){const t=this.ADt();return t?t.DDt():1}uW(){return this.SEt}yQ(){return this.jc}CV(){return this.$w}M_t(){return this.CV()}_It(){return this.nDt}LIt(){return this.rDt}NDt(){return this.oDt}z0(){return this.hDt}tC(){return this.Ib}ODt(){return this.IGt.GGt}PDt(){return!!this.qEt}p_t(){return this.PDt()||this.HTt.KJ().GJ()}m_t(){for(const t of this.Bs)if(t.GAt())return t.gH();return null}RDt(t){this.IGt.GGt=!!t,this.SEt.ZGt()}LDt(){return this.IGt.dDt}XIt(){return!this.ODt()&&!this.jc.__t()&&!this.LDt()}FDt(){return this.cDt||(this.cDt=new Map),this.cDt}kDt(){return this.fDt||(this.fDt=new Map),this.fDt}CDt(){const t=this.lDt;return Tx(this.Bs,t),vx.xor(this.iEt.apply(this.qEt,t),this.oDt)}*yDt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.lDt;Tx(this.Bs,t);let s=this.iEt.apply(this.qEt,t);return vx.vo(s)&&(s=yield*s),vx.xor(s,this.oDt)}return this.xE()}IDt(){const t=this.lDt;Tx(this.Bs,t);const s=this.HTt.qJ().g0();return vx.xor(this.iEt.apply(s,t),this.oDt)}*MDt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.lDt;Tx(this.Bs,t);const s=this.HTt.qJ().g0();let i=this.iEt.apply(s,t);return vx.vo(i)&&(i=yield*i),vx.xor(i,this.oDt)}return this.xE()}pDt(){return!0}*mDt(){return(this.ODt()||this.jc.__t())&&(yield this),!0}jDt(){return this.mAt?this.mAt.x0().DDt()>=2?this.mAt.C0():this.mAt:this.HTt.KJ().DDt()>=2?this.HTt.QJ():this.HTt}SDt(){const t=this.lDt;Tx(this.Bs,t);const s=this.iEt.apply(this.jDt(),t);return this.HTt.Q_t(),s}*TDt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.lDt;Tx(this.Bs,t);let s=this.iEt.apply(this.jDt(),t);return vx.vo(s)&&(s=yield*s),this.HTt.Q_t(),s}return this.xE()}vDt(){const t=this.Bs,s=this.lDt,i=this.HTt.cH();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.IAt()||(s[i]=e.Ys(0))}return i.ovt()?this.zDt(i):this.BDt(i)}*xDt(){return(this.ODt()||this.jc.__t())&&(yield this),this.vDt()}UDt(t){const s=this.Bs,i=this.lDt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.IAt()&&(i[e]=n.Ys(t))}}zDt(t){const s=this.HTt,i=s.pH(),e=s.dAt(),n=this.gAt,r=n>=0,h=s.uH(),o=this.uDt,a=this.lDt,l=this.iEt,u=this.oDt,c=this.aDt&&!this.nDt;t.hvt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.UDt(s),r){const t=i?f.gH().wAt(e):0;d=l.apply(f.Zft()[n+t].g0(),a)}else d=l.apply(f.g0(),a);vx.xor(d,u)?t.fvt(f):c&&t.dvt(f)}return s.$Dt(!0),t.pvt(!1),s.Q_t(),t.avt()}BDt(t){const s=this.HTt,i=s.pH(),e=s.dAt(),n=s.PX(),r=this.gAt,h=r>=0,o=this.uDt,a=this.lDt,l=this.iEt,u=this.oDt,c=this.aDt&&!this.nDt,f=t.mvt(),d=t.gvt(),p=c&&!this.SEt.d_t(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.UDt(t),h){const t=i?s.gH().wAt(e):0;w=l.apply(s.Zft()[r+t].g0(),a)}else w=l.apply(s.g0(),a);vx.xor(w,u)?(y=!0,p?(f.push(s),n&&s.VDt()):(m[g]=s,n&&s.WDt(g),++g)):p?(m[g]=s,n&&s.YDt(g),++g):c&&(d.push(s),n&&s.QDt())}vx.Mh(m,g),n&&s.JDt(p,g);const w=y;return p&&!y&&(y=this.HDt(f)),s.$Dt(w||c),c?y:t.avt()}HDt(t){const s=this.HTt,i=s.pH(),e=s.dAt(),n=this.uDt,r=this.gAt,h=r>=0,o=this.lDt,a=this.iEt,l=this.oDt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.UDt(s),h){const t=i?u.gH().wAt(e):0;c=a.apply(u.Zft()[r+t].g0(),o)}else c=a.apply(u.g0(),o);if(vx.xor(c,l))return!0}return!1}qDt(t,s){return this.Bs[t].Ys(s)}FIt(){const t=this.Bs;if(!t.length)throw new Error("no parameters");return t[0].RAt()}Mst(){if(!this.cDt||!this.cDt.size)return null;const t={};for(const[s,i]of this.cDt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].LX(),t[1].LX(),t[2]])),t[s]=e}return{ex:t}}Sst(t){if(this.cDt&&(this.cDt.clear(),this.cDt=null),!t)return;const s=this.jc,i=t.ex;if(i){const t=this.FDt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=vx.Wn(vx._u,n.map(t=>[s.NY(t[0]),s.NY(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let Ix=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Ys(0)};EvalParams=Ix;const Gx=self.Gs,_x=self.assert,Ex=[],Ax=function(){},Dx=function*(){},Nx=1,Ox=2,Px=4,Rx=8,Lx=16;Gx.LGt=class extends Gx.$n{constructor(t,s,i){super(),this.SEt=t;const e=t.yQ();this.jc=e,this.$w=i,this.v8=s.length>=4?s[3]:-1,this.XDt=s.length>=5?255&s[4]:0,this.YR=s.length>=5?s[4]>>8:0,this.iEt=null,this.HTt=null,this.mAt=null,this.gAt=-1,this.qEt=null,this.ZDt="",this.KDt=null,this.tNt=null,this.xE=Ax,this.Hbt=Ax,this.Bs=[],this.lDt=[],this.uDt=!1;const n=-3===s[0],r=n?s[2]:s[5];if(this.IGt=e.gZ()||n?{GGt:r[0],dDt:r[1],index:r[2]}:null,-1===s[0])this.qEt=e.n6(),this.iEt=e.sEt(s[1]);else if(-2===s[0])this.ZDt=s[1];else if(n){const t=e.sEt(s[1]);this.iEt=t,this.xE=this.sNt,this.Hbt=this.iNt,this.YR|=8}else this.HTt=e.C7(s[0]),4&this.YR?(this.ZDt=s[1],this.KDt=e.C7(s[2])):(s[2]&&(this.mAt=this.HTt.Kft(s[2]),this.gAt=this.HTt.Mut(s[2])),this.iEt=e.sEt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Bs.push(Gx.bAt.XC(this,s,this.Bs.length)),this.lDt.push(0)}0===this.Bs.length&&(this.Bs=Ex,this.lDt=Ex),this.eNt()&&(this.SEt.UGt(),this.SEt.s_t()),this.SEt.hW().obt(this)}static XC(t,s,i){return Gx.Wn(Gx.LGt,t,s,i)}sbt(){for(const t of this.Bs)t.sbt(),t.IAt()&&(this.uDt=!0);if(this.qEt)this.gDt(),this.Hbt=this.yDt;else if(this.ZDt)4&this.YR?this.nNt():this.rNt(),this.ZDt="",this.KDt=null;else if(this.xE===this.sNt){const t=this.iEt,s=this.jc.hW().bbt(this.SEt);this.iEt=t.bind(null,this.jc.bJ(),s)}else this.mAt?this.N_t()?(this.xE=this.hNt,this.Hbt=this.oNt):(this.xE=this.aNt,this.Hbt=this.lNt):this.HTt.KJ().GJ()?(this.wDt(),this.Hbt=this.MDt):this.tC()?(this.xE=this.uNt,this.Hbt=this.cNt):this.N_t()?(this.xE=this.fNt,this.Hbt=this.dNt):this.pNt()?(this.xE=this.mNt,this.Hbt=this.gNt):this.Bs.length?this.Bs.every(t=>t.IAt())?(this.xE=this.yNt,this.Hbt=this.wNt):this.uDt?(this.xE=this.MNt,this.Hbt=this.SNt):this.Bs.every(t=>t.sIt())?(Ix(this.Bs,this.lDt),this.xE=this.TNt,this.Hbt=this.vNt):(this.xE=this.xNt,this.Hbt=this.bNt):(this.xE=this.TNt,this.Hbt=this.vNt)}gDt(){const t=this.qEt,s=this.qEt;this.bDt(t,s,this.CDt)}wDt(){const t=this.HTt.KJ(),s=this.HTt.qJ().g0();this.bDt(t,s,this.IDt)}rNt(){const t=this.SEt.hW(),s=t.oW(this.ZDt);if(s.Gu()){const i=!!(2&this.YR);this.tNt=s.uW();let e=[...new Set([...this.SEt.cW(),...this.tNt.cW()])];e=t.fbt(e);const n=!s.mW()&&this.CNt()?{J_t:!0}:null;if(this.xE=Gx.IIt.prototype.H_t.bind(this.tNt,e,this.Bs,i,n),this.jc.gZ()){const t=this;this.Hbt=function*(){return(t.ODt()||t.jc.__t())&&(yield t),yield*t.tNt.Z_t(e,t.Bs,i,n)}}else this.Hbt=Dx}else this.xE=Ax,this.Hbt=Dx}nNt(){const t=this.SEt.hW(),s=t.dH(this.KDt,this.ZDt);if(s.Gu()){const i=!!(2&this.YR);this.tNt=s.uW();let e=[...new Set([...this.SEt.cW(),...this.tNt.cW(),this.HTt,s.gH()])];e=t.fbt(e);const n=!this.HTt.pH()&&!s.gH().pH(),r=!this.HTt.pH()&&s.gH().pH(),h=this.HTt.pH();let o=null;if(!s.mW()&&this.CNt()&&(o=o||{},o.J_t=!0),!r&&i||(o=o||{},o.W_t=this.HTt,o.Y_t=s.gH()),n||r||h&&!s.mH()?this.xE=Gx.IIt.prototype.H_t.bind(this.tNt,e,this.Bs,i,o):h&&(this.xE=Gx.oIt.prototype.DEt.bind(s,e,this.Bs)),this.jc.gZ()){const t=this;n||r||h&&!s.mH()?this.Hbt=function*(){return(t.ODt()||t.jc.__t())&&(yield t),yield*t.tNt.Z_t(e,t.Bs,i,o)}:h&&(this.Hbt=function*(){return(t.ODt()||t.jc.__t())&&(yield t),yield*s.NEt(e,t.Bs)})}else this.Hbt=Dx}else this.xE=Ax,this.Hbt=Dx}bDt(t,s,i){const e=this.iEt,n=this.Bs;if(0===n.length)this.xE=t.tAt(e,s);else if(1===n.length){const i=n[0];if(i.sIt())this.xE=t.GDt(e,s,i.Ys(0));else{const n=t.tAt(e,s);this.xE=function(){return n(i.Ys(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.sIt()&&r.sIt())this.xE=t._Dt(e,s,i.Ys(0),r.Ys(0));else{const n=t.tAt(e,s);this.xE=function(){return n(i.Ys(0),r.Ys(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.sIt()&&r.sIt()&&h.sIt())this.xE=t.EDt(e,s,i.Ys(0),r.Ys(0),h.Ys(0));else{const n=t.tAt(e,s);this.xE=function(){return n(i.Ys(0),r.Ys(0),h.Ys(0))}}}else this.xE=i}s9(){return this.v8}N_t(){return!!(8&this.YR)}D_t(){return!!(16&this.YR)}pNt(){return 1===this.XDt}tC(){return 2===this.XDt}eNt(){return!!(1&this.YR)}WGt(){return this.N_t()||this.D_t()}gH(){return this.HTt}ADt(){return this.mAt?this.mAt.x0():this.HTt?this.HTt.KJ():null}LAt(){const t=this.ADt();return t?t.DDt():1}uW(){return this.SEt}CNt(){let t=this.SEt;do{if(t instanceof Gx.oIt&&t.mW())return!0;t=t.vbt()}while(t);return!1}yQ(){return this.jc}CV(){return this.$w}M_t(){return this.IGt.index}ODt(){return this.IGt.GGt}RDt(t){this.IGt.GGt=!!t,this.SEt.ZGt()}LDt(){return this.IGt.dDt}XIt(){return!this.ODt()&&!this.jc.__t()&&!this.LDt()}CDt(){const t=this.lDt;return Ix(this.Bs,t),this.iEt.apply(this.qEt,t)}*yDt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.lDt;return Ix(this.Bs,t),yield*this.iEt.apply(this.qEt,t)}return this.xE()}IDt(){const t=this.lDt;return Ix(this.Bs,t),this.iEt.apply(this.HTt.qJ().g0(),t)}*MDt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.lDt;return Ix(this.Bs,t),yield*this.iEt.apply(this.HTt.qJ().g0(),t)}return this.xE()}TNt(){const t=this.lDt,s=this.HTt.cH().uH();for(let i=0,e=s.length;i<e;++i)this.iEt.apply(s[i].g0(),t)}*vNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.lDt,s=this.HTt.cH().uH();for(let i=0,e=s.length;i<e;++i)yield*this.iEt.apply(s[i].g0(),t)}else this.TNt()}xNt(){const t=this.lDt;Ix(this.Bs,t);const s=this.HTt.cH().uH();for(let i=0,e=s.length;i<e;++i)this.iEt.apply(s[i].g0(),t)}*bNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.lDt;Ix(this.Bs,t);const s=this.HTt.cH().uH();for(let i=0,e=s.length;i<e;++i)yield*this.iEt.apply(s[i].g0(),t)}else this.xNt()}yNt(){const t=this.Bs,s=this.lDt,i=this.iEt,e=this.HTt.cH().uH();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Ys(n);i.apply(r.g0(),s)}}*wNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.Bs,s=this.lDt,i=this.iEt,e=this.HTt.cH().uH();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Ys(n);yield*i.apply(r.g0(),s)}}else this.yNt()}MNt(){const t=this.Bs,s=this.lDt,i=this.iEt,e=this.HTt.cH().uH();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.IAt()||(s[i]=e.Ys(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.IAt()&&(s[i]=e.Ys(n))}i.apply(r.g0(),s)}}*SNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.Bs,s=this.lDt,i=this.iEt,e=this.HTt.cH().uH();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.IAt()||(s[i]=e.Ys(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.IAt()&&(s[i]=e.Ys(n))}yield*i.apply(r.g0(),s)}}else this.MNt()}mNt(){const t=this.Bs,s=this.lDt,i=this.iEt,e=this.HTt,n=e.INt(),r=e.cH().uH();n.GNt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Ys(e);i.apply(n.g0(),s)}n._Nt(i)}*gNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.Bs,s=this.lDt,i=this.iEt,e=this.HTt,n=e.INt(),r=e.cH().uH();n.GNt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Ys(e);yield*i.apply(n.g0(),s)}n._Nt(i)}else this.mNt()}ENt(){return this.mAt?this.mAt.x0().DDt()>=2?this.mAt.C0():this.mAt:this.HTt.KJ().DDt()>=2?this.HTt.QJ():this.HTt}uNt(){const t=this.lDt;return Ix(this.Bs,t),this.iEt.apply(this.ENt(),t)}*cNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.lDt;Ix(this.Bs,t);let s=this.iEt.apply(this.ENt(),t);return Gx.vo(s)&&(s=yield*s),s}return this.uNt()}aNt(){const t=this.HTt,s=t.pH(),i=t.dAt(),e=this.Bs,n=this.uDt,r=this.lDt,h=this.iEt,o=this.gAt,a=t.cH().uH();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.IAt()||(r[t]=s.Ys(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.IAt()&&(r[s]=i.Ys(t))}const u=s?l.gH().wAt(i):0;h.apply(l.Zft()[o+u].g0(),r)}}*lNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.HTt,s=t.pH(),i=t.dAt(),e=this.Bs,n=this.uDt,r=this.lDt,h=this.iEt,o=this.gAt,a=t.cH().uH();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.IAt()||(r[t]=s.Ys(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.IAt()&&(r[s]=i.Ys(t))}const u=s?l.gH().wAt(i):0;yield*h.apply(l.Zft()[o+u].g0(),r)}}else this.aNt()}fNt(){const t=this.Bs,s=this.lDt,i=this.iEt,e=this.HTt.cH().uH(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Ys(r);n.push(i.apply(h.g0(),s))}return Promise.all(n)}*dNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.Bs,s=this.lDt,i=this.iEt,e=this.HTt.cH().uH(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Ys(r);n.push(yield*i.apply(h.g0(),s))}return Promise.all(n)}return this.fNt()}hNt(){const t=this.HTt,s=t.pH(),i=t.dAt(),e=this.Bs,n=this.lDt,r=this.iEt,h=this.gAt,o=t.cH().uH(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Ys(t);const u=s?l.gH().wAt(i):0;a.push(r.apply(l.Zft()[h+u].g0(),n))}return Promise.all(a)}*oNt(){if((this.ODt()||this.jc.__t())&&(yield this),this.LDt()){const t=this.HTt,s=t.pH(),i=t.dAt(),e=this.Bs,n=this.lDt,r=this.iEt,h=this.gAt,o=t.cH().uH(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Ys(t);const u=s?l.gH().wAt(i):0;a.push(yield*r.apply(l.Zft()[h+u].g0(),n))}return Promise.all(a)}return this.hNt()}async sNt(){try{await this.iEt()}catch(t){console.error(`Unhandled exception running script %c${this.SEt.dit().Ac()}, event ${this.SEt.n_t()}, action ${this.M_t()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.yZ&&self.yZ.nEt(this),Gx.PIt.rEt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Gx.PIt.hEt())}}*iNt(){return(this.ODt()||this.jc.__t())&&(yield this),this.sNt()}Mst(){return this.cDt&&this.cDt.size?{ex:Gx.Mo(this.cDt)}:null}Sst(t){if(this.cDt&&(this.cDt.clear(),this.cDt=null),!t)return;const s=t.ex;s&&(this.cDt=Gx.So(s))}}}{let Fx=function(t){return t instanceof nb?eb.lq(t):t.J1()},kx=function(t){return Fx(t).FY()},jx=function(t){return eb.lq(t)},zx=function(t){return jx(t).FY()},Bx=function(t){return t instanceof rb?eb.lq(t):t},Ux=function(t){return t instanceof hb?eb.lq(t):t},$x=function(t,s,i,e){s.LX()<i.LX()?t.Set(s,i,e):t.Set(i,s,e)},Vx=function(t,s,i){s.LX()<i.LX()?t.Nu(s,i):t.Nu(i,s)},Wx=function(t,s){t.Ou(s)},Yx=function(t,s,i){return s.LX()<i.LX()?t.Ys(s,i):t.Ys(i,s)},Qx=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.FY(),h=eb.NV(),o=eb.gbt(),a=o.uW().bvt(),l=o.gH(),u=o.NDt(),c=s.cH(),f=l!==s;let d;cb=s,ub=f&&!u,fb=!1;let p=0,m=0,g=!1;c.ovt()?(ob.M(r.KZ()),ob.offset(i,e),h.ANt(r.jY(),s,ob,lb),d=lb):a?eb.DNt()&&!c.gvt().length&&c.mvt().length?d=c.mvt():(d=c.gvt(),fb=!0):d=c.mvt(),n&&(p=r.tx(),m=r.nx(),r.zZ(i,e),r.FZ());for(const s of d)if(h.jQ(t,s)){if(g=!0,u)break;f&&db.add(s)}return n&&(r.kZ(p,m),r.FZ()),Zx.Sh(lb),g},Jx=function(t){const s=eb.fW().bvt(),i=cb.cH(),e=i.mvt(),n=i.gvt();i.ovt()?(i.Mvt(db),s&&(Zx.Sh(n),i.Svt(db,cb.uH()))):s?fb?i.Tvt(db):(i.Svt(db,e),i.Mvt(db)):i.Mvt(db),cb.Q_t()},Hx=function(t,s){ub&&(s&&Jx(t),db.clear(),cb=null,ub=!1)},qx=function(t,s){const i=eb.NY(s);if(!i)return!1;const e=t.cH();if(!e.ovt()&&!e.mvt().includes(i))return!1;if(t.pH()){if(i.gH().NNt(t))return e.xvt(i),t.Q_t(),!0}else if(i.gH()===t)return e.xvt(i),t.Q_t(),!0;return!1},Xx=function(t,s){const i=t.cH();if(i.ovt()){i.pvt(!1),i.hvt();const e=t.uH();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.LX()===s?i.dvt(n):i.fvt(n)}return t.Q_t(),!!i.mvt().length}{const e=i.mvt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.LX()===s?i.dvt(r):++n}return Zx.Mh(e,n),t.Q_t(),!!e.length}};GetInst=Fx,GetWorldInfo=kx,GetInst_SDKv2=jx,GetWorldInfo_SDKv2=zx,GetObjectClass=Bx,GetLayer=Ux,CollMemory_Add=$x,CollMemory_Remove=Vx,CollMemory_RemoveInstance=Wx,CollMemory_Get=Yx,DoOverlapCondition=Qx,FinishCollisionConditionPicking=Jx,FinishCollisionCondition=Hx,PickByUID_Normal=qx,PickByUID_Inverted=Xx;const Zx=self.Gs,Kx=new Zx.bo,tb={},sb={},ib={};let eb=null;Zx.ONt=function(t){eb=t};const nb=self.CX,rb=self.XJ,hb=self.aq;sb.PNt=function(t,s){return Zx.compare(this.FY().tx(),t,s)},ib.PNt=function(t,s){return Zx.compare(this.x,t,s)},sb.RNt=function(t,s){return Zx.compare(this.FY().nx(),t,s)},ib.RNt=function(t,s){return Zx.compare(this.y,t,s)},sb.LNt=function(){return this.FY().eK()},ib.LNt=function(){return this.iK()},tb.FNt=function(){const t=kx(this),s=t.yY(),i=t.KZ();return i.sl()<0||i.il()<0||i.Ka()>s.xy()||i.tl()>s.Cy()},tb.kNt=function(t,s,i){const e=Bx(this).cH(),n=e.uH();if(!n.length)return!1;let r=n[0],h=r.FY(),o=r,a=Zx.nr(h.tx(),h.nx(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.FY();const l=Zx.nr(h.tx(),h.nx(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.xvt(o),!0},sb.sx=function(t){const s=this.FY();s.tx()!==t&&(s.sx(t),s.FZ())},ib.sx=function(t){this.x=+t},sb.hx=function(t){const s=this.FY();s.nx()!==t&&(s.hx(t),s.FZ())},ib.hx=function(t){this.y=+t},sb.jNt=function(t,s){const i=this.FY();i.zNt(t,s)||(i.kZ(t,s),i.FZ())},ib.jNt=function(t,s){this.setPosition(t,s)},tb.BNt=function(t,s){if(!(t=Bx(t)))return;const i=Fx(this),e=t.aH(i);if(!e)return;const[n,r]=e.UNt(s),h=i.FY();h.tx()===n&&h.nx()===r||(h.kZ(n,r),h.FZ())},tb.$Nt=function(t){if(0===t)return;const s=kx(this);s.zZ(s.VNt()*t,s.WNt()*t),s.FZ()},sb.YNt=function(t,s){if(0===s)return;const i=this.FY();t=Zx.Kn(t),i.zZ(Math.cos(t)*s,Math.sin(t)*s),i.FZ()},ib.YNt=function(t,s){0!==s&&(t=Zx.Kn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},sb.tx=function(){return this.FY().tx()},ib.tx=function(){return this.x},sb.nx=function(){return this.FY().nx()},ib.nx=function(){return this.y},tb.AW=function(){return eb.AW(Fx(this))},sb.QNt=function(t,s){return Zx.compare(this.FY().xy(),t,s)},ib.QNt=function(t,s){return Zx.compare(this.width,t,s)},sb.JNt=function(t,s){return Zx.compare(this.FY().Cy(),t,s)},ib.JNt=function(t,s){return Zx.compare(this.height,t,s)},sb.hy=function(t){const s=this.FY();s.xy()!==t&&(s.hy(t),s.FZ())},ib.hy=function(t){this.width=t},sb.oy=function(t){const s=this.FY();s.Cy()!==t&&(s.oy(t),s.FZ())},ib.oy=function(t){this.height=t},sb.tD=function(t,s){const i=kx(this);i.xy()===t&&i.Cy()===s||(i.tD(t,s),i.FZ())},ib.tD=function(t,s){this.VH(t,s)},sb.xy=function(){return this.FY().xy()},ib.xy=function(){return this.width},sb.Cy=function(){return this.FY().Cy()},ib.Cy=function(){return this.height},tb.HNt=function(){return kx(this).KZ().Ka()},tb.qNt=function(){return kx(this).KZ().tl()},tb.XNt=function(){return kx(this).KZ().sl()},tb.ZNt=function(){return kx(this).KZ().il()},tb.KNt=function(){const t=kx(this).KZ();return(t.Ka()+t.sl())/2},tb.tOt=function(){const t=kx(this).KZ();return(t.tl()+t.il())/2},tb.sOt=function(t,s){return Zx.hr(kx(this).JH(),Zx.Kn(s))<=Zx.Kn(t)},tb.iOt=function(t){return Zx.lr(kx(this).JH(),Zx.Kn(t))},tb.eOt=function(t,s){const i=Zx.Kn(t),e=Zx.Kn(s),n=kx(this).JH();return Zx.lr(e,i)?Zx.lr(n,i)&&!Zx.lr(n,e):!(!Zx.lr(n,i)&&Zx.lr(n,e))},sb.QH=function(t){const s=this.FY(),i=Zx.Zn(Zx.Kn(t));isNaN(i)||s.JH()===i||(s.QH(i),s.FZ())},ib.QH=function(t){this.XZ=t},tb.nOt=function(t){if(isNaN(t)||0===t)return;const s=kx(this);s.QH(s.JH()+Zx.Kn(t)),s.FZ()},tb.rOt=function(t){if(isNaN(t)||0===t)return;const s=kx(this);s.QH(s.JH()-Zx.Kn(t)),s.FZ()},tb.hOt=function(t,s){const i=kx(this),e=i.JH(),n=Zx.ar(e,Zx.Kn(s),Zx.Kn(t));isNaN(n)||e===n||(i.QH(n),i.FZ())},tb.oOt=function(t,s,i){const e=kx(this),n=e.JH(),r=s-e.tx(),h=i-e.nx(),o=Math.atan2(h,r),a=Zx.ar(n,o,Zx.Kn(t));isNaN(a)||n===a||(e.QH(a),e.FZ())},tb.aOt=function(t,s){const i=kx(this),e=i.JH(),n=t-i.tx(),r=s-i.nx(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.QH(h),i.FZ())},sb.JH=function(){return Zx.tr(this.FY().JH())},ib.JH=function(){return this.XZ},tb.lOt=function(t,s){return Zx.compare(Zx.Cr(100*kx(this).PO(),6),t,s)},sb.Rq=function(){return this.FY().Rq()},ib.Rq=function(){return this.isVisible},tb.Oq=function(t){const s=kx(this);t=2===t?!s.Rq():0!==t,s.Rq()!==t&&(s.Oq(t),eb.WY())},tb.LO=function(t){const s=Zx.Xn(t/100,0,1),i=kx(this);if(i.JK()){if(i.Mdt().uOt()===s)return}else if(i.PO()===s)return;i.LO(s),eb.WY()},tb.cOt=function(t){Kx.ta(t);const s=kx(this);s.rK().Yo(Kx)||(s.hK(Kx),eb.WY())},tb.kO=function(){const t=kx(this).rK();return Zx._r(t.ko(),t.jo(),t.zo(),t.Bo())},tb.PO=function(){return Zx.Cr(100*kx(this).PO(),6)},tb.fOt=function(t){return!!(t=Ux(t))&&kx(this).jY()===t},tb.dOt=function(t){const s=Bx(this).cH(),i=s.uH();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.FY(),h=e.FY(),o=r.jY().CV(),a=h.jY().CV();0===t?(o>a||o===a&&r.zY()>h.zY())&&(e=n):(o<a||o===a&&r.zY()<h.zY())&&(e=n)}return s.xvt(e),!0},sb.pOt=function(t,s,i){const e=this.FY(),n=0===t?e.ox():e.qZ();return Zx.compare(n,s,i)},ib.pOt=function(t,s,i){const e=0===t?this.$k:this.HZ;return Zx.compare(e,s,i)},sb.mOt=function(){this.FY().aK()},ib.mOt=function(){this.oK()},sb.gOt=function(){this.FY().uK()},ib.gOt=function(){this.lK()},tb.yOt=function(t){(t=Ux(t))&&kx(this).fK(t)},tb.wOt=function(t,s){const i=0===t;if(!(s=Bx(s)))return;const e=Fx(this),n=s.MOt(e);n&&e.FY().pK(n,i)},sb.lx=function(t){const s=this.FY();s.ox()!==t&&(s.lx(t),eb.WY())},ib.lx=function(t){this.$k=t},tb.SOt=function(){return kx(this).jY().CV()},tb.TOt=function(){return kx(this).jY().Ac()},sb.vOt=function(){return this.FY().zY()},ib.vOt=function(){return this.zIndex},sb.xOt=function(){return this.FY().ox()},ib.xOt=function(){return this.$k},sb.bOt=function(){return this.FY().qZ()},ib.bOt=function(){return this.HZ},tb.COt=function(t){const s=Fx(this),i=s.gH().BH().sdt(t);if(!i)return;const e=i.CV();return s.FY().RZ().N0(e)},tb.IOt=function(t,s){const i=Fx(this),e=i.gH().BH().sdt(s);if(!e)return;const n=e.CV(),r=1===t,h=i.FY().RZ();h.N0(n)!==r&&(h.O0(n,r),h.P0(),eb.WY())},tb.GOt=function(t,s,i){const e=Fx(this),n=e.gH().BH().sdt(t);if(!n)return;s=Math.floor(s);const r=n.KI().sG(s);if(!r)return;"color"===r?(Kx.ta(i),i=Kx):"percent"===r&&(i/=100);const h=n.CV(),o=e.FY().RZ();o.L0(h,s,i)&&o.N0(h)&&eb.WY()};const ob=Zx.Wn(Zx.Rect),ab=[],lb=[];let ub=!1,cb=null,fb=!1;const db=new Set;function*pb(t){if(!t)return!1;const s=this.yQ(),i=s.NV(),e=s.hW(),n=e.MW(),r=e.gbt(),h=r.gH(),o=r.FDt(),a=r.kDt(),l=n.D3(),u=s.LW(),c=u-1,f=l.fW(),d=n.N3(f);let p=o.get("collmemory");p||(p=Zx.Wn(Zx._u),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Mf().addEventListener("instancedestroy",t=>Wx(p,t.G0)));const m=h.cH(),g=t.cH(),y=m.uH();let w=null;for(let s=0;s<y.length;++s){const n=y[s];g.ovt()?(i.ANt(n.FY().jY(),t,n.FY().KZ(),ab),w=ab,i._Ot(n,t,w)):w=g.uH();for(let s=0;s<w.length;++s){const r=w[s];if(i.jQ(n,r)||i.EOt(n,r)){const s=Yx(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if($x(p,n,r,u),a){const s=f.TH();e.F3(s);const i=h.cH(),o=t.cH();if(i.pvt(!1),o.pvt(!1),h===t){const t=i.mvt();Zx.Sh(t),t.push(n),t.push(r),h.Q_t()}else{const s=i.mvt(),e=o.mvt();Zx.Sh(s),Zx.Sh(e),s.push(n),e.push(r),h.Q_t(),t.Q_t()}yield*f.j_t(l,d),e.z3(s)}}else Vx(p,n,r)}Zx.Sh(ab)}return n.W3(),!1}tb.AOt=function(t){const s=Bx(this);t=Bx(t);const i=s.yQ();if(i.DOt())return pb.call(s,t);if(!t)return!1;const e=i.NV(),n=i.hW(),r=n.MW(),h=n.gbt(),o=h.gH(),a=h.FDt(),l=h.kDt(),u=r.D3(),c=i.LW(),f=c-1,d=u.fW(),p=r.N3(d);let m=a.get("collmemory");m||(m=Zx.Wn(Zx._u),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.Mf().addEventListener("instancedestroy",t=>Wx(m,t.G0)));const g=o.cH(),y=t.cH(),w=g.uH();let M=null;for(let s=0;s<w.length;++s){const i=w[s];y.ovt()?(e.ANt(i.FY().jY(),t,i.FY().KZ(),ab),M=ab,e._Ot(i,t,M)):M=y.uH();for(let s=0;s<M.length;++s){const r=M[s];if(e.jQ(i,r)||e.EOt(i,r)){const s=Yx(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if($x(m,i,r,c),a){const s=d.TH();n.F3(s);const e=o.cH(),h=t.cH();if(e.pvt(!1),h.pvt(!1),o===t){const t=e.mvt();Zx.Sh(t),t.push(i),t.push(r),o.Q_t()}else{const s=e.mvt(),n=h.mvt();Zx.Sh(s),Zx.Sh(n),s.push(i),n.push(r),o.Q_t(),t.Q_t()}d.j3(u,p),n.z3(s)}}else Vx(m,i,r)}Zx.Sh(ab)}return r.W3(),!1},tb.NOt=function(t){return t=Bx(t),Qx(Fx(this),t,0,0)},tb.OOt=function(t,s,i){return t=Bx(t),Qx(Fx(this),t,s,i)},tb.POt=function(){return!0},tb.NK=function(){return kx(this).NK()},tb.xst=function(){return kx(this).xst()},tb.ROt=function(t,s){const i=Bx(this);t=Bx(t);const e=i.yQ(),n=this.cH().uH();if(0===n.length)return!1;const r=t.cH();let h=r.uH();if(r.ovt()){const s=[...e.LOt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.ovt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.vK())s.FOt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.MK(),null===i)continue}else i=e.TK();i.FOt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.Mvt(a),t.Q_t(),!0)},tb.kOt=function(t,s){const i=Bx(this);t=Bx(t);const e=i.yQ(),n=i.cH().uH();if(0===n.length)return!1;const r=t.cH();let h=r.uH();if(r.ovt()){const s=[...e.LOt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.ovt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.xst()||!e.FOt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.GK())2===s&&i.xst()||i.FOt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.Mvt(a),t.Q_t(),!0)},tb.jOt=function(t,s,i){const e=Bx(this);t=Bx(t);const n=e.yQ(),r=e.cH().uH();if(0===r.length)return!1;const h=t.cH();let o=h.uH();if(h.ovt()){const s=[...n.LOt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.ovt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.IK(i);null!==s&&s.FOt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.FOt(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.wvt(l),t.Q_t(),!0)},tb.zOt=function(t,s,i){const e=Fx(this);switch(t){case 0:default:return Zx.compare(e.bK(),s,i);case 1:return Zx.compare(e.BOt(),s,i)}},tb.EK=function(t,s,i,e,n,r,h,o,a,l){t=Bx(t);const u=Fx(this),c=eb.wbt().gH();for(const f of t.UOt(u,c)){if(!f.KJ().jJ())return;u.EK(f,{RK:s,FK:i,jK:e,BK:n,$K:r,QK:h,WK:o,HK:a,XK:l})}},tb.AK=function(t){t=Bx(t);const s=Fx(this),i=eb.wbt().gH();for(const e of t.UOt(s,i))s.AK(e)},tb.$Ot=function(){const t=Fx(this);t.NK()&&t.MK().AK(t)},tb.VOt=function(){const t=Fx(this).MK();return t?t.LX():-1},tb.WOt=function(){return Fx(this).bK()},tb.YOt=function(){return Fx(this).BOt()},tb.QOt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=kx(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.i0(),i.FZ()):i.t0(t,s)},tb.n0=function(t,s,i,e,n,r,h,o){const a=kx(this);a.n0(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,$k:r,a0:h,l0:o})&&a.FZ()},tb.JOt=function(){const t=kx(this);return t.h0()?t.o0().jx():0},tb.HOt=function(){const t=kx(this);return t.h0()?t.o0().zx():0},tb.qOt=function(t){const s=kx(this);t=2===t?!s.Rq():0!==t,s.Rq()!==t&&s.Oq(t)},tb.S0=function(t,s){this instanceof self.CX?this.q2(t,s):this.S0(t,s)},tb.XOt=function(t,s){this instanceof self.CX?this.Z2(t,""+s):this.XOt(t,""+s)},tb.ZOt=function(t){this instanceof self.CX?this.K2(t):this.ZOt(t)},tb.KOt=function(){this instanceof self.CX?this.Q2():this.y0()},tb.tPt=function(){this instanceof self.CX?this.J2():this.w0()},tb.sPt=function(){return this instanceof self.CX?this.H2():this.sPt()},tb.iPt=function(t){this instanceof self.CX?this.ePt(0!==t):this.nPt(0!==t)},tb.rPt=function(){return this instanceof self.CX?this.cEt():this.hPt()},sb.oPt=function(t,s,i){return Zx.compare(this.J1().zpt(t),s,i)},ib.oPt=function(t,s,i){return Zx.compare(jx(this).zpt(t),s,i)},sb.aPt=function(t){return!!this.J1().zpt(t)},ib.aPt=function(t){return!!jx(this).zpt(t)},tb.lPt=function(t,s){const i=Bx(this),e=i.cH(),n=e.uH();if(!n.length)return!1;const r=i.pH();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.gH().fAt(i.dAt()):0,u=a.zpt(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.xvt(h),!0},tb.uPt=function(t){const s=Bx(this);return s.yQ().gbt().NDt()?Xx(s,t):qx(s,t)},tb.b1=function(t){const s=Fx(this);return t.includes(" ")?new Set(Zx.Lh(t.toLowerCase())).isSubsetOf(s.QX()):!t||s.WX(t)},tb.cPt=function(){return Fx(this).Vut()},tb.fPt=function(){return Fx(this).XX().size},tb.dPt=function(t){return Fx(this).pPt(t)},tb.mPt=function(t,s){const i=Zx.Lh(s),e=Fx(this);if(2===t)return void e.HX(new Set(i));if(0===i.length)return;const n=new Set(e.XX());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)if(!n.delete(t)){const s=t.toLowerCase();for(const t of n)if(t.toLowerCase()===s){n.delete(t);break}}e.HX(n)},tb.gPt=function(){eb.QY(Fx(this))},tb.yPt=function(){return!0},tb.wPt=function(){return!0},sb.MPt=function(t,s){this.J1().Bpt(t,s)},ib.MPt=function(t,s){jx(this).Bpt(t,s)},sb.SPt=function(t,s){const i=this.J1(),e=i.zpt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Bpt(t,e+s)},ib.SPt=function(t,s){const i=jx(this),e=i.zpt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Bpt(t,e+s)},sb.TPt=function(t,s){const i=this.J1(),e=i.zpt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Bpt(t,e-s))},ib.TPt=function(t,s){const i=jx(this),e=i.zpt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Bpt(t,e-s))},sb.vPt=function(t,s){this.J1().Bpt(t,s?1:0)},ib.vPt=function(t,s){jx(this).Bpt(t,s?1:0)},sb.xPt=function(t){const s=this.J1();s.Bpt(t,0===s.zpt(t)?1:0)},ib.xPt=function(t){const s=jx(this);s.Bpt(t,0===s.zpt(t)?1:0)},tb.bPt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=Fx(this),e="state";eb.CPt(),i.Cnt(e),i.Tx(s,e),eb.IPt(e,{GPt:!0})},tb._Pt=function(){return JSON.stringify(Fx(this).Sx("state"))},tb.EPt=function(){return Fx(this).gH().Ac()},tb.APt=function(){const t=eb.mbt().txt();let s=t.bH();for(const i of eb.LOt(t))++s;return s},tb.DPt=function(){return eb.mbt().txt().cH().uH().length},sb.kX=function(){return this.J1().kX()},ib.kX=function(){return jx(this).kX()},sb.LX=function(){return this.J1().LX()},ib.LX=function(){return jx(this).LX()},tb.kCt=function(t){const s=Fx(this);return t.toLowerCase()===eb.hW().UCt(s)},tb.ZX=function(t){const s=Fx(this);eb.hW().ZX(s,t)},tb.NPt=function(t){const s=Bx(this);return eb.hW().mCt().OPt(s.cH().uH(),t),!0},tb.PPt=function(){return Fx(this).zX()},Zx.RPt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.aQ,w=s.Qdt,M=s.Jdt,S=Object.assign({},tb,i>=2?ib:sb);n&&(y.PNt=S.PNt,y.RNt=S.RNt,y.LNt=S.LNt,y.FNt=S.FNt,y.kNt=S.kNt,w.sx=S.sx,w.hx=S.hx,w.jNt=S.jNt,w.BNt=S.BNt,w.$Nt=S.$Nt,w.YNt=S.YNt,M.LPt=S.tx,M.FPt=S.nx,M.EW=S.AW),r&&(y.QNt=S.QNt,y.JNt=S.JNt,w.hy=S.hy,w.oy=S.oy,w.tD=S.tD,M.kPt=S.xy,M.jPt=S.Cy,M.zPt=S.HNt,M.BPt=S.qNt,M.UPt=S.XNt,M.$Pt=S.ZNt,M.VPt=S.KNt,M.WPt=S.tOt),h&&(y.YPt=S.sOt,y.QPt=S.iOt,y.eOt=S.eOt,w.QH=S.QH,w.nOt=S.nOt,w.rOt=S.rOt,w.hOt=S.hOt,w.oOt=S.oOt,w.aOt=S.aOt,M.JPt=S.JH),o&&(y.Rq=S.Rq,y.lOt=S.lOt,w.Oq=S.Oq,w.LO=S.LO,w.cOt=S.cOt,M.Opacity=S.PO,M.ColorValue=S.kO),a&&(y.fOt=S.fOt,y.dOt=S.dOt,y.pOt=S.pOt,w.mOt=S.mOt,w.gOt=S.gOt,w.yOt=S.yOt,w.wOt=S.wOt,w.lx=S.lx,M.SOt=S.SOt,M.TOt=S.TOt,M.vOt=S.vOt,M.xOt=S.xOt,M.bOt=S.bOt),l&&(y.COt=S.COt,w.IOt=S.IOt,w.GOt=S.GOt),d&&(y.POt=S.POt,y.NK=S.NK,y.xst=S.xst,y.ROt=S.ROt,y.kOt=S.kOt,y.jOt=S.jOt,y.zOt=S.zOt,w.EK=S.EK,w.AK=S.AK,w.$Ot=S.$Ot,M.VOt=S.VOt,M.WOt=S.WOt,M.YOt=S.YOt),p&&(w.QOt=S.QOt,w.n0=S.n0,M.JOt=S.JOt,M.HOt=S.HOt),u&&(y.Rq=S.Rq,w.Oq=S.qOt,w.HPt=S.S0,w.qPt=S.XOt,w.XPt=S.ZOt),c&&(y.ZPt=S.sPt,w.KPt=S.KOt,w.tRt=S.tPt),f&&(y.Gu=S.rPt,w.sRt=S.iPt),m&&(y.AOt=S.AOt,y.NOt=S.NOt,y.OOt=S.OOt,s.iRt=Hx),e||(y.oPt=S.oPt,y.aPt=S.aPt,y.lPt=S.lPt,y.uPt=S.uPt,y.b1=S.b1,w.MPt=S.MPt,w.SPt=S.SPt,w.TPt=S.TPt,w.vPt=S.vPt,w.xPt=S.xPt,w.mPt=S.mPt,y.yPt=S.yPt,y.wPt=S.wPt,w.gPt=S.gPt,w.bPt||(w.bPt=S.bPt),M._Pt||(M._Pt=S._Pt),M.APt=S.APt,M.DPt=S.DPt,M.eRt=S.kX,M.nRt=S.LX,M.EPt=S.EPt,M.cPt=S.cPt,M.fPt=S.fPt,M.dPt=S.dPt,y.kCt=S.kCt,w.ZX=S.ZX,w.NPt=S.NPt),g&&(M.PPt=S.PPt)}}{const mb=self.Gs;mb.gCt=class extends mb.$n{constructor(t){super(),this.Ivt=t,this.Qc="",this.i$=-1,this.rRt="",this.hRt=!1,this.oRt=null,this.Rvt=0,this.oGt=[],this.Bvt=null,this.aRt=new Map,this.lRt=null,this.uRt=null,this.cRt=-1,this.uEt=null,this.fRt=null,this.dRt=!1}Yn(){this.Qc="",this.i$=-1,this.rRt="",this.oRt=null,this.uRt=null,this.uEt=null,this.fRt=null,this.cRt=-1,mb.Sh(this.oGt),this.Bvt&&(this.Bvt.clear(),this.Bvt=null);for(const t of this.aRt.values())t.Yn();this.aRt.clear(),this.lRt=null}Kv(){const t=this.Ivt,s=t.yQ().J7(),i=t.mbt();this.oRt=i.fW(),this.Rvt=i.Qvt()+1;const e=t.hIt(this.oRt);e&&(this.uRt=e,this.uEt=e.IEt(),this.fRt=e.CEt().map(t=>t.Yct()),e.N_t()&&(this.cRt=e.EEt()));for(const t of s){const s=t.cH();s.ovt()&&!this.oRt.i_t(t)||(this.oGt.push(t),this.aRt.set(t,mb.Wn(mb.pRt,s)))}const n=t.dW();this.Bvt=n.size>0?n:null}mRt(t){this.Qc="timer",this.Kv(),this.i$=this.Ivt.yQ().PW()+t}gRt(t){this.Qc="walltimer",this.Kv(),this.i$=this.Ivt.yQ().kW()+t}yRt(t){this.Qc="signal",this.Kv(),this.rRt=t.toLowerCase()}OPt(t,s){this.Qc="instance-signals",this.Kv(),this.rRt=s.toLowerCase(),this.lRt=new Set(t)}wRt(t){this.Qc="promise",this.Kv(),t.then(()=>this.PCt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.PCt()})}MRt(){return"timer"===this.Qc}SRt(){return"walltimer"===this.Qc}NCt(){return"signal"===this.Qc}zCt(){return"instance-signals"===this.Qc}iIt(){return"promise"===this.Qc}OCt(){return this.rRt}TRt(){return this.hRt}PCt(){this.hRt=!0}BCt(t){this.lRt.delete(t),0===this.lRt.size&&this.PCt()}MCt(){return this.MRt()?this.i$<=this.Ivt.yQ().PW():this.SRt()?this.i$<=this.Ivt.yQ().kW():this.TRt()}vRt(t){t.Uvt(this.oRt,this.Rvt);for(const[t,s]of this.aRt.entries()){const i=t.cH();s.Uvt(i)}this.Bvt&&t.oxt([...this.Bvt]);const s=this.uRt;s&&(s.$_t(this.uEt),s.CEt().map((t,s)=>t.Eft(this.fRt[s])),s.N_t()&&s.AEt(this.cRt))}SCt(t){this.vRt(t),this.oRt.O_t(t),this.uRt&&this.uRt.N_t()&&this.uRt.X_t(this.cRt),this.Ivt.cCt(this.oGt),this.dRt=!0}async bCt(t){this.vRt(t);for(const s of this.oRt.P_t(t))await this.Ivt.yQ().Jbt(s);this.uRt&&this.uRt.N_t()&&this.uRt.X_t(this.cRt),this.Ivt.cCt(this.oGt),this.dRt=!0}TCt(){return this.dRt}ivt(t){for(const s of this.aRt.values())s.ivt(t);if("instance-signals"===this.Qc){for(const s of t)this.lRt.delete(s);0===this.lRt.size&&this.PCt()}}Mst(){const t={},s={wt:this.Qc,t:this.i$,st:this.rRt,s:this.hRt,ev:this.oRt.s9(),sm:this.oGt.map(t=>t.s9()),dsm:this.Bvt?[...this.Bvt].map(t=>t.s9()):null,sols:t};this.oRt.S_t(this.Rvt)&&(s.act=this.oRt.Mbt(this.Rvt).s9());for(const[s,i]of this.aRt)t[s.s9().toString()]=i.Mst();return"instance-signals"===this.Qc&&(s.pi=[...this.lRt].map(t=>t.LX())),s}static eIt(t,s){const i=t.yQ(),e=t._bt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.Abt(s.act);if(!i)return null;n=i.CV()}const r=mb.Wn(mb.gCt,t);r.i$=s.t,s.hasOwnProperty("wt")?r.Qc=s.wt:r.Qc=-1===r.i$?"signal":"timer",r.rRt=s.st,r.hRt=s.s,r.oRt=e,r.Rvt=n;for(const t of s.sm){const s=i.A3(t);s&&r.oGt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.A3(t);s&&(r.Bvt||(r.Bvt=new Set),r.Bvt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.A3(s);if(!h)continue;const o=mb.Wn(mb.pRt,null);o.Sst(t,n),r.aRt.set(h,o)}if("instance-signals"===r.Qc){r.lRt=new Set;for(const t of s.pi){const s=i.NY(t);s&&r.lRt.add(s)}}return r}}}{const gb=self.Gs;gb.pRt=class extends gb.$n{constructor(t){super(),this.HTt=null,this.xRt=!0,this.B6=[],t&&(this.HTt=t.gH(),this.xRt=t.ovt(),gb.Ch(this.B6,t.mvt()))}Yn(){this.HTt=null,gb.Sh(this.B6)}Uvt(t){t.pvt(this.xRt),gb.Ch(t.mvt(),this.B6)}ivt(t){gb.Ah(this.B6,t)}Mst(){return{sa:this.xRt,insts:this.B6.map(t=>t.LX())}}Sst(t,s){const i=t.yQ();this.xRt=!!s.sa,gb.Sh(this.B6);for(const t of s.insts){const s=i.NY(t);s&&this.B6.push(s)}}}}{let yb=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};GetNextParamMap=yb;const wb=self.Gs;wb.bRt=class extends wb.$n{constructor(t){super(),this.jc=t.runtime,this.Bc=t.id,this.Hn=t.name??"",this.CRt=!!t.IJ,this.IRt=!!t.GRt,this._Rt=!!t.NJ,this.ERt=!!t.ARt,this.DRt=!!t.PJ,this.NRt=!!t.ORt,this.PRt=!!t.zJ,this.RRt=!!t.AJ,this.LRt=!!t.LJ,this.FRt=t.kRt,this.jRt=t.zRt,this.BRt=null,this.URt=new Map,this.$Rt=new Map,this.VRt=new Map,this.WRt=new Map,this.YRt=t.QRt,this.JRt=null}Yn(){this.jc=null}yQ(){return this.jc}CJ(){return this.Bc}Ac(){return this.Hn}HRt(){}jCt(){return this.DDt()>=2?this.JRt.constructor:this.constructor}DDt(){return this.FRt}qRt(t=!1){let s=this.YRt;return t&&"function"!=typeof s&&this.DDt()>=2&&(s=globalThis.e2),s}XRt(){return this.jRt}GJ(){return this.CRt}EJ(){return this.IRt}DJ(){return this.RRt}FJ(){return this.LRt}OJ(){return this._Rt}Iv(){return this.ERt}RJ(){return this.DRt}jJ(){return this.NRt}BJ(){return this.PRt}tAt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.URt.get(t);return i||(i=t.bind(s),this.URt.set(t,i),i)}GDt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=yb(this.$Rt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}_Dt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=yb(this.VRt,t),r=yb(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}EDt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=yb(this.WRt,t),h=yb(r,i),o=yb(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}ZRt(t){if(!this.GJ())throw new Error("must be single-global plugin");this.BRt=t}JJ(){if(!this.GJ())throw new Error("must be single-global plugin");return this.BRt}qJ(){if(!this.GJ())throw new Error("must be single-global plugin");return this.BRt.qJ()}KRt(){const t=this.DDt();wb.xJ.tLt(this,t);const s=this.qRt(!0);if(s){if(this.JRt=new s,!(this.JRt instanceof self.TJ))throw new TypeError("plugin class must derive from IPlugin")}else this.JRt=new self.TJ;wb.xJ.sLt(t)}WJ(){return this.JRt}}}{const Mb=self.Gs;Mb.iLt=class extends Mb.bRt{constructor(t,s){super(t),this.eLt=s,this.nLt=0,this.rLt=new Map,this.hLt("elem-focused",t=>t.oLt()),this.hLt("elem-blurred",t=>{t&&t.aLt()})}Yn(){super.Yn()}lLt(t){const s=this.nLt++;return this.rLt.set(s,t),s}uLt(t){this.rLt.delete(t)}hLt(t,s){this.jc.cZ(this.eLt,t,t=>{const i=this.rLt.get(t.elementId);s(i,t)})}}}{const Sb=self.Gs;Sb.cLt=class extends Sb.$n{constructor(t){super(),this.HTt=t,this.jc=t.yQ(),this.fLt=t.KJ()}Yn(){this.HTt=null,this.jc=null,this.fLt=null}gH(){return this.HTt}yQ(){return this.jc}KJ(){return this.fLt}s1(){return this.HTt.s1()}HRt(){}$Dt(t){}GNt(t){}_Nt(t){}Eit(t){}Rit(){}Nit(){}eet(t){}dLt(){}qRt(){return null}pLt(t,s,i){const e=Sb.Wn(Sb.Event,t,s);e.mLt=this,i&&Object.assign(e,i),this.gH().i6(e)}}}{const Tb=self.Gs;Tb.gLt=class extends Tb.$n{constructor(t,s){super(),this.di=t,this.eLt=s,this.yLt=null,this.jc=t.yQ(),this.HTt=this.di.gH(),this.wLt=this.HTt.INt(),this.pnt=null,this.gnt=null,this.SZ=!1,this.vZ=!1,this.Xf=null,this.bA=!1}Yn(){this.bA=!0,this.MLt(),this.SLt(),this.pnt=null,this.gnt=null,this.Xf&&(this.Xf.Yn(),this.Xf=null),this.di=null,this.jc=null,this.HTt=null,this.wLt=null}Qn(){return this.bA}J1(){return this.di}yQ(){return this.jc}gH(){return this.HTt}KJ(){return this.wLt.KJ()}INt(){return this.wLt}TLt(){return this.di.OY()}aZ(t){return this.jc.aZ(t,this.di,null)}vLt(t){return this.jc.vLt(t,this.di,null)}hQ(t){return this.jc.hQ(t,this.di,null)}xLt(t,s){return this.jc.xLt(t,this.di,s)}bLt(t,s){return this.jc.bLt(t,this.di,s)}CLt(t){return this.jc.CLt(t)}ILt(t,s){this.jc.cZ(this.eLt,t,s)}GLt(t){for(const[s,i]of t)this.ILt(s,i)}_Lt(t,s){this.jc.Uc(this.eLt,t,s)}ELt(t,s){return this.jc.KY(this.eLt,t,s)}ALt(t,s){if(!this.jc.QV())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.eLt,handler:t,data:s,responseId:null});this._Lt(t,s)}DLt(t){if(!t)throw new Error("cannot set empty component id");this.yLt=t}NLt(){if(!this.yLt)throw new Error("wrapper extension component id not set");return this.jc.GZ(this.yLt)}EZ(t,s){if(!this.yLt)throw new Error("wrapper extension component id not set");this.jc.EZ(this.yLt,t,s)}OLt(t){for(const[s,i]of t)this.EZ(s,i)}S3(t,s){if(!this.yLt)throw new Error("wrapper extension component id not set");this.jc.S3(this.yLt,t,s)}T3(t,s){if(!this.yLt)throw new Error("wrapper extension component id not set");return this.jc.T3(this.yLt,t,s)}Irt(){}PLt(){}RLt(){if(!this.SZ){if(!this.pnt)if(this.jc.gZ()){const t=globalThis.yZ,s=this.KJ();this.pnt=()=>{const i=performance.now();this.Irt(),t.MZ(s,performance.now()-i)}}else this.pnt=()=>this.Irt();this.jc.Mf().addEventListener("tick",this.pnt),this.SZ=!0}}MLt(){this.SZ&&(this.jc.Mf().removeEventListener("tick",this.pnt),this.SZ=!1)}LLt(){return this.SZ}FLt(){if(!this.vZ){if(!this.gnt)if(this.jc.gZ()){const t=globalThis.yZ,s=this.KJ();this.gnt=()=>{const i=performance.now();this.PLt(),t.MZ(s,performance.now()-i)}}else this.gnt=()=>this.PLt();this.jc.Mf().addEventListener("tick2",this.gnt),this.vZ=!0}}SLt(){this.vZ&&(this.jc.Mf().removeEventListener("tick2",this.gnt),this.vZ=!1)}kLt(){return this.vZ}jLt(){return[]}Sx(){return null}Tx(t){}Apt(t){}Lpt(t,s){}Amt(t,s,i){if(0===s)return;const e=this.Apt(t);if("number"!=typeof e)throw new Error("expected number");this.Lpt(t,e+s,i)}zLt(t,s,i,e){}BLt(t,...s){t.call(this,...s)}ULt(t,...s){return t.call(this,...s)}qRt(){return null}pLt(t,s,i){if(!this.di.$Lt())return;const e=this.TLt(),n=Tb.Wn(Tb.Event,t,s);n.G0=e,i&&Object.assign(n,i),e.dispatchEvent(n)}Iv(){return!1}}}{const vb=self.Gs;vb.VLt=class extends vb.gLt{constructor(t,s){super(t,s),this.Blt=t.FY(),this.WLt=null,this.YLt=null}Yn(){if(this.WLt){const t=this.jc.Mf();t.removeEventListener("renderercontextlost",this.WLt),t.removeEventListener("renderercontextrestored",this.YLt),this.WLt=null,this.YLt=null}this.Blt=null,super.Yn()}QLt(){this.JLt()}HLt(){}qLt(){}JLt(){if(this.WLt)return;this.WLt=()=>this.D6(),this.YLt=()=>this.XLt();const t=this.jc.Mf();t.addEventListener("renderercontextlost",this.WLt),t.addEventListener("renderercontextrestored",this.YLt)}D6(){this.HLt()}XLt(){this.qLt()}FY(){return this.Blt}Nut(){return!1}Dut(){if(!this.Nut())throw new Error("original size not known");const t=this.ZLt();if(t)return t.xy()}Put(){if(!this.Nut())throw new Error("original size not known");const t=this.ZLt();if(t)return t.Cy()}ZLt(){return null}KLt(){const t=this.ZLt();if(t){const s=t.DC();if(s)return[s.xy(),s.Cy()]}return[100,100]}tFt(){const t=this.ZLt();return t?t.ND():null}sFt(){const t=this.ZLt();return t?t.iFt():null}eFt(){const t=this.ZLt();return!!t&&t.nFt()}UNt(t){const s=this.di.FY();return[s.tx(),s.nx(),s.qZ()]}dLt(t,s,i){}rFt(t,s){}qtt(){return!0}}}{const xb=self.Gs,bb=xb.Wn(xb.Rect);xb.hFt=class extends xb.VLt{constructor(t,s){super(t,s),this.oFt=this.KJ().lLt(this),this.aFt=!0,this.lFt=!1,this.uFt=!1,this.cFt=-.2,this.fFt=xb.Wn(xb.Rect,0,0,-1,-1);const i=this.jc._Y();this.dFt=i.A2(),this.pFt=i.D2(),this.mFt=-1,this.gFt=-1,this.yFt=!1,this.RLt()}Yn(){this.KJ().uLt(this.oFt),this.wFt("destroy"),this.oFt=-1,super.Yn()}m0(){if(this.jc.QV())throw new Error("not valid in worker mode");return this.MFt("get-element")}wFt(t,s){s||(s={}),s.elementId=this.oFt,this._Lt(t,s)}MFt(t,s){return s||(s={}),s.elementId=this.oFt,this.ALt(t,s)}SFt(t,s){return s||(s={}),s.elementId=this.oFt,this.ELt(t,s)}TFt(t){t||(t={});const s=this.FY();t.elementId=this.oFt,t.isVisible=s.Rq(),t.htmlIndex=s.jY().F2(),t.htmlZIndex=s.j2(),Object.assign(t,this.vFt()),this.aFt=!!t.isVisible,this.ALt("create",t),this.xFt(!0)}qOt(t){t=!!t,this.aFt!==t&&(this.aFt=t,this.wFt("set-visible",{isVisible:t}))}Irt(){this.xFt(!1)}bFt(){const t=this.jc._Y().W2();return"Android"===xb.Zs.Ks&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}xFt(t){if(this.J1().kY())return;const s=this.FY(),i=s.jY(),e=s.KZ();let[n,r]=i.wX(e.Ka(),e.tl()),[h,o]=i.wX(e.sl(),e.il());const a=this.jc._Y(),l=a.cJ(),u=a.dJ();if(!s.Rq()||!i.Rq())return void this.qOt(!1);if(!this.bFt()&&(h<=0||o<=0||n>=l||r>=u))return void this.qOt(!1);bb.set(n,r,h,o);const c=a.A2(),f=a.D2(),d=i.F2(),p=s.j2();if(!t&&bb.equals(this.fFt)&&this.dFt===c&&this.pFt===f&&this.mFt===d&&this.gFt===p)return void this.qOt(!0);this.fFt.M(bb),this.dFt=c,this.pFt=f,this.mFt=d,this.gFt=p,this.qOt(!0);let m=null;this.uFt&&(m=i.Y2()+this.cFt),this.MFt("update-position",{left:Math.round(this.fFt.Ka()),top:Math.round(this.fFt.tl()),width:Math.round(this.fFt.width()),height:Math.round(this.fFt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}y0(){this.MFt("focus",{focus:!0})}w0(){this.MFt("focus",{focus:!1})}oLt(){this.lFt=!0}aLt(){this.lFt=!1}sPt(){return this.lFt}S0(t,s){this.wFt("set-css-style",{prop:xb.To(t),val:s})}XOt(t,s){this.wFt("set-attribute",{name:t,val:s})}ZOt(t){this.wFt("remove-attribute",{name:t})}CFt(){this.yFt||(this.yFt=!0,Promise.resolve().then(()=>{this.yFt=!1,this.wFt("update-state",this.vFt())}))}vFt(){}IFt(){return this.oFt}}}{const Cb=self.Gs,Ib=self.A0;Cb.GFt=class extends Cb.$n{constructor(t){super(),this.jc=t.runtime,this.Bc=t.id,this.Hn=t.name??"",this._Ft=Cb.Wn(Cb.Lu),this.EFt=Cb.Wn(Cb.Lu),this.FRt=t.kRt,this.YRt=t.QRt,this.AFt=null}Yn(){this.EFt.Yn(),this._Ft.Yn(),this.jc=null}yQ(){return this.jc}CJ(){return this.Bc}Ac(){return this.Hn}HRt(){}DDt(){return this.FRt}qRt(t=!1){let s=this.YRt;return t&&"function"!=typeof s&&this.DDt()>=2&&(s=globalThis.i3),s}DFt(t){this._Ft.zu(t)}Knt(){return this._Ft.Bu()}R7(t){this.EFt.zu(t)}k7(t){this.EFt.Nu(t)}uH(){return this.EFt.Bu()}KRt(){const t=this.DDt();Cb.xJ.tLt(this,t);const s=this.qRt(!0);if(s){if(this.AFt=new s,!(this.AFt instanceof Ib))throw new TypeError("behavior class must derive from IBehavior")}else this.AFt=new Ib;Cb.xJ.sLt(t)}v0(){return this.AFt}}}{const Gb=self.Gs;Gb.NFt=class extends Gb.$n{constructor(t){super(),this.jc=t.yQ(),this.mAt=t,this.HTt=t.gH(),this.OFt=t.x0(),this.OFt.DFt(this.HTt)}Yn(){this.jc=null,this.mAt=null,this.HTt=null,this.OFt=null}HRt(){}I0(){return this.mAt}gH(){return this.HTt}yQ(){return this.jc}x0(){return this.OFt}}}{const _b=self.Gs;_b.PFt=class extends _b.$n{constructor(t,s){super(),this.Iyt=t,this.eLt=s,this.di=t._0(),this.jc=t.yQ(),this.mAt=t.I0(),this.wLt=this.mAt.INt(),this.SZ=!1,this.vZ=!1,this.d3=!1,this.Xf=null}Yn(){this.MLt(),this.SLt(),this.RFt(),this.Xf&&(this.Xf.Yn(),this.Xf=null),this.Iyt=null,this.di=null,this.jc=null,this.mAt=null,this.wLt=null}x0(){return this.mAt.x0()}LFt(){return this.Iyt}_0(){return this.di}gH(){return this.di.gH()}FY(){return this.di.FY()}yQ(){return this.jc}I0(){return this.mAt}INt(){return this.wLt}TLt(){return this.Iyt.TLt()}aZ(t){return this.jc.aZ(t,this.di,this.mAt)}vLt(t){return this.jc.vLt(t,this.di,this.mAt)}hQ(t){return this.jc.hQ(t,this.di,this.mAt)}FFt(){}Irt(){}PLt(){}kFt(){}RLt(){this.SZ||(this.jc.o3(this),this.SZ=!0)}MLt(){this.SZ&&(this.jc.a3(this),this.SZ=!1)}LLt(){return this.SZ}FLt(){this.vZ||(this.jc.l3(this),this.vZ=!0)}SLt(){this.vZ&&(this.jc.u3(this),this.vZ=!1)}kLt(){return this.vZ}jFt(){this.d3||(this.jc.c3(this),this.d3=!0)}RFt(){this.d3&&(this.jc.f3(this),this.d3=!1)}zFt(){return this.d3}jLt(){return[]}ILt(t,s){this.jc.cZ(this.eLt,t,s)}BFt(t,s){}Sx(){return null}Tx(t){}Apt(t){}Lpt(t,s){}Amt(t,s){if(0===s)return;const i=this.Apt(t);if("number"!=typeof i)throw new Error("expected number");this.Lpt(t,i+s)}zLt(t,s,i,e){}BLt(t,...s){t.call(this,...s)}ULt(t,...s){return t.call(this,...s)}qRt(){return null}pLt(t,s,i){if(!this.Iyt.$Lt())return;const e=this.TLt(),n=_b.Wn(_b.Event,t,s);n.UFt=e,n.G0=e.G0,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let Eb=function(t){if(t!==Db)throw new Error("invalid internal API token")};ValidateInternalAPIToken=Eb;const Ab=self.Gs;Ab.uQ={},Ab.Dyt={};const Db=Ab._s();let Nb=[],Ob=[],Pb=[],Rb=null,Lb=null,Fb=null,kb=null;const jb=new Map,zb=new Map;Ab.xJ=class extends Ab.$n{#s=null;#t=[];#e=null;#i=[];#n=new Map;#h=null;#a=null;#r;constructor(t,s){super(),this.#s=t,this.#r=new Set(s)}$Ft(t){const s=t[19],i=this.#s.sEt(t[0]);if(!i)throw new Error("missing plugin");Ab.RPt(t,i,s);const e=s>=2?Ab.bRt:i,n=Ab.Wn(e,{runtime:this.#s,IJ:t[1],GRt:t[2],NJ:t[5],PJ:t[8],ARt:t[9],ORt:t[13],zJ:t[14],AJ:t[17],LJ:t[18],kRt:s,id:t[20],name:t[21],QRt:s>=2?i:null,zRt:t[22]});n.HRt(),this.#t.push(n),jb.set(i,n)}VFt(){this.#e=Ab.Wn(Ab.uQ.lQ,{runtime:this.#s,IJ:!0}),this.#e.HRt()}WFt(t){const s=t[1],i=t[2],e=t[3],n=this.#s.sEt(t[0]);if(!n)throw new Error("missing behavior");this.#n.set(n,()=>{const t=s>=2?Ab.GFt:n,r=Ab.Wn(t,{runtime:this.#s,id:i,name:e,kRt:s,QRt:s>=2?n:null});r.HRt(),this.#i.push(r),zb.set(n,r),!this.#h&&Ab.Dyt.YFt&&r instanceof Ab.Dyt.YFt?this.#h=r:!this.#a&&Ab.Dyt.QFt&&r instanceof Ab.Dyt.QFt&&(this.#a=r),r.KRt()})}JFt(t){const s=this.#n.get(t);s&&(s(),this.#n.delete(t))}static tLt(t,s=1){if(Ab.xJ.tLt!==Rb)throw new Error("invalid method");1===s&&Nb.push(t),Ob.push(t)}static sLt(t=1){if(Ab.xJ.sLt!==Lb)throw new Error("invalid method");1===t&&Nb.pop(),Ob.pop()}static EX(){if(Ab.xJ.EX!==Fb)throw new Error("invalid method");if(0===Nb.length)throw new Error("no init object set");return Nb.at(-1)}static vJ(t){if(Ab.xJ.vJ!==kb)throw new Error("invalid method");if(Eb(t),0===Ob.length)throw new Error("no init object set");return Ob.at(-1)}static HFt(t){Pb.push(t)}static qFt(){Pb.pop()}static hZ(){if(0===Pb.length)throw new Error("no init properties set");return Pb.at(-1)}XFt(){for(const t of this.#t)t.KRt()}static VJ(t){return jb.get(t)||null}static D0(t){return zb.get(t)||null}n6(){return this.#e}ZFt(){return this.#h}KFt(){return this.#a}GZ(t){return this.#r.has(t)}},Rb=Ab.xJ.tLt,Lb=Ab.xJ.sLt,Fb=Ab.xJ.EX,kb=Ab.xJ.vJ}{const Bb=self.Gs,Ub=new Set;Bb.tkt=class extends Bb.$n{constructor(){super(),this.skt=0,this.S6="",this.cz=0,this.ikt=0,this.ekt=0,this.Uy=0,this.$y=0,this.nkt=!1,this.rkt=!1,this.hkt=null,this.okt="",this.yA=Bb.Wn(Bb.Rect),this.akt=Bb.Wn(Bb.El),this.lkt="",this.ukt=new self.mQ(this),Ub.add(this)}Yn(){this.SA(),this.hkt&&0===this.hkt.R6()&&this.hkt.Yn(),this.hkt=null,Ub.delete(this),this.ckt()}static D6(){for(const t of Ub)t.okt="",t.yA.set(0,0,0,0),t.akt.ql(t.yA)}fkt(t){this.S6=t[0],this.cz=t[1],this.ikt=t[2],this.ekt=t[3],this.Uy=t[4],this.$y=t[5],this.nkt=t[6],this.rkt=!0}dkt(t,s,i){if(i=!!i,this.hkt)throw new Error("already loaded asset");this.S6=s;const e={W5:i};return Bb.Xh(s)&&(e.Y5="remote"),this.gQ(t,e),this.hkt.J5()}pkt(t,s){if(this.hkt)throw new Error("already loaded asset");this.S6="",this.cz=s.size,this.hkt=Bb.Wn(Bb.Q5,t.EV(),{blob:s,size:this.cz,Y5:"local"})}mkt(t){if(t===this)throw new Error("cannot replace with self");this.skt++,this.SA(),this.S6=t.S6,this.cz=t.cz,this.ikt=t.ikt,this.ekt=t.ekt,this.Uy=t.Uy,this.$y=t.$y,this.nkt=t.nkt,this.rkt=t.rkt,this.hkt=t.hkt,this.okt=t.okt,this.yA=t.yA,this.akt=t.akt,this.ckt()}X5(){return this.S6}Pu(){return this.cz}gkt(){return this.ikt}ykt(){return this.ekt}nFt(){return this.nkt}xy(){return this.Uy}Cy(){return this.$y}wkt(){return this.hkt.xy()}Mkt(){return this.hkt.Cy()}gQ(t,s){if(this.hkt)throw new Error("already got asset");s=Object.assign({},s,{url:this.X5(),size:this.Pu()}),this.hkt=t.V5(s)}b6(){return this.hkt&&this.hkt.b6()}async A4(t,s){if(!this.hkt)throw new Error("no asset");if(this.okt)throw new Error("already loaded texture");const i=this.skt;this.okt="loading";const e=await this.hkt.A4(t,s);if(this.skt!==i)return null;if(!e)return this.okt="",null;this.okt="loaded",this.rkt||(this.Uy=e.xy(),this.$y=e.Cy(),this.rkt=!0);const n=this.nkt?this.$y:this.Uy,r=this.nkt?this.Uy:this.$y;return this.yA.set(this.ikt,this.ekt,this.ikt+n,this.ekt+r),this.yA.Mt(e.xy(),e.Cy()),this.akt.ql(this.yA),this.nkt&&this.akt.iu(),e}SA(){this.okt&&(this.hkt&&this.hkt.SA(),this.okt="",this.yA.set(0,0,0,0),this.akt.ql(this.yA))}DC(){return this.hkt&&"loaded"===this.okt?this.hkt.DC():null}ND(){return this.yA}iFt(){return this.akt}g2(){return this.ukt}Skt(){return this.hkt}async Tkt(t){t||(t=await this.hkt.F6()),this.rkt||(this.Uy=t.width,this.$y=t.height,this.rkt=!0);const s=Bb.co(this.Uy,this.$y),i=s.getContext("2d");return this.nkt?(i.rotate(Math.PI/-2),i.translate(-this.$y,0),i.drawImage(t,this.ikt,this.ekt,this.$y,this.Uy,0,0,this.$y,this.Uy)):i.drawImage(t,this.ikt,this.ekt,this.Uy,this.$y,0,0,this.Uy,this.$y),s}async vkt(t){if(this.lkt)return this.lkt;const s=await this.Tkt(t),i=await Bb.fo(s);return this.lkt=URL.createObjectURL(i),this.lkt}ckt(){this.lkt&&(URL.revokeObjectURL(this.lkt),this.lkt="")}}}{const $b=self.Gs;$b.xkt=class extends $b.$n{constructor(t){super(),this.Hn=t[0],this.bkt=t[1],this.hDt=!!t[2],this.ogt=t[3],this.Ckt=t[4],this.Ikt=!!t[5],this.v8=t[6],this.Gkt=t[7].map(t=>$b.Wn($b._kt,t)),this.Ekt=new self.F0(this)}static Akt(t,s){const i=$b.Wn($b.xkt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.Gkt.push($b._kt.Akt(t)),i}Yn(){for(const t of this.Gkt)t.Yn();$b.Sh(this.Gkt)}Dkt(t){for(const s of this.Gkt)s.s1().gQ(t)}Nkt(t,s){return Promise.all(this.Gkt.map(i=>i.s1().A4(t,s)))}Okt(){for(const t of this.Gkt)t.s1().SA()}Ac(){return this.Hn}s9(){return this.v8}Q0(){return this.Gkt.length}H0(){return this.Gkt}Pkt(t){if((t=Math.floor(t))<0||t>=this.Gkt.length)throw new RangeError("invalid frame");return this.Gkt[t]}Rkt(t,s){(s=Math.floor(s))<0?this.Gkt.unshift(t):s>=this.Gkt.length?this.Gkt.push(t):this.Gkt.splice(s,0,t)}Lkt(t){if((t=Math.floor(t))<0||t>=this.Gkt.length)throw new RangeError("invalid frame");this.Gkt[t].Yn(),this.Gkt.splice(t,1)}Fkt(t){for(let s=0,i=this.Gkt.length;s<i;++s)if($b.Ze(this.Gkt[s].w1(),t))return s;return-1}kkt(t){if("string"==typeof t){const s=this.Fkt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}k0(){return this.bkt}z0(){return this.hDt}U0(){return this.ogt}V0(){return this.Ckt}Y0(){return this.Ikt}jkt(){return this.Ekt}}}{const Vb=self.Gs,Wb=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();Vb._kt=class extends Vb.$n{constructor(t){super(),this.zkt=Vb.Wn(Vb.tkt),this.zkt.fkt(t),this.Bkt=t[7],this.Ukt=Vb.Wn(Vb.Ea,t[8],t[9]),this.$kt=t[10].map(t=>Vb.Wn(Vb.Vkt,this,t)),this.Wkt=new Map;for(const t of this.$kt)this.Wkt.set(t.Ac().toLowerCase(),t);this.Ykt=null;const s=t[11];s.length>=6&&(this.Ykt=Vb.Wn(Vb.lu,s)),this.Vw=t[12]?t[12]:"",this.Qkt=new self.t1(this)}static Akt(t){const s=Vb.Wn(Vb._kt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.zkt.pkt(t,Wb),s}Yn(){this.Ykt&&(this.Ykt.Yn(),this.Ykt=null),this.zkt.Yn(),this.zkt=null}s1(){return this.zkt}i1(){return this.Bkt}UZ(){return this.Ukt.Pa()}WZ(){return this.Ukt.La()}f1(){return this.Ykt}u1(t){return this.Wkt.get(t.toLowerCase())||null}l1(t){return(t=Math.floor(t))<0||t>=this.$kt.length?null:this.$kt[t]}n1(){return this.$kt.length}w1(){return this.Vw}q0(){return this.Qkt}}}{const Yb=self.Gs;Yb.Vkt=class extends Yb.$n{constructor(t,s){super(),this.Jkt=t,this.Hn=s[0],this.Hkt=Yb.Wn(Yb.Ea,s[1],s[2])}Yn(){}Ac(){return this.Hn}tx(){return this.Hkt.Pa()}nx(){return this.Hkt.La()}qkt(){return this.Hkt}}}{const Qb=globalThis.Gs,Jb=globalThis.yZ,Hb=globalThis.XJ,qb=globalThis.vH,Xb=globalThis.PH,Zb=globalThis.assert;Qb.Kwt=class extends Qb.$n{constructor(t,s,i){super();const e=t.sEt(i[1]);this.jc=t,this.fLt=Qb.xJ.VJ(e),this.wLt=null,this.Xkt=e.Instance,this.$w=s,this.v8=i[11],this.Hn=i[0],this.LEt=this.jc.Cbt(i[14]),this.Zkt=!!i[9],this.Kkt=!!i[2],this.tjt=!!i[10],this.sjt=i[3].map(s=>({o8:s[0],type:s[1],name:s[2],ijt:t.Cbt(s[3])})),this.ejt=i[4],this.njt=i[5],this.IRt=this.fLt.EJ(),this.rjt=Qb.Wn(Qb.Event.Mf),this.r7=null;const[n,r]=t.NV().YQ();if(this.hjt=Qb.Wn(Qb.ojt,n,r),this.ajt=!0,this.ljt=null,this.ujt=null,this.cjt=-1,this.fjt=null,this.djt=null,this.pjt=null,this.mjt=null,this.gjt=null,this.yjt=!1,this.wjt=null,this.Mjt=i[8].map(t=>Qb.Sjt.XC(this,t)),this.Tjt=[],this.vjt=new Map,this.xjt=new Map,this.bjt=new Set,this.Cjt=new Map,this.Ijt=Qb.Wn(Qb.JTt,this),this.Gjt=null,this._jt=0,this.Ejt=!1,this.wjt=null,this.zkt=null,this.Ajt=null,this.Djt=null,this.Njt=null,this.Ojt=0,this.cDt=new Map,this.B6=[],this.Pjt=new Map,this.Rjt=!0,this.fLt.RJ()&&(this.r7=Qb.Wn(Qb.h7,this,i[12])),i[6]&&(this.zkt=Qb.Wn(Qb.tkt),this.zkt.fkt(i[6])),i[7]){this.Ajt=i[7].map(t=>Qb.Wn(Qb.xkt,t)),this.Djt=new Map,this.Njt=new Map;for(const t of this.Ajt)this.Djt.set(t.Ac().toLowerCase(),t),this.Njt.set(t.s9(),t)}this.Kkt?(this.ljt=[],this.ujt=new Set,this.cjt=this.jc.Ljt()):(this.fjt=[],this.djt=new Set,this.pjt=[],this.mjt=[],this.gjt=[]);const h=this.fLt.DDt();if(h<2&&(this.wLt=Qb.Wn(e.Fjt,this,i[15]),!(this.wLt instanceof Qb.cLt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.kjt=null,this.jjt=null,this.M7=Qb.Wn(Qb.Event.Mf),Qb.xJ.tLt(this,h),h>=2?(o=e.Fjt,o||(o=globalThis.f2)):o=this.wLt.qRt(),o&&!this.Kkt){if(this.kjt=new o(h<2?this:null),h<2&&!(this.kjt instanceof qb))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.kjt instanceof globalThis.f2))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.Kkt?Xb:qb;this.kjt=new t}if(Qb.xJ.sLt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.wLt.dLt(s,i,e)}}this.jc.zjt()&&!this.Kkt&&!this.tjt&&this.IRt||this.HRt(),this.fLt.GJ()&&(this.fLt.ZRt(this),this.Bjt(i)),this.Ujt=null}static XC(t,s,i){return Qb.Wn(Qb.Kwt,t,s,i)}Yn(){if(this.rjt.Yn(),this.rjt=null,this.zkt&&(this.zkt.Yn(),this.zkt=null),this.Ajt){for(const t of this.Ajt)t.Yn();Qb.Sh(this.Ajt),this.Djt.clear(),this.Njt.clear()}this.Ujt=null,this.Ijt.Yn(),this.Ijt=null,this.cDt.clear(),this.wjt=null,this.jc=null}$jt(t){for(let s=1,i=t.length;s<i;++s){const i=this.jc.C7(t[s]);this.ljt.push(i),this.ujt.add(i),i.fjt.push(this),i.djt.add(this)}}Vjt(t){this.yjt=!0,this.wjt=t}PX(){return this.yjt}Iit(){return this.wjt}Wjt(){let t=0;if(!this.Kkt)for(const s of this.fjt)for(const i of s.Yjt()){const s=i.Ac().toLowerCase();this.vjt.set(s,i),this.xjt.set(s,t),this.Tjt.push(i),++t}for(const s of this.Yjt()){const i=s.Ac().toLowerCase();this.vjt.set(i,s),this.xjt.set(i,t),this.Tjt.push(s),++t}for(const t of this.Tjt)this.bjt.add(t.x0().constructor);if(!this.Kkt&&this.fjt.length){const t=this.jc.Qjt();Qb.xh(this.pjt,t,0),Qb.xh(this.mjt,t,0),Qb.xh(this.gjt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.fjt){const r=t.dAt();this.pjt[r]=i,i+=t.Jjt(),this.mjt[r]=e,e+=t.Hjt(),this.gjt[r]=n,n+=t.qjt();const h=t.BH();if(h&&this.r7)for(const t of h.UH())s.push(t.Xjt(this.r7))}this.r7&&this.r7.Zjt(s)}}Bjt(t){const s=Qb.te(t[17])?t[17]:this.jc.Kjt(),i=Qb.Wn(Qb.Instance,{runtime:this.jc,objectType:this,uid:s});i.tzt(t[16],[]),this.jc.szt(s,i),this.B6.push(i)}INt(){return this.wLt}izt(){return this.tjt}Mf(){return this.rjt}HRt(){this.Kkt||(this.wLt?this.wLt.HRt():this.kjt.d2())}ezt(){return this.Ojt>0}async Eit(t){this.Kkt||(this.Ojt++,1===this.Ojt&&(this.wLt?await this.wLt.Eit(t):await this.kjt.w2(this.jc._Y().GY())))}Rit(){if(!this.Kkt){if(this.Ojt--,this.Ojt<0)throw new Error("released textures too many times");0===this.Ojt&&(this.wLt?this.wLt.Rit():this.kjt.M2(this.jc._Y().GY()))}}Nit(){if(this.Kkt)throw new Error("not applicable to family");this.wLt?this.wLt.Nit():this.kjt.S2()}async eet(t){this.Kkt||(this.wLt?await this.wLt.eet(t):await this.kjt.T2(this.jc._Y().GY()))}yQ(){return this.jc}KJ(){return this.fLt}nzt(){return this.Xkt}Ac(){return this.Hn}Cbt(){return this.LEt}CV(){return this.$w}s9(){return this.v8}pH(){return this.Kkt}g8(){return this.Zkt}EJ(){return this.IRt}dAt(){return this.cjt}Yjt(){return this.Mjt}Hjt(){return this.ejt}rzt(t){return t&&this.bjt.has(t)}Jjt(){return this.sjt.length}hzt(){return this.sjt.map(t=>t.o8)}ozt(t){return this.sjt.findIndex(s=>s.o8===t)}mut(t){return this.sjt.findIndex(s=>s.name===t)}azt(){return this.sjt.map(t=>t.name)}lzt(){return this.sjt.map(t=>t.ijt)}yut(t){if((t=Math.floor(t))<0||t>=this.sjt.length)throw new RangeError("invalid instance variable index");return this.sjt[t].type}gut(t){if((t=Math.floor(t))<0||t>=this.sjt.length)throw new RangeError("invalid instance variable index");return this.sjt[t].name}qjt(){return this.njt}uzt(){return this.Tjt}Kft(t){return this.vjt.get(t.toLowerCase())||null}Mut(t){const s=this.xjt.get(t.toLowerCase());return void 0===s?-1:s}BH(){return this.r7}RJ(){return this.fLt.RJ()}czt(){return this.r7&&this.r7.fzt()}fCt(){return this.Ijt}cH(){return this.Ijt.cH()}s1(){return this.zkt}_7(t){this.Gjt=t}G7(){return this.Gjt}E7(t){this._jt=t}dzt(){return this._jt}pzt(){return this.Ajt}mzt(){return this.Ajt.length}DH(){return this.fjt}NNt(t){return this.djt.has(t)}FH(){return this.ljt}jH(t){return this.ujt.has(t)}wAt(t){return this.mjt[t]}fAt(t){return this.pjt[t]}xEt(t){this.Cjt.set(t.GEt().toLowerCase(),t)}yH(t){return!!this.SH(t)}SH(t){const s=this.Cjt.get(t.toLowerCase());return s&&s.Gu()?s:null}gzt(){return this.Ajt}yzt(t){if(!this.Ajt)throw new Error("no animations");return this.Djt.get(t.toLowerCase())||null}wzt(t){if(!this.Ajt)throw new Error("no animations");return this.Njt.get(t)||null}Mzt(t){if(this.yzt(t))throw new Error(`animation name '${t}' already exists`);const s=Qb.xkt.Akt(this.yQ(),t);return this.Ajt.push(s),this.Djt.set(s.Ac().toLowerCase(),s),this.Njt.set(s.s9(),s),s}Szt(t){const s=this.yzt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.Ajt.length)throw new Error("cannot remove last animation");const i=this.Ajt.indexOf(s);this.Ajt.splice(i,1),this.Djt.delete(s.Ac().toLowerCase()),this.Njt.delete(s.s9()),s.Yn()}Tzt(){if(!this.Ajt)throw new Error("no animations");return this.Ajt[0]}vzt(){return this.Tzt().Pkt(0)}xzt(){if(this.Ajt){const t=this.vzt().s1();return[t.xy(),t.Cy()]}return this.zkt?[this.zkt.xy(),this.zkt.Cy()]:[100,100]}qJ(){if(!this.fLt.GJ())throw new Error("not a single-global plugin");return this.B6[0]}uH(){return this.B6}*sH(){yield*this.B6}*lH(){yield*this.B6,yield*this.jc.LOt(this)}bH(){return this.B6.length}R7(t){this.B6.push(t)}bzt(){this.Rjt=!0}uet(){if(!this.Rjt||this.Kkt)return;const t=this.B6;let s=0;for(let i=t.length;s<i;++s)t[s].Czt(s);const i=this.jc.Izt();for(const t of i)t.gH()===this&&t.Czt(s++);this.Rjt=!1}Gzt(t){const s=this.B6;if(t<s.length)return s[t];t-=s.length;const i=this.jc.Izt();for(const s of i)if(s.gH()===this){if(0===t)return s;--t}return null}MOt(t){if(t&&t.PX()&&t.gH()!==this)for(const s of t.RX())if(s.gH()===this)return s;const s=this.cH().uH();return s.length?s[0]:null}aH(t){const s=this.cH().uH();return s.length>0?s[t.kX()%s.length]:null}*UOt(t,s){const i=this.cH().uH(),e=i.length,n=s.cH(),r=s.cH().uH(),h=r.length;let o=t.kX();!s.pH()&&n.ovt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}$Dt(t){this.wLt?.$Dt(t)}Q_t(){if(!this.yjt||this.Kkt)return;this.uet();const t=this.cH(),s=t.mvt(),i=t.ovt(),e=this.jc.mbt(),n=e&&e.fW()&&e.fW().bvt();for(const e of this.wjt.kH()){if(e===this)continue;e.uet();const r=e.cH();if(r.pvt(i),!i){const i=r.mvt();Qb.Sh(i);for(const t of s)i.push(e.Gzt(t.kX()));if(n){const s=t.gvt(),i=r.gvt();Qb.Sh(i);for(const t of s)i.push(e.Gzt(t.kX()))}}}}JDt(t,s){for(const i of this.Iit().kH()){const e=i.cH();t?Qb.Mh(e.gvt(),s):Qb.Mh(e.mvt(),s)}}_zt(){return this.hjt}Ezt(t){this.ajt=!!t}Azt(){if(this.ajt&&this.IRt){for(const t of this.B6)t.FY().Dzt();for(const t of this.jc.Izt())t.gH()===this&&t.FY().Dzt();this.ajt=!1}}Nzt(t,s,i){if(s){const i=this.Pjt.get(s);i&&(i.delete(t),0===i.size&&this.Pjt.delete(s))}if(i){let s=this.Pjt.get(i);s||(s=new Set,this.Pjt.set(i,s)),s.add(t)}}*Ozt(){if(this.pH()){const t=new Set;for(const s of this.ljt)for(const i of s.Ozt())t.add(i);yield*t.values()}else for(const t of this.Pjt.keys())t.Qn()||(yield t)}FDt(){return this.cDt||(this.cDt=new Map),this.cDt}Pzt(){return this.rzt(Qb.Dyt.YFt)}Rzt(){return this.rzt(Qb.Dyt.QFt)}Lzt(){return this.rzt(Qb.Dyt.Fzt)}O7(){return this.rzt(Qb.Dyt.kzt)}Mst(){const t={instances:this.B6.map(t=>t.Sx())};return this.cDt&&this.cDt.size&&(t.ex=Qb.Mo(this.cDt)),t}Sst(t,s){this.cDt&&(this.cDt.clear(),this.cDt=null);const i=t.ex;i&&(this.cDt=Qb.So(i));const e=this.B6,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].Tx(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.jc.QY(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.EJ()&&(e=this.jc.dY().git(i.w.l),!e))continue;const r=this.jc.P7(this.Gjt||this,e,!1,0,0,!0);r.Tx(i),s&&s.add(r)}this.Ujt=n,this.bzt()}jzt(){return this.Ujt}zzt(){this.Ujt=null}Bzt(){for(let t=0,s=this.B6;t<s;++t)this.B6[t].Bzt()}QJ(){return this.kjt}iW(){return this.M7}Uzt(){return this.jjt}CH(t){this.jjt=t}i6(t){const s=this.jc,i=s.gZ()&&!s.hW().JY();i&&Jb.Fet(),this.M7.dispatchEvent(t),i&&Jb.ket()}}}{const Kb=self.Gs;Kb.$zt=class extends Kb.$n{constructor(t,s){super(),this.jc=t,this.Vzt=s;for(const t of this.Vzt)t.Vjt(this)}Yn(){this.jc=null}yQ(){return this.jc}Cit(){return this.Vzt}kH(){return this.Vzt}fet(){return this.Vzt.some(t=>t.EJ())}}}{const tC=self.Gs,sC=self.yZ,iC=self.CX,eC=tC.xJ,nC=[],rC=new Set;let hC=0;const oC=new WeakMap,aC=1,lC=2,uC=4,cC=8,fC=16,dC=32,pC=32,mC=64;tC.Instance=class extends tC.$n{#s=null;constructor(t){if(tC.xJ!==eC)throw new Error("invalid addon manager");super(),this.jc=t.runtime,this.Wzt=t.objectType,this.Blt=null,this.Yzt=null,this.Qzt=null,this.Jzt=0,this.Hzt=t.uid,this.qzt=hC++,this.YR=0;const s=tC.Lh(t.tags);s.length>0&&this.HX(new Set(s)),this.Xzt=nC,this.Zzt=nC;const i=this.Wzt.uzt();i.length>0&&(this.Zzt=i.map((t,s)=>tC.Wn(tC.Kzt,{runtime:this.jc,b0:t,G0:this,index:s}))),this.tBt=this.Wzt.PX()?[]:null,this.sBt=-1,this.rjt=null;const e=this.KJ();if(e.Iv()&&(this.YR|=4),e.EJ())if(this.Blt=tC.Wn(tC.iBt,this,t.LZ),t.eBt)this.Blt.nBt(t.eBt);else{this.Blt.rBt();const[t,s]=this.Wzt.xzt();this.Blt.tD(t,s),this.gH().czt()&&this.Blt.RZ().hBt()}t.oBt?this.aBt(t.oBt):this.lBt()}Yn(){if(this.Qzt&&(this.Qzt.AX(),this.Qzt=null),this.Zzt.length>0){for(const t of this.Zzt)t.Yn();tC.Sh(this.Zzt)}this.Yzt&&(this.Yzt.Yn(),this.Yzt=null);const t=oC.get(this);t&&(t.clear(),oC.delete(this)),this.tBt&&tC.Sh(this.tBt),this.rjt&&(this.rjt.Yn(),this.rjt=null),this.#s&&(this.#s.uBt.clear(),this.#s.cBt.clear()),this.#s=null,this.jc=null,this.Wzt=null,this.Xzt.length>0&&tC.Sh(this.Xzt),this.Blt&&(this.Blt.Yn(),this.Blt=null)}aBt(t){t.length>0&&(this.Xzt=[],tC.Ch(this.Xzt,t))}lBt(){const t=this.Wzt.Jjt();if(0===t)return;this.Xzt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.Xzt.push(s[this.Wzt.yut(i)])}tzt(t,s){if(this.Yzt)throw new Error("already got sdk instance");for(let t=0,i=this.Zzt.length;t<i;++t)this.Zzt[t].tzt(s?s[t]:null);if(this.KJ().DDt()<2){if(this.Yzt=tC.Wn(this.Wzt.nzt(),this,t),!(this.Yzt instanceof tC.gLt))throw new Error("sdk type must derive from SDKInstanceBase");!this.KJ().EJ()&&this.Wzt.Uzt()&&this.OY()}else{const s=this.KJ().qRt();this.fBt(s.Instance,t)}}g0(){return this.Yzt??this.Qzt}FY(){return this.Blt}yQ(){return this.jc}zW(){return this.sBt}BX(){const t=this.sBt;return-1===t?this.yQ().zW():t}BW(t){((t=+t)<0||!isFinite(t))&&(t=0),this.sBt=t,this.gH().czt()&&this.jc.dBt(this,!0)}$X(){this.sBt=-1,this.gH().czt()&&this.jc.dBt(this,!1)}ost(){return this.jc.pBt(this)}Mf(){return this.rjt||(this.rjt=tC.Wn(tC.Event.Mf)),this.rjt}eb(t){this.Yzt?this.Yzt.eb(t):this.Qzt.G2(this.jc._Y().GY())}HRt(t){this.Yzt.HRt(t)}mBt(){this.YR|=2}gBt(){return!!(2&this.YR)}yBt(){this.YR|=1}kY(){return!!(1&this.YR)}Iv(){return!!(4&this.YR)||(this.Yzt?this.Yzt.Iv():this.Qzt.av())}wBt(){this.YR|=32}Ztt(){return!!(32&this.YR)}MBt(){return!!(8&this.YR)}SBt(t){t?this.YR|=8:this.YR&=-9}TBt(){return!!(16&this.YR)}vBt(t){t?this.YR|=16:this.YR&=-17}xBt(){return!!(32&this.YR)}bBt(t){t?this.YR|=32:this.YR&=-33}CBt(){return!!(64&this.YR)}IBt(t){t?this.YR|=64:this.YR&=-65}GBt(t,s){t<<=16,s?this.YR|=t:this.YR&=~t}_Bt(t){return!!(this.YR&t<<16)}ZLt(){return this.Yzt?this.Yzt.ZLt():null}KLt(){return this.Yzt?this.Yzt.KLt():null}tFt(){return this.Yzt?this.Yzt.tFt():null}sFt(){return this.Yzt?this.Yzt.sFt():null}eFt(){return!!this.Yzt&&this.Yzt.eFt()}UNt(t){return this.Yzt?this.Yzt.UNt(t):[this.Qzt.x,this.Qzt.y,this.Qzt.HZ]}gH(){return this.Wzt}qtt(){return this.Yzt?this.Yzt.qtt():this.Qzt._2()}FOt(t){return t.pH()?t.jH(this.gH()):this.gH()===t}EBt(t,s,i){const e=(s,i)=>{const e=i||s.gH(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.PX())for(const t of this.RX())e(t);if(i)for(const t of this.GK())e(t)}ABt(){if(!this.KJ().jJ())throw new Error("object does not support scene graph")}NK(){return null!==this.MK()}MK(){const t=this.FY();if(!t)return null;const s=t.MK();return s?s.J1():null}TK(){const t=this.FY();if(!t)return null;const s=t.TK();return s?s.J1():null}*vK(){const t=this.FY();if(t)for(const s of t.vK())yield s.J1()}DBt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}xst(){const t=this.FY();return!!t&&t.xst()}NBt(t){const s=this.FY();if(!s)return[];const i=t.Ac();return s.vet().map(t=>t.J1()).filter(t=>t.gH().Ac()===i)}vet(){const t=this.FY();return t?t.vet().map(t=>t.J1()):[]}*children(){const t=this.FY();if(t)for(const s of t.children())yield s.J1()}*GK(){const t=this.FY();if(t)for(const s of t.GK())yield s.J1()}bK(){const t=this.FY();return t?t.bK():0}OBt(){return[...this.vK()].length}BOt(){const t=this.FY();return t?t.BOt():0}IK(t){const s=this.FY();if(!s)return null;const i=s.IK(t);return i?i.J1():null}PBt(){const t=this.FY();if(!t)return NaN;const s=t.MK();return s?s.RBt(t):NaN}LBt(t){for(const s of this.FY().vet())if(s.J1().LX()===t)return!0;return!1}EK(t,s){this.ABt(),t.ABt(),this.FY().EK(t.FY(),s||{})}AK(t){const s=this.FY();s&&s.AK(t.FY())}ZK(){const t=this.FY();return!!t&&t.ZK()}Zit(){const t=this.FY();if(!t)return;const s=t.FBt();if(s)for(const t of s){const s=this.jc.NY(t[2]);if(s){const i=t[3];this.EK(s,{RK:!!(1&i),FK:!!(i>>1&1),jK:!!(i>>2&1),BK:!!(i>>3&1),$K:!!(i>>4&1),XK:!!(i>>5&1),WK:!!(i>>6&1),QK:!!(i>>7&1),HK:!!(i>>8&1)})}}}Kit(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.EK(i,{RK:!!(1&e),FK:!!(e>>1&1),jK:!!(e>>2&1),BK:!!(e>>3&1),$K:!!(e>>4&1),XK:!!(e>>5&1),WK:!!(e>>6&1),QK:!!(e>>7&1),HK:!!(e>>8&1)})}}zX(){const t=this.jc.kBt();return t?t.sMt(this):""}PX(){return null!==this.tBt}jBt(){tC.Sh(this.tBt)}let(t){this.tBt.push(t)}NX(){return this.tBt}zBt(t){return!!this.BBt(t)}BBt(t){const s=this.RX();if(null===s||0===s.length)return!1;for(const i of s)if(i.gH()===t)return i;return null}RX(){return this.tBt}KIt(){for(const t of this.RX())t.gH().cH().yvt(t)}VDt(){for(const t of this.RX())t.gH().cH().fvt(t)}WDt(t){for(const s of this.RX())s.gH().cH().mvt()[t]=s}QDt(){for(const t of this.RX())t.gH().cH().dvt(t)}YDt(t){for(const s of this.RX())s.gH().cH().gvt()[t]=s}KJ(){return this.Wzt.KJ()}Czt(t){this.Jzt=t}kX(){return this.Wzt.uet(),this.Jzt}LX(){return this.Hzt}UBt(t){this.Hzt=t}$Bt(){return this.qzt}HX(t){if(this.#s&&(this.#s.uBt.clear(),this.#s.cBt.clear()),0===t.size)this.#s=null;else{this.#s||(this.#s={uBt:new Set,cBt:new Set});for(const s of t){const t=s.toLowerCase();this.#s.cBt.has(t)||(this.#s.uBt.add(s),this.#s.cBt.add(t))}}}XX(){return this.#s?this.#s.uBt:rC}QX(){return this.#s?this.#s.cBt:rC}VBt(){return this.#s?this.#s.cBt:null}WX(t){return!!this.#s&&this.#s.cBt.has(t.toLowerCase())}Vut(){return Array.from(this.XX()).join(" ")}pPt(t){t=Math.floor(t);for(const s of this.XX()){if(0===t)return s;--t}return""}Zft(){return this.Zzt}WBt(t){if(!t)return null;for(const s of this.Zzt)if(s.x0()instanceof t)return s;return null}YBt(t){if(!t)return null;const s=this.WBt(t);return s?s.g0():null}Xft(t){const s=this.Zzt;for(let i=0,e=s.length;i<e;++i)if(s[i].I0().s9()===t)return i;return-1}QBt(){return this.Xzt}azt(){return this.Wzt.azt()}JBt(){return this.Xzt.length}zpt(t){t|=0;const s=this.Xzt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}uAt(t){return this.Xzt[t]}HBt(t){const s=this.Xzt[t];return 0===this.Wzt.yut(t)?!!s:s}Bpt(t,s){t|=0;const i=this.Xzt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.Wzt.yut(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Dmt(t,s){if(0===s)return;t|=0;const i=this.Xzt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}FDt(){let t=oC.get(this);return t||(t=new Map,oC.set(this,t),t)}qBt(t){const s=this.gH();if(s.iW().bf(t))return!0;for(const i of s.DH())if(i.iW().bf(t))return!0;return!!this.jc.iW().bf(t)}EH(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.FY();if(i&&i.xst())for(const t of this.GK())if(s.add(t),t.PX())for(const i of t.RX())s.add(i);if(this.PX())for(const t of this.RX())t.EH(s);if(!t){for(const t of s.values())t.tet();this.iet()}}XBt(){this.Wzt.Uzt()&&this.OY();for(const t of this.Zzt)t.FFt()}ZBt(){this.XBt()}tet(){if(this.XBt(),this.qBt("instancecreate")){const t=this.gH(),s=new tC.Event("instancecreate");s.G0=this.OY(),t.i6(s);for(const i of t.DH())i.i6(s);this.jc.i6(s)}this.jc.aZ(this.KJ().jCt().aQ.yPt,this,null)}iet(){if(this.KJ().jJ()){if(this.i6(new tC.Event("hierarchyready")),this.qBt("hierarchyready")){const t=this.gH(),s=new tC.Event("hierarchyready");s.G0=this.OY(),t.i6(s);for(const i of t.DH())i.i6(s);this.jc.i6(s)}this.jc.aZ(this.KJ().jCt().aQ.POt,this,null)}}KBt(){this.jc.aZ(this.KJ().jCt().aQ.wPt,this,null)}tUt(t){if(this.Qzt){const s=new tC.Event("destroy");s.sUt=t,this.i6(s)}if(!this.qBt("instancedestroy"))return;const s=this.gH(),i=new tC.Event("instancedestroy");i.G0=this.OY(),i.sUt=t,s.i6(i);for(const t of s.DH())t.i6(i);this.jc.i6(i)}iUt(){return this.Yzt?this.Yzt.jLt():this.Qzt.xZ()}Sx(t="full",s=null){const i={};"full"===t?i.uid=this.LX():i.c3=!0;const e=this.XX();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=oC.get(this);if(s&&s.size&&(i.ex=tC.Mo(s)),-1!==this.zW()&&(i.mts=this.zW()),this.Wzt.Jjt()>0){const t={},s=this.Wzt.hzt();for(let i=0,e=this.Xzt.length;i<e;++i)t[s[i].toString()]=this.Xzt[i];i.ivs=t}if(this.Zzt.length){const s={};for(const i of this.Zzt){const e=i.Sx(t);e&&(s[i.I0().s9().toString()]=e)}i.behs=s}}this.Blt&&(i.w=this.Blt.Mst(t,s));const n=this.Yzt?this.Yzt.Sx():this.Qzt.bZ();return n&&(i.data=n),i}Cnt(t="full",s=null){this.Blt&&this.Blt.Cnt(t)}Gnt(t,s="full",i=null){this.Blt&&this.Blt.Gnt(t,s,i)}eUt(t,s="full",i=null){this.Blt&&this.Blt.eUt(t,s,i)}Bzt(){this.KJ().EJ()&&this.Blt.Bzt()}Tx(t,s="full",i=null){if("full"===s)this.Hzt=t.uid;else if(!t.c3)return;if(this.HX(new Set(t.tags??[])),"visual-state"!==s){let s=oC.get(this);s&&(s.clear(),oC.delete(this));const i=t.ex;i&&(s=tC.So(i),oC.set(this,s)),this.sBt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.Wzt.ozt(i);if(e<0||e>=this.Xzt.length)continue;let n=s;null===n&&(n=NaN),this.Xzt[e]=n}}if(this.KJ().EJ()){const e=t.w;if(e){const t=e.l;if(this.Blt.jY().s9()!==t){const i=this.Blt.jY(),e=i.yY().git(t);e?(this.Blt.$Y(e),i.k7(this,!0),e.R7(this,!0),e.VY(this),this.Blt.FZ()):"full"===s&&this.jc.QY(this)}this.Blt.Sst(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Xft(i);n<0||n>=this.Zzt.length||this.Zzt[n].Tx(e,s)}}const e=t.data;e&&(this.Yzt?this.Yzt.Tx(e,s):this.Qzt.CZ(e))}nUt(t){if(this.Blt.jY().s9()===t)return;const s=this.Blt.jY(),i=s.yY().git(t);i&&(this.Blt.$Y(i),s.k7(this,!0),i.R7(this,!0),i.VY(this),this.Blt.FZ())}OY(){return this.Qzt||this.fBt()}$Lt(){return!!this.Qzt}fBt(t,s){const i=this.Blt?t?self.v2:self.c0:t?self.tZ:self.CX,e=t||this.Yzt.qRt(),n=this.Wzt.Uzt(),r=n||e||i,h=this.KJ().DDt();if(tC.xJ.tLt(this,h),tC.xJ.HFt(s),this.Qzt=new r,tC.xJ.qFt(),tC.xJ.sLt(h),e&&!(this.Qzt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.Qzt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.Qzt}IX(t){if(0===this.Xzt.length)return;const s={},i=this.Wzt.lzt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:tC.Instance.prototype.HBt.bind(this,t),set:tC.Instance.prototype.Bpt.bind(this,t)};const e=Object.create(Object.prototype,s);t.rUt={value:e,writable:!1}}GX(t){const s=this.Zzt;if(0===s.length)return;const i={};for(const t of s)i[t.I0().Cbt()]={value:t.TLt(),writable:!1};const e=Object.create(Object.prototype,i);t.jIt={value:e,writable:!1}}i6(t){if(!this.$Lt())return;const s=this.OY();t.G0=s;const i=this.jc,e=i.gZ()&&!i.hW().JY();e&&sC.Fet(),s.dispatchEvent(t),e&&sC.ket()}}}{const gC=self.Gs,yC=new Map;gC.bet=class extends gC.$n{constructor(t){super(),this._x=t,this.rGt=null,this.hUt=[],this.oUt=t.xy(),this.aUt=t.Cy(),this.lUt=1,this.uUt=1,this.cUt=0,this.fUt=1,this.dUt=t.PO(),this.pUt=null,this.mUt=null,this.gUt=NaN,this.yUt=!1,this.Ist=NaN,this.Gst=NaN,this.wUt=s=>{if(s.G0!==this.rGt.J1())return;t.yQ().Mf().removeEventListener("instancecreate",this.wUt);const i=this.rGt.J1().g0();this.yUt=!!i.Nut(),this.Ist=this.yUt?i.Dut():NaN,this.Gst=this.yUt?i.Put():NaN}}Yn(){this.rGt=null,this.pUt=null,this.mUt=null,this.gUt=NaN,this.yUt=!1,this.Ist=NaN,this.Gst=NaN,gC.Sh(this.hUt)}MUt(t){if(this.fUt=this._x.PO(),this.dUt=this.fUt,this.rGt=t,this.cUt=t?t.JH():0,this.rGt){const t=this._x.yQ();if(this.rGt.J1().KJ().DDt()<2){const s=this.rGt.J1().g0();s?(this.yUt=!!s.Nut(),this.Ist=this.yUt?s.Dut():NaN,this.Gst=this.yUt?s.Put():NaN):this.rGt.J1().kY()||t.Mf().addEventListener("instancecreate",this.wUt)}else this.yUt=!1,this.Ist=NaN,this.Gst=NaN}else this.yUt=!1,this.Ist=NaN,this.Gst=NaN}MK(){return this.rGt}xst(){return this.hUt.length>0}vet(){return this.hUt}SUt(){this.xst()&&1!==this.hUt.length&&(this.mUt?this.hUt.sort((t,s)=>{const i=this.mUt.get(t.J1()),e=this.mUt.get(s.J1());return gC.te(i)&&gC.te(e)?i-e:0}):this.hUt.sort((t,s)=>{const i=t.Mdt().TUt(),e=s.Mdt().TUt();return gC.te(i)&&gC.te(e)?i-e:0}))}TUt(){return this.gUt}vUt(){return this.lUt}xUt(t){this.lUt=t}bUt(){return this.uUt}CUt(t){this.uUt=t}hmt(){return this.dUt}uOt(){return this.fUt}IUt(t){this.fUt=t}wdt(){return 0===this.oUt?Number.EPSILON:this.oUt}xdt(){return 0===this.aUt?Number.EPSILON:this.aUt}GUt(){if(this._x.zK()){const t=this.rGt;let s=t.xy(),i=t.Mdt().wdt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.yUt?1+s/this.Ist:s/i}return 1}_Ut(){if(this._x.UK()){const t=this.rGt;let s=t.Cy(),i=t.Mdt().xdt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.yUt?1+s/this.Gst:s/i}return 1}EUt(){return 0}AUt(){return{sw:this.oUt,sh:this.aUt,sx:this.lUt,sy:this.uUt,psa:this.cUt,oo:this.fUt,so:this.dUt,pi:this._x.J1().PBt()}}Mst(t,s=null){const i=this.AUt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.DUt(t),c:this.NUt(t)})}OUt(t){let s="";return t.LK()&&(s+="x"),t.kK()&&(s+="y"),t.zK()&&(s+="w"),t.UK()&&(s+="h"),t.VK()&&(s+="a"),t.YK()&&(s+="z"),t.ZK()&&(s+="d"),t.JK()&&(s+="o"),t.qK()&&(s+="v"),s}DUt(t){return this.rGt?!this.rGt.J1()||this.rGt.J1().kY()?null:this.PUt(this.rGt,this._x,t):null}NUt(t){return this.hUt.map(s=>this.PUt(s,s,t)).filter(t=>t)}PUt(t,s,i){const e=t.J1();if(e&&e.kY())return null;const n={};return n.uid=e.LX(),n.f=this.OUt(s),n.offsets=s.RUt(),n.data=gC.bet.LUt(e),n.oci=e.gH().CV(),"state"===i?(n.inst=e.Sx("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.gH().uH().indexOf(e),n.inst=null),n}Sst(t){this.oUt=t.sw,this.aUt=t.sh,this.lUt=t.sx,this.uUt=t.sy,this.cUt=t.psa,this.fUt=t.oo,this.dUt=t.so,this.gUt=gC.te(t.pi)?t.pi:NaN}FUt(t,s,i,e){if(!t&&!s)if(e?.GPt){if(this.pUt)for(const t of this.pUt)t.kY()||t.NK()||t.yQ().QY(t)}else if(this.pUt)for(const t of this.pUt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.LX()))continue;t.kY()||t.NK()||t.yQ().QY(t)}this.pUt=t,this.mUt=s}kUt(t){const s=this._x.yQ();return yC.has(t)?yC.get(t):s.NY(t)}Gnt(t,s){const i=this._x,e=i.yQ(),n=s?.jUt??new Set;if(t.p&&!this.rGt){const r=t.p.uid,h=this.kUt(r);if(h){const r=h.FY();h.DBt(i.J1())?this.rGt=r:(h.LBt(i.J1().LX())?(e.QY(i.J1()),e.zUt(i.J1().LX()),yC.delete(i.J1().LX())):h.EK(i.J1(),this.BUt(t.p.f)),n.has(i)||(i.UUt(t.p.offsets),this.$Ut(h,t.p,s),this.VUt(h,h.LX(),i.yQ(),s)),n.add(i),h.FY().Mdt().SUt())}else if(gC.te(t.p.oci)){const n=e.IH(e.C7(t.p.oci),i.jY(),0,0,!0);if(n){const r=this.WUt(t.p,e);r&&n.Tx(r);const h=n.FY(),o=!!s?.GPt;h.jY().GH(n,!1,o),n.EK(i.J1(),this.BUt(t.p.f)),yC.set(n.LX(),n),this.VUt(n,n.LX(),e,s),n.FY().Mdt().SUt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this.kUt(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.kUt(a);if(l){if(this.pUt){if(this.pUt.includes(l)){const e=l;if(e.gH()!==l.gH()){h++;continue}if(e.kY()){h++;continue}const o=t.c[h];if(!s?.GPt&&this.YUt(e,r,i)){if(i.J1().IK(h)){const r=e.gH().CV(),a=o.oci,l=i.J1().IK(h).gH().CV();if(r!==a||a!==l){this.QUt(t.c,i,n,s);break}this.JUt(h,o,i,n,s)}else this.JUt(h,o,i,n,s);h++;continue}if(e.NK()&&e.MK()!==i.J1()){const t=this.HUt(o,s);this.qUt(t,o,n,s),h++;continue}this.qUt(e.FY(),o,n,s,!0),h++;continue}if(this.pUt[h]){const e=this.pUt[h];if(e.gH()!==l.gH()){h++;continue}if(e.kY()){h++;continue}const o=t.c[h];if(!s?.GPt&&this.YUt(e,r,i)){if(i.J1().IK(h)){const r=e.gH().CV(),a=o.oci,l=i.J1().IK(h).gH().CV();if(r!==a||a!==l){this.QUt(t.c,i,n,s);break}this.JUt(h,o,i,n,s)}else this.JUt(h,o,i,n,s);h++;continue}if(e.NK()&&e.MK()!==i.J1()){const t=this.HUt(o,s);this.qUt(t,o,n,s),h++;continue}this.qUt(e.FY(),o,n,s,!0),h++;continue}}const e=l.gH();if(this.XUt(r,e)===i.J1().NBt(e).length){for(const t of i.J1().vet()){if(t.gH()!==e)continue;const i=t.FY();if(i&&!n.has(i)){n.add(i),i.UUt(o.offsets),this.$Ut(t,o,s);break}}h++;continue}if(l.NK()&&l.MK()!==i.J1()){const t=this.HUt(o,s);this.qUt(t,o,n,s),h++;continue}this.qUt(l.FY(),o,n,s)}else if(this.pUt&&this.pUt[h]){const a=this.pUt[h],l=e.C7(this.ZUt(o));if(a.gH()!==l){h++;continue}if(a.kY()){h++;continue}const u=t.c[h];if(!s?.GPt&&this.YUt(a,r,i)){if(i.J1().IK(h)){const e=a.gH().CV(),r=u.oci,o=i.J1().IK(h).gH().CV();if(e!==r||r!==o){this.QUt(t.c,i,n,s);break}this.JUt(h,u,i,n,s)}else this.JUt(h,u,i,n,s);h++;continue}if(a.NK()&&a.MK()!==i.J1()){const t=this.HUt(u,s);this.qUt(t,u,n,s),h++;continue}this.qUt(a.FY(),u,n,s)}else{const t=this.HUt(o,s);this.qUt(t,o,n,s)}h++}}QUt(t,s,i,e){const n=s.yQ();for(const t of s.J1().children())t&&!t.kY()&&(n.QY(t),n.zUt(t.LX()),yC.delete(t.LX()));this.pUt&&(this.pUt=[]),this.mUt&&(this.mUt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.HUt(s,e);this.qUt(t,s,i,e),this.pUt.push(t.J1()),this.mUt.set(t.J1(),this.pUt.length-1)}s.Mdt().SUt()}YUt(t,s,i){const e=t.gH();return this.XUt(s,e)===i.J1().NBt(e).length}JUt(t,s,i,e,n){const r=i.J1().IK(t);if(!r)return;const h=r.FY();h&&(e.has(h)||(h.UUt(s.offsets),this.$Ut(r,s,n)),e.add(h))}BUt(t){const s={};return s.RK=t.includes("x"),s.FK=t.includes("y"),s.jK=t.includes("w"),s.BK=t.includes("h"),s.$K=t.includes("a"),s.WK=t.includes("z"),s.XK=t.includes("d"),s.QK=t.includes("o"),s.HK=t.includes("v"),s}ZUt(t){return gC.te(t.oci)?t.oci:t[1]}HUt(t,s){if(!gC.te(t.oci))return;const i=this._x,e=i.yQ();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.P7(t.data,i.jY(),!1,0,0,!1,r):e.IH(e.C7(t.oci),i.jY(),0,0,r),!n)return;const h=this.WUt(t,e);h&&n.Tx(h);const o=n.FY(),a=!!s?.GPt;return o.jY().GH(n,!0,a),o}VUt(t,s,i,e){if(this.kUt(s)&&!e?.GPt){const e=this.kUt(s);e!==t&&i.QY(e)}i.zUt(s),i.szt(s,t)}qUt(t,s,i,e,n=!0){const r=this._x,h=r.EK(t,this.BUt(s.f));h&&n?(i.has(t)||(t.UUt(s.offsets),this.$Ut(t.J1(),s,e)),i.add(t)):h&&(yC.set(t.J1().LX(),t.J1()),this.VUt(t.J1(),s.uid,r.yQ(),e)),this.SUt()}$Ut(t,s,i){let e=this.WUt(s,this._x.yQ());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.yQ();if(yC.set(t.LX(),t),e=JSON.parse(JSON.stringify(e)),n&&t.LX()!==e.uid){for(const s of t.children())s&&!s.kY()&&(h.QY(s),h.zUt(s.LX()),yC.delete(s.LX()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.HUt(s,e);yC.set(n.J1().LX(),n.J1()),t.EK(n.J1(),this.BUt(s.f)),n.UUt(s.offsets),this.$Ut(n.J1(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.Tx(e),i?.GPt||(gC.te(o)&&r&&t.FY().V7(o),gC.te(a)&&t.nUt(a)),this.VUt(t,e.uid,h,i)}XUt(t,s){return t.filter(t=>t.gH().Ac()===s.Ac()).length}WUt(t,s){if(gC.te(t.instIndex)){const i=s.C7(t.oci).jzt();return i?i[t.instIndex]:null}return gC.le(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static LUt(t){let s=t.FY().jY().A7(t.LX());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.vet()]){const t=s.FY();i.push([t.yY().s9(),t.jY().CV(),s.LX(),gC.bet.xet(t),s.gH().PX()?1:0,t.zY(),gC.bet.LUt(s)])}return gC.be(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=gC.bet.KUt(),s[0][14][1]=i,s[0][14][2]=t.FY().zY()),s}static xet(t){let s=0;return s|=Number(t.qK())<<8,s|=Number(t.JK())<<7,s|=Number(t.YK())<<6,s|=Number(t.ZK())<<5,s|=Number(t.VK())<<4,s|=Number(t.UK())<<3,s|=Number(t.zK())<<2,s|=Number(t.kK())<<1,s|=0|Number(t.LK()),s}static KUt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static t$t(){yC.clear()}}}{const wC=self.Gs,MC=self.ls,SC=MC.ws,TC=MC.Ms,vC=wC.Wn(wC.Rect),xC=wC.Wn(wC.El),bC=wC.Wn(wC.Event,"bboxchange",!1),CC=wC.Wn(wC.bo,0,0,0,0),IC=wC.Wn(wC.lu),GC=wC.Wn(wC.bo,1,1,1,1),_C=wC.Wn(wC.Rect,0,0,-1,-1),EC=wC.Wn(wC.Rect,0,0,-1,-1),AC=new Set(["absolute","relative"]),DC=[];let NC=!0;const OC=1,PC=2,RC=4,LC=8,FC=16,kC=32,jC=64,zC=128,BC=256,UC=512,$C=1024,VC=2048,WC=4096,YC=8192,QC=16384,JC=32768,HC=1<<22,qC=1<<23,XC=12647936,ZC=65536,KC=1<<17,tI=1<<18,sI=1<<19,iI=1<<20,eI=1<<21,nI=1<<24,rI=26,hI=31<<26,oI=new WeakMap,aI=new WeakMap;wC.iBt=class extends wC.$n{constructor(t,s){super(),this.di=t,this.HTt=t.gH(),this.jc=t.yQ(),this.s$t=s,this.HTt.Nzt(this,null,s),this.i$t=-1,this.e$t=-1,this.YR=196635,this.HTt.KJ().OJ()&&(this.YR|=128),this.Aa=NaN,this.Da=NaN,this.jv=NaN,this.n$t=NaN,this.r$t=NaN,this.fC=NaN,this._o=NaN,this.h$t=NaN,this.o$t=NaN,this.a$t=NaN,this.l$t=NaN,this.u$t=wC.Wn(wC.Rect),this.c$t=wC.Wn(wC.El),this.f$t=EC,this.d$t=_C,this.p$t=null,this.m$t=null,this.g$t=null,this.kv=GC,this.y$t=GC,this.w$t=null,this.M$t=null,this.di.gH().czt()&&(this.M$t=wC.Wn(wC.S$t,this.di,this)),this.T$t=null,this.pUt=null,this.mUt=null,this.v$t=-1,this.x$t=null}yBt(){this.YR|=256}kY(){return!!(256&this.YR)}Yn(){if(this.HTt.Nzt(this,this.s$t,null),this.w$t&&(this.jc.Tv().BS(this.w$t),this.w$t=null),this.p$t=null,this.m$t&&(this.m$t.b$t.Yn(),this.m$t=null),this.g$t&&(this.g$t.clear(),this.g$t=null),this.i0(),this.M$t&&this.M$t.Yn(),this.NK()&&this.MK().AK(this),this.xst()){const t=[...this.vet()];for(const s of t)this.AK(s)}this.C$t(),this.I$t(),oI.delete(this),aI.delete(this),this.di=null,this.HTt=null,this.jc=null,this.s$t=null}nBt(t){if(NC=!1,this.kZ(t[0],t[1]),this.lx(t[2]),this.tD(t[3],t[4]),this.fC=0,this.OJ()?this.QH(t[6]):this._o=0,CC.Ma(t[7]),this.G$t(CC),this.$Z(t[8]),this.YZ(t[9]),this.$v(t[10]),this.M$t&&this.M$t._$t(t[12]),t[14]&&oI.set(this,{E$t:t[14][1],A$t:t[14][2]}),t[15]){const s=t[15];this.t0(s[0],s[1]);const i=this.o0(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.qx(e,t);r.sx(n[0]),r.hx(n[1]),r.lx(n[2]),r.mx(n[3]),r.yx(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.jc.kBt();e&&r&&r.tMt(this.J1(),i),n&&r&&r.tMt(this.J1(),s)}NC=!0,this.D$t()}rBt(){this.Aa=0,this.Da=0,this.jv=0,this.n$t=0,this.r$t=0,this.fC=0,this._o=0,this.h$t=0,this.o$t=1,this.a$t=0,this.l$t=0,this.D$t()}yQ(){return this.jc}gH(){return this.HTt}J1(){return this.di}N$t(){return this.VK()?this.O$t(this.MK().P$t()-this.T$t.EUt()):0}sx(t){if(t=+t,this.LK()){const s=this.T$t,i=t-this.tx(),e=-this.N$t();0===e?this.Aa+=i/s.GUt():(this.Aa+=Math.cos(e)*i/s.GUt(),this.kK()&&(this.Da+=Math.sin(e)*i/s._Ut()))}else this.Aa=t}Ypt(t,s=!1){t=+t,s?this.Aa+=t:this.LK()?this.sx(this.tx()+t):this.Aa+=t}tx(){if(this.LK()){let t=this.Aa;const s=this.T$t,i=this.MK(),e=this.N$t();return 0===e?t*=s.GUt():(t=t*s.GUt()*Math.cos(e),this.kK()&&(t-=this.Da*s._Ut()*Math.sin(e))),i.tx()+t}return this.Aa}hx(t){if(t=+t,this.kK()){const s=this.T$t,i=t-this.nx(),e=-this.N$t();0===e?this.Da+=i/s._Ut():(this.LK()&&(this.Aa-=Math.sin(e)*i/s.GUt()),this.Da+=Math.cos(e)*i/s._Ut())}else this.Da=t}Qpt(t,s=!1){t=+t,s?this.Da+=t:this.kK()?this.hx(this.nx()+t):this.Da+=t}nx(){if(this.kK()){let t=this.Da;const s=this.T$t,i=this.MK(),e=this.N$t();return 0===e?t*=s._Ut():(t=t*s._Ut()*Math.cos(e),this.LK()&&(t+=this.Aa*s.GUt()*Math.sin(e))),i.nx()+t}return this.Da}kZ(t,s){if(t=+t,s=+s,this.R$t()){const i=this.LK(),e=this.kK(),n=this.T$t,r=t-this.tx(),h=s-this.nx(),o=-this.N$t();if(0===o)i?this.Aa+=r/n.GUt():this.Aa=t,e?this.Da+=h/n._Ut():this.Da=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Aa+=e?(l*r-a*h)/n.GUt():l*r/n.GUt():this.Aa=t,e?this.Da+=i?(a*r+l*h)/n._Ut():l*h/n._Ut():this.Da=s}}else this.Aa=t,this.Da=s}L$t(){return[this.tx(),this.nx()]}zZ(t,s){t=+t,s=+s,this.R$t()?this.kZ(this.tx()+t,this.nx()+s):(this.Aa+=t,this.Da+=s)}zNt(t,s){return this.tx()===t&&this.nx()===s}lx(t){if(t=+t,this.YK()&&(t-=this.MK().ox()),this.jv===t)return;this.jv=t,this.F$t();const s=this.jY();0!==this.jv&&s.B7(),s.VY(this)}F$t(){if(this.D$t(),this.xst()){const t=this.vet();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.YK()&&i.F$t()}}}lmt(t){this.lx(this.ox()+t)}ox(){return this.YK()?this.MK().ox()+this.jv:this.jv}qZ(){return this.jY().ox()+this.ox()}Nut(){return this.J1().KJ().DDt()<2&&this.J1().g0().Nut()}hy(t){if(t=+t,this.zK()){const s=this.xy();0===s?this.n$t=Number.EPSILON:this.n$t*=t/s}else this.n$t=t;this.k$t()}ky(t,s){t=+t,s?this.n$t+=t:this.zK()?this.hy(this.xy()+t):this.n$t+=t,this.k$t()}xy(){if(this.zK()){const t=this.MK(),s=t.xy();return t.Mdt().wdt()===Number.EPSILON?(this.Mdt().wdt()+s)*this.n$t:s*this.n$t}return this.n$t}oy(t){if(t=+t,this.UK()){const s=this.Cy();0===s?this.r$t=Number.EPSILON:this.r$t*=t/s}else this.r$t=t;this.k$t()}Kpt(t,s){t=+t,s?this.r$t+=t:this.UK()?this.oy(this.Cy()+t):this.r$t+=t,this.k$t()}Cy(){if(this.UK()){const t=this.MK(),s=t.Cy();return t.Mdt().xdt()===Number.EPSILON?(this.Mdt().xdt()+s)*this.r$t:s*this.r$t}return this.r$t}tD(t,s){if(t=+t,s=+s,this.zK()){const s=this.xy();0===s?this.n$t=Number.EPSILON:this.n$t*=t/s}else this.n$t=t;if(this.UK()){const t=this.Cy();0===t?this.r$t=Number.EPSILON:this.r$t*=s/t}else this.r$t=s;this.k$t()}Pu(){return[this.xy(),this.Cy()]}Xtt(){return this.fC}j$t(t){if(t<0)throw new RangeError("invalid depth");this.fC=t}z$t(){if(this.NK()){const t=this.T$t;return Math.min(t.GUt(),t._Ut())}return 1}OJ(){return!!(128&this.YR)}QH(t){t=+t,this.OJ()&&(this.VK()&&(t-=this.MK().JH()),t=wC.Zn(t),this._o!==t&&(this._o=t,this.k$t()))}tmt(t){0!==(t=+t)&&this.OJ()&&(this._o=wC.Zn(this._o+t),this.k$t())}k$t(){if(this.YR|=262144,this.xst()){const t=this.vet();for(let s=0,i=t.length;s<i;s++)t[s].k$t()}}JH(){return this.VK()&&this.OJ()?this.O$t(wC.Zn(this.MK().P$t()+this._o)):this._o}P$t(){return this.VK()&&this.OJ()?wC.Zn(this.MK().P$t()+this._o):this._o}O$t(t){return this.zK()&&this.TK().xy()<0&&(t=wC.Zn(wC.pr(t,this.TK().JH()+Math.PI))),this.UK()&&this.TK().Cy()<0&&(t=wC.pr(t,this.TK().JH())),t}B$t(){const t=this.MK();return!!(this.zK()&&t.xy()<0)||!!(this.UK()&&t.Cy()<0)}U$t(){const t=this.MK();return!!(this.zK()&&t.xy()<0&&this.UK()&&t.Cy()<0)}$$t(){const t=this.YR;if(!(262144&t))return;const s=this.JH();this.h$t=Math.sin(s),this.o$t=Math.cos(s),this.YR=-262145&t}WNt(){return this.$$t(),this.h$t}VNt(){return this.$$t(),this.o$t}$Z(t){this.a$t=+t}omt(t){this.a$t+=+t}UZ(){return this.a$t}YZ(t){this.l$t=+t}amt(t){this.l$t+=+t}WZ(){return this.l$t}G$t(t){this.kv.equals(t)||(this.kv===GC?(this.kv=wC.Wn(wC.bo,t),this.y$t=wC.Wn(wC.bo,t),this.y$t.Zo()):t.Jo(1,1,1,1)?(this.kv=GC,this.y$t=GC):(this.kv.set(t),this.y$t.set(t),this.y$t.Zo()),this.D$t())}LO(t){if(t=wC.Xn(+t,0,1),this.JK()){if(this.Mdt().uOt()===t)return;this.Mdt().IUt(t),t=this.PO()}else if(this.kv.a===t)return;this.V$t(t)}W$t(){if(!this.xst())return;const t=this.vet();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.V$t(i.PO())}}V$t(t){CC.Fo(this.kv),CC.a=t,this.G$t(CC),this.W$t()}emt(t){this.JK()?this.LO(this.Mdt().uOt()+t):this.LO(this.PO()+t)}PO(){return this.JK()?this.MK().PO()*this.Mdt().uOt():this.kv.a}hK(t){this.kv.Yo(t)||(CC.Fo(t),CC.a=this.PO(),this.G$t(CC))}Fpt(t,s,i){CC.Ao(t,s,i),this.hK(CC)}Y$t(t,s,i){0===t&&0===s&&0===i||(CC.Fo(this.kv),CC.r+=t,CC.g+=s,CC.b+=i,this.hK(CC))}rK(){return this.kv}a7(){return this.y$t}ZK(){return!!(512&this.YR)}Q$t(t){this.JL(512,t)}LK(){return!!(1024&this.YR)}J$t(t){this.JL(1024,t)}kK(){return!!(2048&this.YR)}R$t(){return!!(3072&this.YR)}H$t(t){this.JL(2048,t)}zK(){return!!(4096&this.YR)}q$t(t){this.JL(4096,t)}UK(){return!!(8192&this.YR)}X$t(t){this.JL(8192,t)}VK(){return!!(16384&this.YR)}Z$t(t){this.JL(16384,t)}YK(){return!!(32768&this.YR)}K$t(t){this.JL(32768,t)}JK(){return!!(4194304&this.YR)}tVt(t){this.JL(4194304,t)}qK(){return!!(8388608&this.YR)}sVt(t){this.JL(8388608,t)}iVt(){this.YR&=-12647937}EK(t,s){if(t===this)return!1;if(t.NK())return!1;if(this.eVt(t))return!1;if(this.nVt(t))return!1;const i=t.tx(),e=t.nx(),n=t.xy(),r=t.Cy(),h=t.JH(),o=t.ox(),a=t.PO();t.rVt(this),t.J$t(s.RK),t.H$t(s.FK),t.q$t(s.jK),t.X$t(s.BK),t.Z$t(s.$K),t.K$t(s.WK),t.tVt(s.QK),t.sVt(s.HK),t.Q$t(s.XK);const l=i-this.tx(),u=e-this.nx(),c=-this.JH(),f=Math.cos(c),d=Math.sin(c);if(s.RK&&(s.$K?t.Aa=l*f-u*d:t.Aa=l,s.jK)){const s=this.xy()/this.T$t.wdt();0!==s&&(t.Aa/=s)}if(s.FK&&(s.$K?t.Da=l*d+u*f:t.Da=u,s.BK)){const s=this.Cy()/this.T$t.xdt();0!==s&&(t.Da/=s)}if(s.jK){const s=this.xy();0===s||s===Number.EPSILON?(t.n$t=1,t.T$t.xUt(1)):(t.n$t=n/this.xy(),t.T$t.xUt(t.n$t))}if(s.BK){const s=this.Cy();0===s||s===Number.EPSILON?(t.r$t=1,t.T$t.CUt(1)):(t.r$t=r/this.Cy(),t.T$t.CUt(t.r$t))}return s.$K&&(t._o=h-this.JH()),s.WK&&(t.jv=o-this.ox()),s.QK&&t.T$t.IUt(a),s.HK&&t.Oq(this.Rq()),this.hVt(t),this.FZ(),this.W$t(),!0}AK(t){if(t.MK()!==this)return;const s=t.tx(),i=t.nx(),e=t.xy(),n=t.Cy(),r=t.JH(),h=t.ox(),o=t.PO();t.rVt(null),t.iVt(),t.kZ(s,i),t.tD(e,n),t.QH(r),t.lx(h),t.LO(o),this.oVt(t),this.FZ()}aVt(){return this.v$t}lVt(){this.uVt();const t=[...this.children()];for(const s of t)this.AK(s);const s=this.MK();s&&s.AK(this),this.iVt()}uVt(){if(this.cVt(),!this.pUt){const t=[...this.children()];t.length&&(this.pUt=[],this.mUt=new WeakMap);let s=0;for(const i of t){const t=i.J1();this.pUt.push(t),this.mUt.set(t,s),s++}}const t=this.MK();t&&t.uVt()}cVt(){if(-1!==this.v$t)return;const t=[...this.vK()];this.v$t=t.length;for(const s of t)s.cVt();const s=[...this.children()];for(const t of s)t.cVt()}I$t(){this.pUt&&(this.pUt.length=0),this.pUt=null,this.mUt=null;const t=this.MK();t&&t.I$t(),this.v$t=-1}NK(){return null!==this.MK()}MK(){const t=this.T$t;return null!==t?t.MK():null}TK(){let t=this;for(;t.NK();)t=t.MK();return t}*vK(){let t=this.MK();for(;t;)yield t,t=t.MK()}DBt(t){return this.vet().includes(t)}xst(){const t=this.T$t;return null!==t&&t.xst()}vet(){const t=this.T$t;return null!==t?t.vet():DC}children(){return this.vet()}*GK(){for(const t of this.children())yield t,yield*t.GK()}bK(){return this.vet().length}BOt(){return[...this.GK()].length}IK(t){const s=this.vet();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}RBt(t){if(!t)return NaN;const s=this.vet();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}fVt(t){this.T$t||(this.T$t=wC.Wn(wC.bet,this)),t&&this.T$t.MUt(t)}Mdt(){return this.T$t}C$t(){this.T$t&&(this.T$t.Yn(),this.T$t=null)}rVt(t){t?(t.fVt(null),this.fVt(t)):(this.T$t&&this.T$t.MUt(null),this.xst()||this.C$t())}nVt(t){if(!this.NK())return!1;const s=this.MK();return s===t||s.nVt(t)}eVt(t){if(this.DBt(t))return!0;for(const s of this.vet())if(s.eVt(t))return!0;return!1}hVt(t){this.T$t.vet().push(t)}oVt(t){const s=this.T$t.vet(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.NK()||this.C$t(),t.xst()||t.C$t()}FBt(){const t=oI.get(this);return t?t.E$t:null}dVt(){const t=oI.get(this);return t?t.A$t:NaN}vst(){const t=aI.get(this);return wC.te(t)?t:NaN}pVt(t){aI.set(this,t)}mVt(){this.JL(524288,!0),this.D$t()}D$t(){if(!NC)return;const t=this.jc.Tv();let s;this.w$t&&t.BS(this.w$t),s=524288&this.YR?t.xS()||"<point>":t.SS()||"<default>",this.w$t=t.FS(s,this.uX(),this.y$t,this.ox(),this.gVt()?1:0,0)}nst(){return this.w$t}r9(){return this.kv===GC}$v(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.uX()!==t&&(this.YR=-2080374785&this.YR|t<<26,this.D$t())}uX(){return(2080374784&this.YR)>>26}$Y(t,s){const i=s&&this.s$t!==t;i&&this.j7(),this.HTt.Nzt(this,this.s$t,t),this.s$t=t,i&&this.yVt(),0!==this.ox()&&this.s$t.B7()}jY(){return this.s$t}yY(){return this.jY().yY()}V7(t){this.i$t=0|t}zY(){return this.s$t.X9(),this.i$t}stt(t){this.e$t=0|t}j2(){return this.s$t.K9(),this.e$t}k6(){return this.i$t}JL(t,s){s?this.YR|=t:this.YR&=~t}Rq(){return!!(1&this.YR)}Oq(t){if(this.JL(1,t),this.xst())for(const s of this.vet())s.qK()&&s.Oq(t)}gK(){return!!(8&this.YR)}yK(t){t=!!t,this.gK()!==t&&(this.JL(8,t),t?this.FZ():this.wVt())}MVt(t,s){this.JL(32,t),this.g$t&&this.g$t.clear();for(const t of s)this.g$t||(this.g$t=new Set),this.g$t.add(t.toLowerCase());this.g$t&&0===this.g$t.size&&(this.g$t=null)}SVt(t){const s=t.TBt()?t.VBt():t.FDt().get("solidTags"),i=!!(32&this.YR),e=this.g$t;if(!s||!e)return!i;for(const t of e)if(s.has(t))return i;return!i}FZ(){if(this.YR|=65554,this.HTt.Ezt(!0),this.jc.WY(),this.s$t.T7()&&(this.ZZ(this.u$t,this.c$t,!0),this.YR&=-3,this.yVt()),4&this.YR&&this.di.Mf().dispatchEvent(bC),null!==this.T$t){const t=this.T$t.vet();for(let s=0,i=t.length;s<i;++s)t[s].FZ()}}ZZ(t,s,i){const e=this.tx(),n=this.nx(),r=this.xy(),h=this.Cy(),o=this.JH();t.Wa(e-this.a$t*r,n-this.l$t*h,r,h),i&&this.h0()&&this.TVt(t),0===o?s.ql(t):(t.offset(-e,-n),s.Zl(t,this.WNt(),this.VNt()),s.offset(e,n),s.Kl(t)),t.normalize()}vVt(){const t=this.YR;2&t&&(this.ZZ(this.u$t,this.c$t,!0),this.YR=-3&t)}KZ(){return this.vVt(),this.u$t}sK(){return this.vVt(),this.c$t}xVt(t){const s=this.tx(),i=this.nx(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(xC.M(t),xC.offset(e,n),xC)}bVt(t){this.u$t.M(t),this.c$t.ql(this.u$t),this.YR&=-3,this.Dzt(),this.yVt()}CVt(t){this.JL(4,t)}IVt(){return!!(4&this.YR)}Ytt(t,s,i){return s&&0!==this.Xtt()?this.Htt(this.jY().Jtt()):0===this.ox()||i?t.xl(this.KZ()):this.GVt()}GVt(){const t=this.jY(),s=this.qZ();return!(s>=t.v9())&&(t.S9(s,vC),vC.xl(this.KZ()))}Htt(t){const s=this.KZ(),i=s.Ka(),e=s.sl(),n=s.tl(),r=s.il(),h=this.qZ(),o=h+this.Xtt();return t.aM(i,n,h,e,r,o)}eK(){const t=this.jY();if(t.P9())return this.Htt(t.Jtt());{const s=t.yY();return this.Ytt(t.pX(),s.Wtt(),s.bq())}}sst(t){this.JL(1048576,t)}tst(t){this.JL(2097152,t)}_Vt(){return!!(1048576&this.YR)}EVt(){return!!(2097152&this.YR)}AVt(t){(t=!!t)!==this.gVt()&&(this.JL(16777216,t),this.D$t())}gVt(){return!!(16777216&this.YR)}DVt(t){this.p$t=t,this.NVt(),this.h0()&&(this.x$t.OVt=null)}PVt(){return this.p$t}RVt(){return null!==this.p$t||this.h0()}LVt(){return this.FVt(this.xy(),this.Cy(),this.JH(),this.WNt(),this.VNt())}kVt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.FVt(t,s,i,e,n)}FVt(t,s,i,e,n){let r=this.m$t;null===r&&(r={b$t:wC.Wn(wC.lu),width:NaN,height:NaN,angle:NaN},this.m$t=r);const h=r.b$t;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.p$t;if(this.h0()){const i=this.UZ(),r=this.WZ(),a=this.o0();let l=this.x$t.OVt;l||(o?(IC.M(o),IC.offset(i,r)):IC.yu(),l=a.hb(IC),this.x$t.OVt=l),a.ob(l,h),h.offset(-i,-r),h.Tu(t,s,e,n)}else o?(h.M(o),h.Tu(t,s,e,n)):h.Su(this.sK(),-this.tx(),-this.nx());return r.width=t,r.height=s,r.angle=i,h}NVt(){this.jVt(!0);const t=this.m$t;null!==t&&(t.width=NaN)}t0(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.J1().KJ().BJ())throw new Error("object does not support mesh");this.i0(),this.x$t={zVt:wC.Wn(wC.qw.Cx,t,s),BVt:wC.Wn(wC.qw.Cx,t,s),OVt:null}}h0(){return null!==this.x$t}o0(){if(!this.h0())throw new Error("no mesh");return this.x$t.zVt}UVt(){if(!this.h0())throw new Error("no mesh");return this.x$t.BVt}$Vt(t){this.JL(65536,t)}VVt(){return!!(65536&this.YR)}jVt(t){this.JL(131072,t)}WVt(){return!!(131072&this.YR)}TVt(t){const s=this.x$t.zVt,i=Math.min(s.Vx(),0),e=Math.min(s.Wx(),0),n=Math.max(s.Yx(),1),r=Math.max(s.Qx(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.ll((n-1)*h),t.ul((r-1)*o),this.fC=s.Jx()}i0(){this.x$t&&(this.x$t.zVt.Yn(),this.x$t.BVt.Yn(),this.x$t=null,this.NVt())}n0(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!AC.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.$k;let a="number"==typeof i.a0?i.a0:n?0:-1,l="number"==typeof i.l0?i.l0:n?0:-1;if(!this.h0())return!1;const u=this.o0(),c=u.qx(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.ox()!==o&&(c.lx(o),f=!0),n&&(r+=t/(u.jx()-1),h+=s/(u.zx()-1)),-1!==a||n?(n&&(a+=t/(u.jx()-1)),a=wC.Xn(a,0,1)):a=c.ux(),-1!==l||n?(n&&(l+=s/(u.zx()-1)),l=wC.Xn(l,0,1)):l=c.gx(),c.tx()===r&&c.nx()===h&&c.ux()===a&&c.gx()===l?f:(c.sx(r),c.hx(h),c.mx(a),c.yx(l),this.NVt(),!0)}gBt(){return this.di.gBt()}wK(t,s){return!!this.KZ().Cl(t,s)&&!!this.sK().Cl(t,s)&&(this.gBt()?this.di.g0().rFt(t,s):!this.RVt()||this.LVt().Cl(t-this.tx(),s-this.nx()))}YVt(){return!!(16&this.YR)}Dzt(){if(!this.YVt()||!this.gK()||this.kY())return;const t=this.KZ(),s=this.HTt._zt(),i=this.f$t;if(vC.set(s.i8(t.Ka()),s.e8(t.tl()),s.i8(t.sl()),s.e8(t.il())),i.equals(vC))return;const e=this.di;i===EC?(s.n8(e,null,vC),this.f$t=wC.Wn(wC.Rect,vC)):(s.n8(e,i,vC),i.M(vC)),this.YR&=-17}QVt(){this.YR|=16}wVt(){const t=this.f$t;t!==EC&&(this.HTt._zt().n8(this.di,t,null),this.f$t=EC)}yVt(){const t=this.jY();if(!t.T7()||this.kY())return;const s=t.o9(),i=this.KZ(),e=this.d$t;if(vC.set(s.i8(i.Ka()),s.e8(i.tl()),s.i8(i.sl()),s.e8(i.il())),e.equals(vC))return;const n=this.di;e===_C?(s.n8(n,null,vC),this.d$t=wC.Wn(wC.Rect,vC)):(s.n8(n,e,vC),e.M(vC)),t.a9()}j7(){const t=this.d$t;t!==_C&&(this.jY().o9().n8(this.di,t,null),this.d$t=_C)}Z9(){return this.d$t}aK(){if(this.kY())return;const t=this.di,s=this.s$t,i=s.UY();i.length&&i.at(-1)===t||(s.k7(t,!1),s.R7(t,!1),this.jc.WY())}uK(){if(this.kY())return;const t=this.di,s=this.s$t,i=s.UY();i.length&&i[0]===t||(s.k7(t,!1),s.F7(t,!1),this.jc.WY())}fK(t){if(this.kY())return;const s=this.di,i=this.s$t;if(i.yY()!==t.yY())throw new Error("layer from different layout");t!==i&&(i.k7(s,!0),this.$Y(t),t.R7(s,!0),this.jc.WY())}pK(t,s){if(this.kY())return;const i=this.di;let e=!1;const n=this.s$t;if(t.LX()===i.LX())return;const r=t.FY();if(!r)throw new Error("expected world instance");const h=r.jY();n.CV()!==h.CV()&&(n.k7(i,!0),this.$Y(h),h.R7(i,!0),e=!0);const o=h.ntt(i,t,!!s);(e||o)&&this.jc.WY()}RZ(){return this.M$t}JVt(t){this.JL(64,t)}ftt(){return!!(64&this.YR)}Mst(t,s=null){const i={x:this.tx(),y:this.nx(),w:this.xy(),h:this.Cy(),l:this.jY().s9(),zi:this.zY()};0!==this.ox()&&(i.ze=this.ox()),0!==this.JH()&&(i.a=this.P$t()),this.r9()||(i.c=this.kv.toJSON()),.5!==this.UZ()&&(i.oX=this.UZ()),.5!==this.WZ()&&(i.oY=this.WZ()),0!==this.uX()&&(i.bm=this.uX()),this.Rq()||(i.v=this.Rq()),this.gK()||(i.ce=this.gK()),this.IVt()&&(i.be=this.IVt()),this.M$t&&(i.fx=this.M$t.Mst());const e=!!(32&this.YR);return e&&(i.sfi=e),this.g$t&&(i.sft=[...this.g$t].join(" ")),this.T$t&&"visual-state"!==t&&(i.sgi=this.T$t.Mst(t,s),oI.has(this)&&(i.sgcd=oI.get(this).E$t,i.sgzid=oI.get(this).A$t)),this.h0()&&(i.mesh=this.o0().Sx()),i}RUt(){return{x:this.Aa,y:this.Da,z:this.jv,w:this.n$t,h:this.r$t,a:this._o,sgi:this.Mdt()?this.Mdt().AUt():null}}UUt(t){t&&(this.Aa=t.x,this.Da=t.y,this.jv=t.z,this.n$t=t.w,this.r$t=t.h,this._o=t.a,t.sgi&&this.Mdt()&&this.Mdt().Sst(t.sgi),this.k$t(),this.FZ())}Bzt(){this.I$t(),this.lVt(),this.fVt(null),this.T$t&&this.T$t.FUt(this.pUt,this.mUt)}Cnt(t){"visual-state"!==t&&this.lVt()}Gnt(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(this.kY())return;this.T$t.Gnt(t.sgi,i)}}eUt(t,s="full",i=null){if("visual-state"!==s)if(this.kY())this.I$t();else{if(t.hasOwnProperty("sgi"))this.T$t.FUt(null,null,t.sgi,i);else if(i?.GPt&&this.pUt)for(const t of this.pUt)t.kY()||this.jc.QY(t);this.I$t(),this.FZ()}}Sst(t,s,i=null){if(NC=!1,this.sx(t.x),this.hx(t.y),this.hy(t.w),this.oy(t.h),this.V7(t.zi),this.lx(t.hasOwnProperty("ze")?t.ze:0),this.QH(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?CC.Ma(t.c):t.hasOwnProperty("o")?(CC.Fo(this.kv),CC.a=t.o):CC.Eo(1,1,1,1),this.G$t(CC),this.$Z(t.hasOwnProperty("oX")?t.oX:.5),this.YZ(t.hasOwnProperty("oY")?t.oY:.5),this.$v(t.hasOwnProperty("bm")?t.bm:0),this.Oq(!t.hasOwnProperty("v")||t.v),this.yK(!t.hasOwnProperty("ce")||t.ce),this.CVt(!!t.hasOwnProperty("be")&&t.be),this.MVt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.M$t&&t.hasOwnProperty("fx")&&this.M$t.Sst(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.fVt(null);const s=this.T$t,i=t.sgi;s.Sst(i),s.FUt(this.pUt,this.mUt),this.HVt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.t0(s.cols,s.rows),this.o0().Tx(s)}else this.i0();this.FZ(),NC=!0,this.D$t(),"visual-state"!==s&&this.jc.qVt(this.J1(),t)}HVt(t,s){t&&wC.te(s)&&oI.set(this,{E$t:t,A$t:s})}}}{const lI=self.Gs;lI.Sjt=class extends lI.$n{constructor(t,s){super();const i=t.yQ(),e=i.sEt(s[1]);i.XVt().JFt(e),this.jc=i,this.HTt=t,this.OFt=lI.xJ.D0(e),this.wLt=null,this.ZVt=null,this.Xkt=e.Instance,this.v8=s[2],this.Hn=s[0],this.LEt=this.jc.Cbt(s[3]);const n=this.OFt.DDt();if(n<2&&(this.wLt=lI.Wn(e.Fjt,this),!(this.wLt instanceof lI.NFt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(lI.xJ.tLt(this,n),n>=2){const t=e.Fjt??globalThis.e3;if(this.ZVt=new t,!(this.ZVt instanceof globalThis.e3))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.ZVt=new globalThis.E0;lI.xJ.sLt(n),this.HRt()}static XC(t,s){return lI.Wn(lI.Sjt,t,s)}Yn(){this.jc=null,this.OFt=null,this.wLt&&(this.wLt.Yn(),this.wLt=null),this.Xkt=null}INt(){return this.wLt}HRt(){this.wLt?this.wLt.HRt():this.ZVt&&this.ZVt.d2()}yQ(){return this.jc}gH(){return this.HTt}x0(){return this.OFt}nzt(){return this.Xkt}Ac(){return this.Hn}s9(){return this.v8}C0(){return this.ZVt}Cbt(){return this.LEt}}}{const uI=self.Gs,cI=self.T0;uI.Kzt=class extends uI.$n{constructor(t){super(),this.jc=t.runtime,this.mAt=t.b0,this.OFt=this.mAt.x0(),this.di=t.G0,this.$w=t.index,this.Yzt=null,this.Qzt=null,this.OFt.R7(this.di)}Yn(){this.Qzt&&(this.Qzt.AX(),this.Qzt=null),this.OFt.k7(this.di),this.Yzt&&(this.Yzt.Yn(),this.Yzt=null),this.jc=null,this.mAt=null,this.OFt=null,this.di=null}tzt(t){if(this.Yzt)throw new Error("already got sdk instance");if(this.x0().DDt()<2){if(this.Yzt=uI.Wn(this.mAt.nzt(),this,t),!(this.Yzt instanceof uI.PFt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.x0().qRt();this.KRt(s.Instance,t)}}g0(){return this.Yzt??this.Qzt}_0(){return this.di}yQ(){return this.jc}I0(){return this.mAt}x0(){return this.OFt}xpt(){return this.$w}FFt(){this.Yzt?this.Yzt.FFt():this.Qzt.h3()}BFt(t,s){this.Yzt&&this.Yzt.BFt(t,s)}iUt(){return this.Yzt?this.Yzt.jLt():this.Qzt.xZ()}Sx(t="full"){return this.Yzt?this.Yzt.Sx(t):this.Qzt.bZ(t)}Tx(t,s="full"){if(this.Yzt)return this.Yzt.Tx(t,s);this.Qzt.CZ(t,s)}static KVt(t,s,i){const e=globalThis.n3;let n,r;n=s instanceof e?t.lq(s):s.LFt(),r=i instanceof e?t.lq(i):i.LFt();const h=n._0(),o=r._0(),a=h.gH().CV(),l=o.gH().CV();if(a!==l)return a-l;const u=h.$Bt(),c=o.$Bt();return u!==c?u-c:n.xpt()-r.xpt()}KRt(t,s){const i=cI,e=t??this.Yzt.qRt(),n=e||i,r=this.x0().DDt();if(uI.xJ.tLt(this,r),uI.xJ.HFt(s),this.Qzt=new n,uI.xJ.qFt(),uI.xJ.sLt(r),e&&!(this.Qzt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.Qzt}TLt(){return this.Qzt||this.KRt()}$Lt(){return!!this.Qzt}}}{const fI=self.Gs;fI.h7=class extends fI.$n{constructor(t,s){super(),this._x=t,this.tWt=[],this.sWt=[],this.iWt=new Map,this.eWt=[],this.nWt=[],this.rWt=new Set,this.uv=!0;for(const t of s){const s=fI.Wn(fI.hWt,this,t,this.tWt.length);this.tWt.push(s),this.iWt.set(s.Ac().toLowerCase(),s),t.length>=3&&this.eWt.push(this.oWt(s,t[2]))}this.yQ().aWt(this)}Yn(){this.yQ().lWt(this);for(const t of this.nWt)t.Yn();fI.Sh(this.nWt),fI.Sh(this.tWt),fI.Sh(this.sWt),this.iWt.clear(),fI.Sh(this.eWt),this._x=null}uWt(t){this.rWt.add(t)}cWt(t){this.rWt.delete(t)}fWt(t){t.dS()&&(this.nWt=this.tWt.map(t=>{const s=t.KI();return s.yz()>0?fI.Wn(fI.qw.mz,s):null}),this.dWt());for(const s of this.rWt)s.fWt(t)}Zjt(t){if(t.length){this.tWt=t.concat(this.tWt);for(const s of t)this.iWt.set(s.Ac().toLowerCase(),s);for(let t=0,s=this.tWt.length;t<s;++t)this.tWt[t].q7(t)}}oWt(t,s){t.pWt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=fI.Wn(fI.bo);e.Ma(s),i[t]=e}}return i}Bx(){return this._x}yQ(){return this._x.yQ()}P0(){fI.Sh(this.sWt);let t=!0;for(const s of this.tWt)s.VIt()&&(this.sWt.push(s),s.KI().Gv()||(t=!1));this.uv=t}UH(){return this.tWt}fzt(){return this.tWt.length>0}sdt(t){return this.iWt.get(t.toLowerCase())||null}mWt(t){if((t=Math.floor(+t))<0||t>=this.tWt.length)throw new RangeError("invalid effect type index");return this.tWt[t]}N0(t){return this.mWt(t).VIt()}O0(t,s){this.mWt(t).pWt(s)}h9(){return this.sWt}ftt(){return this.sWt.length>0}Gv(){return this.uv}tdt(t){return this.eWt[t]}u7(t){return t<this.nWt.length?this.nWt[t]:this.eWt[t]}R0(t,s){if(t<0||t>=this.eWt.length)return null;const i=this.eWt[t];return s<0||s>=i.length?null:i[s]}L0(t,s,i){if(t<0||t>=this.eWt.length)return!1;const e=this.eWt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof fI.bo){if(n.Yo(i))return!1;n.Fo(i)}else{if(n===i)return!1;e[s]=i}return t<this.nWt.length&&this.nWt[t].vz(s,i),!0}dWt(){const t=this.eWt,s=this.nWt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.vz(t,n[t])}}static gWt(t){return t&&t instanceof fI.bo?{t:"color",v:t.toJSON()}:t}static yWt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=fI.Wn(fI.bo);return s.Ma(t.v),s}throw new Error("invalid effect parameter type")}return t}static wWt(t){return t.map(fI.h7.gWt)}static MWt(t){return t.map(fI.h7.yWt)}Sx(){return this.tWt.map(t=>({name:t.Ac(),active:t.VIt(),params:fI.h7.wWt(this.eWt[t.CV()])}))}Tx(t){for(const s of t){const t=this.sdt(s.name);t&&(t.pWt(s.active),this.eWt[t.CV()]=fI.h7.MWt(s.params))}this.P0(),this.dWt()}}}{const dI=self.Gs;dI.hWt=class extends dI.$n{constructor(t,s,i){super(),this.r7=t,this.Bc=s[0],this.Hn=s[1],this.$w=i,this.Rv=null,this.jf=!0}Yn(){this.r7=null,this.Rv=null}Xjt(t){const s=dI.Wn(dI.hWt,t,[this.Bc,this.Hn],-1);return s.Rv=this.Rv,s.jf=this.jf,s}fWt(t){const s=t.MS(this.Bc);if(!s)throw new Error("failed to find shader program '"+this.Bc+"'");this.Rv=s}BH(){return this.r7}Ac(){return this.Hn}q7(t){this.$w=t}CV(){return this.$w}Bx(){return this.r7.Bx()}yQ(){return this.r7.yQ()}pWt(t){this.jf=!!t}VIt(){return this.jf}KI(){return this.Rv}SWt(){const t=[];for(let s=0,i=this.Rv.tG();s<i;++s){const i=this.Rv.sG(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(dI.Wn(dI.bo,1,1,1,1))}}return t}}}{const pI=self.Gs;pI.S$t=class extends pI.$n{constructor(t,s){super(),this.di=t,this.TWt=s,this.r7=t.gH().BH(),this.vWt=!0,this.f7=!0,this.xWt=!1,this.bWt=!1,this.CWt=!1,this.IWt=!1,this.TV=pI.Wn(pI.qw.MU,t.yQ()._Y().o7(),{aU:(t,s)=>{const i=s.dV(),e=i.FY();t.Vv(e.a7()),t.qS(e.qZ()),i.eb(t),t.qS(0)},lU:t=>{const s=t.tFt(),[i,e]=t.KLt();return{hV:s,oV:i,aV:e}},uU:t=>this.u7(t)}),this.GWt=[],this.sWt=[],this.uv=!0,this.eWt=[],this.nWt=[],this.fWt(t.yQ().Tv());for(let t=0,s=this.r7.UH().length;t<s;++t)this.GWt.push(!0);this.P0(),this.r7.uWt(this)}Yn(){this.r7.cWt(this);for(const t of this.nWt)t&&t.Yn();pI.Sh(this.nWt),this.TV.Yn(),this.TV=null,pI.Sh(this.GWt),pI.Sh(this.sWt),pI.Sh(this.eWt),this.di=null,this.r7=null}fWt(t){t.dS()&&(this.nWt=this.r7.UH().map(t=>{const s=t.KI();return s.yz()>0?pI.Wn(pI.qw.mz,s):null}))}_$t(t){let s=0;for(const i of t)this.eWt.push(this.oWt(s,i)),++s;this.dWt(),this.P0()}oWt(t,s){this.GWt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=pI.Wn(pI.bo);e.Ma(s),i[t]=e}}return i}hBt(){for(const t of this.r7.UH())this.eWt.push(t.SWt());this.dWt()}Bx(){return this._x}BH(){return this.r7}bV(){return this.n9(),this.TV}yQ(){return this.di.yQ()}P0(){pI.Sh(this.sWt);const t=this.TWt,s=this.r7.UH(),i=this.sWt,e=this.GWt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.KI().Gv()||(n=!1)}this.uv=n,t.JVt(!!i.length),this.vWt=!0}n9(){const t=this.di,s=this.TWt,i=s.r9(),e=t.KJ().FJ(),n=0!==s.JH()||0!==s.jY().JH()||s.xy()<0||s.Cy()<0,r=t.eFt(),h=t.Iv();(this.vWt||i!==this.f7||e!==this.xWt||n!==this.bWt||r!==this.CWt||h!==this.IWt||this.TV.c$())&&(this.TV.f$(this.sWt.map(t=>t.KI()),{fU:this.sWt.map(t=>t.CV()),dU:!i||h,mU:e,gU:r,yU:n}),this.vWt=!1,this.f7=i,this.xWt=e,this.bWt=n,this.CWt=r,this.IWt=h)}h9(){return this.sWt}tdt(t){return this.eWt[t]}u7(t){return t<this.nWt.length?this.nWt[t]:this.eWt[t]}R0(t,s){if(t<0||t>=this.eWt.length)return null;const i=this.eWt[t];return s<0||s>=i.length?null:i[s]}L0(t,s,i){if(t<0||t>=this.eWt.length)return!1;const e=this.eWt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof pI.bo){if(n.Yo(i))return!1;n.Fo(i)}else{if(n===i)return!1;e[s]=i}return t<this.nWt.length&&this.nWt[t].vz(s,i),!0}dWt(){const t=this.eWt,s=this.nWt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.vz(t,n[t])}}Gv(){return this.uv}_Wt(){return this.sWt.some(t=>t.KI().Av())}N0(t){return this.GWt[t]}O0(t,s){this.GWt[t]=!!s}UH(){return this.r7.UH()}Mst(){return this.r7.UH().map(t=>({name:t.Ac(),active:this.GWt[t.CV()],params:pI.h7.wWt(this.eWt[t.CV()])}))}Sst(t){for(const s of t){const t=this.r7.sdt(s.name);t&&(this.GWt[t.CV()]=s.active,this.eWt[t.CV()]=pI.h7.MWt(s.params))}this.P0(),this.dWt()}}}{const mI=self.Gs,gI=[],yI=[],wI=[],MI=mI.Wn(mI.lu),SI=mI.Wn(mI.lu),TI=mI.Wn(mI.El),vI=mI.Wn(mI.Rect),xI=mI.Wn(mI.Rect);let bI=null,CI=null,II=null;mI.EWt=class extends mI.$n{constructor(t){super(),this.jc=t,this.AWt=0,this.DWt=0,this.NWt=[],this.OWt=0,this.PWt=0,this.RWt=0,this.LWt=0,this.FWt=new self.FQ(this)}Yn(){this.jc=null}yQ(){return this.jc}DV(){return this.FWt}kWt(){this.PWt=this.OWt,this.OWt=0,this.LWt=this.RWt,this.RWt=0}jWt(){return this.PWt}zWt(){return this.LWt}BWt(t,s){const i=t.FY(),e=s.FY();i&&e&&i.gK()&&e.gK()&&this.NWt.push([t,s])}_Ot(t,s,i){for(const[e,n]of this.NWt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.FOt(s)&&(i.includes(r)||i.push(r))}}EOt(t,s){if(!this.NWt.length)return!1;for(const[i,e]of this.NWt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}UWt(){mI.Sh(this.NWt)}jQ(t,s){if(!t||!s||t===s)return!1;const i=t.FY(),e=s.FY();if(!i.gK()||!e.gK())return!1;this.OWt++;const n=i.jY(),r=e.jY();return n.Q9(r)?this.$Wt(i,e):this.VWt(i,e)}$Wt(t,s){if(!t.KZ().xl(s.KZ()))return!1;if(this.RWt++,!t.sK().su(s.sK()))return!1;if(t.gBt()&&s.gBt())return!1;if(t.gBt())return this.WWt(t,s);if(s.gBt())return this.WWt(s,t);if(!t.RVt()&&!s.RVt())return!0;const i=t.LVt(),e=s.LVt();return i.vu(e,s.tx()-t.tx(),s.nx()-t.nx())}VWt(t,s){const i=t.gBt(),e=s.gBt();if(i&&!e)return this.YWt(t,s);if(e&&!i)return this.YWt(s,t);if(e||i)return!1;{const i=t.jY(),e=s.jY();MI.M(t.LVt()),SI.M(s.LVt());const n=MI.pu();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.wX(r+t.tx(),h+t.nx());n[s]=o,n[e]=a}const r=SI.pu();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.wX(n+s.tx(),h+s.nx());r[t]=o,r[i]=a}return MI.wu(),SI.wu(),this.RWt++,MI.vu(SI,0,0)}}YWt(t,s){const i=t.jY(),e=s.jY();bI||(bI=mI.Wn(mI.lu)),CI||(CI=mI.Wn(mI.Rect)),II||(II=mI.Wn(mI.El));const n=s.tx(),r=s.nx(),[h,o]=e.wX(n,r),[a,l]=i.gX(h,o),u=a-n,c=l-r;if(CI.M(s.KZ()),CI.offset(u,c),!t.KZ().xl(CI))return!1;if(II.M(s.sK()),II.offset(u,c),this.RWt++,!t.sK().su(II))return!1;bI.M(s.LVt());const f=bI.pu();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return bI.wu(),this.WWt(t,s,a,l,bI,CI,II)}WWt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.KZ(),a=t.tx(),l=t.nx(),u=t.J1().g0(),c=void 0!==i?i:s.tx(),f=void 0!==e?e:s.nx(),d=s.RVt(),p=void 0!==h?h:s.sK(),m=yI;u.QWt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.JWt();if(this.OWt++,o.bl(e,a,l)&&(TI.ql(e),TI.offset(a,l),TI.su(p)))if(d){const t=void 0!==n?n:s.LVt();let r=c,h=f;void 0!==n&&(r=s.tx(),h=s.nx());const o=i.HWt();if(o){if(this.RWt++,o.vu(t,r-(a+e.Ka()),h-(l+e.tl())))return mI.Sh(m),!0}else if(MI.Su(TI,0,0),MI.vu(t,r,h))return mI.Sh(m),!0}else{const t=i.HWt();if(!t)return mI.Sh(m),!0;if(MI.Su(p,0,0),t.vu(MI,-(a+e.Ka()),-(l+e.tl())))return mI.Sh(m),!0}}return mI.Sh(m),!1}qWt(t,s,i){const e=t.cH(),n=this.jc.fW();if(!n)throw new Error("cannot call outside event");const r=n.bvt(),h=new mI.XWt;if(e.ovt()){i||(e.pvt(!1),mI.Sh(e.mvt())),r&&mI.Sh(e.gvt());for(const n of t.uH()){const t=n.FY(),o=t.jY();let a=!1;if(h.Fq(o)&&t.eK()&&(a=s.some(([s,i])=>{const[e,n]=h.gX(o,s,i,t.qZ());return t.wK(e,n)})),a){if(i)return!1;e.fvt(n)}else r&&e.dvt(n)}}else{let t,o=!1;r&&!n.d_t(this.jc.gbt())?this.jc.DNt()&&!e.gvt().length&&e.mvt().length?t=e.mvt():(t=e.gvt(),o=!0):t=e.mvt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.FY(),c=u.jY();let f=!1;if(h.Fq(c)&&u.eK()&&(f=s.some(([t,s])=>{const[i,e]=h.gX(c,t,s,u.qZ());return u.wK(i,e)})),f){if(i)return!1;o?e.fvt(l):t[a++]=l}else o?t[a++]=l:r&&e.dvt(l)}i||(t.length=a)}return t.Q_t(),h.Yn(),!!i||e.avt()}ZWt(t,s){if(!t)return!0;for(const i of s.Ozt())if(!t.Q9(i))return!1;return!0}ANt(t,s,i,e){if(s.pH())for(const n of s.FH())this.ZWt(t,n)?(n.Azt(),n._zt().r8(i,e)):mI.On(e,n.uH());else this.ZWt(t,s)?(s.Azt(),s._zt().r8(i,e)):mI.On(e,s.uH())}HQ(t,s,i,e){for(const n of s)this.ANt(t,n,i,e)}KWt(t,s,i){const e=this.jc.ZFt();e&&this.HQ(t,e.Knt(),s,i)}tYt(t,s,i){const e=this.jc.KFt();e&&this.HQ(t,e.Knt(),s,i)}SVt(t,s){return t.MBt()&&(!s||s.FY().SVt(t))}UQ(t){const s=t.FY();this.KWt(s.jY(),s.KZ(),gI);for(const s of gI)if(this.SVt(s,t)&&this.jQ(t,s))return mI.Sh(gI),s;return mI.Sh(gI),null}sYt(t,s){this.KWt(null,t,gI);for(const i of gI)if(this.SVt(i,s)&&this.iYt(t,i))return mI.Sh(gI),i;return mI.Sh(gI),null}eYt(t,s){let i=null;s&&(i=wI,mI.Sh(i));const e=t.FY();this.tYt(e.jY(),e.KZ(),gI);for(const e of gI)if(e.xBt()&&this.jQ(t,e)){if(!s)return mI.Sh(gI),e;i.push(e)}return mI.Sh(gI),i}nYt(t,s,i,e,n){e=e||50;const r=t.FY(),h=r.tx(),o=r.nx();for(let a=0;a<e;++a)if(r.kZ(h+s*a,o+i*a),r.FZ(),!this.jQ(t,n))return!0;return r.kZ(h,o),r.FZ(),!1}rYt(t,s,i,e,n,r){e=e||50;const h=t.FY(),o=h.tx(),a=h.nx();let l=null,u=null;for(let c=0;c<e;++c)if(h.kZ(o+s*c,a+i*c),h.FZ(),!this.jQ(t,l))if(l=this.UQ(t),l)u=l;else if(n&&(l=r?this.jQ(t,r)?r:null:this.eYt(t),l&&(u=l)),!l)return u&&this.hYt(t,s,i,u,16,!0),!0;return h.kZ(o,a),h.FZ(),!1}oYt(t,s,i,e){e=e||50;const n=t.FY(),r=n.tx(),h=n.nx();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.kZ(r+s*l*u,h+i*l*u),n.FZ(),!this.jQ(t,o)){if(o=this.UQ(t),!o)return a&&this.hYt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.kZ(r,h),n.FZ(),!1}hYt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.FY();let u=l.tx(),c=l.nx();for(;h<=n;){const n=1/h;h*=2,l.zZ(s*n*(o?1:-1),i*n*(o?1:-1)),l.FZ(),this.jQ(t,e)||r&&this.UQ(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.tx(),c=l.nx())}a&&(l.kZ(u,c),l.FZ())}aYt(t,s=100){let i=0;const e=t.FY(),n=e.tx(),r=e.nx();let h=0,o=this.UQ(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.kZ(Math.floor(n+s*i),Math.floor(r+a*i)),e.FZ(),!this.jQ(t,o)&&(o=this.UQ(t),!o))return!0}return e.kZ(n,r),e.FZ(),!1}lYt(t,s,i,e){const n=t.FY(),r=n.tx(),h=n.nx(),o=Math.max(10,mI.er(s,i,r,h)),a=mI.rr(s,i,r,h),l=e||this.UQ(t);if(!l)return mI.Zn(a+Math.PI);let u=l,c=0,f=0;const d=mI.Kn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.kZ(s+Math.cos(r)*o,i+Math.sin(r)*o),n.FZ(),!this.jQ(t,u)&&(u=e?null:this.UQ(t),!u)){c=r;break}}for(36===p&&(c=mI.Zn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.kZ(s+Math.cos(r)*o,i+Math.sin(r)*o),n.FZ(),!this.jQ(t,u)&&(u=e?null:this.UQ(t),!u)){f=r;break}}if(36===p&&(f=mI.Zn(a+Math.PI)),n.kZ(r,h),n.FZ(),f===c)return f;const m=mI.hr(f,c)/2;let g;g=mI.lr(f,c)?mI.Zn(c+m+Math.PI):mI.Zn(f+m);const y=Math.cos(a),w=Math.sin(a),M=Math.cos(g),S=Math.sin(g),T=y*M+w*S,v=y-2*T*M,x=w-2*T*S;return mI.rr(0,0,v,x)}uYt(t,s,i,e,n){if(!n)return!1;const r=n.FY();return!!r.gK()&&(this.OWt++,vI.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.KZ().xl(vI)&&(n.gBt()?this.cYt(t,s,i,e,n,r):(this.RWt++,!!r.sK().tu(t,s,i,e)&&(!r.RVt()||r.LVt().tu(r.tx(),r.nx(),t,s,i,e)))))}cYt(t,s,i,e,n,r){const h=r.tx(),o=r.nx(),a=n.g0(),l=yI;xI.set(t,s,i,e),xI.normalize(),a.QWt(xI,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.JWt();if(this.OWt++,vI.bl(a,h,o)&&(TI.ql(a),TI.offset(h,o),TI.tu(t,s,i,e))){const n=r.HWt();if(!n)return mI.Sh(l),!0;if(this.RWt++,n.tu(h+a.Ka(),o+a.tl(),t,s,i,e))return mI.Sh(l),!0}}return mI.Sh(l),!1}iYt(t,s){if(!s)return!1;const i=s.FY();if(!i.gK())return!1;if(this.OWt++,!i.KZ().xl(t))return!1;if(s.gBt())return this.fYt(t,s,i);if(this.RWt++,TI.ql(t),!i.sK().su(TI))return!1;if(!i.RVt())return!0;const e=MI;e.ql(t,i.tx(),i.nx());const n=i.LVt();return e.vu(n,0,0)}fYt(t,s,i){const e=i.tx(),n=i.nx(),r=s.g0(),h=yI;r.QWt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.JWt();if(this.OWt++,t.bl(r,e,n)){const s=i.HWt();if(!s)return mI.Sh(h),!0;if(this.RWt++,MI.ql(t,0,0),s.vu(MI,-(e+r.Ka()),-(n+r.tl())))return mI.Sh(h),!0}}return mI.Sh(h),!1}dYt(t,s){if(!t)return;const i=t.FY();i.gK()&&(this.OWt++,i.KZ().xl(s.rect)&&(t.gBt()?this.pYt(t,i,s):(this.RWt++,i.RVt()?s.mYt(t,i.tx(),i.nx(),i.LVt()):s.gYt(t,i.sK()))))}pYt(t,s,i){const e=s.tx(),n=s.nx(),r=yI;t.g0().QWt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.JWt();if(this.OWt++,i.rect.bl(a,e,n)){const r=o.HWt();this.RWt++,r?i.mYt(t,e+a.Ka(),n+a.tl(),r):i.yYt(t,s.tx(),s.nx(),a)}}mI.Sh(r)}VQ(t,s){if(t===this.AWt&&s===this.DWt)return;this.AWt=t,this.DWt=s;const i=this.jc.J7();for(const e of i)if(e.EJ()){for(const t of e.lH())t.FY().wVt();e._zt().wYt(t,s),e.Ezt();for(const t of e.lH()){const s=t.FY();s.QVt(),s.Dzt()}}}YQ(){return[this.AWt,this.DWt]}MYt(t,s){this.AWt=t,this.DWt=s}}}{const GI=self.Gs;GI.ojt=class extends GI.$n{constructor(t,s){super(),this.Z6=t,this.K6=s,this.t8=GI.Wn(GI._u)}Yn(){this.t8.Yn(),this.t8=null}wYt(t,s){if(!this.t8.Du())throw new Error("grid not empty");this.Z6=t,this.K6=s}s8(t,s,i){let e=this.t8.Ys(t,s);return e||(i?(e=GI.Wn(GI.SYt,this,t,s),this.t8.Set(t,s,e),e):null)}i8(t){const s=Math.floor(t/this.Z6);return isFinite(s)?s:0}e8(t){const s=Math.floor(t/this.K6);return isFinite(s)?s:0}n8(t,s,i){if(s)for(let e=s.Ka(),n=s.sl();e<=n;++e)for(let n=s.tl(),r=s.il();n<=r;++n){if(i&&i.Cl(e,n))continue;const s=this.s8(e,n,!1);s&&(s.Zf(t),s.Du()&&this.t8.Nu(e,n))}if(i)for(let e=i.Ka(),n=i.sl();e<=n;++e)for(let n=i.tl(),r=i.il();n<=r;++n)s&&s.Cl(e,n)||this.s8(e,n,!0).J6(t)}r8(t,s){let i=this.i8(t.Ka());const e=this.e8(t.tl()),n=this.i8(t.sl()),r=this.e8(t.il());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.s8(i,t,!1);e&&e.q6(s)}}}}{const _I=self.Gs;_I.SYt=class extends _I.$n{constructor(t,s,i){super(),this.z6=t,this.Aa=s,this.Da=i,this.B6=_I.Wn(_I.Lu)}Yn(){this.B6.Yn(),this.B6=null,this.z6=null}Du(){return this.B6.Du()}J6(t){this.B6.zu(t)}Zf(t){this.B6.Nu(t)}q6(t){_I.On(t,this.B6.Bu())}}}{const EI=self.Gs,AI=1e-6,DI=2;EI.TYt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new EI.Rect,this.vYt=2,this.xYt=null,this.bYt=0,this.CYt=0,this.IYt=0,this.GYt=0,this._Yt=0,this.Tt=0,this.EYt=1,this.AYt=0,this.DYt=1,this.NYt=0}OYt(){return this.vYt<1.000001}zf(){this.vYt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.vYt=2,this.xYt=null,this.bYt=0,this.CYt=0,this.IYt=0,this.GYt=0,this._Yt=0,this.Tt=0,this.EYt=1,this.AYt=0,this.DYt=1,this.NYt=0,this}PYt(){if(!1===this.OYt())return;const t=this.dx*this.vYt,s=this.dy*this.vYt,i=EI.sr(t,s),e=t/i,n=s/i;this.Tt=i-AI,this.GYt=this.x1+e*this.Tt,this._Yt=this.y1+n*this.Tt,this.bYt=Math.atan2(this.IYt,this.CYt)+Math.PI/2,this.EYt=Math.cos(this.bYt),this.AYt=Math.sin(this.bYt);const r=e*this.EYt+n*this.AYt;if(this.DYt=e-2*this.EYt*r,this.NYt=n-2*this.AYt*r,r>0){const t=Math.PI;this.bYt=EI.Zn(this.bYt+t),this.EYt=-this.EYt,this.AYt=-this.AYt}}RYt(t,s,i,e,n){const r=EI.Jr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.vYt&&(this.vYt=r,this.xYt=t.LX(),this.CYt=s-e,this.IYt=i-n)}yYt(t,s,i,e){const n=s+e.Ka(),r=s+e.sl(),h=i+e.tl(),o=i+e.il();this.RYt(t,n,h,r,h),this.RYt(t,r,h,r,o),this.RYt(t,r,o,n,o),this.RYt(t,n,o,n,h)}gYt(t,s){const i=s.jr(),e=s.zr(),n=s.Br(),r=s.Ur(),h=s.$r(),o=s.Vr(),a=s.Wr(),l=s.Yr();this.RYt(t,i,e,n,r),this.RYt(t,n,r,h,o),this.RYt(t,h,o,a,l),this.RYt(t,a,l,i,e)}mYt(t,s,i,e){const n=e.pu();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.RYt(t,o,a,l,u)}}}}{const NI=self.Gs;NI.XWt=class{constructor(){this.LYt=new Map}Yn(){for(const t of this.LYt.values())t.FYt.Au();this.LYt.clear()}kYt(t){let s=this.LYt.get(t);return void 0===s&&(s={Lq:null,FYt:new NI._u},this.LYt.set(t,s)),s}Fq(t){const s=this.kYt(t);return null===s.Lq&&(s.Lq=t.$q()),s.Lq}gX(t,s,i,e){if(0!==e)return t.gX(s,i,e);const n=this.kYt(t);let r=n.FYt.Ys(s,i);return void 0===r&&(r=t.gX(s,i,e),n.FYt.Set(s,i,r)),r}}}{const OI=self.Gs,PI=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),RI=new Set(["high","low"]),LI=self.ls,FI=LI.ds,kI=LI.ws,jI=FI.create(),zI=300,BI=200,UI=120,$I=8,VI=OI.Wn(OI.El),WI=OI.Wn(OI.Rect),YI=3e3,QI=200,JI=300;OI.jYt=class extends OI.$n{constructor(t){super(),this.jc=t,this.zYt=[],this.BYt=!1,this.UYt=null,this.$Yt=null,this.VYt=null,this.WYt="high-performance",this.YYt=!1,this.QYt="auto",this.JYt=0,this.HYt=0,this.qYt="",this.XYt=0,this.ZYt=0,this.KYt=0,this.tQt=0,this.sQt=0,this.iQt=0,this.yM="normalized",this.eQt=0,this.nQt=1,this.rQt=1e4,this.QM=!0,this.hQt=0,this.VU=0,this.WU=0,this.oQt="letterbox-scale",this.aQt="letterbox-scale",this.lQt=0,this.uQt=0,this.cQt=FI.create(),this.fQt="high",this.dQt=this.fQt,this.pQt=!1,this.mQt=[],this.gQt=new Set,this.yQt=self.C3_Shaders,this.wQt=OI.Wn(OI.qw.JB,{VB:()=>[this._tt(),this.Ett()],WB:()=>this.MQt(),YB:t=>this.SQt(t),getTime:()=>this.yQ().PW(),QB:()=>this.yQ().WY()}),this.TQt=0,this.vQt=0,this.xQt=NaN,this.bQt=null,this.CQt=new Map,this.IQt=NaN,this.GQt=new Map,this._Qt="",this.EQt=1,this.AQt=OI.Wn(OI.Rect),this.DQt="",this.NQt=null,this.OQt=null,this.PQt=0,this.RQt=0,this.LQt=-1,this.FQt=0,this.kQt=t=>this.FQt=t.progress,this.jQt=null,this.zQt={BQt:null,UQt:null,$Qt:null},this.VQt=0,this.WQt=0,this.YQt=0,this.QQt="fade-in",this.JQt=null,this.HQt=new Promise(t=>this.JQt=t)}qQt(t){this.WYt=t}XQt(t){this.BYt=!!t}ZQt(t){this.yM=t}KQt(){return this.yM}tJt(t){this.eQt=t}sJt(t,s){this.nQt=t,this.rQt=s}iJt(t){this.YYt=!!t}eJt(t){this.QYt=t}async co(t){let s=t.canvas;this.zYt.push({canvas:s,nJt:null}),this.jc.cZ("runtime","window-resize",t=>this.rJt(t)),this.jc.cZ("runtime","fullscreenchange",t=>this.hJt(t)),this.jc.cZ("runtime","fullscreenerror",t=>this.oJt(t)),s.addEventListener("webglcontextlost",t=>this.aJt(t)),s.addEventListener("webglcontextrestored",t=>this.lJt(t)),this.pQt=!!t.isFullscreen,this.qYt=t.cssDisplayMode;const i=navigator.gpu&&this.BYt;let e=!1;if(i)try{await this.uJt(!0)}catch(t){this.cJt("WebGPU",t),this.$Yt=null}if(!this.Tv())try{await this.fJt(!0)}catch(t){this.cJt("WebGL",t),this.UYt=null}if(this.Tv()||(e=!0),!this.Tv()&&i)try{await this.uJt(!1)}catch(t){this.cJt("WebGPU",t),this.$Yt=null}if(!this.Tv())try{await this.fJt(!1)}catch(t){this.cJt("WebGL",t),this.UYt=null}const n=this.Tv();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.VT(e),this.$Yt&&(this.$Yt.YL=()=>this.dJt(),this.$Yt.QL=()=>this.pJt()),"normalized"===this.yM?n.lS():(n.uS(),n.oS(this.eQt)),this.tD(t.windowInnerWidth,t.windowInnerHeight,!0),await this.fWt()}cJt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async uJt(t){const s={uM:this.nQt,cM:this.rQt};let i=!0;"no"===this.QYt?i=!1:"auto"===this.QYt&&(i=OI.Zs.hi);let e="nearest";this.jc.mJt()&&"nearest"!==this.jc.EB()&&(e="bilinear");const n={powerPreference:this.WYt,depth:this.jc.O9(),failIfMajorPerformanceCaveat:t,HP:this.jc.Ftt(),QP:this.jc.mJt(),JP:e,uN:this.jc.gJt(),qP:i};this.$Yt=OI.Wn(OI.qw.XP,s),await this.$Yt.XC(this.zYt[0].canvas,n)}async fJt(t){const s={alpha:!0,powerPreference:this.WYt,lN:"xbox-uwp-webview2"!==this.jc.sJ(),depth:this.jc.O9(),uN:this.jc.gJt(),failIfMajorPerformanceCaveat:t,uM:this.nQt,cM:this.rQt};this.YYt&&(s.cN=1),this.UYt=OI.Wn(OI.qw.pN,this.zYt[0].canvas,s),await this.UYt.XM()}async yJt(){if(this.yQt){const t=[];for(const[s,i]of Object.entries(this.yQt)){i.src=i.wJt;const e=OI.qw.xR.SG(this.$Yt.nI());t.push(this.$Yt.SO(Object.assign({JC:e,name:s},i)))}await Promise.all(t)}}async MJt(){if(this.yQt){const t=[];for(const[s,i]of Object.entries(this.yQt)){let e;if(i.SJt&&this.UYt.Fb()>=2)i.src=i.SJt,e=OI.qw.YC.TG();else{if(!i.TJt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.TJt,e=OI.qw.YC.SG()}t.push(this.UYt.SO(Object.assign({JC:e,name:s},i)))}await Promise.all(t),this.UYt.TO(),this.UYt.TS()}this.UYt.LP()&&(this.bQt=OI.Wn(OI.qw.KD,this.UYt))}async fWt(){this.$Yt?await this.yJt():this.UYt&&await this.MJt();const t=this.Tv();t.UT(this.QM),t.LP()&&(this.xQt=0);for(const s of this.jc.vJt()){for(const i of s.UH())i.fWt(t);s.fWt(t),s.P0()}this.VYt=new self.Y3(this.jc,t)}Yn(){this.jc=null,this.UYt=null,this.zYt.length=0}QV(){return this.jc.QV()}rJt(t){const s=this.jc;if(s.xJt())return;const i=t.devicePixelRatio;this.QV()&&(self.devicePixelRatio=i),s.bJt(i),this.pQt=!!t.isFullscreen,this.qYt=t.cssDisplayMode,this.tD(t.innerWidth,t.innerHeight),s.WY();const e=new OI.Event("window-resize");e.data=t,s.Mf().Ef(e);const n=new OI.Event("resize");n.CJt=this.cJ(),n.IJt=this.dJ(),n.GJt=this.mJ(),n._Jt=this.yJ(),s.i6(n),this.jc.RY()?.ust(),s.gZ()&&(s.iCt()||self.yZ.EJt())&&s.v$()}hJt(t){this.pQt=!!t.isFullscreen,this.tD(t.innerWidth,t.innerHeight,!0),this.jc.WY()}oJt(t){this.pQt=!!t.isFullscreen,this.tD(t.innerWidth,t.innerHeight,!0),this.jc.WY()}tD(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.JYt===t&&this.HYt===s&&!i)return;this.JYt=t,this.HYt=s;const e=this.AJt();"letterbox-scale"===e?this.DJt(t,s):"letterbox-integer-scale"===e?this.NJt(t,s):"off"===e?this.OJt(t,s):this.PJt(t,s),this.RJt(e);for(const{canvas:t}of this.zYt)t.width=this.KYt,t.height=this.tQt;this.jc.Uc("canvas","update-size",{marginLeft:this.sQt,marginTop:this.iQt,styleWidth:this.XYt,styleHeight:this.ZYt,displayScale:this.Y2()});const n=this.Tv();n.tD(this.KYt,this.tQt,!0);for(const t of this.mQt)n.AP(t);OI.Sh(this.mQt),this.LJt();const r=this.jc.gY();r.Zet(),r.Ket()}LJt(){this.Tv().fS(this.cQt,this._tt()/this.Ett())}Att(){return this.cQt}DJt(t,s){const i=this.jc.wJ(),e=this.jc.HV(),n=this.jc.XV(),r=e/n;if(t/s>r){const i=s*r;this.XYt=Math.round(i),this.ZYt=s,this.sQt=Math.floor((t-this.XYt)/2),this.iQt=0}else{const i=t/r;this.XYt=t,this.ZYt=Math.round(i),this.sQt=0,this.iQt=Math.floor((s-this.ZYt)/2)}this.KYt=Math.round(this.XYt*i),this.tQt=Math.round(this.ZYt*i),this.jc.FJt(e,n)}NJt(t,s){const i=this.jc.wJ();1!==i&&(t+=1,s+=1);const e=this.jc.HV(),n=this.jc.XV(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.KYt=Math.round(e*h),this.tQt=Math.round(n*h),this.XYt=this.KYt/i,this.ZYt=this.tQt/i,this.sQt=Math.max(Math.floor((t-this.XYt)/2),0),this.iQt=Math.max(Math.floor((s-this.ZYt)/2),0),this.jc.FJt(e,n)}PJt(t,s){const i=this.jc.wJ();this.XYt=t,this.ZYt=s,this.KYt=Math.round(this.XYt*i),this.tQt=Math.round(this.ZYt*i),this.sQt=0,this.iQt=0;const e=this.Y2();this.jc.FJt(this.XYt/e,this.ZYt/e)}OJt(t,s){const i=this.jc.wJ();this.XYt=this.jc.x9(),this.ZYt=this.jc.b9(),this.KYt=Math.round(this.XYt*i),this.tQt=Math.round(this.ZYt*i),this.kJt()?(this.sQt=Math.floor((t-this.XYt)/2),this.iQt=Math.floor((s-this.ZYt)/2)):(this.sQt=0,this.iQt=0),this.jc.FJt(this.jc.x9(),this.jc.b9())}RJt(t){if("high"===this.fQt)this.VU=this.KYt,this.WU=this.tQt,this.dQt="high";else{let s,i;if("off"===this.AJt()?(s=this.jc.x9(),i=this.jc.b9()):(s=this.jc.HV(),i=this.jc.XV()),this.KYt<s||this.tQt<i)this.VU=this.KYt,this.WU=this.tQt,this.dQt="high";else if(this.VU=s,this.WU=i,this.dQt="low","scale-inner"===t){const t=s/i,e=this.JYt/this.HYt;e<t?this.VU=this.WU*e:e>t&&(this.WU=this.VU/e)}else if("scale-outer"===t){const t=s/i,e=this.JYt/this.HYt;e>t?this.VU=this.WU*e:e<t&&(this.WU=this.VU/e)}}}yQ(){return this.jc}jJt(){return this.zYt[0].canvas}o7(){return this.wQt}kJt(){return this.pQt}zJt(){return this.qYt}BJt(t){if(!PI.has(t))throw new Error("invalid fullscreen mode");this.oQt=t;const s=this.jc.gY();s.Zet(),s.Ket()}W2(){return this.oQt}UJt(t){if(!PI.has(t))throw new Error("invalid fullscreen mode");this.aQt=t;const s=this.jc.gY();s.Zet(),s.Ket()}$Jt(){return this.aQt}AJt(){return this.kJt()?this.$Jt():this.W2()}VJt(t){if(!RI.has(t))throw new Error("invalid fullscreen scaling quality");this.fQt=t,this.jc.gY().Zet()}WJt(){return this.fQt}ktt(){return this.dQt}static YJt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}A2(){return this.JYt}D2(){return this.HYt}_tt(){return this.VU}Ett(){return this.WU}UT(t){this.QM=!!t}QJt(){return this.QM}JJt(t){this.hQt=t}N6(){return this.hQt}HJt(){return this.Tv().AD()}aJt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.mQt=[],this.gQt.clear(),this.wQt.Wv(),this.UYt.Wv(),this.jc.Fit()}dJt(){console.log("[Construct] WebGPU device lost"),this.mQt=[],this.gQt.clear(),this.wQt.Wv(),this.jc.Fit()}async lJt(t){await this.UYt.Yv(),await this.fWt(),await this.jc.qJt(),console.log("[Construct] WebGL context restored")}async pJt(){await this.fWt(),await this.jc.qJt(),console.log("[Construct] WebGPU device restored")}XJt(){return this.UYt}ZJt(){return this.$Yt}Tv(){return this.$Yt||this.UYt}GY(){return this.VYt}eJ(){let t="";return t=this.jc.ZJt()?"webgpu":"webgl"+this.jc.XJt().Fb(),this.jc.Tv().WT()&&(t+="-software"),t}rJ(){return this.jc.ZJt()?this.jc.ZJt().Uj():this.jc.XJt().$P()}bX(){return"low"===this.dQt?1/this.jc.wJ():this.Y2()}Y2(){const t=this.AJt();if("off"===t||"crop"===t)return 1;const s=this.jc.HV(),i=this.jc.XV(),e=s/i,n=this.KYt/this.tQt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.ZYt/i:this.XYt/s}ast(){return"low"===this.ktt()?1:this.Y2()}hst(){return"low"===this.ktt()?1:this.jc.wJ()}KJt(t,s){this.lQt=t,this.uQt=s}z4(t,s,i,e=!0){s=s||this.VU,i=i||this.WU;const n=s/2+this.lQt,r=i/2+this.uQt;if(e){let e=this.Att();s===this.VU&&i===this.WU||(t.fS(jI,s/i),e=jI),t.xO(e)}const h=t.gS(n,r,t.KM(i),n,r,0,i);t.EO(h)}tHt(t,s=!0){const i=this.cJ(),e=this.dJ(),n=i/2,r=e/2;s&&t.xO(this.Att());const h=t.gS(n,r,t.KM(e),n,r,0,e);t.EO(h)}mJ(){return this.KYt}yJ(){return this.tQt}cJ(){return this.XYt}dJ(){return this.ZYt}oJ(){return this.sQt}lJ(){return this.iQt}Sit(){return this.zYt.length}sHt(){return"undefined"!=typeof OffscreenCanvas&&this.jJt()instanceof OffscreenCanvas&&("Chromium"!==OI.Zs.ni||OI.Zs.ei>=124)}async Uit(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.zYt.length===t)return;const i={count:t,layersDomState:this.jc.gY().dY().t9().filter(t=>t.zq()).map(t=>t.ett()),immediate:s,marginLeft:this.sQt,marginTop:this.iQt,styleWidth:this.XYt,styleHeight:this.ZYt};let e;if(e=this.QV()?await this.jc.KY("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.zYt.length)this.zYt.length=t;else for(const t of e.addedCanvases){t.width=this.KYt,t.height=this.tQt;const s=this.sHt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.zYt.push({canvas:t,nJt:i})}this.jc.WY()}Oet(t){if(t>=this.zYt.length)return;const s=this.jJt(),i=this.zYt[t].nJt;this.sHt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}jtt(t){t.depth=this.jc.O9();const s=this.mQt,i=s.findIndex(s=>s.zC(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.Tv().CP(t),this.gQt.add(e),e}l7(t){if(!this.gQt.has(t))throw new Error("render target not in use");this.gQt.delete(t),this.mQt.push(t)}MQt(){const t={gb:this.jc.EB()};return"low"===this.ktt()&&(t.width=this._tt(),t.height=this.Ett()),this.jtt(t)}SQt(t){this.l7(t)}*iHt(){for(const t of this.jc.gY().Het())for(const s of t.rq()){const t=this.CQt.get(s);t&&(yield t)}}Ptt(t){if(!this.Tv().LP())return null;let s=this.CQt.get(t);return s||(s={LZ:t,name:t.Ac(),eHt:OI.Wn(OI.qw.KD,this.UYt),nHt:0,rHt:0,hHt:0},this.CQt.set(t,s)),s.eHt}oHt(){const t=this.Tv();if(t.LP()&&0===this.vQt){this.vQt=t.zT(),this.IQt=NaN;for(const t of this.iHt())t.nHt=NaN}}aHt(){this.UYt&&this.UYt.LP()&&this.lHt(),this.$Yt&&this.$Yt.LP()&&this.uHt()}lHt(){if(isNaN(this.IQt)&&(this.IQt=this.bQt.hN(this.TQt,this.vQt),!isNaN(this.IQt))){if(this.jc.gZ())for(const t of this.iHt())if(t.nHt=t.eHt.hN(this.TQt,this.vQt),isNaN(t.nHt))return;if(this.bQt.oN(this.vQt),this.xQt=Math.min(this.IQt,1),this.jc.gZ()){const t=new Map;for(const s of this.iHt())s.eHt.oN(this.vQt),s.rHt=Math.min(s.nHt,1),t.set(s.LZ,s.rHt);for(const s of this.iHt()){const i=s.LZ,e=(t.get(i)||0)-i.Eq().reduce((s,i)=>s+(t.get(i)||0),0);s.hHt=OI.Xn(e,0,1)}const s=this.jc.dY(),i=this.xQt-s.t9().reduce((s,i)=>s+(t.get(i)||0),0);self.yZ.cHt(OI.Xn(i,0,1),this.xQt,[...this.iHt()])}this.TQt=this.vQt,this.vQt=0}}fHt(){return this.bQt}uHt(){if(0===this.vQt)return;for(let t=this.TQt;t<this.vQt;++t){const s=this.GQt.get(t);if(s&&!s.UD())return}const t=this.jc.dY(),s=OI.xo(t.pit()+1,0);let i=0;for(let t=this.TQt;t<this.vQt;++t){const e=this.GQt.get(t);if(!e)continue;const n=e.$D();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.xQt=OI.Xn(i,0,1),this.jc.gZ()){const i=t.rq(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.Dq()].reduce((t,s)=>t+(e.get(s)||0),0);r.set(t,i),n.push({name:t.Ac(),hHt:OI.Xn(s,0,1),rHt:OI.Xn(i,0,1)})}const h=this.xQt-t.t9().reduce((t,s)=>t+(r.get(s)||0),0);self.yZ.cHt(OI.Xn(h,0,1),this.xQt,n)}for(let t=this.TQt;t<this.vQt;++t)this.GQt.delete(t);this.TQt=this.vQt,this.vQt=0}dHt(t){this.GQt.set(this.$Yt.zT(),t)}HW(){return this.xQt}rQ(t,s,i,e,n,r){return this._Qt=t,this.EQt=s,this.AQt.Wa(i,e,n,r),this.NQt||(this.NQt=new Promise(t=>{this.OQt=t})),this.NQt}pHt(){if(!this._Qt)return;let t=this.jJt();const s=this.AQt,i=OI.Xn(Math.floor(s.Ka()),0,t.width),e=OI.Xn(Math.floor(s.tl()),0,t.height);let n=s.width();n=0===n?t.width-i:OI.Xn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:OI.Xn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=OI.co(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}OI.fo(t,this._Qt,this.EQt).then(t=>{this.DQt&&URL.revokeObjectURL(this.DQt),this.DQt=URL.createObjectURL(t),this.NQt=null,this.OQt(t)}),this._Qt="",this.EQt=1}mHt(){return this.DQt}gHt(t){t?this.PQt++:this.PQt--}yHt(){return this.PQt>0}wHt(t){const s=this.Tv();if(2===t)this.jQt=OI.Wn(OI.qw.ZT,this.Tv()),this.jQt._A("Arial"),this.jQt.EA(16),this.jQt.$A("center"),this.jQt.WA("center"),this.jQt.tD(300,200);else if(0===t){const t=this.jc.MHt();t&&t.A4(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.SHt("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.QQt?s.CC(t):this.zQt.BQt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.THt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.QQt?s.CC(t):this.zQt.UQt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.THt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.QQt?s.CC(t):this.zQt.$Qt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async SHt(t){t=new URL(t,this.jc.vHt()).toString();const s=await OI.no(t),i=await this.jc.xHt(s,2048,2048);return await this.Tv().bP(i,{Sb:"high"})}async THt(t){t=new URL(t,this.jc.vHt()).toString();const s=await OI.no(t);return await this.Tv().bP(s,{Sb:"high"})}bHt(){this.jc.Uc("runtime","hide-cordova-splash")}CHt(){this.RQt=Date.now(),this.jc.Mf().addEventListener("loadingprogress",this.kQt),this.LQt=requestAnimationFrame(()=>this.IHt()),3!==this.jc.GHt()&&this.bHt()}async _Ht(){const t=this.Tv();this.FQt=1;const s=this.jc.GHt();4===s&&await this.HQt,this.JQt=null,this.HQt=null,-1!==this.LQt&&(cancelAnimationFrame(this.LQt),this.LQt=-1),this.jc.Mf().removeEventListener("loadingprogress",this.kQt),this.kQt=null,this.jQt&&(this.jQt.Yn(),this.jQt=null),this.jc.EHt(),t.pP(),this.zQt.BQt&&(t.CC(this.zQt.BQt),this.zQt.BQt=null),this.zQt.UQt&&(t.CC(this.zQt.UQt),this.zQt.UQt=null),this.zQt.$Qt&&(t.CC(this.zQt.$Qt),this.zQt.$Qt=null),t.dP(0,0,0,0),t.kT(),this.QQt="done",this.TQt=t.zT(),3===s&&this.bHt()}IHt(){if(-1===this.LQt)return;const t=this.Tv();t.pP(),this.LQt=-1;const s=this.jc.EV().s6(),i=this.jc.GHt();if(3!==i&&(this.tHt(t),t.dP(0,0,0,0),t.FO(),t.TS(),t.jO(null)),0===i)this.AHt(s);else if(1===i)this.DHt(s,120,0);else if(2===i)this.NHt(s);else if(3===i)OI.gh();else{if(4!==i)throw new Error("invalid loader style");this.OHt(s)}t.kT(),this.LQt=requestAnimationFrame(()=>this.IHt())}NHt(t){t?this.jQt.UA(1,0,0):this.jQt.UA(.6,.6,.6),this.jQt.$c(Math.round(100*this.FQt)+"%");const s=this.XYt/2,i=this.ZYt/2;VI.kl(s-150,i-100,s+150,i+100);const e=this.Tv();e.jO(this.jQt.DC()),e.oT(VI,this.jQt.ND())}DHt(t,s,i){const e=this.Tv();e.GS(),t?e.RO(1,0,0,1):e.RO(.118,.565,1,1);const n=this.XYt/2,r=this.ZYt/2,h=s/2;WI.Wa(n-h,r-4+i,Math.floor(s*this.FQt),8),e.Rect(WI),WI.Wa(n-h,r-4+i,s,8),WI.offset(-.5,-.5),WI.fl(.5,.5),e.RO(0,0,0,1),e.fT(WI),WI.fl(1,1),e.RO(1,1,1,1),e.fT(WI)}AHt(t){const s=this.Tv(),i=this.jc.MHt();if(!i)return void this.DHt(t,120,0);const e=i.DC();if(!e)return void this.DHt(t,120,0);const n=e.xy(),r=e.Cy(),h=this.XYt/2,o=this.ZYt/2,a=n/2,l=r/2;VI.kl(h-a,o-l,h+a,o+l),s.jO(e),s.El(VI),this.DHt(t,n,l+16)}OHt(t){const s=this.Tv(),i=this.zQt.BQt,e=this.zQt.UQt,n=this.zQt.$Qt,r=Date.now();0===this.VQt&&(this.RQt=r);const h=this.jc.PHt()||this.jc.RHt()&&!this.jc.LHt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.QQt?l=Math.min((r-this.RQt)/300,1):"fade-out"===this.QQt&&(l=Math.max(1-(r-this.YQt)/300,0)),s.GS(),s.RO(.231*l,.251*l,.271*l,l),WI.set(0,0,this.XYt,this.ZYt),s.Rect(WI);const u=Math.ceil(this.XYt),c=Math.ceil(this.ZYt);let f,d;this.ZYt>256?(s.RO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),WI.Wa(0,.8*c-d/2,f,d),s.Rect(WI),t?s.RO(l,0,0,l):s.RO(.161*l,.953*l,.816*l,l),f=u*this.FQt,WI.Wa(.5*u-f/2,.8*c-d/2,f,d),s.Rect(WI),s.RO(l,l,l,l),s.TS(),e&&(f=1.5*OI.Xn(.22*c,105,.6*u),d=f/8,WI.Wa(.5*u-f/2,.2*c-d/2,f,d),s.jO(e),s.Rect(WI)),i&&(f=Math.min(.395*c,.95*u),d=f,WI.Wa(.5*u-f/2,.485*c-d/2,f,d),s.jO(i),s.Rect(WI)),n&&(f=1.5*OI.Xn(.22*c,105,.6*u),d=f/8,WI.Wa(.5*u-f/2,.868*c-d/2,f,d),s.jO(n),s.Rect(WI))):(s.RO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),WI.Wa(0,.85*c-d/2,f,d),s.Rect(WI),t?s.RO(l,0,0,l):s.RO(.161*l,.953*l,.816*l,l),f=u*this.FQt,WI.Wa(.5*u-f/2,.85*c-d/2,f,d),s.Rect(WI),s.RO(l,l,l,l),s.TS(),i&&(f=.55*c,d=f,WI.Wa(.5*u-f/2,.45*c-d/2,f,d),s.jO(i),s.Rect(WI))),this.VQt++,"fade-in"===this.QQt&&r-this.RQt>=300&&this.VQt>=2&&(this.QQt="wait",this.WQt=r),"wait"===this.QQt&&r-this.WQt>=a&&this.FQt>=1&&(this.QQt="fade-out",this.YQt=r),("fade-out"===this.QQt&&r-this.YQt>=300+o||h&&this.FQt>=1&&r-this.RQt<500)&&this.JQt()}}}{const HI=self.Gs,qI=self.yZ,XI=self.assert,ZI=self.n3,KI={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let tG=!0;HI.FHt=class extends HI.$n{constructor(t){t=Object.assign({},KI,t),super(),this.kHt=t.messagePort,this.jHt=t.runtimeBaseUrl,this.zHt=t.previewUrl,this.BHt=!!t.headless,this.UHt=!!t.hasDom,this.$Ht=!!t.isInWorker,tG=t.ife,this.VHt=!!t.useAudio,this.WHt=t.exportType,this.o5=!!t.isiOSCordova,this.YHt=!!t.isiOSWebView,this.QHt=!!t.isWindowsWebView2,this.JHt=!!t.isAnyWebView2Wrapper,this.HHt=!!t.isFBInstantAvailable,this.qHt=!("preview"!==this.WHt||!t.isDebug),this.XHt=this.qHt,this.ZHt=this.qHt,this.KHt=0,this.tqt=[],this.sqt=[],this.iqt=!1,this.eqt="",this.nqt="",this.rqt="",this.hqt="",this.oqt=0,this.aqt=0,this.lqt=0,this.KU=self.devicePixelRatio,this.uqt=0,this.cqt=0,this.oR=0,this.aR=0,this.fqt=0,this.dqt=!1,this.Nw=!0,this.pqt=!1,this.mqt=!1,this.gqt=!1,this.yqt=null,this.M6=HI.Wn(HI.n5,this,t),this.Cst=HI.Wn(HI.Bet,this),this.Ivt=HI.Wn(HI.bxt,this),this.wqt=HI.Wn(HI.xJ,this,t.wrapperComponentIds),this.Mqt=HI.Wn(HI.EWt,this),this.pot=HI.Wn(HI.tnt,this),this.Sqt=HI.Wn(HI.Ywt,this),this.Tqt=HI.Wn(HI.Jwt,this),this.aMt=HI.Wn(HI.iMt,this),this.Gw=HI.Wn(HI.pw,{yw:t=>this.vqt(t),Mw:t=>this.xqt(t)}),this.bqt=new Map,this.Cqt=[],this.Iqt=new Map,this.Gqt=new Map,this._qt=0,this.Eqt=[],this.Aqt=new Set,this.Dqt=[],this.Nqt=[],this.Oqt=new Map,this.Pqt=!1,this.Rqt=!1,this.Lqt=0,this.Fqt=0,this.kqt=new Map,this.jqt=new Set,this.zqt=new Set,this.Bqt=[],this.Uqt=[],this.$qt=null,this.Vqt=!1,this.Wqt="vsync",this.Eb="trilinear",this.Yqt=!1,this.Qqt=!0,this.Jqt=!1,this.Hqt=!1,this.qqt=null,this.Xqt={Zqt:t=>{this.LQt=-1,this.Kqt=-1,this.Irt(t)},tXt:t=>{this.Kqt=-1,this.Irt(t,!1,"skip-render")},sXt:()=>{this.LQt=-1,this.v$()}},this.LQt=-1,this.Kqt=-1,this.iXt=0,this.eXt=0,this.nXt=!1,this.rXt=!1,this.hXt=!1,this.oXt=!0,this.aXt=!0,this.lXt=!1,this.uXt=0,this.cXt=new HI.Wd(1),this.fXt=()=>Math.random(),this.dXt=0,this.pXt=0,this.mXt=0,this.gXt=0,this.yXt=0,this.sBt=1,this.wXt=1/30,this.MXt=0,this.SXt=HI.Wn(HI.td),this.TXt=HI.Wn(HI.td),this.vXt=HI.Wn(HI.td),this.xXt=new Map,this.bXt=-1,this.CXt=0,this.IXt=0,this.GXt=-1,this._Xt=0,this.EXt=0,this.AXt=0,this.DXt=!1,this.NXt="",this.OXt=!1,this.PXt="",this.CZ=null,this.RXt="",this.LXt=null,this.FXt=null,this.rjt=HI.Wn(HI.Event.Mf),this.kXt=new Map,this.jXt=new Map,this.zXt=0,this.BXt=!1,this.UXt=!1,this.$Xt=!1,this.VXt=[],this.WXt={pretick:HI.Wn(HI.Event,"pretick",!1),tick:HI.Wn(HI.Event,"tick",!1),tick2:HI.Wn(HI.Event,"tick2",!1),instancecreate:HI.Wn(HI.Event,"instancecreate",!1),instancedestroy:HI.Wn(HI.Event,"instancedestroy",!1),beforelayoutchange:HI.Wn(HI.Event,"beforelayoutchange",!1),layoutchange:HI.Wn(HI.Event,"layoutchange",!1),beforerender:HI.Wn(HI.Event,"beforerender",!1),afterrender:HI.Wn(HI.Event,"afterrender",!1)},this.WXt.instancecreate.G0=null,this.WXt.instancedestroy.G0=null,this.M7=HI.Wn(HI.Event.Mf),this.YXt=null;const s=(t,s)=>HI.Kzt.KVt(this,t,s);this.QXt=HI.Wn(HI.ud,s),this.JXt=HI.Wn(HI.ud,s),this.HXt=HI.Wn(HI.ud,s),this.qXt=HI.Wn(HI.XXt,this,t.jobScheduler),t.canvas&&(this.$qt=HI.Wn(HI.jYt,this)),this.kHt.onmessage=t=>this._OnMessageFromDOM(t.data),this.cZ("runtime","visibilitychange",t=>this.ZXt(t)),this.cZ("runtime","wrapper-extension-message",t=>this.KXt(t)),this.cZ("runtime","get-remote-preview-status-info",()=>this.tZt()),this.cZ("runtime","js-invoke-function",t=>this.Zxt(t)),this.cZ("runtime","go-to-last-error-script",self.goToLastErrorScript),this.cZ("runtime","offline-audio-render-completed",t=>this.sZt(t)),this.rjt.addEventListener("window-blur",t=>this.iZt(t)),this.rjt.addEventListener("window-focus",()=>this.eZt()),this.pot.Ont(),this.Tqt.Ont(),this.nZt=null,this.rZt=0,this.hZt=new WeakMap,this.oZt={keyboard:null,bY:null,CY:null,IY:null},this.aZt=new WeakMap,this.lZt=[]}static XC(t){return HI.Wn(HI.FHt,t)}Yn(){HI.Sh(this.Cqt),this.Iqt.clear(),this.Gqt.clear(),this.Cst.Yn(),this.Cst=null,this.Ivt.Yn(),this.Ivt=null,this.wqt.Yn(),this.wqt=null,this.M6.Yn(),this.M6=null,this.Mqt.Yn(),this.Mqt=null,this.pot.Yn(),this.pot=null,this.Sqt.Yn(),this.Sqt=null,this.Tqt.Yn(),this.Tqt=null,this.aMt.Yn(),this.aMt=null,this.Gw.Yn(),this.Gw=null,this.$qt&&(this.$qt.Yn(),this.$qt=null),this.rjt.Yn(),this.rjt=null,this.uZt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.cZt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.fZt(t)}}cZt(t){if(!this.$Xt)return void this.VXt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new HI.Event(i);t.data=e,this.rjt.Ef(t)}if(h){const t=new HI.Event(i,!0);if(e)for(const[s,i]of Object.entries(e))t[s]=i;this.i6(t)}}const a=this.kXt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.dZt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.dZt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.dZt(o,!1,""+t)}):this.dZt(o,!0,u))}dZt(t,s,i){this.kHt.postMessage({type:"result",responseId:t,isOk:s,result:i})}fZt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.jXt.get(s);i?n.resolve(e):n.reject(e),this.jXt.delete(s)}cZ(t,s,i){let e=this.kXt.get(t);if(e||(e=new Map,this.kXt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Uc(t,s,i,e){this.kHt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}KY(t,s,i,e){const n=this.zXt++,r=new Promise((t,s)=>{this.jXt.set(n,{resolve:t,reject:s})});return this.kHt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}S3(t,s,i,e=-1){this.Uc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}pZt(t){this.Uc("runtime","send-raw-wrapper-extension-message",t)}T3(t,s,i){const e=this.zXt++,n=new Promise((t,s)=>{this.jXt.set(e,{resolve:t,reject:s})});return this.S3(t,s,i,e),n}KXt(t){if(-1!==t.asyncId){const s=t.asyncId;this.jXt.get(s).resolve(t.params),this.jXt.delete(s)}else this.cZt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}EZ(t,s,i){this.cZ("wrapper-extension:"+t,s,i)}GZ(t){return this.wqt.GZ(t)}mZt(t){if(!this.gZ())throw new Error("not in debug mode");this.Uc("runtime","post-to-debugger",t)}async nBt(t){HI.ONt(this),this.gZ()?await qI.nBt(this):self.yZ&&self.yZ.gZt(this);const s=await this.M6.eo("data.json");if(await this.yZt(s),await this.wZt(t),this.PHt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.XJt()){const t=this.XJt();console.info(`[C3 runtime] Hosted in ${this.QV()?"worker":"DOM"}, rendering with WebGL ${t.Fb()} [${t.$P()}]`)}else this.ZJt()&&console.info(`[C3 runtime] Hosted in ${this.QV()?"worker":"DOM"}, rendering with WebGPU [${this.ZJt().Uj()}]`);this.Tv().WT()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.$Xt=!0;for(const t of this.VXt)this.cZt(t);HI.Sh(this.VXt),this.$qt&&this.$qt.CHt();for(const s of t.runOnStartupFunctions)this.tqt.push(this.MZt(s));if(await Promise.all([this.M6.K5(!1),...this.tqt]),HI.Sh(this.tqt),!this.M6.s6())return this.$qt&&await this.$qt._Ht(),await this.rjt.Gf(new HI.Event("beforeruntimestart")),await this.pP(),this.kHt.postMessage({type:"runtime-ready"}),this;this.$qt&&this.$qt.bHt()}async MZt(t){try{await t(this.nZt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async yZt(t){const s=t.project;this.eqt=s[0],this.nqt=s[16],this.rqt=s[31],this.hqt=s[38],this.oqt=s[36];const i=s[39]||"loading-logo.png";this.Yqt=!!s[9],this.aqt=this.oR=s[10],this.lqt=this.aR=s[11],this.Mqt.MYt(this.aqt,this.lqt),this.uqt=this.aqt/2,this.cqt=this.lqt/2,this.Wqt=s[37],this.Vqt=!!s[40],this.Eb=s[14],this.pqt=s[15],this.mqt=s[42],this.gqt=s[17],this.dqt=!!s[18],this.fqt=s[19],this.Fqt=s[21],this.Jqt=s[22],this.rZt=s[51];const e=this.M6;e.l6(s[7],s[25]),e.P5(s[8]),e.R5(s[32]),e.F5(s[28]),e.r6(s[29]),e.j5(s[45]),0===this.fqt&&i&&(this.yqt=e.V5({url:i})),this.$qt&&(this.$qt.BJt(HI.jYt.YJt(s[12])),this.$qt.VJt(s[23]?"high":"low"),this.$qt.UT(0!==s[24]),this.$qt.qQt(s[34]),this.$qt.JJt(s[41]),this.$qt.XQt(s[13]),this.$qt.ZQt(s[30]),this.$qt.sJt(s[46],s[47]),this.$qt.tJt(s[26]),this.$qt.iJt(s[48]),this.$qt.eJt(s[50]));const n=s[43];n&&await this.SZt(n),this.TZt(),this.wqt.VFt(),this.Bqt=self.vZt();const r=s[2];for(const t of r[1])this.wqt.WFt(t);for(const t of r[0])this.wqt.$Ft(t);this.Bqt=self.vZt(),this.xZt(),this.wqt.XFt();for(const t of s[3]){const s=HI.Kwt.XC(this,this.Cqt.length,t);this.Cqt.push(s),this.Iqt.set(s.Ac().toLowerCase(),s),this.Gqt.set(s.s9(),s)}for(const t of s[4])this.Cqt[t[0]].$jt(t);for(const t of s[27]){const s=t.map(t=>this.Cqt[t]);this.Eqt.push(HI.Wn(HI.$zt,this,s))}this.bZt();for(const t of this.Cqt)t.Wjt();for(const t of s[5])this.Cst.XC(t);const h=s[1];if(h){const t=this.Cst.Vet(h);t&&this.Cst.Uet(t)}for(const t of s[35])this.Sqt.XC(t);for(const t of s[33])this.pot.XC(t);for(const t of s[44])this.Tqt.XC(t);this.Tqt.Xwt()||(this.Tqt.Yn(),this.Tqt=null);for(const t of s[49])this.aMt.XC(t);this.aMt.hMt()||(this.aMt.Yn(),this.aMt=null);for(const t of s[6])this.Ivt.XC(t);this.Ivt.sbt(),this.CZt(),HI.Sh(this.Bqt),this.XY();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Uc("runtime","set-target-orientation",{targetOrientation:o})}async SZt(t){const s=t.format;"image-sequence"===s?this.qqt=new self.IZt(this,t):"image-sequence-gif"===s?this.qqt=new self.GZt(this,t):"webm"===s?this.qqt=new self._Zt(this,t):"mp4"===s&&(this.qqt=new self.EZt(this,t)),this.Wqt="unlimited-frame",this.$qt.BJt("off"),this.KU=1,self.devicePixelRatio=1,await this.KY("runtime","set-exporting-to-video",{message:this.qqt.AZt(0),duration:this.qqt.i1()})}GHt(){return this.fqt}xJt(){return null!==this.qqt}DZt(){return this.qqt.i1()}NZt(){return this.qqt.OZt()}PZt(){return this.qqt.nBt({width:this.$qt.mJ(),height:this.$qt.yJ()})}RZt(){const t=this.iXt/this.NZt();return this.qqt.LZt(this.$qt.jJt(),t)}FZt(){this.qqt&&this.qqt.ect()}sZt(t){this.qqt.kZt(t)}jZt(){return this.qqt.kT()}RHt(){return this.HHt}Fw(){return this.Nw}eQ(t){this.tqt.push(t)}Vit(t){this.iqt=!!t}zZt(t){this.iqt&&this.sqt.push(t)}qit(){return this.sqt}Ljt(){return this._qt++}Qjt(){return this._qt}aWt(t){this.Aqt.add(t)}lWt(t){this.Aqt.delete(t)}vJt(){return this.Aqt}async wZt(t){this.$qt&&(await this.$qt.co(t),this.$qt.wHt(this.fqt))}async pP(){this.nXt=!0,this.dXt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.dqt){for(const t of this.Cqt)t.pH()||t.izt()||!t.EJ()||t.HRt();(async()=>{await this.M6.K5(!0),await s,this.Nw=!1,this.BZt()})()}else this.Nw=!1;this.M6.t6(),this.gZ()&&qI.UZt(tG);for(const t of this.Cst.MY())t.cet();this.xJt()&&await this.PZt();const i=this.Cst.$et();await i._it(null,this.Tv()),await i.kit(!0),this.CXt=performance.now(),t(),this.dqt||this.BZt(),(await this.KY("runtime","before-start-ticking")).isSuspended&&!this.xJt()?(this.uXt++,this.lXt=!0):this.Irt()}BZt(){this.aZ(HI.uQ.lQ.aQ.$Zt,null,null),this.Uc("runtime","register-sw")}sEt(t){t=Math.floor(t);const s=this.Bqt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}xZt(){for(const t of self.VZt){const s=HI.zh(Object.keys(t));this.Uqt.push(s)}}Cbt(t){t=Math.floor(t);const s=this.Uqt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}WZt(){return this.UHt}YZt(){return this.BHt}QV(){return this.$Ht}vHt(){return this.jHt}QZt(){return this.zHt}hW(){return this.Ivt}MW(){return this.Ivt.MW()}mbt(){return this.Ivt.mbt()}fW(){return this.Ivt.fW()}gbt(){return this.Ivt.gbt()}DNt(){return 0===this.mbt().Wvt()}wbt(){return this.Ivt.wbt()}XVt(){return this.wqt}n6(){return this.wqt.n6()}C7(t){if((t=Math.floor(t))<0||t>=this.Cqt.length)throw new RangeError("invalid index");return this.Cqt[t]}JZt(t){return this.Iqt.get(t.toLowerCase())||null}A3(t){return this.Gqt.get(t)||null}Ydt(t){const s=HI.xJ.VJ(t);return s?s.JJ():null}J7(){return this.Cqt}*HZt(){for(const t of this.Cqt)t.pH()||(yield*t.sH())}Mf(){return this.rjt}iW(){return this.M7}i6(t){t.runtime=this.bJ();const s=this.gZ()&&!this.Ivt.JY();s&&qI.Fet(),this.M7.dispatchEvent(t),s&&qI.ket()}net(t){return t.runtime=this.bJ(),this.M7.Gf(t)}HV(){return this.aqt}XV(){return this.lqt}qZt(t,s){if(this.aqt===t&&this.lqt===s)return;this.aqt=t,this.lqt=s;const i=this.gY();i.Zet(),i.Ket()}x9(){return this.oR}b9(){return this.aR}FJt(t,s){if(this.oR===t&&this.aR===s)return;this.oR=t,this.aR=s;const i=this.gY();i.Zet(),i.Ket()}bJt(t){this.xJt()||(this.KU=t)}wJ(){return this.KU}Ttt(){return this.uqt}vtt(){return this.cqt}_Y(){return this.$qt}_tt(){return this.$qt?this.$qt._tt():this.oR}Ett(){return this.$qt?this.$qt.Ett():this.aR}bX(){return this.$qt?this.$qt.bX():1}Y2(){return this.$qt?this.$qt.Y2():1}ast(){return this.$qt?this.$qt.ast():1}hst(){return this.$qt?this.$qt.hst():1}oJ(){return this.$qt?this.$qt.oJ():0}lJ(){return this.$qt?this.$qt.lJ():0}XZt(){return this.$qt?this.$qt.cJ():0}ZZt(){return this.$qt?this.$qt.dJ():0}W2(){return this.$qt?this.$qt.W2():"off"}jtt(t){return this.$qt?this.$qt.jtt(t):null}l7(t){this.$qt&&this.$qt.l7(t)}Ftt(){return this.pqt}mJt(){return this.mqt}gJt(){return this.gqt}HW(){return this.$qt?this.$qt.HW():NaN}OC(){return"nearest"!==this.EB()}XW(){return this.Wqt}ZW(t){this.Wqt!==t&&(this.Wqt=t,-1===this.LQt&&-1===this.Kqt||(this.KZt(),this.tKt()))}EB(){return this.Eb}zjt(){return this.dqt}MHt(){return this.yqt}EHt(){this.yqt&&(this.yqt.SA(),this.yqt.Yn(),this.yqt=null)}gY(){return this.Cst}dY(){return this.Cst.dY()}tat(){return this.pot}sKt(){return this.Sqt}kBt(){return this.Tqt}EMt(){return this.aMt}EV(){return this.M6}V5(t){return this.M6.V5(t)}IH(t,s,i,e,n,r){if(r&&this.Tqt){if(t instanceof HI.Kwt&&t.pH()){const h=t.FH(),o=Math.floor(this.fY()*h.length);return this.IH(h[o],s,i,e,n,r)}const h=this.Tqt.Zwt(t,r);if(h){const t=this.P7(h,s,!1,i,e,!1,n,void 0,n);return this.Tqt.tMt(t,r),t}}return this.P7(t,s,!1,i,e,!1,n,void 0,n)}P7(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof HI.Kwt){if(u=t,u.pH()){const t=u.FH();u=t[Math.floor(this.fY()*t.length)]}l=u.G7()}else l=t,u=this.C7(l[1]);const c=u.KJ().EJ();if(this.Nw&&c&&!u.izt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.kqt.has(l[2])?l[2]:this.Fqt++;const p=l?l[0]:null,m=HI.Wn(HI.Instance,{runtime:this,objectType:u,LZ:s,eBt:p,oBt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.kqt.set(d,m);let g=null;if(c&&(g=m.FY(),void 0!==e&&void 0!==n&&(g.sx(e),g.hx(n)),u.Ezt(!0)),s&&(a||s.R7(m,!0),s.yY().Ait(u)),this.Lqt++,u.PX()&&!i&&!r){const t=new Set;for(const s of u.Iit().kH()){if(s===u)continue;const i=this.iKt(s,g,t);if(i){const t=this.P7(i,f,!1,g?g.tx():e,g?g.nx():n,!0,!1,void 0,a);m.let(t)}else{const t=this.P7(s,f,!1,g?g.tx():e,g?g.nx():n,!0,!1,void 0,a);m.let(t)}}for(const t of m.RX()){t.let(m);for(const s of m.RX())t!==s&&t.let(s)}}if(c&&!i&&h&&this.eKt(m,p,g,s,e,n,a),u.PX()&&!i&&!r&&h)for(const t of m.RX()){const i=t.FY();if(!i)continue;const e=t.KJ(),n=t.gH().G7()[0];e.EJ()?this.eKt(t,n,i,s,i.tx(),i.nx(),a):this.eKt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.TK(),s=e-g.tx()+t.tx(),i=n-g.nx()+t.nx();t.kZ(s,i)}u.bzt();const y=l?HI.Oh(l[5]):null,w=l?l[4].map(t=>HI.Oh(t)):null,M=c&&p&&p[13];if(M&&m.mBt(),m.tzt(y,w),M){const t=p[13];m.g0().dLt(t[2],t[0],t[1])}this.Nqt.push(m),this.Pqt=!0,this.gZ()&&qI.nKt(m);const S=this.WXt.instancecreate;return S.G0=m,this.rjt.dispatchEvent(S),m}WUt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.Cst.Wet(s).jY(i).A7(e)}iKt(t,s,i){const e=s?.FBt()??[];for(const s of e){const e=this.WUt(s),n=!!s[4],r=this.C7(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}eKt(t,s,i,e,n,r,h){const o=i.dVt(),a=i.FBt();if(t.FY().pVt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.Cst.Wet(i).jY(o).A7(a);const y=this.C7(g[1]),w=t.zBt(y),M=l.has(y);if(w&&!M&&d){const s=t.BBt(y);s.FY().nBt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.FY().kZ(i,e),s.FY().pVt(p),t.EK(s,{RK:!!(1&f),FK:!!(f>>1&1),jK:!!(f>>2&1),BK:!!(f>>3&1),$K:!!(f>>4&1),XK:!!(f>>5&1),WK:!!(f>>6&1),QK:!!(f>>7&1),HK:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.P7(g,e,!1,s,i,!1,!0,t,h);o.FY().pVt(p),t.EK(o,{RK:!!(1&f),FK:!!(f>>1&1),jK:!!(f>>2&1),BK:!!(f>>3&1),$K:!!(f>>4&1),XK:!!(f>>5&1),WK:!!(f>>6&1),QK:!!(f>>7&1),HK:!!(f>>8&1)})}}}QY(t){if(this.jqt.has(t))return;const s=t.gH();let i=this.Oqt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.Oqt.set(s,i);if(this.gZ()&&qI.rKt(t),t.yBt(),this.Pqt=!0,t.PX())for(const s of t.RX())this.QY(s);for(const s of t.children())s.ZK()&&this.QY(s);if(!this.Cst.HY()&&!this.DXt){const s=this.hW();s._H(!0),t.KBt(),s._H(!1)}t.tUt(this.Cst.HY())}XY(){this.Pqt&&(this.Rqt=!0,this.hKt(),this.oKt(),this.Rqt=!1,this.Pqt=!1,this.WY())}hKt(){for(const t of this.Nqt){const s=t.gH();s.R7(t);for(const i of s.DH())i.R7(t),i.bzt()}HI.Sh(this.Nqt)}oKt(){this.rjt.ff(!0);for(const[t,s]of this.Oqt.entries())this.aKt(t,s),s.clear();this.Oqt.clear(),this.rjt.ff(!1)}aKt(t,s){for(const t of s){const s=this.WXt.instancedestroy;s.G0=t,this.rjt.dispatchEvent(s),this.kqt.delete(t.LX()),this.xXt.delete(t);const i=t.FY();i&&(i.wVt(),i.j7(),i.yBt()),this.jqt.add(t),this.Lqt--}HI.Ah(t.uH(),s),t.bzt(),this.zqt.add(t);for(const i of t.DH())HI.Ah(i.uH(),s),i.bzt(),this.zqt.add(i);if(t.KJ().EJ()){const t=new Set([...s].map(t=>t.FY().jY()));for(const i of t)i.q9(s)}}Izt(){return this.Nqt}*LOt(t){for(const s of this.Izt())t.pH()?s.gH().NNt(t)&&(yield s):s.gH()===t&&(yield s)}Kjt(){return this.Fqt++}szt(t,s){this.kqt.set(t,s)}C3(t){t=!!t,this.aXt!==t&&(this.aXt=!!t,this.aXt&&this.lXt&&(this._3(!1),this.lXt=!1))}I3(){return this.aXt}Fit(){this.rjt.dispatchEvent(HI.Wn(HI.Event,"renderercontextlost")),this._3(!0);for(const t of this.Cqt)!t.pH()&&t.ezt()&&t.Rit();const t=this.dY();t&&t.Fit(),HI.tkt.D6(),HI.Q5.D6()}async qJt(){await this.dY()._it(null,this.Tv()),this.rjt.dispatchEvent(HI.Wn(HI.Event,"renderercontextrestored")),this._3(!1),this.WY()}ZXt(t){if(!this.aXt)return;const s=t.hidden;this._3(s),this.lXt=s,s||this.WY()}iZt(t){this.PHt()&&this.Jqt&&!HI.Zs.oi&&(t.data.parentHasFocus||(this._3(!0),this.Hqt=!0))}eZt(){this.Hqt&&(this._3(!1),this.Hqt=!1)}tKt(){const t=this.Xqt;"vsync"===this.Wqt?-1===this.LQt&&(this.LQt=self.requestAnimationFrame(t.Zqt)):"unlimited-tick"===this.Wqt?(-1===this.Kqt&&(this.Kqt=HI.Wh(t.tXt)),-1===this.LQt&&(this.LQt=self.requestAnimationFrame(t.sXt))):-1===this.Kqt&&(this.Kqt=HI.Wh(t.Zqt))}KZt(){-1!==this.LQt&&(self.cancelAnimationFrame(this.LQt),this.LQt=-1),-1!==this.Kqt&&(HI.Yh(this.Kqt),this.Kqt=-1)}_W(){return this.uXt>0}_3(t){if(this.xJt())return;const s=this._W();this.uXt+=t?1:-1,this.uXt<0&&(this.uXt=0);const i=this._W();if(!s&&i)console.log("[Construct] Suspending"),this.KZt(),this.rjt.dispatchEvent(HI.Wn(HI.Event,"suspend")),this.i6(HI.Wn(HI.Event,"suspend")),this.aZ(HI.uQ.lQ.aQ.lKt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.pXt=t,this.CXt=t,this.bXt=0,this.IXt=0,this.GXt=0,this._Xt=0,this.AXt=0,this.EXt=0,this.rjt.dispatchEvent(HI.Wn(HI.Event,"resume")),this.i6(HI.Wn(HI.Event,"resume")),this.aZ(HI.uQ.lQ.aQ.uKt,null,null),this.iCt()||this.Irt(t)}}o3(t){this.QXt.zu(t)}c3(t){this.JXt.zu(t)}l3(t){this.HXt.zu(t)}a3(t){this.QXt.Zf(t)}f3(t){this.JXt.Zf(t)}u3(t){this.HXt.Zf(t)}cKt(t,s){const i=s?performance.now():0;let e;return t instanceof ZI?(e=t.wZ(),s&&qI.fKt(t.behavior,performance.now()-i)):(e=t.Irt(),s&&qI.fKt(t.x0(),performance.now()-i)),e}dKt(){const t=this.gZ();this.QXt.$d(!0);for(const s of this.QXt)this.cKt(s,t);this.QXt.$d(!1)}pKt(t,s){const i=s?performance.now():0;let e;return t instanceof ZI?(e=t.m3(),s&&qI.fKt(t.behavior,performance.now()-i)):(e=t.kFt(),s&&qI.fKt(t.x0(),performance.now()-i)),e}mKt(){const t=this.gZ();this.JXt.$d(!0);for(const s of this.JXt)this.pKt(s,t);this.JXt.$d(!1)}gKt(t,s){const i=s?performance.now():0;let e;return t instanceof ZI?(e=t.TZ(),s&&qI.fKt(t.behavior,performance.now()-i)):(e=t.PLt(),s&&qI.fKt(t.x0(),performance.now()-i)),e}yKt(){const t=this.gZ();this.HXt.$d(!0);for(const s of this.HXt)this.gKt(s,t);this.HXt.$d(!1)}*wKt(){const t=this.gZ();this.QXt.$d(!0);for(const s of this.QXt){const i=this.cKt(s,t);HI.vo(i)&&(yield*i)}this.QXt.$d(!1)}*MKt(){const t=this.gZ();this.JXt.$d(!0);for(const s of this.JXt){const i=this.pKt(s,t);HI.vo(i)&&(yield*i)}this.JXt.$d(!1)}*SKt(){const t=this.gZ();this.HXt.$d(!0);for(const s of this.HXt){const i=this.gKt(s,t);HI.vo(i)&&(yield*i)}this.HXt.$d(!1)}async Irt(t,s,i){this.hXt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.gY(),h=this._Y();if(!this.nXt||this._W()&&!s&&!e)return;const o=performance.now();this.rXt=!0,this.TKt(t||0),this.GXt++,this.vKt();const a=this.xKt();this.DOt()&&await a;const l=this.rjt._f(this.WXt.pretick);l instanceof Promise&&await l,this.i6(this.YXt.pretick);const u=this.bKt();this.DOt()&&await u,this.CKt()&&await this.IKt(),r.TY()&&await this.GKt();const c=this._Kt();this.DOt()&&await c;const f=r.dY(),d=f.Tit();let p=!1;if(-1!==d&&(f.vit(),h.Sit()!==d)){const t=this._Y().Uit(d);this.QV()&&(p=!0,await t)}this.Uc("canvas","update-html-layer-dom-state",{layersDomState:f.t9().filter(t=>t.zq()).map(t=>t.ett())}),n&&this.v$(),p&&this.Uc("canvas","cleanup-html-layers"),this.xJt()&&(await this.RZt(),this.PW()>=this.DZt())?this.jZt():(this._W()||e||this.tKt(),this.iXt++,this.eXt++,this.rXt=!1,this.EXt+=performance.now()-o)}async xKt(){const t=this.Ivt,s=this.gZ();this.XY(),t._H(!0),this.Vbt(this.dY()),s&&qI.EKt(),this.DOt()?await t.xCt():t.wCt(),s&&qI.AKt(),this.Wbt(),t._H(!1),this.XY(),t._H(!0)}async bKt(){const t=this.Ivt,s=this.gZ(),i=this.DOt(),e=this.rjt,n=this.WXt,r=this.YXt;s&&qI.EKt(),i?await this.DKt(this.wKt()):this.dKt(),i?await this.DKt(this.MKt()):this.mKt(),s&&qI.NKt(),s&&qI.EKt(),i?await this.OKt(n.tick):e.dispatchEvent(n.tick),s&&qI.PKt(),t._H(!1),this.i6(r.tick)}async _Kt(){const t=this.Ivt,s=this.rjt,i=this.WXt,e=this.YXt,n=this.gZ(),r=this.DOt();n&&qI.EKt(),r?await t.Ybt(this.Cst):t.$bt(this.Cst),n&&qI.AKt(),this.Mqt.UWt(),this.vKt(),this.oXt=!1,t._H(!0),n&&qI.EKt(),r?await this.DKt(this.SKt()):this.yKt(),n&&qI.NKt(),n&&qI.EKt(),r?await this.OKt(i.tick2):s.dispatchEvent(i.tick2),n&&qI.PKt(),t._H(!1),this.i6(e.tick2),r&&await t.eCt(),this.XY(),this.vKt()}vKt(){if(0===this.jqt.size)return;const t=this.rjt;t.ff(!0);for(const t of this.zqt)t.fCt().ivt(this.jqt);this.zqt.clear(),this.Ivt.CCt(this.jqt);for(const t of this.jqt)t.Yn();this.jqt.clear(),t.ff(!1)}async GKt(){const t=this.gY();let s=0;for(;t.TY()&&s++<10;)await this.RKt(t.Xet())}TKt(t){let s=0;this.xJt()?(s=1/this.NZt(),this.mXt=s,this.gXt=s):0!==this.pXt&&(s=Math.max(t-this.pXt,0)/1e3,s>.5&&(s=0),this.mXt=s,this.gXt=HI.Xn(s,this.MXt,this.wXt)),this.pXt=t,this.yXt=this.gXt*this.sBt,this.SXt.zu(this.yXt),this.TXt.zu(s*this.sBt),this.vXt.zu(this.gXt);for(const[t,s]of this.xXt)s.zu(this.gXt*t.zW());this.$qt&&this.$qt.aHt(),t-this.CXt>=1e3&&(this.CXt+=1e3,t-this.CXt>=1e3&&(this.CXt=t),this.IXt=this.bXt,this.bXt=0,this._Xt=this.GXt,this.GXt=0,this.AXt=Math.min(this.EXt/1e3,1),this.EXt=0,this.$qt&&this.$qt.oHt(),this.Mqt.kWt(),this.gZ()&&qI.LKt())}dBt(t,s){if(s){if(!this.xXt.has(t)){const s=HI.Wn(HI.td);s.hd(this.SXt),this.xXt.set(t,s)}}else this.xXt.delete(t)}pBt(t){const s=this.xXt.get(t);return s?s.Ys():this.PW()}async RKt(t){const s=this.rjt,i=this.gY().dY();await i.det(),i.Lit(t,this.Tv()),i===t&&this.Ivt.yet(),this.Mqt.UWt(),this.vKt(),s.dispatchEvent(this.WXt.beforelayoutchange),HI.pf.Df(!0),await t._it(i,this.Tv()),HI.pf.Df(!1),await t.kit(!1),s.dispatchEvent(this.WXt.layoutchange),this.WY(),this.oXt=!0,this.XY(),this.FZt()}WY(){this.Qqt=!0}XJt(){return this.$qt?this.$qt.XJt():null}ZJt(){return this.$qt?this.$qt.ZJt():null}Tv(){return this.$qt?this.$qt.Tv():null}v$(){const t=this.$qt;if(!t||t.HJt())return;const s=this.Tv(),i=s.LP(),e=i&&s.YT(),n=i&&s.dS();if(e&&s.vP(),!this.Qqt&&!this.xJt())return void s.BT();const r=this.Cst.dY();this.bXt++,s.pP();const h=this.gZ();h&&qI.EKt(),this.Qqt=!1;let o=null;e&&(o=t.fHt().nN(),s.RP(o));let a=null;n&&(a=s.Sk(2*(1+r.pit())),s.vk(0,1)),this.O9()&&"low"===t.ktt()?s.CO(t._tt(),t.Ett()):s.IO(),this.FKt(this.Tv(),r),o&&s.FP(o),n&&(s.bk(),this.$qt.dHt(a)),s.kT(),h&&(qI.kKt(),qI.jKt()),t&&t.pHt()}_et(t){return"low"===this._Y().ktt()||t.YT()&&(this.Ftt()||this.O9())}FKt(t,s){t.TS(),t.$O(),t.OT(),t.RO(1,1,1,1),t.IP(null),t.jO(null),t.gP(this.O9()),this.Mf().dispatchEvent(this.WXt.beforerender),this._et(t)&&s.Iet(t);const i=s.Sit();for(let e=1;e<i;++e)s.Net(t,e),t.dS()&&t.pk();this._et(t)||s.Iet(t),s.Det(t),this.Mf().dispatchEvent(this.WXt.afterrender)}aZ(t,s,i){if(!this.nXt)return!1;const e=!this.rXt&&!this.Ivt.oCt();let n=0;e&&(n=performance.now());const r=this.gZ();r&&this.R3(!1);const h=this.Ivt.qbt(this.Cst,t,s,i);if(e){const t=performance.now()-n;this.EXt+=t,r&&qI.zKt(t)}return r&&this.R3(!0),h}vLt(t,s,i){if(!this.DOt())return this.aZ(t,s,i);if(this.iCt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.rXt&&!this.Ivt.oCt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.Ivt.Kbt(this.Cst,t,s,i)}async hQ(t,s,i){if(!this.DOt())return this.aZ(t,s,i);if(!this.nXt)return!1;if(this.iCt())return this.Ivt.tCt(t,s,i);if(!this.dY())return this.Ivt.Xbt(t,s,i);const e=performance.now(),n=this.Ivt.Kbt(this.Cst,t,s,i);let r=n.next();for(;!r.done;)await this.Jbt(r.value),r=n.next();return this._W()||this.Ivt.oCt()||(await this.Ivt.eCt(),this.hXt&&!this.rXt&&this.tKt()),this.EXt+=performance.now()-e,r.value}xLt(t,s,i){const e=this.gZ();e&&this.R3(!1);const n=this.Ivt.nCt(this.Cst,t,s,i);return e&&this.R3(!0),n}bLt(t,s,i){return this.Ivt.rCt(this.Cst,t,s,i)}CLt(t){return this.cXt.zu(t)}Vbt(t){this.Dqt.push(t)}Wbt(){if(!this.Dqt.length)throw new Error("layout stack empty");this.Dqt.pop()}RY(){return this.Dqt.length?this.Dqt.at(-1):this.dY()}AW(t){return t&&-1!==t.zW()?this.gXt*t.zW():this.yXt}brt(){return this.yXt}Crt(){return this.gXt}NW(){return this.mXt}zW(){return this.sBt}BW(t){(isNaN(t)||t<0)&&(t=0),this.sBt=t}sY(t){this.MXt=Math.max(t,0)}tY(){return this.MXt}nY(t){this.wXt=Math.max(t,0)}eY(){return this.wXt}$W(){return this.IXt}WW(){return this._Xt}QW(){return this.AXt}BKt(){return this.dXt}PW(){return this.SXt.Ys()}UKt(){return this.TXt.Ys()}kW(){return this.vXt.Ys()}LW(){return this.iXt}$Kt(){return this.eXt}VKt(){return this.Lqt}LV(){return this.eqt}kV(){return this.nqt}UV(){return this.rqt}zV(){return this.hqt}VV(){return this.oqt}NY(t){if(this.DXt)throw new Error("cannot call while loading state - wait until afterload event");return this.kqt.get(t)||null}zUt(t){if(this.DXt)throw new Error("cannot call while loading state - wait until afterload event");this.kqt.delete(t)}aet(){this.kqt.clear();for(const t of this.Cqt)if(!t.pH())for(const s of t.uH())this.kqt.set(s.LX(),s)}PHt(){return"preview"===this.WHt}gZ(){return this.qHt}sJ(){return this.WHt}LHt(){return"cordova"===this.WHt}WKt(){return"Android"===HI.Zs.Ks&&("cordova"===this.WHt||"playable-ad-single-file"===this.WHt||"playable-ad-zip"===this.WHt||"instant-games"===this.WHt)}YKt(){return this.o5}QKt(){return this.YHt}iJ(){return this.QHt}JKt(){return this.JHt}NV(){return this.Mqt}ZFt(){return this.wqt.ZFt()}KFt(){return this.wqt.KFt()}O9(){return this.Vqt}HKt(){return this.Tv().iS(this.b9())}KM(t){return this.Tv().KM(t||this.b9())}qKt(){return this.oXt}hY(t){t=!!t,this.Yqt!==t&&(this.Yqt=t,this.gY().Ket(),this.WY())}oY(){return this.Yqt}XKt(t){if(!this.bqt.has(t)){const s=()=>this.ZKt(t);this.bqt.set(t,s),t.Mf().addEventListener("animationframeimagechange",s)}const s=this.Gw.Sw(t);return s.Lw()||s.kw().then(()=>this.WY()),s}ZKt(t){this.Gw.Cw(t)}vqt(t){const s=[];for(const i of t.pzt())for(const t of i.H0()){const i=t.s1();s.push({source:t,width:i.xy(),height:i.Cy(),tag:t.w1()})}return{Pw:s}}async xqt(t){const s=HI.Wn(HI.Wd),i=[],e=new Map;for(const n of t.pzt())for(const t of n.H0()){const n=t.s1().Skt();e.has(n)||(e.set(n,null),i.push(s.zu(async()=>{const t=await n.F6();e.set(n,t)})))}await Promise.all(i);const n=[];for(const i of t.pzt())for(const t of i.H0())n.push(s.zu(async()=>{const s=t.s1(),i=e.get(s.Skt()),n=await s.Tkt(i);return{zw:await createImageBitmap(n)}}));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{Pw:r}}KKt(t){this.NXt=t,this.OXt=!1}t0t(){this.NXt="",this.OXt=!0}s0t(t){this.PXt=t}bPt(t){this.CZ=t}i0t(){return this.RXt}CKt(){return!!(this.NXt||this.OXt||this.PXt||null!==this.CZ)}async IKt(){if(this.NXt&&(this.XY(),await this.e0t(this.NXt),this.n0t()),this.PXt&&(await this.r0t(this.PXt),this.n0t(),this.gZ()&&qI.h0t()),this.OXt){const t=await this.o0t();this.RXt=t,await this.hQ(HI.uQ.lQ.aQ.a0t,null),this.RXt="",this.n0t()}if(null!==this.CZ){this.XY();try{await this.l0t(this.CZ),this.RXt=this.CZ,await this.hQ(HI.uQ.lQ.aQ.u0t,null),this.RXt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.hQ(HI.uQ.lQ.aQ.c0t,null)}this.n0t()}}n0t(){this.NXt="",this.OXt=!1,this.PXt="",this.CZ=null}SJ(){return this.LXt||(this.LXt=localforage.Ii({name:"c3-localstorage-"+this.UV(),description:this.LV()})),this.LXt}f0t(){return this.FXt||(this.FXt=localforage.Ii({name:"c3-savegames-"+this.UV(),description:this.LV()})),this.FXt}async e0t(t){const s=await this.o0t();try{await this.f0t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.RXt=s,await this.hQ(HI.uQ.lQ.aQ.a0t,null),this.RXt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.hQ(HI.uQ.lQ.aQ.d0t,null)}}async r0t(t){try{const s=await this.f0t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.l0t(s),this.RXt=s,await this.hQ(HI.uQ.lQ.aQ.u0t,null),this.RXt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.hQ(HI.uQ.lQ.aQ.c0t,null)}}async o0t(){const t={c3save:!0,version:1,rt:{time:this.PW(),timeRaw:this.UKt(),walltime:this.kW(),timescale:this.zW(),tickcount:this.LW(),next_uid:this.Fqt,running_layout:this.dY().s9(),start_time_offset:Date.now()-this.dXt},types:{},layouts:{},events:this.Ivt.Mst(),timelines:this.pot.Mst(),user_script_data:null};for(const s of this.Cqt)s.pH()||s.Lzt()||(t.types[s.s9().toString()]=s.Mst());for(const s of this.Cst.MY())t.layouts[s.s9().toString()]=s.Mst();const s=this.p0t("save");return s.saveData=null,await this.net(s),t.user_script_data=s.saveData,JSON.stringify(t)}Xit(){return this.DXt}async l0t(t){const s=this.gY(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.CPt(),this.rjt.dispatchEvent(HI.Wn(HI.Event,"beforeload"));for(const t of this.HZt())t.gH().Lzt()||t.Cnt();const e=i.rt;this.SXt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.TXt.Set(e.timeRaw),this.vXt.Set(e.walltime),this.sBt=e.timescale,this.iXt=e.tickcount,this.dXt=Date.now()-e.start_time_offset;const n=e.running_layout;this.DXt=!0;let r=!1;if(n!==this.dY().s9()){const t=s.Wet(n);if(!t)return;await this.RKt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.Wet(i);n&&n.Sst(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.A3(i);!e||e.pH()||e.Lzt()||e.Sst(s,h)}for(const t of this.Cst.MY())for(const s of t.hq())s.Tst();if(this.XY(),this.aet(),this.DXt=!1,r){for(const t of this.HZt())t.Zit();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.A3(i);!e||e.pH()||e.Lzt()||e.Bzt(s)}}this.Fqt=e.next_uid,this.Ivt.Sst(i.events);for(const t of this.Cqt)if(!t.pH()&&t.PX())for(const s of t.uH()){const i=s.kX();s.jBt();for(const e of t.Iit().kH()){if(e===t)continue;const n=e.uH();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.let(n[i])}}this.pot.Sst(i.timelines),s.Zet(),s.Ket();for(const t of h)t.ZBt();this.IPt(),this.rjt.dispatchEvent(HI.Wn(HI.Event,"afterload")),this.i6(this.p0t("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.A3(s);i&&i.zzt()}const o=this.p0t("load");o.saveData=i.user_script_data,await this.net(o),this.WY()}m0t(t,s){return s.FY().aVt()-t.FY().aVt()}qVt(t,s){t.FY()&&(this.aZt.has(t)||(this.aZt.set(t,s),this.lZt.push(t)))}CPt(){this.aZt=new WeakMap,HI.Sh(this.lZt),HI.bet.t$t()}IPt(t="full",s=null){this.lZt.sort(this.m0t),s||(s={}),s.jUt=new Set;const i=this.lZt.length;for(const i of this.lZt)i.Gnt(this.aZt.get(i),t,s);for(const i of this.lZt)i.eUt(this.aZt.get(i),t,s);if(this.CPt(),i){this.XY(),this.aet();for(const t of this.Cst.MY())for(const s of t.hq())s.U7(),s.VY()}}async g0t(t){const s=t.map(t=>new URL(t,location.href).toString());this.qXt.y0t(s)}w0t(t,s){this.qXt.M0t(t,s)}S0t(t,s){this.qXt.T0t(t,s)}v0t(t,s,i,e){return this.qXt.v0t(t,s,i,null,null,e)}x0t(t,s,i,e){return this.qXt.x0t(t,s,i,e)}b0t(){return this.qXt.C0t()}AY(t,s){this.Uc("runtime","invoke-download",{url:t,filename:s})}async xHt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.QV())return(await this.KY("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async I0t(t){return this.QV()?await this.KY("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}G0t(){this.BXt||(this.BXt=!0,this.Uc("runtime","enable-device-orientation"))}_0t(){this.UXt||(this.UXt=!0,this.Uc("runtime","enable-device-motion"))}fY(){return this.fXt()}E0t(t){this.fXt=t}tZt(){const t=this.Tv();return{fps:this.$W(),tps:this.WW(),cpu:this.QW(),gpu:this.HW(),layout:this.dY()?this.dY().Ac():"",renderer:t.YT()?t.$P():t.Uj()}}iCt(){return!!this.gZ()&&qI.iCt()}Jbt(t){return this.DOt()?qI.Jbt(t):Promise.resolve()}__t(){return!!this.DOt()&&qI.A0t()}D0t(t){this.XHt=!!t,this.N0t()}O0t(){return this.XHt}DOt(){return this.ZHt}R3(t){t?this.KHt--:this.KHt++,this.N0t()}N0t(){this.ZHt=this.gZ()&&this.XHt&&0===this.KHt}QIt(){return this.gZ()&&qI.QIt()}Ott(){return this.gZ()&&this.Tv().LP()&&qI.Ott()}async DKt(t){if(t)for(const s of t)await this.Jbt(s)}OKt(t){return this.DKt(this.rjt.Af(t))}Zxt(t){return this.Ivt.Zxt(t.name,t.params)}sQ(t){if(this.QV())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}bJ(){return this.nZt}y3(){return this.rZt}p0t(t){const s=HI.Wn(HI.Event,t,!1);return s.runtime=this.nZt,s}TZt(){this.nZt=new self.IV(this),this.YXt={pretick:this.p0t("pretick"),tick:this.p0t("tick"),tick2:this.p0t("tick2")}}bZt(){const t={};for(const s of this.Cqt)t[s.Cbt()]={value:s.QJ(),enumerable:!0,writable:!1};this.nZt.eW(t)}CZt(){const t={};for(const s of this.hW().Dbt())t[s.Cbt()]=s.Ibt();this.nZt.nW(t)}xY(){return this.oZt}UJ(t,s){this.hZt.set(t,s)}lq(t){return this.hZt.get(t)}JQ(t){if(!(t instanceof self.XJ))throw new TypeError("expected IObjectClass");const s=this.lq(t);if(!(s&&s instanceof HI.Kwt))throw new Error("invalid IObjectClass");return s}oH(t){if(!(t instanceof self.CX))throw new TypeError("expected IInstance");const s=this.lq(t);if(!(s&&s instanceof HI.Instance))throw new Error("invalid IInstance");return s}LY(t){if(!(t instanceof self.c0))throw new TypeError("expected IWorldInstance");const s=this.lq(t);if(!(s&&s instanceof HI.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=HI.FHt.XC,self.C3_InitRuntime=(t,s)=>t.nBt(s)}{const sG=self.Gs;sG.XXt=class extends sG.$n{constructor(t,s){super(),this.jc=t,this.P0t=new Map,this.R0t=0,this.L0t=s.inputPort,s.outputPort.onmessage=t=>this.F0t(t),this.k0t=s.maxNumWorkers,this.j0t=1,this.z0t=!1,this.B0t=!1}C0t(){return this.k0t}y0t(t){this.L0t.postMessage({type:"_import_scripts",scripts:t})}M0t(t,s){this.L0t.postMessage({type:"_send_blob",blob:t,id:s})}T0t(t,s){this.L0t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}v0t(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.R0t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.P0t.set(h,{resolve:t,progress:e,reject:s,U0t:!1,$0t:r})});return n&&n.qf(()=>this.V0t(h)),this.L0t.postMessage(o,i),this.W0t(),a}x0t(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.R0t++,params:s,transferables:i};this.L0t.postMessage(n,i)}V0t(t){const s=this.P0t.get(t);s&&(s.U0t=!0,s.resolve=null,s.progress=null,s.reject=null,this.L0t.postMessage({type:"_cancel",jobId:t}))}F0t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.Y0t(e,s.result);break;case"progress":this.Q0t(e,s.progress);break;case"error":this.J0t(e,s.error);break;case"ready":this.H0t();break;default:throw new Error(`unknown message from worker '${i}'`)}}Y0t(t,s){const i=this.P0t.get(t);if(!i)throw new Error("invalid job ID");i.U0t||i.resolve(s),this.P0t.delete(t)}Q0t(t,s){const i=this.P0t.get(t);if(!i)throw new Error("invalid job ID");!i.U0t&&i.progress&&i.progress(s)}J0t(t,s){const i=this.P0t.get(t);if(!i)throw new Error("invalid job ID");i.U0t||i.reject(s),this.P0t.delete(t)}H0t(){this.z0t&&(this.z0t=!1,this.j0t++,this.j0t<this.k0t?this.W0t():this.L0t.postMessage({type:"_no_more_workers"}))}q0t(){let t=0;const s=[...this.P0t.values()].sort((t,s)=>(t.$0t||1/0)-(s.$0t||1/0));for(const i of s)t<(i.$0t||1/0)&&t++;return t}async W0t(){if(!(this.j0t>=this.k0t||this.z0t||this.B0t||this.q0t()<=this.j0t))try{this.z0t=!0,(await this.jc.KY("runtime","create-job-worker")).outputPort.onmessage=t=>this.F0t(t)}catch(t){this.B0t=!0,this.z0t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.j0t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.brightness={TJt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float brightness;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= front.a;\nfront.rgb += (brightness - 1.0);\nfront.rgb *= a;\ngl_FragColor = front;\n}",SJt:"",wJt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nbrightness : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar output : FragmentOutput;\noutput.color = vec4<f32>((front.rgb + (shaderParams.brightness - 1.0)) * front.a, front.a);\nreturn output;\n}",gv:!1,wv:!1,ev:0,rv:0,ov:!1,lv:!1,cv:!0,dv:!1,animated:!1,parameters:[["brightness",0,"percent"]]};{let iG=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=iG;const eG=self.Gs;let nG=null,rG="",hG="",oG=[],aG="",lG="",uG="";const cG=eG.Wn(eG.xxt);eG.uQ.lQ=class extends eG.bRt{constructor(t){super(t),this.wxt=this.jc.hW().O3(),this.evt=this.jc.hW().MW(),this.X0t=0,this.Z0t=0,this.K0t=new Map}Yn(){super.Yn()}WY(){this.jc.WY()}aZ(t){this.jc.aZ(t,null,null)}t1t(t,s){return nG&&t===rG&&s===hG||(nG=new RegExp(t,s),rG=t,hG=s),nG.lastIndex=0,nG}s1t(t,s,i){if(t===aG&&s===lG&&i===uG)return oG;const e=this.t1t(s,i);return oG=t.match(e),aG=t,lG=s,uG=i,oG}async i1t(t,s){if(!s.length)return;this.X0t+=s.length;const i=[];for(const e of s)i.push(t.Ait(e));await eG.Uh(i,()=>{this.Z0t++}),this.Z0t++,this.Z0t===this.X0t&&(this.Z0t=0,this.X0t=0,this.jc.aZ(eG.uQ.lQ.aQ.e1t,null,null))}e6(){return 0===this.X0t?1:this.Z0t/this.X0t}n1t(t,s){for(const i of s)0===i.bH()&&t.Pit(i)}r1t(){return cG}h1t(t){const s=this.jc.hW(),i=s.MW(),e=i.D3(),n=e.fW(),r=n.TH(),h=e.nxt(),o=i.N3(n),a=s.O3(),l=a.N3();if(l.Txt(t),h)for(let i=0;i<t&&!l.V3();++i)s.F3(r),l.B3(i),n.j3(e,o),s.z3(r);else for(let s=0;s<t&&!l.V3();++s)l.B3(s),n.j3(e,o);return i.W3(),a.W3(),!1}*o1t(t){const s=this.jc.hW(),i=s.MW(),e=i.D3(),n=e.fW(),r=n.TH(),h=e.nxt(),o=i.N3(n),a=s.O3(),l=a.N3();if(l.Txt(t),h)for(let i=0;i<t&&!l.V3();++i)s.F3(r),l.B3(i),yield*n.j_t(e,o),s.z3(r);else for(let s=0;s<t&&!l.V3();++s)l.B3(s),yield*n.j_t(e,o);return i.W3(),a.W3(),!1}a1t(){const t=this.jc.hW(),s=t.MW(),i=s.D3(),e=i.fW(),n=e.TH(),r=i.nxt(),h=s.N3(e),o=t.O3(),a=o.N3();if(r)for(let s=0;!a.V3();++s)t.F3(n),a.B3(s),e.j3(i,h)||a.T1(),t.z3(n);else for(let t=0;!a.V3();++t)a.B3(t),e.j3(i,h)||a.T1();return s.W3(),o.W3(),!1}*l1t(){const t=this.jc.hW(),s=t.MW(),i=s.D3(),e=i.fW(),n=e.TH(),r=i.nxt(),h=s.N3(e),o=t.O3(),a=o.N3();if(r)for(let s=0;!a.V3();++s)t.F3(n),a.B3(s),(yield*e.j_t(i,h))||a.T1(),t.z3(n);else for(let t=0;!a.V3();++t)a.B3(t),(yield*e.j_t(i,h))||a.T1();return s.W3(),o.W3(),!1}u1t(t,s,i){const e=this.jc.hW(),n=e.MW(),r=n.D3(),h=r.fW(),o=h.TH(),a=r.nxt(),l=n.N3(h),u=e.O3(),c=u.N3();if(c.P3(t),c.Txt(i),i<s)if(a)for(let t=s;t>=i&&!c.V3();--t)e.F3(o),c.B3(t),h.j3(r,l),e.z3(o);else for(let t=s;t>=i&&!c.V3();--t)c.B3(t),h.j3(r,l);else if(a)for(let t=s;t<=i&&!c.V3();++t)e.F3(o),c.B3(t),h.j3(r,l),e.z3(o);else for(let t=s;t<=i&&!c.V3();++t)c.B3(t),h.j3(r,l);return n.W3(),u.W3(),!1}*c1t(t,s,i){const e=this.jc.hW(),n=e.MW(),r=n.D3(),h=r.fW(),o=h.TH(),a=r.nxt(),l=n.N3(h),u=e.O3(),c=u.N3();if(c.P3(t),c.Txt(i),i<s)if(a)for(let t=s;t>=i&&!c.V3();--t)e.F3(o),c.B3(t),yield*h.j_t(r,l),e.z3(o);else for(let t=s;t>=i&&!c.V3();--t)c.B3(t),yield*h.j_t(r,l);else if(a)for(let t=s;t<=i&&!c.V3();++t)e.F3(o),c.B3(t),yield*h.j_t(r,l),e.z3(o);else for(let t=s;t<=i&&!c.V3();++t)c.B3(t),yield*h.j_t(r,l);return n.W3(),u.W3(),!1}f1t(t){const s=t.cH(),i=s.uH();if(0===i.length)return!1;const e=this.jc.hW(),n=e.MW(),r=n.D3(),h=r.fW(),o=h.TH(),a=r.nxt(),l=n.N3(h),u=e.O3(),c=u.N3(),f=t.PX(),d=cG.N3();if(eG.Ch(d,i),c.Txt(d.length),a)for(let s=0,i=d.length;s<i&&!c.V3();++s){e.F3(o);const i=d[s];t.cH().yvt(i),f&&i.KIt(),c.B3(s),h.j3(r,l),e.z3(o)}else{s.pvt(!1);const t=s.mvt();eG.Sh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.V3();++s){const i=d[s];t[0]=i,f&&i.KIt(),c.B3(s),h.j3(r,l)}}return n.W3(),u.W3(),eG.Sh(d),cG.W3(),!1}*d1t(t){const s=t.cH(),i=s.uH();if(0===i.length)return!1;const e=this.jc.hW(),n=e.MW(),r=n.D3(),h=r.fW(),o=h.TH(),a=r.nxt(),l=n.N3(h),u=e.O3(),c=u.N3(),f=t.PX(),d=cG.N3();if(eG.Ch(d,i),c.Txt(d.length),a)for(let s=0,i=d.length;s<i&&!c.V3();++s){e.F3(o);const i=d[s];t.cH().yvt(i),f&&i.KIt(),c.B3(s),yield*h.j_t(r,l),e.z3(o)}else{s.pvt(!1);const t=s.mvt();eG.Sh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.V3();++s){const i=d[s];t[0]=i,f&&i.KIt(),c.B3(s),yield*h.j_t(r,l)}}return n.W3(),u.W3(),eG.Sh(d),cG.W3(),!1}p1t(t,s){const i=t.cH(),e=i.uH();if(0===e.length)return!1;const n=this.jc.hW(),r=n.MW(),h=n.gbt(),o=r.D3(),a=o.fW(),l=a.TH(),u=o.nxt(),c=r.N3(a),f=n.O3(),d=f.N3(),p=t.PX(),m=cG.N3();eG.Sh(m),d.Txt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.qDt(1,t)]);if(m.sort(iG),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.V3();++s){n.F3(l);const i=m[s][0];t.cH().yvt(i),p&&i.KIt(),d.B3(s),a.j3(o,c),n.z3(l)}else{i.pvt(!1);const t=i.mvt();eG.Sh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.V3();++s){const i=m[s][0];t[0]=i,p&&i.KIt(),d.B3(s),a.j3(o,c)}}return r.W3(),f.W3(),eG.Sh(m),cG.W3(),!1}*m1t(t,s){const i=t.cH(),e=i.uH();if(0===e.length)return!1;const n=this.jc.hW(),r=n.MW(),h=n.gbt(),o=r.D3(),a=o.fW(),l=a.TH(),u=o.nxt(),c=r.N3(a),f=n.O3(),d=f.N3(),p=t.PX(),m=cG.N3();eG.Sh(m),d.Txt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.qDt(1,t)]);if(m.sort(iG),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.V3();++s){n.F3(l);const i=m[s][0];t.cH().yvt(i),p&&i.KIt(),d.B3(s),yield*a.j_t(o,c),n.z3(l)}else{i.pvt(!1);const t=i.mvt();eG.Sh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.V3();++s){const i=m[s][0];t[0]=i,p&&i.KIt(),d.B3(s),yield*a.j_t(o,c)}}return r.W3(),f.W3(),eG.Sh(m),cG.W3(),!1}g1t(t,s){let i=this.K0t.get(t);return i||(s?(i={y1t:null,w1t:new Map},this.K0t.set(t,i),i):null)}M1t(t,s,i,e,n){s.uW().K_t(i,s.mW()),e&&t.z3(n)}*S1t(t,s,i,e,n){yield*s.uW().tEt(i,s.mW()),e&&t.z3(n)}}}{const fG=self.Gs;fG.uQ.lQ.Fjt=class extends fG.$n{constructor(t){super(),this.HTt=t,this.jc=t.yQ(),this.fLt=t.KJ()}HRt(){}Yn(){this.HTt=null,this.jc=null,this.fLt=null}}}{const dG=self.Gs;dG.uQ.lQ.Instance=class extends dG.$n{constructor(t,s){super(),this.di=t,this.HTt=this.di.gH(),this.wLt=this.HTt.INt(),this.jc=this.di.yQ()}Yn(){this.di=null,this.HTt=null,this.wLt=null,this.jc=null}}}{const pG=self.Gs,mG=[];pG.uQ.lQ.aQ={T1t:()=>!0,het:()=>!0,pet:()=>!0,lKt:()=>!0,uKt:()=>!0,_W(){return this.jc._W()},FGt(){const t=this.jc.mbt();return!t.Zvt()&&!t.qvt()},v1t(){const t=this.jc.gbt().FDt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.jc.LW();return t.set("TriggerOnce_lastTick",i),this.jc.qKt()||s!==i-1},x1t(t){const s=this.jc.gbt().FDt(),i=s.get("Every_lastTime")||0,e=this.jc.PW();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},KCt(t){const s=this.jc.hW().Rbt(t);return s&&s.KCt()},PHt(){return this.jc.PHt()},oi:()=>pG.Zs.oi,$Zt:()=>!0,oQ:()=>!0,b1t:()=>!0,a0t:()=>!0,d0t:()=>!0,u0t:()=>!0,c0t:()=>!0,C1t(t){return!!this.jc.NY(t)},I1t(t){switch(t){case 0:return"browser"===pG.Zs.ri;case 1:return"iOS"===pG.Zs.Ks;case 2:return"Android"===pG.Zs.Ks;case 8:return"cordova"===pG.Zs.ri;case 9:return"scirra-arcade"===this.jc.sJ();case 13:return"windows-uwp"===this.jc.sJ();default:return!1}},G1t(t,s,i){return this.t1t(s,i).test(t)},_1t:(t,s,i)=>pG.compare(t,s,i),E1t:(t,s,i)=>t>=s&&t<=i,A1t:(t,s,i)=>pG.compare(t.Yct(),s,i),D1t:t=>!!t.Yct(),N1t(t,s){const i=this.jc.PW();if(0===t){const t=this.jc.gbt().FDt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return pG.compare(i,t,s)},O1t:t=>isNaN(t),YPt:(t,s,i)=>pG.hr(pG.Kn(t),pG.Kn(i))<=pG.Kn(s),QPt:(t,s)=>pG.lr(pG.Kn(t),pG.Kn(s)),eOt(t,s,i){let e=pG.Kn(t),n=pG.Kn(s),r=pG.Kn(i);return pG.lr(r,n)?pG.lr(e,n)&&!pG.lr(e,r):!(!pG.lr(e,n)&&pG.lr(e,r))},P1t:(t,s)=>"number"==typeof t?0===s:1===s,R1t:t=>!!t,DCt(t){return t.toLowerCase()===this.jc.hW().RCt()},L1t(t,s,i,e){if(!t)return!1;const n=this.r1t(),r=n.N3(),h=t.cH();pG.Ch(r,h.uH()),h.ovt()&&pG.Sh(h.gvt());const o=this.jc.gbt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.qDt(1,t),e=o.qDt(3,t),pG.compare(s,i,e)?++a:h.dvt(n)}pG.Mh(r,a),h.wvt(r);const l=!!r.length;return pG.Sh(r),n.W3(),t.Q_t(),l},F1t(t,s){if(!t)return!1;const i=this.r1t(),e=i.N3(),n=t.cH();pG.Ch(e,n.uH()),n.ovt()&&pG.Sh(n.gvt());const r=this.jc.gbt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.qDt(1,t)?++h:n.dvt(s)}pG.Mh(e,h),n.wvt(e);const o=!!e.length;return pG.Sh(e),i.W3(),t.Q_t(),o},k1t(t,s,i){if(!t)return!1;const e=t.cH(),n=e.uH();if(0===n.length)return!1;const r=this.jc.gbt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.qDt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.xvt(h),t.Q_t(),!0},j1t(t,s){if(!t)return!1;const i=t.cH(),e=i.uH();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.xvt(n),t.Q_t(),!0},z1t(t){if(!t)return!1;const s=t.cH(),i=s.uH(),e=Math.floor(this.jc.fY()*i.length);if(e>=i.length)return!1;const n=i[e];return s.xvt(n),t.Q_t(),!0},B1t:t=>!!t&&(!!t.bH()&&(t.cH().pvt(!0),t.Q_t(),!0)),U1t(t,s,i){if(!t)return!1;const e=t.cH(),n=e.uH(),r=this.jc.fW().bvt(),h=this.jc.gbt().NDt();e.ovt()?(pG.Ch(mG,n),e.hvt(),e.pvt(!1)):r?(pG.Ch(mG,e.gvt()),pG.Sh(e.gvt())):(pG.Ch(mG,e.mvt()),pG.Sh(e.mvt()));for(let t=0,n=mG.length;t<n;++t){const n=mG[t];pG.xor(n.FY().wK(s,i),h)?e.fvt(n):e.dvt(n)}return t.Q_t(),pG.xor(!!e.mvt().length,h)},$1t(t){if(!t)return!1;const s=t.pH();let i=null;const e=this.jc.Izt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.gH().NNt(t)){i=r;break}}else if(r.gH()===t){i=r;break}}if(!i){const s=t.uH();s.length&&(i=s.at(-1))}return!!i&&(t.cH().xvt(i),t.Q_t(),!0)},V1t(t){return this.jc.DOt()?this.o1t(t):this.h1t(t)},W1t(){return this.jc.DOt()?this.l1t():this.a1t()},Y1t(t,s,i){return this.jc.DOt()?this.c1t(t,s,i):this.u1t(t,s,i)},Vd(t){return this.jc.DOt()?this.d1t(t):this.f1t(t)},Q1t(t,s,i){return this.jc.DOt()?this.m1t(t,i):this.p1t(t,i)},J1t:t=>!!t&&t.Rq(),H1t:t=>!!t&&t.$q(),q1t:t=>!!t&&t.zq(),X1t:t=>!!t&&!t.bH(),Z1t:(t,s,i)=>!!t&&pG.compare(100*t.PO(),s,i),K1t(t){const s=this.jc.dY();return!!s&&s.mit(t)},e1t:()=>!0,t2t(){return this.X0t>0},s2t(t,s){const i=this.jc.kBt();return!!i&&!!s&&!!i.Zwt(t,s)}}}{let gG=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},yG=function(t,s){return t[1]-s[1]};SortZOrderList=gG,SortInstancesByValue=yG;const wG=self.Gs,MG=[],SG=[],TG=wG.Wn(wG.Rect),vG=wG.Wn(wG.bo),xG=[];wG.uQ.lQ.Qdt={i2t(t,s){t.Eft(s)},e2t(t,s){t.Ki()&&"number"!=typeof s&&(s=parseFloat(s)),t.Eft(t.Yct()+s)},n2t(t,s){t.Ki()&&t.Eft(t.Yct()-s)},r2t(t,s){t.Eft(!!s)},h2t(t){t.Eft(!t.Yct())},o2t(t){t.Eft(t.pbt())},a2t(t){this.jc.hW().Obt(t)},l2t(t,s,i,e,n,r){if(!t||!s)return;const h=this.jc.IH(t,s,i,e,n,r);if(!h)return;n&&s.GH(h);const o=this.jc.hW();o._H(!0),h.EH(),o._H(!1);const a=new Map;h.EBt(a,t,n);for(const[t,s]of a)t.cH().Mvt(s)},u2t(t,s,i,e,n,r){if(!t||!s)return;const h=this.jc.JZt(t);h&&wG.uQ.lQ.Qdt.l2t.call(this,h,s,i,e,n,r)},Q7(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.jc.RY();let f=c;if(r){const t=this.jc.gY().Vet(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.jY(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.jY(o),!p))return;TG.set(s,i,e,n);const m=f.Q7(t,TG,d,p,a,l,u);t.cH().wvt(m),t.Q_t()},c2t(){const t=this.wxt;t.pxt()&&t.fxt().T1()},tIt(t,s){const i=this.jc.hW().Rbt(t);i&&(0===s?i.tIt(!1):1===s?i.tIt(!0):i.tIt(!i.KCt()))},f2t(t){this.jc.BW(t)},d2t(t,s){if(s<0&&(s=0),!t)return;const i=t.cH().uH();for(const t of i)t.BW(s)},p2t(t){if(!t)return;const s=t.cH().uH();for(const t of s)t.$X()},ph(t,s){if(t<0)return;const i=this.jc.hW().mCt();return s?i.mRt(t):i.gRt(t),!0},bW(t){return this.jc.hW().mCt().yRt(t),!0},m2t(){const t=this.jc.hW();return t.mCt().wRt(t.ACt()),!0},vW(t){this.jc.hW().vW(t)},async rQ(t,s,i,e,n,r){const h=this.jc._Y();h&&(this.WY(),await h.rQ(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.jc.hQ(wG.uQ.lQ.aQ.oQ,null))},g2t(t,s){if(t<=0||s<=0)return;this.jc.FJt(t,s),this.jc.RY().ust();const i=this.jc._Y();i&&("off"===i.AJt()||this.jc.qZt(t,s),i.tD(i.A2(),i.D2(),!0),this.jc.WY())},y2t(t){const s=this.jc._Y();s&&"off"!==s.AJt()&&(s.VJt(0!==t?"high":"low"),s.tD(s.A2(),s.D2(),!0))},uct(t){this.jc.KKt(t)},w2t(){this.jc.t0t()},M2t(t){this.jc.s0t(t)},S2t(t){this.jc.bPt(t)},T2t(t){},v2t(){for(const t of this.jc.gY().MY())t.Cet()},x2t(t){this.jc.hY(0!==t)},b2t(t,s){this.jc.nY(1/t),this.jc.sY(1/s)},C2t(t,s){this.jc.sY(t),this.jc.nY(s)},I2t(t){this.jc.ZW(["vsync","unlimited-tick","unlimited-frame"][t])},G2t(t,s){if(!t)return;const i=t.cH().uH(),e=MG,n=SG,r=this.jc.RY(),h=t.pH(),o=t.dAt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.FY();if(!a||a.kY())continue;let l;l=h?r.zpt(s+r.gH().fAt(o)):r.zpt(s),e.push([a.jY().CV(),a.zY()]),n.push([r,l])}if(!e.length)return;e.sort(gG),n.sort(yG);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.BY(e[t][0]),h=e[t][1],o=i.UY();o[h]!==s&&(o[h]=s,s.FY().$Y(i,!0),i.VY(s),a=!0)}a&&this.jc.WY(),wG.Sh(MG),wG.Sh(SG)},VQ(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.jc.NV().VQ(t,s)},_2t(t){if(this.jc.Fw())return;const s=this.jc.gY();s.TY()||s.vY(t)},E2t(t){if(this.jc.Fw())return;const s=this.jc.gY();if(s.TY())return;const i=s.Vet(t);i&&s.vY(i)},A2t(t){if(this.jc.Fw())return;const s=this.jc.gY();if(s.TY())return;const i=s.MY(),e=i.indexOf(s.dY());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.vY(n)},D2t(){if(this.jc.Fw())return;const t=this.jc.gY();t.TY()||(t.vY(t.dY()),this.jc.hW().jbt())},N2t(t,s){t&&t.Oq(s)},O2t(t,s){t&&t.kq(s)},P2t(t,s){t&&t.Bq(s)},R2t(t,s){t&&t.LO(s/100)},L2t(t,s){t&&t.Vq(s)},F2t(t,s){t&&t.Qq(s)},k2t(t,s){t&&t.QH(wG.Kn(+s))},j2t(t,s,i){t&&(t.fX(!0),t.HH(s),t.XH(i))},z2t(t){t&&t.fX(!1)},B2t(t,s,i){t&&t.C9(s/100,i/100)},U2t(t,s){t&&t.lx(+s)},$2t(t,s){t&&t.iX(1===s)},V2t(t,s){if(!t)return;vG.ta(s),vG.Xn();const i=t.cX();i.Yo(vG)||(i.Fo(vG),this.WY())},W2t(t,s){t&&t.rX(s)},Y2t(t,s){t&&t.$v(s)},Q2t(t,s,i){if(!t)return;const e=t.BH().sdt(i);if(!e)return;const n=1===s;e.VIt()!==n&&(e.pWt(n),t.P0(),this.jc.WY())},J2t(t,s,i,e){if(!t)return;const n=t.BH(),r=n.sdt(s);if(!r)return;i=Math.floor(i);const h=r.KI().sG(i);h&&("color"===h?(vG.ta(e),e=vG):"percent"===h&&(e/=100),n.L0(r.CV(),i,e)&&r.VIt()&&this.jc.WY())},H2t(t,s){t&&t.aX(s)},q2t(t){this.jc.RY().WH(+t)},X2t(t){this.jc.RY().QH(wG.Kn(+t))},Z2t(t,s){const i=this.jc.RY(),e=i.BH().sdt(s);if(!e)return;const n=1===t;e.VIt()!==n&&(e.pWt(n),i.P0(),this.jc.WY())},K2t(t,s,i){const e=this.jc.RY().BH(),n=e.sdt(t);if(!n)return;s=Math.floor(s);const r=n.KI().sG(s);r&&("color"===r?(vG.ta(i),i=vG):"percent"===r&&(i/=100),e.L0(n.CV(),s,i)&&n.VIt()&&this.jc.WY())},t3t(t,s){this.jc.RY().Mq(t/100,s/100)},s3t(t){const s=this.jc.RY();0===t?s.vq():s.xq()},i3t(t){this.jc.RY().HH(t)},e3t(t){this.jc.RY().XH(t)},n3t(t,s){const i=this.jc.RY();i.HH(t),i.XH(s)},r3t(t){if(!t)return;const s=t.MOt();if(!s)return;const i=s.FY();if(!i)return;const e=this.jc.RY();e.HH(i.tx()),e.XH(i.nx())},uq(t,s,i){const e=this.jc.RY();try{e.uq(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},fq(t,s,i){if(!t)return;const e=this.jc.RY();try{e.fq(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},mq(t){t&&this.jc.RY().mq(t)},yq(){this.jc.RY().yq()},async h3t(t){const s=this.jc.dY();if(!s||!t||this.jc.Fw())return;const i=t.pH()?t.FH():[t];await this.i1t(s,i)},async o3t(t){await wG.uQ.lQ.Qdt.h3t.call(this,this.jc.JZt(t))},a3t(t){const s=this.jc.dY();if(!s||!t)return;const i=t.pH()?t.FH():[t];this.n1t(s,i)},l3t(t){wG.uQ.lQ.Qdt.a3t.call(this,this.jc.JZt(t))},u3t(){const t=this.jc.dY();if(!t)return;const s=t.Git();this.n1t(t,s)},async c3t(t){const s=this.jc.dY();t&&s&&!this.jc.Fw()&&await this.i1t(s,t.bit())},async f3t(t){const s=this.jc.dY(),i=this.jc.gY().Vet(t);i&&s&&!this.jc.Fw()&&await this.i1t(s,i.bit())},TW(t){const s=this.evt.wW();if(s)switch(s.SW()){case 1:"number"==typeof t&&s.TW(t);break;case 2:"string"==typeof t&&s.TW(t);break;case 3:s.TW(t)}},d3t(t,s,i){const e=this.g1t(t.toLowerCase(),!0),n=e.w1t,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=wG.zh(n.values())||e.y1t;h&&0!==h.gW()!=(0!==i.gW())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},p3t(t,s){const i=this.g1t(t.toLowerCase(),!0);i.y1t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=wG.zh(i.w1t.values())||i.y1t;e&&0!==e.gW()!=(0!==s.gW())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.y1t=s},m3t(t,s,i){const e=this.jc,n=e.DOt()?xG:null;i=Math.floor(i);const r=this.g1t(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.w1t.get(s.toLowerCase());if(!h){if(!r.y1t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.y1t,i=0}if(!h.Gu())return n;if(0!==h.gW())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.hW(),a=o.fW(),l=a.cW(),u=l.length>0;u&&(h.mW()?o.F3(l):o.dCt(l));const c=[],f=o.hIt(a);if(f){const t=f.aIt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Yct())}const d=h.aIt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].pbt());return e.DOt()?this.S1t(o,h,c,u,l):this.M1t(o,h,c,u,l)}}}{const bG=self.Gs,CG=bG.Wn(bG.bo);bG.uQ.lQ.Jdt={g3t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},A:t=>t.toString(),Ft:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.jc.fY()*t:this.jc.fY()*(s-t)+t},XEt(...t){return t[Math.floor(this.jc.fY()*t.length)]},y3t:(t,...s)=>("number"!=typeof t&&(t=0),s[t=bG.Xn(Math.floor(t),0,s.length-1)]),w3t:()=>Math.PI,M3t:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),S3t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(bG.Kn(t)),cos:t=>Math.cos(bG.Kn(t)),tan:t=>Math.tan(bG.Kn(t)),asin:t=>bG.tr(Math.asin(t)),acos:t=>bG.tr(Math.acos(t)),atan:t=>bG.tr(Math.atan(t)),exp:t=>Math.exp(t),$t:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Xn:(t,s,i)=>bG.Xn(t,s,i),Tt:(t,s,i,e)=>bG.er(t,s,i,e),angle:(t,s,i,e)=>bG.tr(bG.rr(t,s,i,e)),Gt:(t,s,i)=>bG.Gt(t,s,i),mr:(t,s,i)=>bG.mr(t,s,i),yr:(t,s,i,e)=>bG.yr(t,s,i,e),wr:(t,s,i,e,n)=>bG.wr(t,s,i,e,n),Mr:(t,s,i)=>bG.Mr(t,s,i),T3t:(t,s)=>bG.tr(bG.hr(bG.Kn(t),bG.Kn(s))),v3t:(t,s,i)=>bG.tr(bG.ur(bG.Kn(t),bG.Kn(s),i)),x3t:(t,s,i)=>bG.tr(bG.ar(bG.Kn(t),bG.Kn(s),bG.Kn(i))),b3t:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,C3t:(t,s)=>(t|=0)^1<<s,I3t:(t,s)=>(t|=0)&1<<(s|=0)?1:0,G3t:()=>"\n",_3t:t=>"string"==typeof t?t.toUpperCase():"",E3t:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",A3t(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},D3t:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(bG.Xi(s),"i")):-1,N3t:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(bG.Xi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(bG.Xi(s),"gi"),i):"string"==typeof t?t:"",O3t(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},P3t(t,s,i){const e=this.t1t(s,i);return t?t.search(e):-1},R3t(t,s,i,e){const n=this.t1t(s,i);return t?t.replace(n,e):""},L3t(t,s,i){const e=this.s1t(t.toString(),s,i);return e?e.length:0},F3t(t,s,i,e){e=Math.floor(e);const n=this.s1t(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},k3t(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},j3t:t=>encodeURIComponent(t),z3t:t=>decodeURIComponent(t),EW(){return this.jc.brt()},B3t(){return this.jc.Crt()},U3t(){return this.jc.zW()},$3t(){return(Date.now()-this.jc.BKt())/1e3},V3t:()=>Date.now(),time(){return this.jc.PW()},W3t(){return this.jc.LW()},Y3t(){return this.jc.VKt()},UW(){return this.jc.$W()},Q3t(){return this.jc.QW()},J3t(){return this.jc.HW()},H3t(){return this.jc._Y().mJ()},q3t(){return this.jc._Y().yJ()},X3t(){return this.jc.HV()},Z3t(){return this.jc.XV()},K3t(){return this.jc.HV()},t4t(){return this.jc.XV()},s4t(){return this.jc.RY().qH()},i4t(){return this.jc.RY().ZH()},e4t(){return this.jc.RY().Ac()},n4t(){return this.jc.RY().YH()},r4t(){return bG.tr(this.jc.RY().JH())},h4t(){return this.jc.RY().xy()},o4t(){return this.jc.RY().Cy()},a4t(){return 100*this.jc.RY().lit()},l4t(){return 100*this.jc.RY().uit()},u4t(t){const s=this.jc.RY().jY(t);return s?s.w9().Ka():0},c4t(t){const s=this.jc.RY().jY(t);return s?s.w9().tl():0},f4t(t){const s=this.jc.RY().jY(t);return s?s.w9().sl():0},d4t(t){const s=this.jc.RY().jY(t);return s?s.w9().il():0},p4t(t){const s=this.jc.RY().jY(t);return s?s.w9().width():0},m4t(t){const s=this.jc.RY().jY(t);return s?s.w9().height():0},g4t(t){const s=this.jc.RY().jY(t);if(s){const t=s.w9();return(t.Ka()+t.sl())/2}return 0},y4t(t){const s=this.jc.RY().jY(t);if(s){const t=s.w9();return(t.tl()+t.il())/2}return 0},w4t(t,s,i){const e=this.jc.RY().jY(t);return e?e.gX(s,i)[0]:0},M4t(t,s,i){const e=this.jc.RY().jY(t);return e?e.gX(s,i)[1]:0},S4t(t,s,i){const e=this.jc.RY().jY(t);return e?e.wX(s,i)[0]:0},T4t(t,s,i){const e=this.jc.RY().jY(t);return e?e.wX(s,i)[1]:0},v4t(t,s,i,e){const n=this.jc.RY(),r=n.jY(t),h=n.jY(s);if(!r||!h||r===h)return i;const[o,a]=r.wX(i,e);return h.gX(o,a)[0]},x4t(t,s,i,e){const n=this.jc.RY(),r=n.jY(t),h=n.jY(s);if(!r||!h||r===h)return e;const[o,a]=r.wX(i,e);return h.gX(o,a)[1]},b4t(t){const s=this.jc.RY().jY(t);return s?s.Wq():0},C4t(t){const s=this.jc.RY().jY(t);return s?bG.tr(s.Hq()):0},I4t(t){const s=this.jc.RY().jY(t);return s?100*s.PO():0},G4t(t){const s=this.jc.RY().jY(t);return s?s.Jq():0},_4t(t){const s=this.jc.RY().jY(t);return s?s.qH():0},E4t(t){const s=this.jc.RY().jY(t);return s?s.ZH():0},A4t(t){const s=this.jc.RY().jY(t);return s?100*s.Zq():0},D4t(t){const s=this.jc.RY().jY(t);return s?100*s.sX():0},N4t(t){const s=this.jc.RY().jY(t);return s?s.ox():0},O4t(t){const s=this.jc.RY().jY(t);return s?s.CV():-1},P4t(){const t=this.jc._Y();return t?t.mHt():""},R4t(t){const s=this.wxt;if(!s.pxt())return 0;if(t){const i=s.gxt(t);return i?i.CV():0}return s.fxt().CV()},L4t(){return this.jc.i0t()},F4t(t,s,...i){const e=this.g1t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.w1t.get(s.toLowerCase());if(!n){if(!e.y1t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.y1t}const r=n.gW(),h=n.aW();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Gu())return h;const o=this.jc.hW(),a=o.fW().cW(),l=a.length>0;l&&(n.mW()?o.F3(a):o.dCt(a));const u=n.aIt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].pbt());const c=n.uW(),f=c.pW(c.cW(),n.mW(),r,h,null,...i);return l&&o.z3(a),f},k4t(){return this.jc.EV().lY()},j4t(){return this.e6()},t_(){return this.jc.ZJt()?"webgpu":"webgl"},z4t(){return this.jc.ZJt()?this.jc.ZJt().Uj():this.jc.XJt().$P()},B4t(){let t=this.jc.Tv().HT();return Math.round(100*t/1048576)/100},U4t:(t,s,i)=>bG.Gr(t,s,i),$4t:(t,s,i)=>bG.Er(t/100,s/100,i/100),V4t:(t,s,i,e)=>bG._r(t/100,s/100,i/100,e/100),W4t:(t,s,i)=>bG.Er(t/255,s/255,i/255),Y4t:(t,s,i,e)=>bG._r(t/255,s/255,i/255,e/255),Q4t:t=>(CG.Eo(0,0,0,1),CG.na(t),bG._r(CG.ko(),CG.jo(),CG.zo(),CG.Bo())),J4t:t=>(CG.ta(t),CG.ea(1!==CG.Bo())),H4t(){return this.jc.LV()},q4t(){return this.jc.kV()},X4t(){return this.jc.zV()},Z4t(){return this.jc.UV()},K4t(){return this.jc.fW().dit().Ac()},t5t(){return this.jc.fW().n_t()},s5t(){return this.jc.EV().LQ().length},i5t(t){t=Math.floor(t);const s=this.jc.EV().LQ();return t<0||t>=s.length?"":s[t].name}}}{const IG=self.Gs;IG.uQ.e5t=class extends IG.bRt{constructor(t){super(t),this.n5t=null}Yn(){super.Yn()}r5t(){return this.n5t||(this.n5t=IG.Wn(IG.wp),this.n5t.Gp(t=>this.h5t(t)),this.n5t.Ep((t,s,i,e,n,r)=>this.o5t(t,s,i,e,n,r)),this.n5t.Dp(t=>this.a5t(t)),this.n5t.Op(()=>this.I$()),this.n5t.Cp(this.yQ().Tv().kb())),this.n5t}async h5t(t){const s=this.yQ(),i=await s.EV().no(t);return await s.I0t(i)}async o5t(t,s,i,e,n,r){const h=this.yQ(),o=await h.EV().no(t),a={Mb:!0,Sb:"high",yb:this.jc._Y().N6()};let l=null;IG.Di.ImageBitmapOptions&&(l={premultiplyAlpha:"premultiply"},a.Tb=!1);const u=await h.xHt(o,n,r,i,e,l);let c=null;return c=IG.Di.ImageBitmapOptions?s.xP(u,a):await s.bP(u,a),c}a5t(t){t.Tv().CC(t)}I$(){this.yQ().WY()}}}{const GG=self.Gs;GG.uQ.e5t.Fjt=class extends GG.cLt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}Eit(t){}Rit(){}eet(t){const s=new Set;for(const t of this.gH().uH()){const i=t.g0();i.l5t();const e=i.u5t();e&&s.add(e)}return Promise.all([...s].map(s=>this.c5t(t,s)))}async c5t(t,s){await s.am();const i=256,e=s.lm()/s.um();let n=0,r=0;1>e?(n=i*e,r=i):(n=i,r=i/e),await s.om(t,n,r)}}}{const _G=self.Gs,EG=self.ks,AG=0,DG=1,NG=_G.Wn(_G.Rect),OG=_G.Wn(_G.El);_G.uQ.e5t.Instance=class extends _G.VLt{constructor(t,s){super(t),this.f5t="",this.d5t="",this.p5t=0,this.m5t=null,this.Ykt=_G.Wn(_G.lu),this.FY().DVt(this.Ykt),s&&(this.f5t=s[AG],this.FY().Oq(!!s[DG])),this.l5t(),this.JLt()}Yn(){this.g5t(),super.Yn()}r5t(){return this.KJ().r5t()}g5t(){this.m5t&&(this.m5t.Yn(),this.m5t=null)}async l5t(){this.g5t(),this.f5t?(this.m5t=this.r5t().Rp(this.f5t),await this.m5t.am(),this.Qn()||(this.y5t(),this.jc.WY())):this.y5t()}async w5t(t){if(this.d5t){if(this.d5t===t)return}else if(this.f5t===t)return;const s=++this.p5t;if(!t)return this.f5t="",this.d5t="",this.g5t(),void this.y5t();this.d5t=t;const i=this.r5t().Rp(t);await this.INt().c5t(this.jc.Tv(),i),this.Qn()||s<this.p5t?i.Yn():(this.d5t="",this.f5t=t,this.g5t(),this.m5t=i,this.y5t(),this.jc.WY())}M5t(){return this.f5t}y5t(){const t=this.FY(),s=Math.abs(t.xy()),i=Math.abs(t.Cy());let e=s,n=i;if(this.m5t){const t=this.m5t.lm(),r=this.m5t.um();if(0!==t&&0!==r){const h=t/r;s/i>h?(e=i*h,n=i):(e=s,n=s/h)}}const r=e/s,h=n/i,o=t.UZ(),a=t.WZ();NG.Wa(o-o*r,a-a*h,r,h),this.Ykt.ql(NG,o,a),t.DVt(this.Ykt)}u5t(){return this.m5t}D6(){this.g5t()}XLt(){this.l5t()}eb(t){const s=this.FY(),i=s.jY();if(!this.m5t)return;const e=this.m5t.lm(),n=this.m5t.um();if(0===e||0===n)return;const r=Math.abs(s.xy()),h=Math.abs(s.Cy()),o=s.ox(),a=i.gst(r,o),l=i.gst(h,o),u=e/n;let c=0,f=0,d=0,p=0;r/h>u?(d=l*u,p=l,c=h*u,f=h):(d=a,p=a/u,c=r,f=r/u),this.m5t.om(t,d,p);const m=this.m5t.hm();if(!m)return;t.jO(m);const g=s.tx(),y=s.nx(),w=c*Math.sign(s.xy()),M=f*Math.sign(s.Cy());NG.Wa(g-s.UZ()*w,y-s.WZ()*M,w,M),0===s.JH()?OG.ql(NG):(NG.offset(-g,-y),OG.Zl(NG,s.WNt(),s.VNt()),OG.offset(g,y)),NG.set(0,0,this.m5t.fm()/m.xy(),this.m5t.dm()/m.Cy()),t.oT(OG,NG)}Apt(t){}Lpt(t,s){}Sx(){return{svg:this.M5t()}}Tx(t){t.svg&&this.w5t(t.svg)}KLt(){if(this.m5t){const t=this.m5t.hm();if(t)return[t.xy(),t.Cy()]}return[100,100]}tFt(){if(this.m5t){const t=this.m5t.hm();if(t)return NG.set(0,0,this.m5t.fm()/t.xy(),this.m5t.dm()/t.Cy()),NG}return null}qRt(){return self.S5t}};const PG=new WeakMap;self.S5t=class extends self.c0{constructor(){super(),PG.set(this,self.CX._X().g0())}set T5t(t){EG.ue(t),PG.get(this).w5t(t)}get T5t(){return PG.get(this).M5t()}v5t(t){return EG.ue(t),PG.get(this).w5t(t)}}}self.Gs.uQ.e5t.aQ={},self.Gs.uQ.e5t.Qdt={x5t(t){return this.w5t(t)},b5t(t){return this.w5t(t)},C5t(t){this.FY().$v(t),this.jc.WY()}},self.Gs.uQ.e5t.Jdt={};{const RG=self.Gs;RG.uQ.Touch=class extends RG.bRt{constructor(t){super(t)}Yn(){super.Yn()}}}{let LG=function(){return jG.qJ().g0()};GetTouchSdkInstance=LG;const FG=self.Gs,kG=self.ks;FG.uQ.Touch.Fjt=class extends FG.cLt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}qRt(){return self.I5t}};let jG=null;self.I5t=class extends self.vH{constructor(t){super(t),jG=t,t.yQ().xY().CY=this}requestPermission(t){kG.ue(t);const s=LG();if("orientation"===t)return s.G5t(0);if("motion"===t)return s.G5t(1);throw new Error("invalid type")}}}{const zG=self.Gs,BG="touch";zG.uQ.Touch.Instance=class extends zG.gLt{constructor(t,s){super(t,BG),this._5t=new Map,this.E5t=!1,this.A5t=!1,this.D5t=0,this.N5t=0,this.O5t=0,this.P5t=0,this.R5t=0,this.L5t=0,this.F5t=0,this.k5t=0,this.j5t=0,this.z5t=0,this.B5t=0,this.U5t=0,this.$5t=0,this.V5t=0,this.W5t=0,this.Y5t=0,this.Q5t=0,this.J5t=[],s&&(this.E5t=s[0]),this.ILt("permission-result",t=>this.H5t(t));const i=this.yQ().Mf();this.Xf=new zG.Jf(zG.Uf.Qf(i,"pointerdown",t=>this.q5t(t.data)),zG.Uf.Qf(i,"pointermove",t=>this.X5t(t.data)),zG.Uf.Qf(i,"pointerup",t=>this.Z5t(t.data,!1)),zG.Uf.Qf(i,"pointercancel",t=>this.Z5t(t.data,!0)),zG.Uf.Qf(i,"deviceorientation",t=>this.K5t(t.data)),zG.Uf.Qf(i,"deviceorientationabsolute",t=>this.t6t(t.data)),zG.Uf.Qf(i,"devicemotion",t=>this.s6t(t.data)),zG.Uf.Qf(i,"tick2",t=>this.ynt()))}Yn(){this._5t.clear(),super.Yn()}q5t(t){if("mouse"===t.pointerType){if(!this.E5t)return;this.A5t=!0}const s=t.pointerId;if(this._5t.has(s))return;const i=t.pageX-this.jc.oJ(),e=t.pageY-this.jc.lJ(),n=performance.now(),r=this._5t.size;this.B5t=r,this.U5t=s;const h=zG.Wn(zG.uQ.Touch.i6t);h.nBt(n,i,e,s,r),this._5t.set(s,h),this.aZ(zG.uQ.Touch.aQ.e6t),this.aZ(zG.uQ.Touch.aQ.n6t),this.V5t=i,this.W5t=e,this.Q5t=0,this.aZ(zG.uQ.Touch.aQ.r6t)}X5t(t){if("mouse"===t.pointerType&&!this.A5t)return;const s=this._5t.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.hU()<2)return;const e=t.pageX-this.jc.oJ(),n=t.pageY-this.jc.lJ();s.n8(i,e,n,t.width,t.height,t.pressure)}Z5t(t,s){if("mouse"===t.pointerType){if(!this.A5t)return;this.A5t=!1}const i=performance.now(),e=t.pointerId,n=this._5t.get(e);if(n){if(this.B5t=n.h6t(),this.U5t=n.t2(),!s){const s=t.pageX-this.jc.oJ(),i=t.pageY-this.jc.lJ();this.V5t=s,this.W5t=i,this.Q5t=1,this.aZ(zG.uQ.Touch.aQ.r6t)}if(this.aZ(zG.uQ.Touch.aQ.o6t),this.aZ(zG.uQ.Touch.aQ.a6t),!s){const t=n.l6t(i);"single-tap"===t?(this.aZ(zG.uQ.Touch.aQ.u6t),this.V5t=n.tx(),this.W5t=n.nx(),this.aZ(zG.uQ.Touch.aQ.c6t)):"double-tap"===t&&(this.aZ(zG.uQ.Touch.aQ.f6t),this.V5t=n.tx(),this.W5t=n.nx(),this.aZ(zG.uQ.Touch.aQ.d6t))}n.Yn(),this._5t.delete(e)}}G5t(t){return this.ALt("request-permission",{type:t}),new Promise((s,i)=>{this.J5t.push({type:t,resolve:s,reject:i})})}H5t(t){const s=t.result,i=t.type;this.$5t=i;const e=this.J5t.filter(t=>t.type===i);for(const t of e)t.resolve(s?"granted":"denied");this.J5t=this.J5t.filter(t=>t.type!==i),s?(this.aZ(zG.uQ.Touch.aQ.p6t),0===i?this.jc.G0t():this.jc._0t()):this.aZ(zG.uQ.Touch.aQ.m6t)}K5t(t){"number"==typeof t.webkitCompassHeading?this.D5t=t.webkitCompassHeading:t.absolute&&(this.D5t=t.alpha),this.N5t=t.alpha,this.O5t=t.beta,this.P5t=t.gamma}t6t(t){this.D5t=t.alpha}s6t(t){const s=t.acceleration;s&&(this.R5t=s.x,this.L5t=s.y,this.F5t=s.z);const i=t.accelerationIncludingGravity;i&&(this.k5t=i.x,this.j5t=i.y,this.z5t=i.z)}ynt(){const t=performance.now();let s=0;for(const i of this._5t.values())i.hU()<=t-50&&i.g6t(t),i.y6t(t)&&(this.B5t=i.h6t(),this.U5t=i.t2(),this.Y5t=s,this.aZ(zG.uQ.Touch.aQ.w6t),this.V5t=i.tx(),this.W5t=i.nx(),this.aZ(zG.uQ.Touch.aQ.M6t),this.Y5t=0),++s}S6t(t){t=Math.floor(t);for(const s of this._5t.values()){if(0===t)return s;--t}return null}T6t(t,s){return t>=0&&s>=0&&t<this.jc.XZt()&&s<this.jc.ZZt()}jLt(){return[{title:"plugins.touch.debugger.touches",properties:[...this._5t.values()].map(t=>({name:"$"+t.t2(),value:t.tx()+", "+t.nx()}))}]}}}{const UG=self.Gs;UG.uQ.Touch.aQ={n6t:()=>!0,a6t:()=>!0,v6t(){return this._5t.size>0},r6t(t,s){return!!t&&s===this.Q5t&&!!this.T6t(this.V5t,this.W5t)&&this.jc.NV().qWt(t,[[this.V5t,this.W5t]],!1)},x6t(t){if(!t)return!1;const s=this.jc.gbt().NDt(),i=[...this._5t.values()].filter(t=>this.T6t(t.tx(),t.nx())).map(t=>[t.tx(),t.nx()]);return UG.xor(this.jc.NV().qWt(t,i,s),s)},b6t(t,s,i){const e=this.S6t(t);return!!e&&UG.compare(e.k0(),s,i)},C6t:()=>!0,I6t:()=>!0,G6t(t,s,i){this.jc.G0t();let e=0;return e=0===t?this.N5t:1===t?this.O5t:this.P5t,UG.compare(e,s,i)},_6t(t,s,i){this.jc._0t();let e=0;return e=0===t?this.k5t:1===t?this.j5t:2===t?this.z5t:3===t?this.R5t:4===t?this.L5t:this.F5t,UG.compare(e,s,i)},e6t(t){return(t=Math.floor(t))===this.B5t},o6t(t){return(t=Math.floor(t))===this.B5t},E6t(t){return t=Math.floor(t),this._5t.size>=t+1},w6t:()=>!0,u6t:()=>!0,f6t:()=>!0,M6t(t){return!!t&&!!this.T6t(this.V5t,this.W5t)&&this.jc.NV().qWt(t,[[this.V5t,this.W5t]],!1)},c6t(t){return!!t&&!!this.T6t(this.V5t,this.W5t)&&this.jc.NV().qWt(t,[[this.V5t,this.W5t]],!1)},d6t(t){return!!t&&!!this.T6t(this.V5t,this.W5t)&&this.jc.NV().qWt(t,[[this.V5t,this.W5t]],!1)},p6t(t){return this.$5t===t},m6t(t){return this.$5t===t}}}self.Gs.uQ.Touch.Qdt={A6t(t){this.G5t(t)}};{const $G=self.Gs;$G.uQ.Touch.Jdt={D6t(){return this._5t.size},LPt(t){const s=this.S6t(this.Y5t);return s?s.N6t(this.jc.RY(),t,!0):0},FPt(t){const s=this.S6t(this.Y5t);return s?s.N6t(this.jc.RY(),t,!1):0},O6t(t,s){const i=this.S6t(t);return i?i.N6t(this.jc.RY(),s,!0):0},P6t(t,s){const i=this.S6t(t);return i?i.N6t(this.jc.RY(),s,!1):0},R6t(t,s){const i=this._5t.get(t);return i?i.N6t(this.jc.RY(),s,!0):0},L6t(t,s){const i=this._5t.get(t);return i?i.N6t(this.jc.RY(),s,!1):0},F6t(){const t=this.S6t(0);return t?t.tx():0},k6t(){const t=this.S6t(0);return t?t.nx():0},j6t(t){const s=this.S6t(t);return s?s.tx():0},z6t(t){const s=this.S6t(t);return s?s.nx():0},B6t(t){const s=this._5t.get(t);return s?s.tx():0},U6t(t){const s=this._5t.get(t);return s?s.nx():0},$6t(t){const s=this.S6t(t);return s?s.k0():0},V6t(t){const s=this._5t.get(t);return s?s.k0():0},W6t(t){const s=this.S6t(t);return s?$G.tr(s.JH()):0},Y6t(t){const s=this._5t.get(t);return s?$G.tr(s.JH()):0},Q6t(){return this.jc.G0t(),this.D5t},J6t(){return this.jc.G0t(),this.N5t},H6t(){return this.jc.G0t(),this.O5t},q6t(){return this.jc.G0t(),this.P5t},X6t(){return this.jc._0t(),this.k5t},Z6t(){return this.jc._0t(),this.j5t},K6t(){return this.jc._0t(),this.z5t},t8t(){return this.jc._0t(),this.R5t},s8t(){return this.jc._0t(),this.L5t},i8t(){return this.jc._0t(),this.F5t},e8t(){return this.B5t},n8t(){return this.U5t},r8t(t){const s=this._5t.get(t);return s?s.xy():0},h8t(t){const s=this._5t.get(t);return s?s.Cy():0},o8t(t){const s=this._5t.get(t);return s?s.a8t():0}}}{const VG=self.Gs,WG=15,YG=500,QG=333,JG=25;let HG=-1e3,qG=-1e3,XG=-1e4;VG.uQ.Touch.i6t=class extends VG.$n{constructor(){super(),this.l8t=0,this.r_=0,this.dXt=0,this.i$=0,this.u8t=0,this.c8t=0,this.f8t=0,this.Aa=0,this.Da=0,this.d8t=0,this.p8t=0,this.Uy=0,this.$y=0,this.m8t=0,this.g8t=!1,this.y8t=!1}Yn(){}nBt(t,s,i,e,n){this.l8t=e,this.r_=n,this.i$=t,this.u8t=t,this.dXt=t,this.c8t=s,this.f8t=i,this.Aa=s,this.Da=i,this.d8t=s,this.p8t=i}n8(t,s,i,e,n,r){this.u8t=this.i$,this.i$=t,this.d8t=this.Aa,this.p8t=this.Da,this.Aa=s,this.Da=i,this.Uy=e,this.$y=n,this.m8t=r,!this.y8t&&VG.er(this.c8t,this.f8t,this.Aa,this.Da)>=15&&(this.y8t=!0)}t2(){return this.l8t}h6t(){return this.r_}hU(){return this.i$}g6t(t){this.u8t=t}tx(){return this.Aa}nx(){return this.Da}k0(){const t=VG.er(this.Aa,this.Da,this.d8t,this.p8t),s=(this.i$-this.u8t)/1e3;return s>0?t/s:0}JH(){return VG.rr(this.d8t,this.p8t,this.Aa,this.Da)}xy(){return this.Uy}Cy(){return this.$y}a8t(){return this.m8t}y6t(t){return!this.g8t&&t-this.dXt>=500&&!this.y8t&&VG.er(this.c8t,this.f8t,this.Aa,this.Da)<15&&(this.g8t=!0,!0)}l6t(t){return this.g8t?"":t-this.dXt<=333&&!this.y8t&&VG.er(this.c8t,this.f8t,this.Aa,this.Da)<15?t-XG<=666&&VG.er(HG,qG,this.Aa,this.Da)<25?(HG=-1e3,qG=-1e3,XG=-1e4,"double-tap"):(HG=this.Aa,qG=this.Da,XG=t,"single-tap"):""}N6t(t,s,i){if(void 0===s)return t.BY(0).dst(this.Aa,this.Da)[i?0:1];{const e=t.jY(s);return e?e.gX(this.Aa,this.Da)[i?0:1]:0}}}}{const ZG=self.Gs;ZG.uQ.Text=class extends ZG.bRt{constructor(t){super(t)}Yn(){super.Yn()}}}{const KG=self.Gs;KG.uQ.Text.Fjt=class extends KG.cLt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}Eit(t){}Rit(){}}}{const t_=self.Gs,s_=self.ks,i_=[0,0,0],e_=0,n_=1,r_=2,h_=3,o_=4,a_=5,l_=6,u_=7,c_=8,f_=9,d_=10,p_=11,m_=12,g_=13,y_=15,w_=["left","center","right"],M_=["top","center","bottom"],S_=["ltr","rtl"],T_=["word","cjk","character"],v_=new t_.Rect,x_=new t_.El,b_=new t_.bo,C_=t_.Wn(t_.Ea),I_=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);t_.uQ.Text.Instance=class extends t_.VLt{constructor(t,s){if(super(t),this.zc="",this.w8t=!0,this.M8t="Arial",this.S8t=12,this.T8t=0,this.OE=!1,this.PE=!1,this.kv=t_.Wn(t_.bo),this.zE=0,this.BE=0,this.VE="word",this.WE=0,this.v8t="auto",this.x8t=1,this.b8t=null,this.C8t="",this.I8t=!1,this.G8t=!1,this._8t=null,this.E8t=-1,this.A8t=-1,this.D8t=0,this.N8t=t_.Wn(t_.qw.ZT,this.jc.Tv(),{timeout:5}),this.N8t.xA=()=>this.jc.WY(),this.O8t=()=>this.P8t(),this.R8t=!1,this.L8t=()=>this.F8t(),s){this.zc=s[e_],this.w8t=!!s[n_],this.M8t=s[r_],this.S8t=s[h_],this.T8t=s[o_],this.OE=!!s[a_],this.PE=!!s[l_],this.zE=s[c_],this.BE=s[f_],this.VE=T_[s[d_]],this.WE=s[p_],this.k8t(this.jc.A3(s[m_]));const t=s[u_];this.kv.Ao(t[0],t[1],t[2]),this.FY().Oq(s[g_]),this.G8t=!!s[y_]}this.j8t(),this.z8t(),this.jc.Mf().addEventListener("beforerender",this.L8t)}Yn(){this.jc.Mf().removeEventListener("beforerender",this.L8t),this.L8t=null,this.k8t(null),this.B8t(),this._8t&&(this._8t.Yn(),this._8t=null),this.N8t.Yn(),this.N8t=null,super.Yn()}j8t(){const t=this.N8t;t.$c(this.zc),t.IA(this.w8t),this.N8t.CE()&&this.b8t?this.N8t.iy(this.yQ().XKt(this.b8t)):this.N8t.iy(null),t.GA("nearest"!==this.jc.EB()),t._A(this.M8t),t.NA(this.T8t),t.PA(this.OE),t.LA(this.PE),t.Vv(this.kv),t.$A(w_[this.zE]),t.WA(M_[this.BE]),t.QA(this.VE),t.HA(S_[this.WE])}U8t(){const t=this.FY();this.N8t.$c(this.zc),this.N8t.EA(this.S8t),this.N8t.DA(t.z$t());const s=t.jY();let i;"auto"===this.v8t?(i=s.mtt(t.qZ()),this.N8t.ZA(!1)):"fixed"===this.v8t&&(i=this.x8t,this.N8t.ZA(!0)),t.h0()&&i!==this.N8t.sD()&&t.$Vt(!0),this.N8t.tD(t.xy(),t.Cy(),i)}k8t(t){t&&(t.pH()||t.KJ().constructor!==t_.uQ.adt)||t!==this.b8t&&(this.b8t&&this.b8t.Mf().removeEventListener("animationframeimagechange",this.O8t),this.b8t=t,this.b8t&&this.b8t.Mf().addEventListener("animationframeimagechange",this.O8t),this.j8t(),this.I8t=!1,this.jc.WY())}P8t(){this.jc.ZKt(this.b8t),this.jc.WY(),this.R8t=!0}z8t(){if(this.G8t){let t=this.zc;this.w8t&&(t=t_.pn.Lg(t)),this._8t?this._8t.$c(t):this._8t=t_.Wn(t_.kc,this.jc,t)}else this._8t&&(this._8t.Yn(),this._8t=null)}F8t(){const t=this.FY(),s=t.jY(),i=t.yY();t.Rq()&&t.Ytt(s.pX(),i.Wtt(),i.bq())&&(this.$8t(),this.N8t.DC())}$8t(){this.U8t(),this.R8t&&(this.R8t=!1,this.N8t.CE()&&this.b8t&&this.N8t.iy(this.yQ().XKt(this.b8t)))}eb(t){const s=this.jc._Y().yHt();s&&this.$8t();const i=this.N8t.DC();if(!i)return;const e=this.FY(),n=e.jY();if(0!==e.JH()||0!==n.JH()||0!==e.qZ()||e.h0()||!n.N9()||s)t.jO(i),e.h0()?this.V8t(e,t):this.W8t(e,t);else{const s=e.sK(),[r,h]=n.vX(s.jr(),s.zr()),[o,a]=n.vX(s.$r(),s.Vr()),l=r-Math.round(r),u=h-Math.round(h);v_.set(r,h,o,a),v_.offset(-l,-u),x_.ql(v_);const[c,f]=t.sP(t.SP());t.YT()?this.jc._Y().z4(t,c,f):(t.oj(!0),x_.Mt(c,f)),t.jO(i),t.oT(x_,this.N8t.ND()),t.YT()?n.U4(t):t.oj(!1)}}W8t(t,s){let i=t.sK();this.jc.oY()&&(i=this.Y8t(i)),s.oT(i,this.N8t.ND())}V8t(t,s){const i=t.UVt();if(t.VVt()){t.ZZ(v_,x_,!1);let s=x_;this.jc.oY()&&(s=this.Y8t(s)),i.Xx(t.o0(),s,this.N8t.ND()),t.$Vt(!1)}i.eb(s,t.qZ())}Y8t(t){const s=t.jr()-Math.round(t.jr()),i=t.zr()-Math.round(t.zr());return 0===s&&0===i?t:(x_.M(t),x_.offset(-s,-i),x_)}KLt(){const t=this.N8t.DC();return t?[t.xy(),t.Cy()]:[100,100]}tFt(){return this.N8t.ND()}eFt(){return!1}Sx(){const t={t:this.zc,c:this.kv.toJSON(),fn:this.M8t,ps:this.S8t};return this.w8t&&(t.bbc=this.w8t),0!==this.zE&&(t.ha=this.zE),0!==this.BE&&(t.va=this.BE),"word"!==this.VE&&(t.wr=this.VE),0!==this.T8t&&(t.lho=this.T8t),this.OE&&(t.b=this.OE),this.PE&&(t.i=this.PE),-1!==this.A8t&&(t.tw={st:this.E8t,en:this.A8t,l:this.D8t}),this.b8t&&(t.ioc=this.b8t.s9()),"fixed"===this.v8t&&(t.fs=this.x8t),t}Tx(t){if(this.B8t(),this.zc=t.t,this.kv.Ma(t.c),this.M8t=t.fn,this.S8t=t.ps,this.w8t=!!t.hasOwnProperty("bbc")&&t.bbc,this.zE=t.hasOwnProperty("ha")?t.ha:0,this.BE=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.VE="boolean"==typeof s?s?"word":"character":s}else this.VE="word";if(this.T8t=t.hasOwnProperty("lho")?t.lho:0,this.OE=!!t.hasOwnProperty("b")&&t.b,this.PE=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.E8t=s.st,this.A8t=s.en,this.D8t=s.l}if(t.hasOwnProperty("ioc")){const s=this.yQ().A3(t.ioc);s&&this.k8t(s)}else this.k8t(null);t.hasOwnProperty("fs")?(this.v8t="fixed",this.x8t=t.fs):this.v8t="auto",this.j8t(),this.z8t(),this.I8t=!1,-1!==this.A8t&&this.RLt()}Apt(t){switch(t){case e_:return this.XA();case n_:return this.w8t;case r_:return this.Q8t();case h_:return this.J8t();case o_:return this.H8t();case a_:return this.q8t();case l_:return this.X8t();case u_:return i_[0]=this.kv.ko(),i_[1]=this.kv.jo(),i_[2]=this.kv.zo(),i_;case c_:return this.Z8t();case f_:return this.K8t();case d_:return this.t7t();case y_:return this.s7t()}}Lpt(t,s){switch(t){case e_:this.i7t(s);break;case n_:if(this.w8t===!!s)return;this.w8t=!!s,this.j8t();break;case r_:this.e7t(s);break;case h_:this.n7t(s);break;case o_:this.r7t(s);break;case a_:this.h7t(s);break;case l_:this.o7t(s);break;case u_:const t=this.kv,i=s;if(t.ko()===i[0]&&t.jo()===i[1]&&t.zo()===i[2])return;this.kv.Ao(i[0],i[1],i[2]),this.j8t();break;case c_:this.a7t(s);break;case f_:this.l7t(s);break;case d_:this.u7t(s)}}zLt(t,s,i,e){0===s&&0===i&&0===e||t!==u_||(this.kv.Do(s,i,e),this.j8t())}i7t(t){this.zc!==t&&(this.zc=t,this.z8t(),this.I8t=!1,this.jc.WY())}XA(){return this.zc}c7t(t,s){this.i7t(t),this.U8t(),this.E8t=this.jc.kW(),this.A8t=this.E8t+s/this.J1().BX(),this.D8t=this.N8t.rD(),this.N8t.kA(0),this.RLt()}B8t(){this.E8t=-1,this.A8t=-1,this.D8t=0,this.N8t.kA(-1),this.MLt()}f7t(){-1!==this.A8t&&(this.B8t(),this.aZ(t_.uQ.Text.aQ.d7t),this.jc.WY())}e7t(t){this.M8t!==t&&(this.M8t=t,this.N8t._A(t),this.jc.WY())}Q8t(){return this.M8t}h7t(t){t=!!t,this.OE!==t&&(this.OE=t,this.N8t.PA(t),this.jc.WY())}q8t(){return this.OE}o7t(t){t=!!t,this.PE!==t&&(this.PE=t,this.N8t.LA(t),this.jc.WY())}X8t(){return this.PE}n7t(t){this.S8t!==t&&(this.S8t=t,this.jc.WY())}J8t(){return this.S8t}p7t(t){this.kv.Yo(t)||(this.kv.Fo(t),this.N8t.Vv(this.kv),this.jc.WY())}m7t(){return this.kv}r7t(t){this.T8t!==t&&(this.T8t=t,this.j8t(),this.jc.WY())}H8t(){return this.T8t}a7t(t){this.zE!==t&&(this.zE=t,this.j8t(),this.jc.WY())}Z8t(){return this.zE}l7t(t){this.BE!==t&&(this.BE=t,this.j8t(),this.jc.WY())}K8t(){return this.BE}g7t(t){this.u7t(T_[t])}u7t(t){this.VE!==t&&(this.VE=t,this.j8t(),this.jc.WY())}t7t(){return this.VE}y7t(t){this.WE!==t&&(this.WE=t,this.j8t(),this.jc.WY())}w7t(){return this.WE}M7t(t){this.G8t=!!t,this.z8t()}s7t(){return this.G8t}S7t(t){this.v8t!==t&&(this.v8t=t,this.jc.WY())}T7t(){return this.v8t}v7t(t){this.x8t!==t&&(this.x8t=t,"fixed"===this.v8t&&this.jc.WY())}x7t(){return this.x8t}b7t(){return this.U8t(),this.N8t.iD()}C7t(){return this.U8t(),this.N8t.nD()}I7t(t,s){this.U8t();const i=this.FY();C_.set(t-i.tx(),s-i.nx()),C_.rotate(-i.JH()),C_.offset(i.xy()*i.UZ(),i.Cy()*i.WZ()),C_.Mt(i.xy(),i.Cy()),C_.scale(this.N8t.xy(),this.N8t.Cy());const e=this.N8t.oD(C_.Pa(),C_.La());if(e){const t=e.ew("tag");if(t)return t.Ag}return""}G7t(t,s,i){const e=this.I7t(s,i);return e&&t_.Ze(t,e)}_7t(t,s){this.U8t(),s=Math.floor(s);const i=this.N8t.lD(t,s);if(!i)return null;const e=this.FY(),n=this.N8t.BA(),r=i.Zy(),h=i.tw()-(i.Cy()-i.Gy())*n,o=i.xy()*n/this.N8t.xy()*e.xy(),a=i.Cy()*n/this.N8t.Cy()*e.Cy();return C_.set(r,h),C_.Mt(this.N8t.xy(),this.N8t.Cy()),C_.scale(e.xy(),e.Cy()),C_.offset(-e.xy()*e.UZ(),-e.Cy()*e.WZ()),C_.rotate(e.JH()),C_.offset(e.tx(),e.nx()),{x:C_.Pa(),y:C_.La(),width:o,height:a}}E7t(t){return this.U8t(),this.N8t.uD(t)}A7t(t){let s=I_.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}D7t(t,s){let i=I_.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async N7t(){if(this.I8t)return this.C8t;const t=new t_.pn(this.zc,{mg:!0})._g(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.Q8t()}';`),this.q8t()&&e.push("font-weight: bold;"),this.X8t()&&e.push("font-style: italic;"),"character"===this.t7t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.b8t?this.yQ().XKt(this.b8t):null;if(this.b8t){const i=t_.Wn(t_.Wd),e=[],r=new Map;for(const s of t)if(s.Sy()){const t=s.uw(n);if(t){const s=t.Yw().s1().Skt();if(r.has(s))continue;r.set(s,null),e.push(i.zu(async()=>{const t=await s.F6();r.set(s,t)}))}}await Promise.all(e);const h=[];for(const e of t)if(e.Sy()){const t=e.uw(n);if(t){const e=t.Yw(),n=e.s1().Skt();h.push(i.zu(async()=>{const i=await e.s1().vkt(r.get(n));s.set(t,i)}))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.hw();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.A7t(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.D7t(s,e));if(e.Vg()&&(i+=t_.Am(t_._m(e.Qg().join("")),"\n","<br>")),e.Sy()&&n){const r=e.uw(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.jc.EB()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.lw()}" width="${r.xy()}" height="${r.Cy()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.A7t(t);return i+="</span>",this.C8t=i,this.I8t=!0,this.C8t}Irt(){const t=this.jc.kW();if(t>=this.A8t)this.B8t(),this.aZ(t_.uQ.Text.aQ.d7t),this.jc.WY();else{let s=t_.gr(this.E8t,this.A8t,t,0,this.D8t);s=Math.floor(s),s!==this.N8t.jA()&&(this.N8t.kA(s),this.jc.WY())}}jLt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.XA(),O7t:t=>this.i7t(t)},{name:t+".properties.font.name",value:this.Q8t(),O7t:t=>this.e7t(t)},{name:t+".properties.size.name",value:this.J8t(),O7t:t=>this.n7t(t)},{name:t+".properties.line-height.name",value:this.H8t(),O7t:t=>this.r7t(t)},{name:t+".properties.bold.name",value:this.q8t(),O7t:t=>this.h7t(t)},{name:t+".properties.italic.name",value:this.X8t(),O7t:t=>this.o7t(t)},{name:t+".debugger.text-width",value:this.b7t()},{name:t+".debugger.text-height",value:this.C7t()}]}]}qRt(){return self.P7t}};const G_=new WeakMap,__=new Map([["left",0],["center",1],["right",2]]),E_=new Map([["top",0],["center",1],["bottom",2]]),A_=["ltr","rtl"];self.P7t=class extends self.c0{constructor(){super(),G_.set(this,self.CX._X().g0())}get text(){return G_.get(this).XA()}set text(t){s_.ue(t);const s=G_.get(this);s.B8t(),s.i7t(t)}R7t(t,s){s_.ue(t),s_.he(s);const i=G_.get(this);i.B8t(),i.c7t(t,s)}L7t(){G_.get(this).f7t()}set W4(t){s_.ue(t),G_.get(this).e7t(t)}get W4(){return G_.get(this).Q8t()}set Q4(t){G_.get(this).h7t(t)}get Q4(){return G_.get(this).q8t()}set J4(t){G_.get(this).o7t(t)}get J4(){return G_.get(this).X8t()}set Y4(t){s_.he(t),G_.get(this).n7t(t)}get Y4(){return G_.get(this).J8t()}set F7t(t){if(s_.Ce(t),t.length<3)throw new Error("expected 3 elements");b_.Ao(t[0],t[1],t[2]),G_.get(this).p7t(b_)}get F7t(){const t=G_.get(this).m7t();return[t.ko(),t.jo(),t.zo()]}set lineHeight(t){s_.he(t),G_.get(this).r7t(t)}get lineHeight(){return G_.get(this).H8t()}set X4(t){s_.ue(t);const s=__.get(t);if(void 0===s)throw new Error("invalid mode");G_.get(this).a7t(s)}get X4(){return w_[G_.get(this).Z8t()]}set verticalAlign(t){s_.ue(t);const s=E_.get(t);if(void 0===s)throw new Error("invalid mode");G_.get(this).l7t(s)}get verticalAlign(){return M_[G_.get(this).K8t()]}set Z4(t){if(!T_.includes(t))throw new Error("invalid mode");G_.get(this).u7t(t)}get Z4(){return G_.get(this).t7t()}set K4(t){s_.ue(t);const s=A_.indexOf(t);if(-1===s)throw new Error("invalid text direction");G_.get(this).y7t(s)}get K4(){return A_[G_.get(this).w7t()]}set k7t(t){G_.get(this).M7t(!!t)}get k7t(){return G_.get(this).s7t()}j7t(t){s_.he(t);const s=G_.get(this);s.S7t("fixed"),s.v7t(t)}z7t(){G_.get(this).S7t("auto")}get i5(){return G_.get(this).b7t()}get e5(){return G_.get(this).C7t()}B7t(){const t=G_.get(this);return[t.b7t(),t.C7t()]}U7t(t,s,i){return s_.ue(t),s_.he(s),s_.he(i),G_.get(this).G7t(t,s,i)}$7t(t,s){return s_.he(t),s_.he(s),G_.get(this).I7t(t,s)}V7t(t,s=0){return s_.ue(t),s_.he(s),G_.get(this)._7t(t,s)}W7t(t){return s_.ue(t),G_.get(this).E7t(t)}Y7t(t){const s=G_.get(this),i=s.yQ().JQ(t);s.k8t(i)}Q7t(){return G_.get(this).N7t()}}}{const D_=self.Gs;D_.uQ.Text.aQ={J7t(t,s){return s?this.zc===t:D_.Ze(this.zc,t)},H7t(){return-1!==this.A8t},d7t:()=>!0,q7t(t,s,i){return this.G7t(t,s,i)}}}{const N_=self.Gs,O_=N_.Wn(N_.bo);N_.uQ.Text.Qdt={$c(t){this.B8t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.i7t(t.toString())},X7t(t){this.B8t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.i7t(this.zc+t)},Z7t(t,s){this.B8t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.c7t(t.toString(),s)},K7t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.M8t&&i===this.OE&&e===this.PE||(this.e7t(t),this.h7t(i),this.o7t(e))},EA(t){this.n7t(t)},t9t(t){O_.ta(t),O_.Xn(),this.p7t(O_)},s9t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},C5t(t){this.FY().$v(t),this.jc.WY()},i9t(){this.f7t()},NA(t){this.r7t(t)},e9t(t){this.a7t(t)},n9t(t){this.l7t(t)},r9t(t){this.g7t(t)},HA(t){this.y7t(t)},h9t(t){this.k8t(t)},o9t(){return this.N7t()},a9t(t){this.M7t(t)},l9t(t,s){this.S7t(["auto","fixed"][t]),this.v7t(s)}}}{const P_=self.Gs;P_.uQ.Text.Jdt={Text(){return this.zc},u9t(){return this.w8t?P_.pn.Lg(this.zc):this.zc},c9t(){return this.M8t},f9t(){return this.S8t},d9t(){return this.b7t()},p9t(){return this.C7t()},m9t(){return this.T8t},g9t(t,s){return this.I7t(t,s)},y9t(t){return this.E7t(t)},w9t(t,s){const i=this._7t(t,s);return i?i.x:0},M9t(t,s){const i=this._7t(t,s);return i?i.y:0},S9t(t,s){const i=this._7t(t,s);return i?i.width:0},T9t(t,s){const i=this._7t(t,s);return i?i.height:0},v9t(){return this.C8t}}}{const R_=self.Gs;R_.uQ.Date=class extends R_.bRt{constructor(t){super(t)}Yn(){super.Yn()}}}{const L_=self.Gs;L_.uQ.Date.Fjt=class extends L_.cLt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}}}{const F_=self.Gs;F_.uQ.Date.Instance=class extends F_.gLt{constructor(t,s){super(t)}}}{const k_=self.Gs,j_=[];j_[0]=[t=>k_.uQ.Date.Jdt.x9t(t),t=>k_.uQ.Date.Jdt.b9t(t),t=>k_.uQ.Date.Jdt.C9t(t),t=>k_.uQ.Date.Jdt.I9t(t),t=>k_.uQ.Date.Jdt.G9t(t),t=>k_.uQ.Date.Jdt._9t(t),t=>k_.uQ.Date.Jdt.E9t(t),t=>k_.uQ.Date.Jdt.A9t(t)],j_[1]=[t=>k_.uQ.Date.Jdt.D9t(t),t=>k_.uQ.Date.Jdt.N9t(t),t=>k_.uQ.Date.Jdt.O9t(t),t=>k_.uQ.Date.Jdt.P9t(t),t=>k_.uQ.Date.Jdt.R9t(t),t=>k_.uQ.Date.Jdt.L9t(t),t=>k_.uQ.Date.Jdt.F9t(t),t=>k_.uQ.Date.Jdt.k9t(t)];const z_=t=>k_.uQ.Date.Jdt.j9t(t);k_.uQ.Date.aQ={z9t:(t,s,i)=>k_.compare(t,s,i),B9t:(t,s,i)=>k_.compare(z_(t),s,z_(i)),U9t:(t,s,i,e)=>k_.compare(j_[1][e](t),s,j_[1][e](i)),$9t:(t,s,i,e,n)=>k_.compare(j_[n][e](z_(t)),s,j_[n][e](z_(i)))}}self.Gs.uQ.Date.Qdt={};{const B_=self.Gs,U_=self.Intl,$_=new Map;$_.set("local",new Map([["year",t=>new Date(t).getFullYear()],["month",t=>new Date(t).getMonth()],["date",t=>new Date(t).getDate()],["day",t=>new Date(t).getDay()],["hours",t=>new Date(t).getHours()],["minutes",t=>new Date(t).getMinutes()],["seconds",t=>new Date(t).getSeconds()],["milliseconds",t=>new Date(t).getMilliseconds()]])),$_.set("universal",new Map([["year",t=>new Date(t).getUTCFullYear()],["month",t=>new Date(t).getUTCMonth()],["date",t=>new Date(t).getUTCDate()],["day",t=>new Date(t).getUTCDay()],["hours",t=>new Date(t).getUTCHours()],["minutes",t=>new Date(t).getUTCMinutes()],["seconds",t=>new Date(t).getUTCSeconds()],["milliseconds",t=>new Date(t).getUTCMilliseconds()]]));const V_=new Map;V_.set("local",new Map([["year",(t,s)=>new Date(t).setFullYear(s)],["month",(t,s)=>new Date(t).setMonth(s)],["date",(t,s)=>new Date(t).setDate(s)],["hours",(t,s)=>new Date(t).setHours(s)],["minutes",(t,s)=>new Date(t).setMinutes(s)],["seconds",(t,s)=>new Date(t).setSeconds(s)],["milliseconds",(t,s)=>new Date(t).setMilliseconds(s)]])),V_.set("universal",new Map([["year",(t,s)=>new Date(t).setUTCFullYear(s)],["month",(t,s)=>new Date(t).setUTCMonth(s)],["date",(t,s)=>new Date(t).setUTCDate(s)],["hours",(t,s)=>new Date(t).setUTCHours(s)],["minutes",(t,s)=>new Date(t).setUTCMinutes(s)],["seconds",(t,s)=>new Date(t).setUTCSeconds(s)],["milliseconds",(t,s)=>new Date(t).setUTCMilliseconds(s)]]));const W_=function(t,s,i,e){i.includes(t)&&(e[s]=t)},Y_=function(t,s){t&&("12"===t?s.hour12=!0:"24"===t&&(s.hour12=!1))},Q_=function(t){try{return U_.getCanonicalLocales(t)}catch(t){return self.navigator.language}},J_=["full","long","medium","short"],H_=["full","long","medium","short"],q_=["long","short","narrow"],X_=["numeric","2-digit"],Z_=["numeric","2-digit","long","short","narrow"],K_=["numeric","2-digit"],tE=["numeric","2-digit"],sE=["numeric","2-digit"],iE=["numeric","2-digit"];B_.uQ.Date.Jdt={V9t:t=>new Date(t).toString(),W9t:t=>new Date(t).toDateString(),Y9t:t=>new Date(t).toTimeString(),Q9t:t=>new Date(t).toLocaleString(),J9t:t=>new Date(t).toLocaleDateString(),H9t:t=>new Date(t).toLocaleTimeString(),q9t:t=>new Date(t).toUTCString(),j9t:t=>Date.parse(t),Ys:(t,s,i,e,n,r,h)=>Date.UTC(t,s,i,e,n,r,h),X9t:()=>Date.now(),Z9t(){return this.yQ().VV()},K9t:()=>new Date(Date.now()).getTimezoneOffset(),x9t:t=>$_.get("local").get("year")(t),D9t:t=>$_.get("universal").get("year")(t),b9t:t=>$_.get("local").get("month")(t),N9t:t=>$_.get("universal").get("month")(t),C9t:t=>$_.get("local").get("date")(t),O9t:t=>$_.get("universal").get("date")(t),I9t:t=>$_.get("local").get("day")(t),P9t:t=>$_.get("universal").get("day")(t),G9t:t=>$_.get("local").get("hours")(t),R9t:t=>$_.get("universal").get("hours")(t),_9t:t=>$_.get("local").get("minutes")(t),L9t:t=>$_.get("universal").get("minutes")(t),E9t:t=>$_.get("local").get("seconds")(t),F9t:t=>$_.get("universal").get("seconds")(t),A9t:t=>$_.get("local").get("milliseconds")(t),k9t:t=>$_.get("universal").get("milliseconds")(t),tts:(t,s)=>V_.get("local").get("year")(t,s),sts:(t,s)=>V_.get("universal").get("year")(t,s),its:(t,s)=>V_.get("local").get("month")(t,s),ets:(t,s)=>V_.get("universal").get("month")(t,s),nts:(t,s)=>V_.get("local").get("date")(t,s),rts:(t,s)=>V_.get("universal").get("date")(t,s),hts(t,s){const i=B_.uQ.Date.Jdt.x9t(t),e=B_.uQ.Date.Jdt.b9t(t),n=B_.uQ.Date.Jdt.C9t(t),r=B_.uQ.Date.Jdt.G9t(t),h=B_.uQ.Date.Jdt._9t(t),o=B_.uQ.Date.Jdt.E9t(t),a=B_.uQ.Date.Jdt.A9t(t),l=B_.uQ.Date.Jdt.I9t(t);return new Date(i,e,n+(s-l),r,h,o,a).getTime()},ots(t,s){const i=B_.uQ.Date.Jdt.D9t(t),e=B_.uQ.Date.Jdt.N9t(t),n=B_.uQ.Date.Jdt.O9t(t),r=B_.uQ.Date.Jdt.R9t(t),h=B_.uQ.Date.Jdt.L9t(t),o=B_.uQ.Date.Jdt.F9t(t),a=B_.uQ.Date.Jdt.k9t(t),l=s-B_.uQ.Date.Jdt.P9t(t);return B_.uQ.Date.Jdt.Ys(i,e,n+l,r,h,o,a)},ats:(t,s)=>V_.get("local").get("hours")(t,s),lts:(t,s)=>V_.get("universal").get("hours")(t,s),uts:(t,s)=>V_.get("local").get("minutes")(t,s),cts:(t,s)=>V_.get("universal").get("minutes")(t,s),fts:(t,s)=>V_.get("local").get("seconds")(t,s),dts:(t,s)=>V_.get("universal").get("seconds")(t,s),pts:(t,s)=>V_.get("local").get("milliseconds")(t,s),mts:(t,s)=>V_.get("universal").get("milliseconds")(t,s),gts:(t,s)=>s-t,yts:t=>Math.trunc(B_.uQ.Date.Jdt.wts(t)),Mts:t=>Math.trunc(B_.uQ.Date.Jdt.Sts(t))%60,Tts:t=>Math.trunc(B_.uQ.Date.Jdt.vts(t))%60,xts:t=>t%1e3,wts:t=>t/36e5,Sts:t=>t/6e4,vts:t=>t/1e3,bts(t,s,i,e,n){const r=Q_(t);if(!r)return;let h={};return W_.call(this,i,"dateStyle",J_,h),W_.call(this,e,"timeStyle",H_,h),Y_.call(this,n,h),new U_.DateTimeFormat(r,h).format(s)},Cts(t,s,i,e,n,r,h,o,a,l){const u=Q_(t);if(!u)return;const c={};return W_.call(this,i,"weekday",q_,c),W_.call(this,e,"year",X_,c),W_.call(this,n,"month",Z_,c),W_.call(this,r,"day",K_,c),W_.call(this,h,"hour",tE,c),W_.call(this,o,"minute",sE,c),W_.call(this,a,"second",iE,c),Y_.call(this,l,c),new U_.DateTimeFormat(u,c).format(s)}}}{const eE=self.Gs;eE.uQ.si=class extends eE.bRt{constructor(t){super(t)}Yn(){super.Yn()}}}{const nE=self.Gs;nE.uQ.si.Fjt=class extends nE.cLt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}}}{const rE=self.Gs,hE="browser";rE.uQ.si.Instance=class extends rE.gLt{constructor(t,s){super(t,hE),this.Its="",this.Gts=!1,this._ts="",this.Ets="",this.Ats=!1,this.Dts=0,this.Nts=0,this.Ots=0,this.Pts=0,this.Rts=!1,this.Lts=!1,this.Fts=new Map,this.kts=!1,this.jts="",this.zts=!1,this.GLt([["online-state",t=>this.Bts(t)],["backbutton",()=>this.Uts()],["sw-message",t=>this.$ts(t)],["hashchange",t=>this.Vts(t)],["install-available",()=>this.Wts()],["app-installed",t=>this.Yts(t)],["fullscreenerror",()=>this.oJt()]]);const i=this.yQ().Mf();this.Xf=new rE.Jf(rE.Uf.Qf(i,"afterfirstlayoutstart",()=>this.Qts()),rE.Uf.Qf(i,"window-resize",()=>this.rJt()),rE.Uf.Qf(i,"window-focus",()=>this.eZt()),rE.Uf.Qf(i,"window-blur",()=>this.iZt()),rE.Uf.Qf(i,"suspend",()=>this.Jts()),rE.Uf.Qf(i,"resume",()=>this.Hts()),rE.Uf.Qf(i,"windowmaximize",()=>this.qts()),rE.Uf.Qf(i,"windowminimize",()=>this.Xts())),this.jc.eQ(this.ELt("get-initial-state",{exportType:this.jc.sJ()}).then(t=>{this.Its=t.location,this.Gts=t.isOnline,this._ts=t.referrer,this.Ets=t.title,this.Ats=t.isCookieEnabled,this.Dts=t.screenWidth,this.Nts=t.screenHeight,this.Ots=t.windowOuterWidth,this.Pts=t.windowOuterHeight,this.Rts=t.windowHasFocus,this.Lts=t.isConstructArcade}))}Yn(){super.Yn()}Qts(){this._Lt("ready-for-sw-messages")}async Bts(t){const s=!!t.isOnline;this.Gts!==s&&(this.Gts=s,this.Gts?await this.hQ(rE.uQ.si.aQ.Zts):await this.hQ(rE.uQ.si.aQ.Kts))}async rJt(){await this.hQ(rE.uQ.si.aQ.tss)}async oJt(){await this.hQ(rE.uQ.si.aQ.sss)}async eZt(){this.Rts=!0,await this.hQ(rE.uQ.si.aQ.iss)}async iZt(){this.Rts=!1,await this.hQ(rE.uQ.si.aQ.ess)}async qts(){await this.hQ(rE.uQ.si.aQ.nss)}async Xts(){await this.hQ(rE.uQ.si.aQ.rss)}Jts(){this.aZ(rE.uQ.si.aQ.hss)}Hts(){this.aZ(rE.uQ.si.aQ.oss)}async Uts(){await this.hQ(rE.uQ.si.aQ.ass)}$ts(t){const s=t.type;"downloading-update"===s?this.aZ(rE.uQ.si.aQ.lss):"update-ready"===s||"update-pending"===s?this.aZ(rE.uQ.si.aQ.uss):"offline-ready"===s&&this.aZ(rE.uQ.si.aQ.css)}Vts(t){this.Its=t.location,this.aZ(rE.uQ.si.aQ.fss)}Wts(){this.kts=!0,this.aZ(rE.uQ.si.aQ.dss)}Yts(t){this.kts=!1,this.aZ(rE.uQ.si.aQ.pss)}mss(){return this.zts}gss(t){t=!!t,this.zts!==t&&(this.zts=t,this._Lt("set-warn-on-close",{enabled:t}))}jLt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.Gts},{name:t+".is-fullscreen",value:this.jc._Y().kJt()}]}]}}}{const oE=self.Gs;oE.uQ.si.aQ={yss(){return this.Gts},Zts:()=>!0,Kts:()=>!0,tss:()=>!0,sss:()=>!0,iss:()=>!0,ess:()=>!0,wss(){return this.Rts},Mss(){return this.Ats},Sss(){return this.jc._Y().kJt()},ass:()=>!0,Tss(t){return(this.jc._Y().A2()<=this.jc._Y().D2()?0:1)===t},lss:()=>!0,uss:()=>!0,css:()=>!0,fss:()=>!0,dss:()=>!0,vss(){return this.kts},xss(t){switch(t){case 0:return"accepted"===this.jts;case 1:return"dismissed"===this.jts;case 2:return"error"===this.jts;case 3:return!0;default:return!1}},pss:()=>!0,bss(t){const s=this.jc._Y().zJt();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},Css(){return this.mss()},nss:()=>!0,rss:()=>!0,Iss(){return!this.jc._W()},hss:()=>!0,oss:()=>!0,Gss:()=>!1,_ss:()=>!1,Ess:()=>!1,Ass:()=>!1,Dss:()=>!1,Nss:()=>!0,Oss:()=>!0}}{const C3=self.Gs,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.uQ.si.Qdt={Pss(t){this._Lt("alert",{message:t.toString()})},Rss(){this.Lts||(this.jc.gZ()?self.yZ.Lss():this._Lt("close"))},Fss(){this._Lt("set-focus",{isFocus:!0})},kss(){this._Lt("set-focus",{isFocus:!1})},jss(){this.Lts||this._Lt("navigate",{type:"back"})},zss(){this.Lts||this._Lt("navigate",{type:"forward"})},Bss(){},Uss(){this.Lts||(this.jc.gZ()?this.jc.mZt({type:"reload"}):this._Lt("navigate",{type:"reload"}))},$ss(t,s){this.ALt("navigate",{type:"url",url:t,target:s,exportType:this.jc.sJ()})},Vss(t,s){this.ALt("navigate",{type:"new-window",url:t,tag:s,exportType:this.jc.sJ()})},Wss(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const i=C3.jYt.YJt(t);this.jc._Y().UJt(i),this.ALt("request-fullscreen",{navUI:s})},Yss(){this.ALt("exit-fullscreen")},Qss(t){const s=t.split(",");for(let t=0,i=s.length;t<i;++t)s[t]=parseInt(s[t],10);this.ALt("vibrate",{pattern:s})},AY(t,s){if(!t||!s)return;const i=this.jc.EV().xQ(t);this.jc.AY(i,s)},Jss(t,s,i){if(!i)return;const e=`data:${s},${encodeURIComponent(t)}`;this.jc.AY(e,i)},Hss(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},qss(t){console.group(t)},Xss(){console.groupEnd()},Zss(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},Kss(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.ALt("lock-orientation",{orientation:s})},tis(){this.ALt("unlock-orientation")},PQ(t){this.jc.EV().PQ(t)},async sis(t,s,i,e){await this.ELt("set-document-css-style",{prop:C3.To(t),value:s,selector:i,"is-all":0!==e})},async iis(t,s,i){const e=await this.ELt("get-document-css-style",{prop:t,selector:s});e.isOk&&this.Fts.set(i.toLowerCase(),e.result.trim())},eis(t){this._Lt("set-hash",{hash:t})},nis(t,s){this._Lt("set-window-size",{windowWidth:t,windowHeight:s})},ris(t,s){this._Lt("set-window-position",{windowX:t,windowY:s})},async his(){const t=await this.ELt("request-install");this.jts=t.result,this.aZ(C3.uQ.si.aQ.xss)},ois(t){this.gss(t)},ais(){this.jc.pZt({type:"maximize-window"})},lis(){this.jc.pZt({type:"minimize-window"})},uis(){this.jc.pZt({type:"restore-window"})}}}{const C3=self.Gs;C3.uQ.si.Jdt={URL(){return this.jc.QV()?this.Its:location.toString()},cis(){return this.jc.QV()?new URL(this.Its).protocol:location.protocol},fis(){return this.jc.QV()?new URL(this.Its).hostname:location.hostname},Port(){return this.jc.QV()?new URL(this.Its).port:location.port},dis(){return this.jc.QV()?new URL(this.Its).pathname:location.pathname},pis(){return this.jc.QV()?new URL(this.Its).hash:location.hash},Hs(){return this.jc.QV()?new URL(this.Its).search:location.search},mis(t){const s=this.jc.QV()?new URL(this.Its).search:location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(s);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},gis(){return this._ts},yis(){return this.Ets},wis:()=>navigator.language,Zs:()=>navigator.platform,Mis:()=>navigator.userAgent,Sis(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.Fts.get(t)||""},Tis:()=>navigator.appName,vis:()=>navigator.appVersion,xis:()=>navigator.product,bis:()=>navigator.vendor,Cis:()=>1,Iis:()=>1/0,Gis(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},_is:()=>self.devicePixelRatio,Eis(){return this.Dts},Ais(){return this.Nts},Dis(){return this.jc._Y().A2()},Nis(){return this.jc._Y().D2()},Ois(){return this.Ots},Pis(){return this.Ots},Ris(){return this.jc._Y().zJt()},Lis(){return this.jts}}}{const aE=self.Gs;aE.uQ.adt=class extends aE.bRt{constructor(t){super(t)}Yn(){super.Yn()}}}{const lE=self.Gs,uE=self.ks,cE=[];lE.uQ.adt.Fjt=class extends lE.cLt{constructor(t){super(t),this.Ajt=t.pzt()}Yn(){lE.Sh(this.Ajt),super.Yn()}HRt(){for(const t of this.Ajt)t.Dkt(this.jc)}Eit(t){const s={gb:this.jc.EB()};return Promise.all(this.Ajt.map(i=>i.Nkt(t,s)))}Rit(){for(const t of this.Ajt)t.Okt()}Nit(){this.Fis()}Fis(){for(const t of this.HTt.lH())t.g0().kis()}$Dt(t){lE.uQ.adt.iRt(this,t)}GNt(t){cE.push({mLt:null,jis:!1,sH:[]})}zis(t,s,i){const e=cE.at(-1);e.mLt=t,e.jis=i,e.sH.push(s)}_Nt(t){const s=cE.pop(),i=s.mLt,e=s.jis;if(!i)return;const n=new Map;for(const t of s.sH)t.EBt(n,i,e);for(const[t,s]of n)t.cH().Mvt(s)}Bis(t){const s=this.gH().Mzt(t),i=this.yQ();return s.Pkt(0).s1().A4(i.Tv(),{gb:i.EB()}).then(()=>this.Fis()),s}Uis(t){for(const s of this.HTt.lH())s.g0().$is(t);this.gH().Szt(t)}Vis(t,s){const i=this.HTt.yzt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.kkt(s);e<0&&(e+=i.Q0()+1);const n=lE._kt.Akt(this.yQ());i.Rkt(n,e);const r=this.yQ();n.s1().A4(r.Tv(),{gb:r.EB()}).then(()=>this.Fis());for(const t of this.HTt.lH())t.g0().Wis();return n}Yis(t,s){const i=this.HTt.yzt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Q0())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.kkt(s);e<0&&(e+=i.Q0()),i.Lkt(e);for(const t of this.HTt.lH())t.g0().Wis()}qRt(){return self.Qis}};const fE=new WeakMap;self.Qis=class extends self.vH{constructor(t){super(t),fE.set(this,t.INt())}Jis(t){uE.ue(t);const s=fE.get(this).gH().yzt(t);return s?s.jkt():null}His(){return fE.get(this).gH().gzt().map(t=>t.jkt())}qis(t){return uE.ue(t),fE.get(this).Bis(t).jkt()}Xis(t){uE.ue(t),fE.get(this).Uis(t)}Zis(t,s){if(uE.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return fE.get(this).Vis(t,s).q0()}Kis(t,s){if(uE.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");fE.get(this).Yis(t,s)}}}{const dE=self.Gs,pE=self.ks,mE=0,gE=1,yE=2,wE=3,ME=dE.Wn(dE.Rect),SE=dE.Wn(dE.El),TE=dE.Wn(dE.Ea),vE=1,xE=2,bE=4;dE.uQ.adt.Instance=class extends dE.VLt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[mE],e=s[gE],n=s[yE],r=s[wE]),this.tes=this.HTt.yzt(e)||this.HTt.pzt()[0],this.ses=dE.Xn(n,0,this.tes.Q0()-1),this.ies=this.tes.Pkt(this.ses);const h=this.ies.s1();this.pL=h.DC(),this.ees=h.ND(),this.nes=h.iFt(),this.JLt(),t.GBt(xE,!0),t.GBt(vE,this.tes.k0()>=0),this.res=Math.abs(this.tes.k0()),this.hes=this.tes.V0(),this.oes=dE.Wn(dE.td),this.aes=0,this.les=0,this.ues="",this.ces=-1,this.fes="",this.des=0;const o=this.FY();this.pes=o.sK(),o.Oq(i),o.yK(r),o.$Z(this.ies.UZ()),o.YZ(this.ies.WZ()),o.DVt(this.ies.f1()),o.FZ(),1===this.HTt.mzt()&&1===this.HTt.pzt()[0].Q0()||0===this.res||this.RLt()}Yn(){this.tes=null,this.ies=null,this.pL=null,this.oes=null,super.Yn()}ZLt(){return this.ies.s1()}Nut(){return!0}D6(){this.pL=null}XLt(){this.kis()}eb(t){const s=this.pL;if(null===s)return;t.jO(s);const i=this.FY();i.h0()?this.V8t(i,t):this.W8t(i,t)}W8t(t,s){let i=this.pes;this.jc.oY()&&(i=t.xVt(i)),s.qO(i,this.nes)}V8t(t,s){const i=t.UVt();if(t.VVt()){t.ZZ(ME,SE,!1);let s=SE;this.jc.oY()&&(s=t.xVt(s)),i.Xx(t.o0(),s,this.nes),t.$Vt(!1)}i.eb(s,t.qZ())}mes(){return this.oes.Ys()}ges(){return this.di._Bt(xE)}yes(t){this.di.GBt(xE,t)}wes(){return this.di._Bt(vE)}Mes(t){this.di.GBt(vE,t)}Ses(){return this.di._Bt(bE)}Tes(t){this.di.GBt(bE,t)}Irt(){this.fes&&this.ves(),this.ces>=0&&this.xes();const t=this.res;if(!this.ges()||0===t)return void this.MLt();const s=this.jc.AW(this.di);this.oes.zu(s);const i=this.mes(),e=this.ies,n=e.i1()/t;if(i<this.aes+n)return;const r=this.tes,h=this.hes,o=r.Q0(),a=r.U0(),l=r.z0(),u=r.Y0();this.wes()?this.ses++:this.ses--,this.aes+=n,this.ses>=o&&(u?(this.Mes(!1),this.ses=o-2):l?this.ses=h:(this.les++,this.les>=a?this.bes(!1):this.ses=h)),this.ses<0&&(u?(this.ses=1,this.Mes(!0),l||(this.les++,this.les>=a&&this.bes(!0))):l?this.ses=h:(this.les++,this.les>=a?this.bes(!0):this.ses=h)),this.ses=dE.Xn(this.ses,0,o-1);const c=r.Pkt(this.ses);i>this.aes+c.i1()/t&&(this.aes=i),this.Ces(e,c)}bes(t){this.ses=t?0:this.tes.Q0()-1,this.yes(!1),this.ues=this.tes.Ac(),this.Tes(!0),this.pLt("animationend",!1,{animationName:this.ues}),this.aZ(dE.uQ.adt.aQ.Ies),this.aZ(dE.uQ.adt.aQ.Ges),this.Tes(!1),this.les=0}Ces(t,s,i){if(t===s)return;const e=this.FY(),n=t.s1(),r=s.s1(),h=n.xy(),o=n.Cy(),a=r.xy(),l=r.Cy();i&&i.mdt?i.mdt(e,h,o,a,l):(h!==a&&e.hy(e.xy()*(a/h)),o!==l&&e.oy(e.Cy()*(l/o))),e.$Z(s.UZ()),e.YZ(s.WZ()),e.DVt(s.f1()),e.FZ(),this.ies=s,this.pL=r.DC(),this.ees=r.ND(),this.nes=r.iFt();const u=this.J1().Zft();for(let i=0,e=u.length;i<e;++i)u[i].BFt(t,s);this.pLt("framechange",!1,{animationName:this.tes.Ac(),_es:this.ses}),this.aZ(dE.uQ.adt.aQ.Ees),this.jc.WY()}Aes(t){this.yes(!0),this.aes=this.mes(),1===t&&0!==this.ses&&(this.ces=0,this.Ses()||this.xes()),this.RLt()}Des(t,s,i){this.fes=t,this.des=s,this.RLt(),!i&&this.Ses()||this.ves()}Nes(){return this.tes}Oes(){return this.fes?this.fes:this.tes.Ac()}$is(t){dE.Ze(t,this.Oes())&&this.Des(this.HTt.Tzt().Ac(),1,!0)}Pes(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.HTt.yzt(this.Oes());if(!s)return;if(-1===(t=s.Fkt(t)))return}isFinite(t)&&(this.ces=t,this.Ses()||this.xes())}Wis(){if(this.fes||-1!==this.ces)return;const t=this.ies,s=this.tes.Pkt(dE.Xn(this.ses,0,this.tes.Q0()-1));t!==s&&this.Ces(t,s),this.tes.Q0()>1&&this.res>0&&this.RLt()}Res(){return this.ses}Les(){return this.ies.w1()}Fes(t){this.res=Math.abs(t),this.Mes(t>=0),this.res>0&&this.RLt()}kes(){return this.wes()?this.res:-this.res}jes(t){"string"==typeof t&&-1===(t=this.tes.Fkt(t))||(t=dE.Xn(Math.floor(t),0,this.tes.Q0()-1),this.hes=t)}zes(){return this.hes}ves(t){const s=this.ies,i=this.HTt.yzt(this.fes);if(this.fes="",!i)return;if(i===this.tes&&this.ges())return;this.tes=i,this.Mes(i.k0()>=0),this.res=Math.abs(i.k0()),this.hes=i.V0(),this.ses=dE.Xn(this.ses,0,this.tes.Q0()-1),1===this.des&&(this.ses=0),this.yes(!0),this.aes=this.mes();const e=this.tes.Pkt(this.ses);this.Ces(s,e,t)}xes(t){const s=this.ies,i=this.ses;if(this.ses=dE.Xn(Math.floor(this.ces),0,this.tes.Q0()-1),this.ces=-1,!t&&i===this.ses)return;const e=this.tes.Pkt(this.ses);this.Ces(s,e),this.aes=this.mes()}kis(){const t=this.ies.s1();this.pL=t.DC(),this.ees=t.ND(),this.nes=t.iFt(),this.FY().$Vt(!0)}DC(){return this.pL}ND(){return this.ees}iFt(){return this.nes}n1(){return this.ies.n1()}UNt(t){const s=this.ies,i=this.FY();let e=null;if("string"==typeof t)e=s.u1(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.l1(t-1)}let n=i.qZ();if(!e)return[i.tx(),i.nx(),n];if(TE.M(e.qkt()),i.h0()){const[t,s,e]=i.o0().ub(TE.Pa(),TE.La());TE.set(t,s),n+=e}return TE.offset(-s.UZ(),-s.WZ()),TE.scale(i.xy(),i.Cy()),TE.rotate(i.JH()),TE.offset(i.tx(),i.nx()),[TE.Pa(),TE.La(),n]}Bes(){return this.FY().LVt().mu()}Ues(t){t=Math.floor(t);const s=this.FY(),i=s.LVt(),e=i.mu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.pu();return[n[2*t+0]+s.tx(),n[2*t+1]+s.nx()]}jLt(){const t=dE.uQ.adt.Qdt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.tes.Ac(),O7t:s=>this.BLt(t.$es,s,0)},{name:s+".current-frame",value:this.ses,O7t:s=>this.BLt(t.Ves,s)},{name:s+".is-playing",value:this.ges(),O7t:s=>s?this.BLt(t.Wes,0):this.BLt(t.Yes)},{name:s+".speed",value:this.res,O7t:s=>this.BLt(t.Qes,s)},{name:s+".repeats",value:this.les,O7t:t=>this.les=t}]}]}Sx(){const t={a:this.tes.s9()};0!==this.aes&&(t.fs=this.aes);const s=this.mes();0!==s&&(t.at=s),0!==this.ses&&(t.f=this.ses),0!==this.res&&(t.cas=this.res),1!==this.les&&(t.ar=this.les),0!==this.hes&&(t.rt=this.hes),this.ges()||(t.ap=this.ges()),this.wes()||(t.af=this.wes());const i=this.FY();return i.gK()&&(t.ce=i.gK()),t}Tx(t){const s=this.gH().wzt(t.a);s&&(this.tes=s),this.aes=t.hasOwnProperty("fs")?t.fs:0,this.oes.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.ses=dE.Xn(i,0,this.tes.Q0()-1),this.res=t.hasOwnProperty("cas")?t.cas:0,this.les=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.hes=dE.Xn(e,0,this.tes.Q0()-1),this.yes(!t.hasOwnProperty("ap")||!!t.ap),this.Mes(!t.hasOwnProperty("af")||!!t.af);const n=this.tes.Pkt(this.ses);this.ies=n,this.kis();const r=this.FY();r.$Z(n.UZ()),r.YZ(n.WZ()),r.DVt(n.f1()),r.yK(!!t.ce),this.ges()&&this.RLt()}Apt(t){const s=this.FY();switch(t){case wE:return s.gK();case yE:return dE.Xn(this.ses,0,this.tes.Q0()-1);case gE:return this.tes.Ac()}}Lpt(t,s,i){const e=this.FY();switch(t){case wE:e.yK(!!s);break;case yE:if(i.pdt){if(!i.ddt)return;{const t=this.tes.Q0()-1,e=s=dE.Xn(s,0,t),n=this.tes.Pkt(this.ses),r=this.tes.Pkt(e);this.Ces(n,r,i),this.ses=dE.Xn(e,0,t)}}else{this.yes(!1);const t=this.tes.Q0()-1,e=s=dE.Xn(s,0,t),n=this.tes.Pkt(this.ses),r=this.tes.Pkt(e);this.Ces(n,r,i),this.ses=dE.Xn(e,0,t)}break;case gE:this.fes=s,this.des=i?.cdt??0,this.ves(i),this.tes.Q0()>1&&this.tes.k0()>0?this.RLt():this.MLt()}}qRt(){return self.Jes}};const CE=new WeakMap,IE=new Map([["current-frame",0],["beginning",1]]);self.Jes=class extends self.c0{constructor(){super(),CE.set(this,self.CX._X().g0())}e1(){return CE.get(this).n1()}h1(t){return this.o1(t)[0]}a1(t){return this.o1(t)[1]}Hes(t){return this.o1(t)[2]}o1(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return CE.get(this).UNt(t)}c1(){return CE.get(this).Bes()}d1(t){return pE.he(t),CE.get(this).Ues(t)[0]}g1(t){return pE.he(t),CE.get(this).Ues(t)[1]}m1(t){return pE.he(t),CE.get(this).Ues(t)}qes(){CE.get(this).yes(!1)}Xes(t="current-frame"){pE.ue(t);const s=IE.get(t);if(void 0===s)throw new Error("invalid mode");CE.get(this).Aes(s)}Zes(t,s="beginning"){pE.ue(t),pE.ue(s);const i=IE.get(s);if(void 0===i)throw new Error("invalid mode");const e=CE.get(this);if(!e.gH().yzt(t))throw new Error(`animation name "${t}" does not exist`);e.Des(t,i)}Jis(t){pE.ue(t);const s=CE.get(this).gH().yzt(t);return s?s.jkt():null}get animation(){return CE.get(this).Nes().jkt()}get animationName(){return CE.get(this).Oes()}set _es(t){pE.he(t),CE.get(this).Pes(t)}get _es(){return CE.get(this).Res()}set Kes(t){pE.ue(t),CE.get(this).Pes(t)}get Kes(){return CE.get(this).Les()}set tns(t){pE.he(t),CE.get(this).Fes(t)}get tns(){return CE.get(this).kes()}set sns(t){pE.he(t),CE.get(this).jes(t)}get sns(){return CE.get(this).zes()}get imageWidth(){return CE.get(this).ZLt().xy()}get imageHeight(){return CE.get(this).ZLt().Cy()}ins(){const t=CE.get(this).ZLt();return[t.xy(),t.Cy()]}async ens(t){pE.je(t,Blob);const s=CE.get(this),i=s.yQ(),e=s.ZLt(),n=dE.Wn(dE.tkt);if(n.pkt(i,t),await n.A4(i.Tv(),{gb:i.EB()}),s.Qn())return void n.Yn();e.mkt(n);const r=s.INt();r.Fis(),r.gH().Mf().dispatchEvent(new dE.Event("animationframeimagechange")),i.WY()}nns(t,s){"string"==typeof s&&(s=dE.Lh(s)),CE.get(this).FY().MVt(!!t,s)}}}{const GE=self.Gs;GE.uQ.adt.aQ={rns(t){return GE.Ze(this.Oes(),t)},hns(t,s){return GE.compare(this.ses,t,s)},ons(t,s){if("string"!=typeof s)return!1;const i=this.ies.w1();return GE.compare(i.toLowerCase(),t,s.toLowerCase())},ans(t,s){return GE.compare(this.kes(),t,s)},Ges(t){return GE.Ze(this.ues,t)},Ies:()=>!0,Ees:()=>!0,lns(){return this.FY().xy()<0},uns(){return this.FY().Cy()<0},cns:()=>!0,fns:()=>!0,gK(){return this.FY().gK()}}}{const _E=self.Gs;_E.uQ.adt.Qdt={pns(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.UNt(i),o=this.jc.IH(t,s,r,h,e,n);if(!o)return;if(e&&s.GH(o),t.KJ().OJ()){const t=o.FY();t.QH(this.FY().JH()),t.FZ()}const a=this.jc.hW();a._H(!0),o.EH(),a._H(!1),t!==this.jc.wbt().gH()&&this.wLt.zis(t,o,e)},Yes(){this.yes(!1)},Wes(t){this.Aes(t)},$es(t,s){this.Des(t,s)},Ves(t){this.Pes(t)},Qes(t){this.Fes(t)},mns(t){this.jes(t)},gns(t,s){try{0===t?this.INt().Bis(s):this.INt().Uis(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},yns(t,s,i){try{0===t?this.INt().Vis(s,i):this.INt().Yis(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},wns(t){const s=this.FY(),i=s.xy(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.hy(e),s.FZ())},Mns(t){const s=this.FY(),i=s.Cy(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.oy(e),s.FZ())},WH(t){const s=this.ies.s1(),i=this.FY(),e=i.xy()<0?-1:1,n=i.Cy()<0?-1:1,r=s.xy()*t*e,h=s.Cy()*t*n;i.xy()===r&&i.Cy()===h||(i.tD(r,h),i.FZ())},async Sns(t,s,i){const e=this.ies.s1(),n=this.FY(),r=this.jc,h=this.wLt;if(e.X5()===t)return 0===s&&(n.tD(e.xy(),e.Cy()),n.FZ()),void this.aZ(_E.uQ.adt.aQ.cns);const o=_E.Wn(_E.tkt);try{if(await o.dkt(r,t),!o.b6())throw new Error("image failed to load");if(this.Qn())return void o.Yn();await o.A4(r.Tv(),{gb:r.EB()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Qn()||this.aZ(_E.uQ.adt.aQ.fns))}this.Qn()?o.Yn():(e.mkt(o),h.Fis(),h.gH().Mf().dispatchEvent(new _E.Event("animationframeimagechange")),r.WY(),0===s&&(n.tD(e.xy(),e.Cy()),n.FZ()),await this.hQ(_E.uQ.adt.aQ.cns))},Tns(t){this.FY().yK(t)},MVt(t,s){this.FY().MVt(0===t,_E.Lh(s))},C5t(t){this.FY().$v(t),this.jc.WY()}}}self.Gs.uQ.adt.Jdt={vns(){return this.Res()},xns(){return this.Les()},bns(){return this.tes.Q0()},Cns(){return this.tes.Ac()},Ins(){return this.kes()},Gns(){return this.tes.k0()},_ns(t){return this.UNt(t)[0]},Ens(t){return this.UNt(t)[1]},Ans(t){return this.UNt(t)[2]},Dns(){return this.n1()},Nns(){return this.ZLt().xy()},Ons(){return this.ZLt().Cy()},Pns(t){return this.Ues(t)[0]},Rns(t){return this.Ues(t)[1]},Lns(){return this.Bes()}};{const EE=self.Gs,AE="text-input";EE.uQ.Fns=class extends EE.iLt{constructor(t){super(t,AE),this.hLt("click",(t,s)=>t.kns(s)),this.hLt("dblclick",(t,s)=>t.jns(s)),this.hLt("change",(t,s)=>t.zns(s))}Yn(){super.Yn()}}}{const DE=self.Gs;DE.uQ.Fns.Fjt=class extends DE.cLt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}}}{const NE=self.Gs,OE=self.ks,PE=0,RE=1,LE=2,FE=3,kE=4,jE=5,zE=6,BE=7,UE=8,$E=9,VE=10,WE="text-input",YE=["text","password","email","number","tel","url","textarea","search"];NE.uQ.Fns.Instance=class extends NE.hFt{constructor(t,s){super(t,WE),this.zc="",this.Bns="",this.Uns="",this.cEt=!0,this.$ns=!1,this.Vns=!1,this.Qc="text",this.uFt=!0,this.Wns=-1,this.Bc="",this.Yns="",s&&(this.zc=s[PE],this.Bns=s[RE],this.Uns=s[LE],this.FY().Oq(s[FE]),this.cEt=s[kE],this.$ns=s[jE],this.Vns=s[zE],this.Qc=YE[s[BE]],this.uFt=s[UE],this.Bc=s[$E],this.Yns=s[VE]),this.TFt({type:this.Qc,id:this.Bc,className:this.Yns})}Yn(){super.Yn()}vFt(){return{text:this.zc,placeholder:this.Bns,title:this.Uns,isEnabled:this.cEt,isReadOnly:this.$ns,spellCheck:this.Vns,maxLength:this.Wns}}async kns(t){this.pLt("click",!0),await this.hQ(NE.uQ.Fns.aQ.Qns)}async jns(t){this.pLt("dblclick",!0),await this.hQ(NE.uQ.Fns.aQ.Jns)}async zns(t){this.zc=t.text,this.pLt("change",!0),await this.hQ(NE.uQ.Fns.aQ.Hns)}i7t(t){this.zc!==t&&(this.zc=t,this.CFt())}qns(){return this.zc}Xns(t){this.Bns!==t&&(this.Bns=t,this.CFt())}Zns(){return this.Bns}Kns(t){this.Uns!==t&&(this.Uns=t,this.CFt())}trs(){return this.Uns}nPt(t){t=!!t,this.cEt!==t&&(this.cEt=t,this.CFt())}hPt(){return this.cEt}srs(t){t=!!t,this.$ns!==t&&(this.$ns=t,this.CFt())}irs(){return this.$ns}ers(t){t=Math.max(+t,-1),this.Wns!==t&&(this.Wns=t,this.CFt())}nrs(){return this.Wns}rrs(){Promise.resolve().then(()=>this.wFt("scroll-to-bottom"))}eb(t){}Sx(){return{t:this.zc,p:this.Bns,ti:this.Uns,e:this.cEt,r:this.$ns,sp:this.Vns,ml:this.Wns,type:this.Qc,id:this.Bc}}Tx(t){this.zc=t.t,this.Bns=t.p,this.Uns=t.ti,this.cEt=t.e,this.$ns=t.r,this.Vns=t.sp,this.Wns=t.hasOwnProperty("ml")?t.ml:-1,this.Qc=t.type,this.Bc=t.id,this.CFt()}Apt(t){switch(t){case PE:return this.zc;case RE:return this.Bns;case LE:return this.Uns;case kE:return this.cEt;case jE:return this.$ns;case zE:return this.Vns;case UE:return this.uFt}}Lpt(t,s){switch(t){case PE:if(this.zc===s)return;this.zc=s,this.CFt();break;case RE:if(this.Bns===s)return;this.Bns=s,this.CFt();break;case LE:if(this.Uns===s)return;this.Uns=s,this.CFt();break;case kE:if(this.cEt===!!s)return;this.cEt=!!s,this.CFt();break;case jE:if(this.$ns===!!s)return;this.$ns=!!s,this.CFt();break;case zE:if(this.Vns===!!s)return;this.Vns=!!s,this.CFt();break;case UE:this.uFt=!!s}}jLt(){const t=NE.uQ.Fns.Qdt,s="plugins.textbox";return[{title:s+".name",properties:[{name:s+".properties.text.name",value:this.zc,O7t:s=>this.BLt(t.$c,s)},{name:s+".properties.enabled.name",value:this.cEt,O7t:s=>this.BLt(t.sRt,s)},{name:s+".properties.read-only.name",value:this.$ns,O7t:s=>this.BLt(t.hrs,s)}]}]}qRt(){return self.ors}};const QE=new WeakMap;self.ors=class extends self.d0{constructor(){super(),QE.set(this,self.CX._X().g0())}set text(t){OE.ue(t),QE.get(this).i7t(t)}get text(){return QE.get(this).qns()}set placeholder(t){OE.ue(t),QE.get(this).Xns(t)}get placeholder(){return QE.get(this).Zns()}set ars(t){OE.ue(t),QE.get(this).Kns(t)}get ars(){return QE.get(this).trs()}set isEnabled(t){QE.get(this).nPt(t)}get isEnabled(){return QE.get(this).hPt()}set lrs(t){QE.get(this).srs(t)}get lrs(){return QE.get(this).irs()}set maxLength(t){OE.he(t),QE.get(this).ers(t)}get maxLength(){return QE.get(this).nrs()}urs(){QE.get(this).rrs()}}}{const JE=self.Gs;JE.uQ.Fns.aQ={J7t(t,s){return 0===s?JE.Ze(this.zc,t):this.zc===t},Hns:()=>!0,Qns:()=>!0,Jns:()=>!0}}self.Gs.uQ.Fns.Qdt={$c(t){this.i7t(t.toString())},X7t(t){""!==t&&this.i7t(this.qns()+t)},crs(t){this.Xns(t)},frs(t){this.Kns(t)},hrs(t){this.srs(0===t)},drs(){this.rrs()},prs(t){this.ers(t)}},self.Gs.uQ.Fns.Jdt={Text(){return this.qns()},mrs(){return this.nrs()}};{const HE=self.Gs;HE.uQ.grs=class extends HE.bRt{constructor(t){super(t)}Yn(){super.Yn()}}}{const qE=self.Gs;qE.uQ.grs.Fjt=class extends qE.cLt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}}}{const XE=self.Gs,ZE="localstorage";XE.uQ.grs.Instance=class extends XE.gLt{constructor(t,s){super(t,ZE),this.yrs="",this.YG="",this.wrs=[],this.Mrs="",this.Srs=!1,this.Trs=0,this.vrs=0,this.xrs=!1,s&&(this.xrs=s[0]);const i=this.jc.SJ();this.MJ=null,this.xrs?this.MJ=i.Ii({Gi:!0}):this.MJ=i,this.brs=new Map,this.Crs=!1,this.jc.eQ(this.Kv())}async Kv(){const t=await Promise.race([this.ELt("init"),XE.ph(3e3)]);t&&(this.Srs=t.isPersistent)}Yn(){super.Yn()}async Irs(t){this.Mrs=this.Grs(t),await this.hQ(XE.uQ.grs.aQ._rs)}Grs(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}jLt(){return this.Crs||this.Ers(),[{title:"plugins.localstorage.name",properties:[...this.brs.entries()].map(t=>({name:"$"+t[0],value:t[1],O7t:s=>this.MJ.setItem(t[0],s)}))}]}async Ers(){this.Crs=!0;try{const t=await this.MJ.keys();t.sort((t,s)=>{const i=t.toLowerCase(),e=s.toLowerCase();return i<e?-1:e<i?1:0});const s=await Promise.all(t.map(t=>this.MJ.getItem(t)));this.brs.clear();for(let i=0,e=t.length;i<e;++i)this.brs.set(t[i],s[i])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.Crs=!1}}}}{const KE=self.Gs;KE.uQ.grs.aQ={Ars(t){return this.yrs===t},Drs:()=>!0,Nrs(t){return this.yrs===t},Ors:()=>!0,Prs(t){return this.yrs===t},Rrs:()=>!0,Lrs:()=>!0,Frs:()=>!0,_rs:()=>!0,krs(t){return this.yrs===t},jrs(t){return this.yrs===t},zrs(t,s){return KE.compare(this.yrs,t,s)},Brs(t,s){return KE.compare(this.YG,t,s)},Urs(){return this.vrs>0},$rs(){return this.Trs>0},Vrs:()=>!0,Wrs:()=>!0,Yrs(){return this.Srs}}}{let tA=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=tA;const sA=self.Gs;sA.uQ.grs.Qdt={async Qrs(t,s){this.vrs++;try{const i=await this.MJ.setItem(t,s);await this.CLt(async()=>{this.yrs=t,this.YG=i,await this.hQ(sA.uQ.grs.aQ.Drs),await this.hQ(sA.uQ.grs.aQ.Ars)})}catch(t){await this.Irs(t)}finally{this.vrs--,0===this.vrs&&await this.hQ(sA.uQ.grs.aQ.Vrs)}},async Jrs(t,s){if(!s)return;const i=s.MOt(this.di);if(!i)return;const e=i.g0();if(!e)return;const n=e.Hrs();this.vrs++;try{await this.MJ.setItem(t,n),await this.CLt(async()=>{this.yrs=t,this.YG="",await this.hQ(sA.uQ.grs.aQ.Drs),await this.hQ(sA.uQ.grs.aQ.Ars)})}catch(t){await this.Irs(t)}finally{this.vrs--,0===this.vrs&&await this.hQ(sA.uQ.grs.aQ.Vrs)}},async qrs(t){this.Trs++;try{const s=await this.MJ.getItem(t);await this.CLt(async()=>{this.yrs=t,this.YG=tA(s)?s:"",await this.hQ(sA.uQ.grs.aQ.Ors),await this.hQ(sA.uQ.grs.aQ.Nrs)})}catch(t){await this.Irs(t)}finally{this.Trs--,0===this.Trs&&await this.hQ(sA.uQ.grs.aQ.Wrs)}},async Xrs(t,s){if(!s)return;const i=s.MOt(this.di);if(!i)return;const e=i.g0();this.Trs++;try{let s=await this.MJ.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.CLt(async()=>{this.YG="",this.yrs=t,e.Zrs(s),await this.hQ(sA.uQ.grs.aQ.Ors),await this.hQ(sA.uQ.grs.aQ.Nrs)})}catch(t){await this.Irs(t)}finally{this.Trs--,0===this.Trs&&await this.hQ(sA.uQ.grs.aQ.Wrs)}},async Krs(t){try{const s=await this.MJ.getItem(t);await this.CLt(async()=>{this.yrs=t,null==s?(this.YG="",await this.hQ(sA.uQ.grs.aQ.jrs)):(this.YG=tA(s)?s:"",await this.hQ(sA.uQ.grs.aQ.krs))})}catch(t){await this.Irs(t)}},async Rc(t){try{await this.MJ.removeItem(t),await this.CLt(async()=>{this.yrs=t,this.YG="",await this.hQ(sA.uQ.grs.aQ.Rrs),await this.hQ(sA.uQ.grs.aQ.Prs)})}catch(t){await this.Irs(t)}},async ths(){try{await this.MJ.clear(),await this.CLt(async()=>{this.yrs="",this.YG="",sA.Sh(this.wrs),await this.hQ(sA.uQ.grs.aQ.Lrs)})}catch(t){await this.Irs(t)}},async shs(){try{const t=await this.MJ.keys();await this.CLt(async()=>{this.wrs=t,await this.hQ(sA.uQ.grs.aQ.Frs)})}catch(t){await this.Irs(t)}},async ihs(){const t=await this.ELt("request-persistent");t.isOk&&(this.Srs=t.isPersistent)},ehs(t){if(!this.xrs)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.MJ.Ci(new Map(s.items))}}}self.Gs.uQ.grs.Jdt={nhs(){return this.YG},rhs(){return this.yrs},hhs(){return this.wrs.length},ohs(t){return(t=Math.floor(t))<0||t>=this.wrs.length?"":this.wrs[t]},ahs(){return this.Mrs},lhs(){return this.xrs?JSON.stringify({"is-c3-storage":!0,items:[...this.MJ.bi()]}):""}};{const iA=self.Gs,eA=[];iA.uQ.Audio=class extends iA.bRt{constructor(t){super(t)}uhs(t){eA.push(t)}static async chs(){await Promise.all(eA),iA.Sh(eA)}Yn(){super.Yn()}}}{let nA=function(){return aA.qJ().g0()},rA=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=nA,GetAudioDOMInterface=rA;const hA=self.Gs,oA=self.ks;hA.uQ.Audio.Fjt=class extends hA.cLt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}qRt(){return self.fhs}};let aA=null;self.fhs=class extends self.vH{constructor(t){super(t),aA=t}get dhs(){return rA().GetAudioContextExtern()}get phs(){return rA().GetDestinationNodeExtern()}get mhs(){return nA().ghs()}set mhs(t){nA().yhs(t)}get whs(){return nA().Mhs()}set whs(t){oA.he(t),nA().Shs(t)}Ths(){nA().vhs()}}}{const lA=self.Gs,uA="audio",cA=["interactive","balanced","playback"];lA.uQ.Audio.Instance=class extends lA.gLt{constructor(t,s){super(t,uA),this.xhs=0,this.bhs=0,this.Chs=[],this.Ihs=!0,this.Ghs=0,this._hs=0,this.Ehs=!1,this.Ahs=1,this.Dhs=1,this.Nhs=[this.jc.x9()/2,this.jc.b9()/2,600],this.Ohs=[0,0,-1],this.Phs=[0,1,0],this.Rhs=600,this.Lhs=1e4,this.Fhs=1,this.khs=null,this.jhs=-1,this.zhs=1,this.Bhs=!1,this.Uhs=0,this.$hs="suspended",this.Vhs=0,this.Whs=new Map,this.Yhs=0,this.Qhs=0,this.Jhs=new Map,this.Hhs=new Map;let i="interactive";s&&(this.Ghs=s[0],this._hs=s[1],this.Ehs=s[2],i=cA[s[3]],this.Ihs=s[4],this.Ahs=s[5],this.Dhs=s[6],this.Nhs[2]=s[7],this.Rhs=s[8],this.Lhs=s[9],this.Fhs=s[10]),this.qhs=[],this.Xhs=[],this.Zhs=[],this.GLt([["state",t=>this.Khs(t)],["audiocontext-state",t=>this.tos(t)],["fxstate",t=>this.sos(t)],["trigger",t=>this.ios(t)],["buffer-metadata",t=>this.eos(t)]]);const e=this.yQ().Mf();this.Xf=new lA.Jf(lA.Uf.Qf(e,"instancedestroy",t=>this.nos(t.G0)),lA.Uf.Qf(e,"afterload",()=>this.Gnt()),lA.Uf.Qf(e,"suspend",()=>this.Jts()),lA.Uf.Qf(e,"resume",()=>this.Hts()));const n=this.jc.sJ(),r="Safari"===lA.Zs.si,h=this.jc.QKt()||"macos-wkwebview"===n,o="playable-ad-single-file"===n,a="cordova"===n&&"Android"===lA.Zs.Ks,l=r||h||o||a;this.jc.eQ(this.ELt("create-audio-context",{preloadList:this.jc.EV().m6().map(t=>({originalUrl:t.g6,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.Ghs,latencyHint:i,panningModel:this.Ahs,distanceModel:this.Dhs,refDistance:this.Rhs,maxDistance:this.Lhs,rolloffFactor:this.Fhs,listenerPos:this.Nhs,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.Uhs=t.sampleRate,this.$hs=t.audioContextState,this.Vhs=t.outputLatency})),this.RLt()}Yn(){this.khs=null,super.Yn()}ros(t){return this.Ihs?t.split(" ").filter(t=>!!t):t?[t]:[]}hos(t,s){for(const i of s){let s=!1;for(const e of t)if(lA.Ze(e,i)){s=!0;break}if(!s)return!1}return!0}oos(t,s){return this.hos(t,this.ros(s))}uhs(t){this.KJ().uhs(t)}nos(t){this.khs===t&&(this.khs=null)}aos(t){return Math.pow(10,t/20)}los(t){const s=this.aos(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}uos(t){return Math.log(t)/Math.log(10)*20}fos(t){return this.uos(Math.max(Math.min(t,1),0))}dos(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.xhs:this.bhs,this.xhs=0,this.bhs=0,{pos:t,mos:s}}Jts(){this.Ehs||this._Lt("set-suspended",{isSuspended:!0})}Hts(){this.Ehs||this._Lt("set-suspended",{isSuspended:!1})}Khs(t){const s=t.tickCount;this.Vhs=t.outputLatency;const i=this.qhs.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder));this.qhs=t.audioInstances,this.Zhs=t.analysers,i.length>0&&lA.On(this.qhs,i)}eos(t){this.Jhs.set(t.originalUrl,{duration:t.duration})}tos(t){this.$hs=t.audioContextState}ept(){return this.jc.xJt()?"running":this.$hs}sos(t){this.Xhs=t.fxstate}gos(t){const s=this.ros(t);for(const t of this.qhs)if(this.hos(t.tags,s))return t;return null}yos(t){const s=this.ros(t);return this.qhs.some(t=>this.hos(t.tags,s)&&t.isPlaying)}wos(t,s,i,e,n){if(this.yos(s))return null;const r=this.Jhs.get(t),h={tags:this.ros(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.qhs.push(h),h}Mos(t){const s=this.ros(t);for(const t of this.qhs)this.hos(t.tags,s)&&(t.isPlaying=!1)}async ios(t){const s=t.type;this.Chs=t.tags;const i=t.aiid;if("ended"===s){for(const t of this.qhs)if(t.aiid===i){t.isPlaying=!1;break}await this.hQ(lA.uQ.Audio.aQ.Sos)}else"fade-ended"===s&&await this.hQ(lA.uQ.Audio.aQ.Tos)}vos(t){return this.oos(this.Chs,t)}Irt(){const t={timeScale:this.jc.zW(),gameTime:this.jc.UKt(),instPans:this.xos(),tickCount:this.jc.$Kt()};if(this.khs){const s=this.khs.FY();this.Nhs[0]=s.tx(),this.Nhs[1]=s.nx(),t.listenerPos=this.Nhs,t.listenerOrientation=[...this.Ohs,...this.Phs]}this._Lt("tick",t)}bos(t,s,i,e,n){if(0===i)return[t,s];const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=e,s+=n]}xos(){return this.qhs.filter(t=>-1!==t.uid).map(t=>this.jc.NY(t.uid)).filter(t=>t).map(t=>{const s=t.FY(),i=s.jY().JH(),[e,n]=this.bos(s.tx(),s.nx(),-i,this.Nhs[0],this.Nhs[1]);return{uid:t.LX(),x:e,y:n,z:s.qZ(),angle:s.JH()-i}})}Cos(t,s){for(const i of this.Zhs)if(i.index===s&&lA.Ze(i.tag,t))return i;return null}Ios(t){for(const s of this.ros(t)){const t=s.toLowerCase();this.Whs.set(t,(this.Whs.get(t)||0)+1)}}ghs(){return this.Bhs}yhs(t){t=!!t,this.Bhs!==t&&(this.Bhs=t,this._Lt("set-silent",{isSilent:t}))}Mhs(){return this.zhs}Shs(t){this.zhs!==t&&(this.zhs=t,this._Lt("set-master-volume",{vol:t}))}vhs(){this._Lt("stop-all");for(const t of this.qhs)t.isPlaying=!1}Gos(t){return!(t.hasOwnProperty("placeholder")||3===this._hs||t.isMusic&&1===this._hs||!t.isMusic&&2===this._hs)}Sx(){return{isSilent:this.Bhs,masterVolume:this.zhs,listenerZ:this.Nhs[2],listenerForwardVec:this.Ohs,listenerUpVec:this.Phs,listenerUid:this.khs?this.khs.LX():-1,remoteUrls:[...this.Hhs.entries()],playing:this.qhs.filter(t=>this.Gos(t)),effects:this.Xhs,analysers:this.Zhs}}Tx(t){if(this.Bhs=t.isSilent,this.zhs=t.masterVolume,this.Nhs[2]=t.listenerZ,this.khs=null,this.jhs=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.Ohs=t.listenerForwardVec:this.Ohs=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.Phs=t.listenerUpVec:this.Phs=[0,1,0],this.Hhs.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.Hhs.set(s,i);this.qhs=t.playing;for(const t of this.qhs)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.Xhs=t.effects,this.Zhs=t.analysers}Gnt(){if(-1!==this.jhs&&(this.khs=this.jc.NY(this.jhs),this.jhs=-1,this.khs)){const t=this.khs.FY();this.Nhs[0]=t.tx(),this.Nhs[1]=t.nx()}for(const t of this.qhs){const s=this.jc.EV().p6(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.Xhs))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.jc.EV().p6(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this._Lt("load-state",{saveLoadMode:this._hs,timeScale:this.jc.zW(),gameTime:this.jc.UKt(),listenerPos:this.Nhs,listenerOrientation:[...this.Ohs,...this.Phs],isSilent:this.Bhs,masterVolume:this.zhs,playing:this.qhs.filter(t=>null!==t.bufferUrl),effects:this.Xhs})}jLt(){const t=[];for(const[s,i]of Object.entries(this.Xhs))t.push({name:"$"+s,value:i.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.qhs.length},...this.qhs.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self.Gs.uQ.Audio.aQ={Sos(t){return this.vos(t)},Tos(t){return this.vos(t)},_os(){return this.Qhs===this.Yhs},Eos:()=>!0,Aos(){return this.ghs()},Dos(){for(const t of this.qhs)if(t.isPlaying)return!0;return!1},Nos(t){return this.yos(t)}};{const fA=self.Gs,dA=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];fA.uQ.Audio.Qdt={Play(t,s,i,e,n){const r=fA.uQ.Audio.Qdt.Oos.call(this,t,s,i,e,n);return this.uhs(r),r},npt(t,s,i,e){fA.uQ.Audio.Qdt.Oos.call(this,t,0,s,0,i,e)},async Oos(t,s,i,e,n,r){if(this.Bhs)return;const h=t[1],o=this.jc.EV().p6(t[0]);if(!o)return;const{pos:a,mos:l}=this.dos(),u=this.wos(t[0],n,h,0!==s,this.los(i));try{await this.ELt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.ros(n),isLooping:0!==s,vol:this.los(i),stereoPan:fA.Xn(e/100,-1,1),pos:r||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.jc.$Kt())}},async Pos(t,s,i,e,n,r,h,o,a,l,u){if(this.Bhs)return;const c=t[1],f=this.jc.EV().p6(t[0]);if(!f)return;const{pos:d,mos:p}=this.dos(),m=this.wos(t[0],u,c,0!==s,this.los(i));try{await this.ELt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.ros(u),isLooping:0!==s,vol:this.los(i),pos:0,off:d,trueClock:p,panning:{x:e,y:n,z:r,angle:fA.Kn(h),innerAngle:fA.Kn(o),outerAngle:fA.Kn(a),outerGain:this.los(l)}})}finally{m&&(m.placeholder=this.jc.$Kt())}},async Ros(t,s,i,e,n,r,h,o){if(this.Bhs)return;if(!e)return;const a=e.MOt();if(!a||!a.FY())return;const l=a.FY(),u=l.jY().JH(),[c,f]=this.bos(l.tx(),l.nx(),-u,this.Nhs[0],this.Nhs[1]),d=t[1],p=this.jc.EV().p6(t[0]);if(!p)return;const{pos:m,mos:g}=this.dos(),y=this.wos(t[0],o,d,0!==s,this.los(i));try{await this.ELt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.ros(o),isLooping:0!==s,vol:this.los(i),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.qZ(),angle:l.JH()-u,innerAngle:fA.Kn(n),outerAngle:fA.Kn(r),outerGain:this.los(h),uid:a.LX()}})}finally{y&&(y.placeholder=this.jc.$Kt())}},async Los(t,s,i,e,n,r){if(this.Bhs)return;const h=1===t,o=this.jc.EV().p6(s)||this.Hhs.get(s.toLowerCase());if(!o)return;const{pos:a,mos:l}=this.dos(),u=this.wos(s,r,h,0!==i,this.los(e));try{await this.ELt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.ros(r),isLooping:0!==i,vol:this.los(e),stereoPan:fA.Xn(n/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.jc.$Kt())}},async Fos(t,s,i,e,n,r,h,o,a,l,u,c){if(this.Bhs)return;const f=1===t,d=this.jc.EV().p6(s)||this.Hhs.get(s.toLowerCase());if(!d)return;const{pos:p,mos:m}=this.dos(),g=this.wos(s,c,f,0!==i,this.los(e));try{await this.ELt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.ros(c),isLooping:0!==i,vol:this.los(e),pos:0,off:p,trueClock:m,panning:{x:n,y:r,z:h,angle:fA.Kn(o),innerAngle:fA.Kn(a),outerAngle:fA.Kn(l),outerGain:this.los(u)}})}finally{g&&(g.placeholder=this.jc.$Kt())}},async kos(t,s,i,e,n,r,h,o,a){if(this.Bhs)return;if(this.Bhs)return;if(!n)return;const l=n.MOt();if(!l||!l.FY())return;const u=l.FY(),c=u.jY().JH(),[f,d]=this.bos(u.tx(),u.nx(),-c,this.Nhs[0],this.Nhs[1]),p=1===t,m=this.jc.EV().p6(s)||this.Hhs.get(s.toLowerCase());if(!m)return;const{pos:g,mos:y}=this.dos(),w=this.wos(s,a,p,0!==i,this.los(e));try{await this.ELt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.ros(a),isLooping:0!==i,vol:this.los(e),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.qZ(),angle:u.JH()-c,innerAngle:fA.Kn(r),outerAngle:fA.Kn(h),outerGain:this.los(o),uid:l.LX()}})}finally{w&&(w.placeholder=this.jc.$Kt())}},jos(t,s){this._Lt("set-looping",{tags:this.ros(t),isLooping:0===s})},zos(t,s){this._Lt("set-muted",{tags:this.ros(t),isMuted:0===s})},spt(t,s){this._Lt("set-volume",{tags:this.ros(t),vol:this.los(s)})},Bos(t,s,i,e){this._Lt("fade-volume",{tags:this.ros(t),vol:this.los(s),duration:i,stopOnEnd:0===e})},Uos(t,s){this._Lt("set-stereo-pan",{tags:this.ros(t),p:fA.Xn(s/100,-1,1)})},async $os(t){const s=t[1],i=this.jc.EV().p6(t[0]);i&&(this.Yhs++,await this.ELt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.Qhs++)},async Vos(t,s){const i=1===t,e=this.jc.EV().p6(s)||this.Hhs.get(s.toLowerCase());e&&(this.Yhs++,await this.ELt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.Qhs++)},N1(t,s){this._Lt("set-playback-rate",{tags:this.ros(t),rate:Math.max(s,0)})},T1(t){this.Mos(t),this._Lt("stop",{tags:this.ros(t)})},Wos(){this.vhs()},Yos(t,s){this._Lt("set-paused",{tags:this.ros(t),paused:0===s})},Qos(t,s){this._Lt("seek",{tags:this.ros(t),pos:s})},Jos(t){2===t&&(t=this.ghs()?1:0),this.yhs(0===t)},Hos(t){const s=this.los(t);this.Shs(s)},qos(t,s,i,e,n,r,h){const o=dA[s];this.Ios(t),this._Lt("add-effect",{type:"filter",tags:this.ros(t),params:[o,i,e,n,r,fA.Xn(h/100,0,1)]})},Xos(t,s,i,e){this.Ios(t),this._Lt("add-effect",{type:"delay",tags:this.ros(t),params:[s,this.los(i),fA.Xn(e/100,0,1)]})},Zos(t,s,i,e,n,r){this.Ios(t),this._Lt("add-effect",{type:"flanger",tags:this.ros(t),params:[s/1e3,i/1e3,e,n/100,fA.Xn(r/100,0,1)]})},Kos(t,s,i,e,n,r,h){this.Ios(t),this._Lt("add-effect",{type:"phaser",tags:this.ros(t),params:[s,i,e,n,r,fA.Xn(h/100,0,1)]})},tas(t,s,i,e){const n=this.jc.EV().p6(s[0]);n&&(this.Ios(t),this._Lt("add-effect",{type:"convolution",tags:this.ros(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,fA.Xn(e/100,0,1)]}))},sas(t,s){this.Ios(t),this._Lt("add-effect",{type:"gain",tags:this.ros(t),params:[this.los(s)]})},ias(t,s){this.Ios(t),this._Lt("add-effect",{type:"stereopan",tags:this.ros(t),params:[fA.Xn(s/100,-1,1)]})},eas(t){this.Ios(t),this._Lt("add-effect",{type:"gain",tags:this.ros(t),params:[0]})},nas(t,s,i){this.Ios(t),this._Lt("add-effect",{type:"tremolo",tags:this.ros(t),params:[s,fA.Xn(i/100,0,1)]})},ras(t,s,i){this.Ios(t),this._Lt("add-effect",{type:"ringmod",tags:this.ros(t),params:[s,fA.Xn(i/100,0,1)]})},oas(t,s,i,e,n,r){this.Ios(t),this._Lt("add-effect",{type:"distortion",tags:this.ros(t),params:[this.aos(s),this.aos(i),e,this.aos(n),fA.Xn(r/100,0,1)]})},aas(t,s,i,e,n,r){this.Ios(t),this._Lt("add-effect",{type:"compressor",tags:this.ros(t),params:[s,i,e,n/1e3,r/1e3]})},las(t,s,i){this.Ios(t),this._Lt("add-effect",{type:"analyser",tags:this.ros(t),params:[s,i]})},uas(t){const s=this.ros(t);for(const t of s)this.Whs.set(t.toLowerCase(),0);this._Lt("remove-effects",{tags:s}),this.Xhs={}},L0(t,s,i,e,n,r){this._Lt("set-effect-param",{tags:this.ros(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},cas(t){if(!t)return;const s=t.MOt();s&&s.FY()&&(this.khs=s)},fas(t){this.Nhs[2]=t},das(t,s,i,e,n,r){this.Ohs[0]=t,this.Ohs[1]=s,this.Ohs[2]=-i,this.Phs[0]=e,this.Phs[1]=n,this.Phs[2]=-r},pas(t){this.xhs=Math.max(t,0),this.bhs=Math.max(t-performance.now()/1e3,0)},mas(t){const s=t[1],i=this.jc.EV().p6(t[0]);i&&this._Lt("unload",{url:i.url,type:i.type,isMusic:s})},gas(t,s){const i=1===t,e=this.jc.EV().p6(s)||this.Hhs.get(s.toLowerCase());e&&this._Lt("unload",{url:e.url,type:e.type,isMusic:i})},yas(){this._Lt("unload-all")},was(t,s,i){this.Hhs.set(i.toLowerCase(),{url:t,type:s})}}}{const pA=self.Gs;pA.uQ.Audio.Jdt={Mas(t){const s=this.gos(t);return s?s.duration:0},Xdt(t){const s=this.gos(t);return s?s.playbackTime:0},ipt(t){const s=this.gos(t);return s?s.playbackRate:0},Zdt(t){const s=this.gos(t);return s?this.fos(s.volume):0},Sas(){return this.fos(this.Mhs())},Tas(t){return this.Whs.get(t.toLowerCase())||0},vas(t,s){const i=this.Cos(t,Math.floor(s));return i?i.binCount:0},xas(t,s,i){const e=this.Cos(t,Math.floor(s));return e?(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]:0},bas(t,s){const i=this.Cos(t,Math.floor(s));return i?i.peak:0},Cas(t,s){const i=this.Cos(t,Math.floor(s));return i?i.rms:0},Ias(){return this.Uhs},Gas:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,_as(){return this.Vhs},Eas(t,s){return 0==(t=pA.Xn(+t,0,100)/100)?-1/0:t<.1?this.fos(pA.Gt(0,this.los(s),10*t)):pA.Gt(s,0,(t-.1)/.9)}}}{const mA=self.Gs;mA.Dyt.Ayt=class extends mA.GFt{constructor(t){super(t)}Yn(){super.Yn()}}}{const gA=self.Gs;gA.Dyt.Ayt.Fjt=class extends gA.NFt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}}}{const yA=self.Gs,wA=yA.Dyt.Ayt,MA=0;wA.Instance=class extends yA.PFt{constructor(t,s){super(t),this.Aas=!1,this.du=!0,s&&(this.Aas=!1,this.du=!!s[MA]),this.Das=new Map,this.Nas=[],this.Oas=new Map,this.Pas=null,this.Ras=null,this.Las=null,this.Fas=null,this.kas="",this.jas=[],this.Int=t=>this.Gnt(),this.yQ().Mf().addEventListener("afterload",this.Int)}Yn(){this.yQ().Mf().removeEventListener("afterload",this.Int),this.Int=null,this.Pas&&(this.zas(this.Pas),this.Pas=null),this.Bas(),this.Uas=null,this.$as(),this.Nas=null,this.Vas(),this.Oas=null,this.jas=null,super.Yn()}swt(t){this.jas.push(t)}iwt(){this.jas.pop()}Was(){return this.jas[this.jas.length-1]}sRt(t){this.du=!!t,t?this.Oas&&this.Oas.size&&this.FLt():this.SLt();for(const s of this.Yas())t?this.Qas(s)&&s.v1():((s.IsPlaying()||s.Lat())&&this.Jas(s),s.T1());t&&this.$as()}Gu(){return this.du}Jas(t){this.Nas.push(t)}Qas(t){return this.Nas.includes(t)}$as(){yA.Sh(this.Nas)}Has(){return this.Pas}rut(){const t=this._0();return!!t&&!t.kY()}qas(t,s,i=!1){const e=s?this.Xas(s,i):this.Yas(i);if(e&&e.length)for(const s of e)if(s.b1(t))return s}Zas(t,s){for(const i of this.Das.values())for(const e of i)if(!e.M1()&&e.b1(t)&&s(e))return!0;for(const i of this.Oas.values())for(const e of i)if(!e.M1()&&e.b1(t)&&s(e))return!0;return!1}Kas(t){for(const s of this.Das.values())for(const i of s)if(!i.M1()&&t(i))return!0;for(const s of this.Oas.values())for(const i of s)if(!i.M1()&&t(i))return!0;return!1}tls(t,s){return this.qas(t,s,!0)}*sls(t,s,i=!1){const e=s?this.Xas(s,i):this.Yas(i);if(e&&e.length)for(const s of e)s.b1(t)&&(yield s)}*ils(t,s){yield*this.sls(t,s,!0)}Xas(t,s){if(s){let s=this.Das.get(t),i=this.Oas.get(t);return s||(s=[]),i||(i=[]),s.concat(i).filter(t=>t).filter(t=>!t.M1())}{let s=this.Das.get(t);return s||(s=[]),s.filter(t=>t).filter(t=>!t.M1())}}Yas(t){if(t){const t=[...this.Das.values()].flat(),s=[...this.Oas.values()].flat();return t.concat(s).filter(t=>t).filter(t=>!t.M1())}return[...this.Das.values()].flat().filter(t=>t).filter(t=>!t.M1())}els(){return this.Yas(!0)}Sx(t="full"){return{s:!1,e:!!this.du,at:this.nls(),dt:this.rls(),wt:this.hls(),ft:this.ols()}}Tx(t,s="full"){t&&(this.Ras=t.at,this.Las=t.dt,this.Fas=t.wt,this.kas=t.ft,this.Aas=!1,this.du=!!t.e,"state"===s&&this.Gnt())}Gnt(){const t=this.yQ().tat();if(this.als(this.Ras,this.Das,t),this.Las){yA.Sh(this.Nas);for(const s of this.Las)this.lls(this.Nas,s,t)}this.als(this.Fas,this.Oas,t),this.Pas=this.uls(this.kas,t),this.du?this.Oas&&this.Oas.size&&this.FLt():this.SLt()}als(t,s,i){if(t)for(const e in t){let n=s.get(e);n?yA.Sh(n):n=[];const r=t[e];for(const t of r)if(this.lls(n,t.name,i))this.cls(t.name,t,i);else{const s=yA.Cmt.rwt({runtime:this.yQ(),json:t});yA.Cmt.but(s,this._0().LX()),s.zyt(t=>this.fls(t)),s.kyt(this),i.ort(s),this.lls(n,s,i)}s.set(e,n)}}uls(t,s){return s.nrt(t)}lls(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.uls(s,i);if(e)return!!t.push(e)}return!1}cls(t,s,i){if("string"==typeof t){const e=this.uls(t,i);e&&(e.Sst(s),yA.Cmt.but(e,this._0().LX()),yA.Cmt.kyt(e,this))}else t.Sst(s),yA.Cmt.but(t,this._0().LX()),yA.Cmt.kyt(t,this)}nls(){const t={};for(const[s,i]of this.Das)t[s]=i.filter(t=>!t.M1()).map(t=>t.Mst());return t}rls(){return this.Nas.filter(t=>!t.M1()).map(t=>t.Ac())}hls(){const t={};for(const[s,i]of this.Oas)t[s]=i.map(t=>t.Mst());return t}ols(){return this.Pas?this.Pas.Ac():""}PLt(){this.Vas()}dls(t){const s=wA.mls.pls(t.Tut,t.pwt,t.mwt,t.dwt,t.uwt,this._0()),i=wA.yls.gls(t.Tut);wA.yls.wls(i)||this.Mls(t.Tut);const e=yA.Cmt.rwt({runtime:this.yQ(),id:i,tags:t.tags,time:t.time,G0:this._0(),awt:!!t.awt,loop:!!t.loop,lwt:!!t.lwt,B0:t.B0,owt:t.owt,hwt:s});return e.zyt(t=>this.fls(t)),e.kyt(this),this.Sls(e,t.Tut),e}Tls(t){const s=t.t2();if(this.Das.has(s)){const i=this.Das.get(s);if(i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}}W1(t,s=!1){this.Tls(t),t.M1()||this.vls(t)||(t.T1(s),this.xls(t))}Mls(t,s=!1){if(yA.te(t)){const i=wA.yls.gls(t);if(!this.Das.has(i))return;const e=this.Das.get(i),n=this.Has();for(const t of e)t!==n&&(t.M1()||this.vls(t)||(t.T1(s),t.Yn()));yA.Sh(e)}else{const t=this.Has();for(const i of this.Yas())i!==t&&(i.M1()||this.vls(i)||(i.T1(s),i.Yn()));for(const t of this.Das.keys())yA.Sh(this.Das.get(t)),this.Das.delete(t);this.Das.clear()}}zas(t){this.W1(t,!0)}Bas(){this.Mls(NaN,!0)}Apt(t){if(t===MA)return this.du}Lpt(t,s){t===MA&&(this.du=!!s)}bls(t){const s=t.J1().Zft();for(const t of s){const s=t.I0();if(s.nzt()===this.constructor)return s}}aZ(t,s,i,e){return this.jc?super.aZ(t):s.aZ(t,i,e)}fls(t){let s,i;if(this.Pas=t,wA.aQ.Cls(t),this.yQ())s=this.di,i=this.jc,this.aZ(wA.aQ.Ils),this.aZ(wA.aQ.Gls),this.W1(t);else{if(s=t.J1(),!s)return;if(s&&s.kY())return;i=s.yQ();const e=this.bls(t);this.aZ(wA.aQ.Ils,i,s,e),this.aZ(wA.aQ.Gls,i,s,e),t.T1()}this.Pas=null,wA.aQ.Cls(null),t.q1()&&i.QY(s)}Sls(t,s){const i=wA.yls.gls(s);this.Das.has(i)||this.Das.set(i,[]),this.Das.get(i).push(t)}xls(t){const s=t.t2();this.Oas.has(s)||this.Oas.set(s,[]),this.Oas.get(s).push(t),this.kLt()||this.FLt()}vls(t){const s=t.t2();return!!this.Oas.has(s)&&this.Oas.get(s).includes(t)}Vas(){if(this.Oas.size){for(const t of this.Oas.values()){for(const s of t)s.M1()||s.Yn();yA.Sh(t)}this.Oas.clear(),this.kLt()&&this.SLt()}}jLt(){return[{title:"$"+this.I0().Ac(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.Gu(),O7t:t=>this.sRt(t)}]}]}qRt(){return self._ls}}}{const SA=self.Gs;let TA=null;SA.Dyt.Ayt.aQ={Xyt:()=>!0,Zyt(t){const s=this.Was();return!!s&&s.b1(t)},Kyt(t){const s=this.Was();return!!s&&(s.mat()===t||2===t)},twt(t,s){const i=this.Was();return!!i&&(i.mat()===s||2===s)&&i.b1(t)},Eyt(t){return this.Was().b1(t)},Nyt:()=>!0,Cls(t){TA=t},Ils:t=>TA.b1(t),Gls:()=>!0,IsPlaying(t){return this.Zas(t,SA.Cmt.IsPlaying)},Dos(){return this.Kas(SA.Cmt.IsPlaying)},j1(t){return this.Zas(t,SA.Cmt.j1)},Els(){return this.Kas(SA.Cmt.j1)},Y0(t,s){return 0===s?this.Zas(t,SA.Cmt.ewt):1===s&&this.Zas(t,SA.Cmt.nwt)},Als(t){return 0===t?this.Kas(SA.Cmt.ewt):1===t&&this.Kas(SA.Cmt.nwt)}}}{const vA=self.Gs,xA=self.$u,bA=vA.Dyt.Ayt;bA.Qdt={sRt(t){this.sRt(!!t)},async Dls(...t){if(!this.Gu()||!this.rut())return;const s=this.dls(bA.Ols.Nls(this,...t));s.Play()&&await s.R1()},async Pls(...t){if(!this.Gu()||!this.rut())return;const s=this.dls(bA.Ols.Rls(this,...t));s.Play()&&await s.R1()},async Lls(...t){if(!this.Gu()||!this.rut())return;const s=this.dls(bA.Ols.Fls(this,...t));s.Play()&&await s.R1()},kls(t){if(this.Gu()&&this.rut())for(const s of this.sls(t))s.T1()},jls(){if(this.Gu()&&this.rut())for(const t of this.Yas())t.T1()},zls(t){if(this.Gu()&&this.rut())for(const s of this.sls(t))s.v1()},Bls(){if(this.Gu()&&this.rut())for(const t of this.Yas())t.v1()},Uls(t){if(this.Gu()&&this.rut())for(const s of this.sls(t))this.W1(s)},$ls(){if(this.Gu()&&this.rut())for(const t of this.Yas())this.W1(t)},Vls(t,s,i){if(!this.Gu()||!this.rut())return;const e=vA.Dyt.Ayt.yls.Wls(s);for(const s of this.sls(t))s.Wyt([e]),s.Yyt(i,e)},Yls(t,s,i,e){if(!this.Gu()||!this.rut())return;const n=vA.Dyt.Ayt.yls.Qls(s);for(const s of this.sls(t))s.Wyt(n),s.Yyt(i,n[0]),s.Yyt(e,n[1])},Jls(t,s){if(this.Gu()&&this.rut())for(const i of this.sls(t,"value"))i.$yt(s,"value")},Hls(t,s){if(this.Gu()&&this.rut())for(const i of this.sls(t,"value"))i.Wyt(["value"]),i.Yyt(s,"value")},qls(t,s){if(!this.Gu()||!this.rut())return;const i=xA.ac(s);for(const s of this.sls(t))s.Q1(i)},Xls(t){if(!this.Gu()||!this.rut())return;const s=xA.ac(t);for(const t of this.Yas())t.Q1(s)},Zls(t,s){if(this.Gu()&&this.rut())for(const i of this.sls(t))i.C1(s)},Kls(t){if(this.Gu()&&this.rut())for(const s of this.Yas())s.C1(t)},tus(t,s){if(this.Gu()&&this.rut())for(const i of this.sls(t))i.N1(s)},sus(t){if(this.Gu()&&this.rut())for(const s of this.Yas())s.N1(t)},ius(t,s){if(this.Gu()&&this.rut())for(const i of this.sls(t))i.X1(!!s)},eus(t){if(this.Gu()&&this.rut())for(const s of this.Yas())s.X1(!!t)}}}self.Gs.Dyt.Ayt.Jdt={nus(t){const s=this.tls(t);return s?s.hU():0},rus(t){const s=this.tls(t);return s?s.hU()/s.G1():0},ipt(t){const s=this.tls(t);return s?s.O1():0},hus(t){const s=this.tls(t,"value");return s?s.i2("value").s2():0},cPt(){let t=this.Has();return t?t.Sat():(t=this.Was(),t?t.Sat():"")}};{const CA=self.Gs,IA=self.$u,GA=["position","size","scale"],_A=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],EA=["value"],AA=[].concat(GA).concat(_A).concat(EA),DA={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},NA=Object.assign({},AA.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),DA);CA.Dyt.Ayt.yls=class{constructor(){}static ous(){return[...IA.Xu()]}static ac(t){return[...IA.Xu()][t]}static gls(t){return AA[t]}static aus(t){return AA.indexOf(t)}static lus(t){return GA[t]}static Wls(t){return _A[t]}static uus(t){return EA[t]}static cus(t){return DA[t]}static Qls(t){return CA.le(t)?NA[t]:NA[AA[t]]}static fus(t){return!!DA[t]}static dus(t){return"offsetColor"===t}static pus(t){return"offsetAngle"===t}static mus(t){return"offsetOpacity"===t}static wls(t){return"value"===t}}}{const OA=self.Gs,PA=OA.Dyt.Ayt,RA=new Map;PA.mls=class{constructor(){}static pls(t,s,i,e,n,r){0===RA.size&&this.gus();const h=PA.wus.yus(t);let o=RA.get(h);return OA.te(t)&&(t=PA.yls.gls(t)),this.Mus(o,t,s,i,e,n,r)}static Sus(t,s){return OA.Dyt.Ayt.pls(t).Tus(s)}static gus(){const t=PA.wus,s=PA.vus;this.xus(t.bus,this.Cus,s.Ius),this.xus(t.COLOR,this.Gus,s._us),this.xus(t.Eus,this.Aus,s.Dus),this.xus(t.Nus,this.Ous,s.Ius),this.xus(t.Pus,this.Rus,s.Ius)}static xus(t,s,i){RA.set(t,this.Lus(t,s,i))}static Lus(t,s,i){return{name:t,Fus:s,Tus:i}}static Mus(t,s,i,e,n,r,h){return t.Fus(s,t.Tus(i),t.Tus(e),n,r,h)}static Cus(t,s,i,e,n,r){return PA.yls.cus(t).map((t,r)=>({cwt:"world-instance",Tut:t,type:"float",valueType:"numeric",pwt:s[r],mwt:i[r],dwt:PA.yls.ac(e),uwt:n}))}static Gus(t,s,i,e,n,r){return OA.uQ.Text&&r.KJ()instanceof OA.uQ.Text?{cwt:"plugin",fwt:[7],Tut:"color",type:"color",valueType:"color",pwt:s,mwt:i,dwt:PA.yls.ac(e),uwt:n}:{cwt:"world-instance",Tut:t,type:"color",valueType:"color",pwt:s,mwt:i,dwt:PA.yls.ac(e),uwt:n}}static Aus(t,s,i,e,n,r){return{cwt:"world-instance",Tut:t,type:"angle",valueType:"angle",pwt:s,mwt:i,dwt:PA.yls.ac(e),uwt:n}}static Rus(t,s,i,e,n,r){return{cwt:"world-instance",Tut:t,type:"float",valueType:"numeric",pwt:s,mwt:i,dwt:PA.yls.ac(e),uwt:n}}static Ous(t,s,i,e,n,r){return{cwt:"value",Tut:t,type:"float",valueType:"numeric",pwt:s,mwt:i,dwt:PA.yls.ac(e),uwt:n}}}}{const LA=self.Gs,FA=LA.Dyt.Ayt,kA={uwt:"absolute"},jA=Object.assign({},kA,{tags:"",Tut:"",time:0,dwt:0,awt:0,loop:!1,lwt:!1,B0:1}),zA=Object.assign({},jA,{owt:"current-state",pwt:0,mwt:0}),BA=Object.assign({},jA,{owt:"current-state",pwt:[0,0],mwt:[0,0]}),UA=Object.assign({},jA,{owt:"current-state",pwt:[0,0,0],mwt:[0,0,0]}),$A=Object.assign({},zA,{owt:"start-value"}),VA=0,WA=1,YA=0,QA=1,JA=2;FA.Ols=class{constructor(){}static kus(t,s,i,e,n,r,h,o){t.tags=s,t.time=i,t.dwt=e,t.awt=n,t.loop=r,t.lwt=h,t.B0=o}static Nls(t,s,i,e,n,r,h,o,a,l){const u="string"==typeof i?i:FA.yls.Wls(i),c=FA.yls.dus(u)?UA:zA;return this.kus(c,s,n,r,h,o,a,l),FA.yls.dus(u)?(UA.mwt[0]=LA.Ar(e),UA.mwt[1]=LA.Dr(e),UA.mwt[2]=LA.Nr(e),UA.Tut=FA.yls.aus(u)):FA.yls.mus(u)?zA.mwt=e/100:zA.mwt=e,c.Tut=FA.yls.aus(u),c}static Rls(t,s,i,e,n,r,h,o,a,l,u){this.kus(BA,s,r,h,o,a,l,u);const c="string"==typeof i?i:FA.yls.lus(i);return BA.mwt[0]=e,BA.mwt[1]=n,BA.Tut=FA.yls.aus(c),BA}static Fls(t,s,i,e,n,r,h,o,a,l){return this.kus($A,s,n,r,h,o,a,l),$A.pwt=i,$A.mwt=e,$A.Tut=FA.yls.aus("value"),$A}}}{const HA=self.Gs,qA=HA.Dyt.Ayt,XA=[];qA.wus=class{constructor(){}static yus(t){if(0===XA.length){const t=XA;t.push({aN:qA.yls.fus,result:this.bus}),t.push({aN:qA.yls.dus,result:this.COLOR}),t.push({aN:qA.yls.pus,result:this.Eus}),t.push({aN:qA.yls.wls,result:this.Nus}),t.push({aN:()=>!0,result:this.Pus})}HA.te(t)&&(t=HA.Dyt.Ayt.yls.gls(t));for(const s of XA)if(s.aN(t))return s.result}static get bus(){return"pair"}static get COLOR(){return"color"}static get Eus(){return"angle"}static get Nus(){return"value"}static get Pus(){return"other"}}}{const ZA=self.Gs,KA=ZA.Dyt.Ayt;KA.vus=class{constructor(){}static Dus(t){const s=ZA.Kn(parseFloat(t));return ZA.Zn(s)}static _us(t){return t.slice(0)}static Ius(t){return t}}}{let tD=function(t){eD.ue(t);const s=rD.Yu(t);let i;if(i=s?rD.lc(s,null):rD.lc(t,null),-1===i)throw new Error(`invalid ease name '${t}'`);return i},sD=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};getIndexForEase=tD,ValidateTags=sD;const iD=self.Gs,eD=self.ks,nD=self.T0,rD=self.$u,hD=iD.Dyt.Ayt,oD=new WeakMap,aD=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),lD={tags:"",jus:!1,loop:!1,lwt:!1,B0:1,pwt:0},uD={V1:tD};self._ls=class extends nD{constructor(){super(),oD.set(this,nD._X().g0())}zus(t,s,i,e,n){const r=oD.get(this);if(!r.Gu()||!r.rut())return null;const h=aD.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?eD.se(s):(eD.Ce(s),"two"===h.type?(eD.se(s[0]),eD.se(s[1])):"color"===h.type&&(eD.se(s[0]),eD.se(s[1]),eD.se(s[2]))),"angle"===t?s=iD.tr(s):"opacity"===t?s*=100:"color"===t&&(s=iD.Er(s[0],s[1],s[2]));const o=tD(e);let a;if(eD.he(i),n=Object.assign({},lD,n),"value"===h.type&&eD.se(n.pwt),sD(n.tags,!0),"one"===h.type||"color"===h.type?a=r.dls(hD.Ols.Nls(r,n.tags,h.name,s,i,o,!!n.jus,!!n.loop,!!n.lwt,n.B0)):"two"===h.type?a=r.dls(hD.Ols.Rls(r,n.tags,h.name,s[0],s[1],i,o,!!n.jus,!!n.loop,!!n.lwt,n.B0)):"value"===h.type&&(a=r.dls(hD.Ols.Fls(r,n.tags,n.pwt,s,i,o,!!n.jus,!!n.loop,!!n.lwt,n.B0))),a.kyt(r.LFt().g0()),!a.Play())throw new Error("failed to start tween");return a.gwt(r,uD)}*Bus(){const t=oD.get(this);for(const s of t.Yas())yield s.gwt(t,uD)}*Uus(t){sD(t);const s=oD.get(this);for(const i of s.sls(t))yield i.gwt(s,uD)}get isEnabled(){return oD.get(this).Gu()}set isEnabled(t){oD.get(this).sRt(t)}}}{const cD=self.Gs;cD.Dyt.$us=class extends cD.GFt{constructor(t){super(t)}Yn(){super.Yn()}}}{const fD=self.Gs;fD.Dyt.$us.Fjt=class extends fD.NFt{constructor(t){super(t)}Yn(){super.Yn()}HRt(){}}}{const dD=self.Gs,pD=self.ks,mD=self.T0;dD.Dyt.$us.Vus=class{constructor(t,s,i,e){this.ZTt=dD.Wn(dD.td),this.ZTt.Set(t||0),this.Wus=dD.Wn(dD.td),this.Wus.Set(s||0),this.Bkt=i||0,this.Yus=!!e,this.Qus=!1}Jus(){return this.ZTt.Ys()}G1(){return this.Wus.Ys()}i1(){return this.Bkt}Yos(t){this.Qus=!!t}j1(){return this.Qus}zu(t){this.ZTt.zu(t),this.Wus.zu(t)}Hus(){return this.ZTt.Ys()>=this.Bkt}n8(){if(this.Hus()){if(!this.Yus)return!0;this.ZTt.rd(this.Bkt)}return!1}Sx(){return{c:this.ZTt.Ys(),t:this.Wus.Ys(),d:this.Bkt,r:this.Yus,p:this.Qus}}Tx(t){this.ZTt.Set(t.c),this.Wus.Set(t.t),this.Bkt=t.d,this.Yus=!!t.r,this.Qus=!!t.p}},dD.Dyt.$us.Instance=class extends dD.PFt{constructor(t,s){super(t),this.qus=new Map}Yn(){this.qus.clear(),super.Yn()}Xus(t,s,i){const e=new dD.Dyt.$us.Vus(0,0,t,i);this.qus.set(s.toLowerCase(),e),this.Zus()}Kus(t){this.qus.delete(t.toLowerCase()),this.Zus()}tcs(){this.qus.clear(),this.Zus()}scs(t){return this.qus.has(t.toLowerCase())}ics(t){const s=this.qus.get(t.toLowerCase());return s?s.Jus():0}ecs(t){const s=this.qus.get(t.toLowerCase());return s?s.Jus()/s.i1():0}ncs(t){const s=this.qus.get(t.toLowerCase());return s?s.G1():0}rcs(t){const s=this.qus.get(t.toLowerCase());return s?s.i1():0}hcs(t){const s=this.qus.get(t.toLowerCase());return!!s&&s.Hus()}ocs(t,s){const i=this.qus.get(t.toLowerCase());i&&i.Yos(s)}acs(t){const s=this.qus.get(t.toLowerCase());return!!s&&s.j1()}lcs(t){for(const s of this.qus.values())s.Yos(t)}Zus(){this.qus.size>0?(this.RLt(),this.FLt()):(this.MLt(),this.SLt())}Sx(){const t={};for(const[s,i]of this.qus.entries())t[s]=i.Sx();return t}Tx(t){this.qus.clear();for(const[s,i]of Object.entries(t)){const t=new dD.Dyt.$us.Vus;t.Tx(i),this.qus.set(s,t)}this.Zus()}Irt(){const t=this.jc.AW(this.di);for(const[s,i]of this.qus)i.j1()||(i.zu(t),i.Hus()&&this.pLt("timer",!1,{tag:s}))}PLt(){for(const[t,s]of this.qus.entries())s.n8()&&this.qus.delete(t)}jLt(){return[{title:"behaviors.timer.debugger.timers",properties:[...this.qus.entries()].map(t=>({name:"$"+t[0],value:`${Math.round(10*t[1].Jus())/10} / ${Math.round(10*t[1].i1())/10}`}))}]}qRt(){return self.ucs}};const gD=["once","regular"];self.ucs=class extends mD{#t;constructor(){super(),this.#t=mD._X().g0()}ccs(t,s,i="once"){pD.he(t),pD.ue(s);const e=gD.indexOf(i);if(-1===e)throw new Error("invalid type");this.#t.Xus(t,s,1===e)}fcs(t,s){pD.ue(t),this.#t.ocs(t,!!s)}dcs(t){this.#t.lcs(!!t)}pcs(t){pD.ue(t),this.#t.Kus(t)}mcs(){this.#t.tcs()}gcs(t){return pD.ue(t),this.#t.scs(t)}ycs(t){return pD.ue(t),this.#t.acs(t)}getCurrentTime(t){return pD.ue(t),this.#t.ics(t)}wcs(t){return pD.ue(t),this.#t.ecs(t)}Mcs(t){return pD.ue(t),this.#t.ncs(t)}Scs(t){return pD.ue(t),this.#t.rcs(t)}Tcs(t){return pD.ue(t),this.#t.hcs(t)}}}self.Gs.Dyt.$us.aQ={vcs(t){return this.hcs(t)},xcs(t){return this.scs(t)},bcs(t){return this.acs(t)}},self.Gs.Dyt.$us.Qdt={Ccs(t,s,i){this.Xus(t,i,1===s)},Ics(t){this.Kus(t)},Gcs(){this.tcs()},_cs(t,s){this.ocs(t,0===s)},Ecs(t){this.lcs(0===t)}},self.Gs.Dyt.$us.Jdt={Gas(t){return this.ics(t)},Acs(t){return this.ecs(t)},Dcs(t){return this.ncs(t)},Mas(t){return this.rcs(t)}};{let yD=function(t){return"number"==typeof t?-t:t},wD=function(t,s){return"number"==typeof t&&"number"==typeof s},MD=function(t,s){return wD(t,s)?t+s:t},SD=function(t,s){return wD(t,s)?t-s:t},TD=function(t,s){return wD(t,s)?t*s:t},vD=function(t,s){return wD(t,s)?t/s:t},xD=function(t,s){return wD(t,s)?t%s:t},bD=function(t,s){return wD(t,s)?Math.pow(t,s):t},CD=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},ID=function(t,s){return wD(t,s)?t||s?1:0:t};unaryminus=yD,bothNumbers=wD,add=MD,subtract=SD,multiply=TD,divide=vD,mod=xD,pow=bD,and=CD,or=ID;const GD=self.Gs;self.xAt=[t=>{const s=t.OAt(0).KEt();return()=>3*s("Overlay")},()=>1e3,()=>"",t=>{const s=t.OAt(0);return()=>s.rAt()},t=>{const s=t.OAt(0);return()=>s.rAt()-12},t=>{const s=t.OAt(0).vAt();return()=>s.Yct()},()=>"Brightness",()=>0,t=>{const s=t.OAt(0);return()=>s.yAt("Brightness")},()=>"Pressing state",()=>-8,()=>"click",()=>850,()=>"InTouch",()=>900,()=>.5,()=>100,()=>110,()=>"OutSize",()=>"ding",()=>"Pressing",()=>"OutTouch",()=>120,()=>1,()=>"InSize",()=>.2,()=>.25,()=>"InOpacity",()=>-45,()=>"InAngle",()=>"Reloading state",()=>.4,()=>"Unlocking",()=>"OutHeight",t=>{const s=t.OAt(0);return()=>s.rAt()/3},()=>-16,()=>"Pressed",()=>"OutOpacity",t=>{const s=t.OAt(0),i=t.OAt(1);return()=>GD.Gt(s.rAt(),50*i.yAt("Unlocking"),.25)},()=>"Time",t=>{const s=t.OAt(0).KEt(),i=t.OAt(1).KEt(),e=t.OAt(2).vAt();return()=>s((i()-e.Yct()).toString(),3)},t=>{const s=t.OAt(0).KEt(),i=t.OAt(1).vAt(),e=t.OAt(2).vAt();return()=>"[size=50][color=#ff9f9f]"+s(i.Yct(),3)+"[/size][/color]\n"+e.Yct()},()=>"Offset panel",()=>"opacity",()=>"0.25",()=>"background-color",()=>"rgba(100, 100, 100, 0.75)",()=>"color",()=>"white",()=>"border-radius",()=>"16px",()=>"border",()=>"none",()=>"padding",()=>"text-align",()=>"center",()=>"font-size",()=>"clamp(1rem, 3.5vw, 2rem)",()=>"font-family",()=>"OverpassMono",()=>3,()=>"sync",()=>"offset",t=>{const s=t.OAt(0).KEt();return()=>s()},t=>{const s=t.OAt(0).KEt(),i=t.OAt(1);return()=>s("UI")-i.rAt()/2},t=>{const s=t.OAt(0).KEt(),i=t.OAt(1).vAt();return()=>s("UI")-i.Yct()},t=>{const s=t.OAt(0).KEt(),i=t.OAt(1).KEt(),e=t.OAt(2);return()=>s(i(e.rAt()),3)},t=>{const s=t.OAt(0).vAt(),i=t.OAt(1).KEt(),e=t.OAt(2).vAt(),n=t.OAt(3).vAt();return()=>0===s.Yct()?0:i(e.Yct())-n.Yct()},()=>"type",()=>2,t=>{const s=t.OAt(0);return()=>s.lAt()+256},()=>"Move",t=>{const s=t.OAt(0);return()=>s.lAt()}]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.Gs;self.vZt=function(){return[C32.uQ.e5t,C32.Dyt.Ayt,C32.Dyt.$us,C32.uQ.Touch,C32.uQ.Text,C32.uQ.Date,C32.uQ.si,C32.uQ.adt,C32.uQ.Fns,C32.uQ.grs,C32.uQ.Audio,C32.uQ.lQ.aQ.het,C32.uQ.lQ.Qdt.i2t,C32.uQ.lQ.Jdt.m4t,C32.uQ.Audio.Qdt.$os,C32.uQ.e5t.Qdt.tD,C32.uQ.e5t.Qdt.EK,C32.uQ.Text.Qdt.$c,C32.uQ.adt.Qdt.jNt,C32.uQ.e5t.Jdt.LPt,C32.uQ.e5t.Jdt.$Pt,C32.uQ.lQ.Qdt.m2t,C32.uQ.e5t.Qdt.jNt,C32.uQ.e5t.Jdt.FPt,C32.uQ.Touch.aQ.n6t,C32.uQ.si.aQ.Sss,C32.uQ.si.Qdt.Wss,C32.Dyt.Ayt.aQ.IsPlaying,C32.uQ.e5t.Qdt.GOt,C32.Dyt.Ayt.Jdt.hus,C32.uQ.lQ.aQ.KCt,C32.uQ.Audio.Qdt.Play,C32.uQ.lQ.Qdt.r2t,C32.Dyt.Ayt.Qdt.$ls,C32.Dyt.Ayt.Qdt.Pls,C32.Dyt.Ayt.Qdt.Lls,C32.uQ.Text.Qdt.LO,C32.uQ.Touch.aQ.a6t,C32.uQ.lQ.aQ.D1t,C32.uQ.lQ.Qdt.tIt,C32.uQ.lQ.Qdt.vW,C32.uQ.lQ.Qdt.ph,C32.Dyt.Ayt.Qdt.Dls,C32.uQ.e5t.Qdt.QH,C32.uQ.Touch.aQ.e6t,C32.Dyt.$us.Qdt.Ccs,C32.Dyt.$us.aQ.vcs,C32.uQ.Touch.aQ.o6t,C32.Dyt.$us.Qdt.Gcs,C32.uQ.adt.aQ.JNt,C32.uQ.e5t.Jdt.jPt,C32.Dyt.$us.aQ.xcs,C32.uQ.adt.Qdt.oy,C32.uQ.adt.Jdt.jPt,C32.Dyt.$us.Jdt.Acs,C32.uQ.lQ.Jdt.right,C32.uQ.Date.Jdt.X9t,C32.uQ.lQ.Jdt.k3t,C32.uQ.Fns.Qdt.HPt,C32.uQ.Fns.Qdt.prs,C32.uQ.grs.Qdt.qrs,C32.uQ.grs.aQ.Nrs,C32.uQ.grs.Jdt.nhs,C32.uQ.Fns.Qdt.$c,C32.uQ.si.aQ.tss,C32.uQ.Fns.Qdt.sx,C32.uQ.lQ.Jdt.g4t,C32.uQ.Fns.Jdt.kPt,C32.uQ.Fns.Qdt.MPt,C32.uQ.lQ.Jdt.d4t,C32.uQ.Fns.aQ.Hns,C32.uQ.lQ.Jdt.g3t,C32.uQ.Fns.Jdt.Text,C32.uQ.grs.Qdt.Qrs,C32.uQ.Audio.Qdt.N1,C32.uQ.lQ.aQ.DCt,C32.uQ.Fns.Qdt.hx]},self.VZt=[{Ayt:0},{$us:0},{Ncs:0},{Touch:0},{Text:0},{Date:0},{si:0},{Ocs:0},{Lock:0},{Pcs:0},{Rcs:0},{Lcs:0},{grs:0},{Audio:0},{Fcs:0},{kcs:0},{jcs:0},{zcs:0},{Bcs:0},{Ucs:0},{Gas:0},{$cs:0},{Vcs:0},{Wcs:0},{Ycs:0},{Qcs:0}],self.Jcs={Ncs:class extends self.S5t{},Touch:class extends self.CX{},Text:class extends self.P7t{},Date:class extends self.CX{},si:class extends self.CX{},Ocs:class extends self.S5t{},Lock:class extends self.S5t{},Pcs:class extends self.Jes{},Lcs:class extends self.ors{},grs:class extends self.CX{},Audio:class extends self.CX{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/